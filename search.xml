<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Laravel-æ¨¡å‹è¿‡æ»¤</title>
      <link href="/2020/08/01/Laravel-%E6%A8%A1%E5%9E%8B%E8%BF%87%E6%BB%A4/"/>
      <url>/2020/08/01/Laravel-%E6%A8%A1%E5%9E%8B%E8%BF%87%E6%BB%A4/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>åœ¨ä¸€ä¸ªé¡¹ç›®å½“ä¸­ï¼Œåˆ—è¡¨æ•°æ®çš„æœç´¢å¾€å¾€æ˜¯æ¯”è¾ƒå¸¸è§çš„ä¸€ç§åŠŸèƒ½ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéš¾å¤„ç†çš„åŠŸèƒ½ï¼Œåæ­£æˆ‘è§‰å¾—ç‰¹åˆ«éš¾å¤„ç†ã€‚ä¸€ä¸ªåˆ—è¡¨æœç´¢å¯èƒ½å°±ä¼šå†™å¾ˆå¤šï¼Œä¹Ÿå¯ä»¥è¶ŠåŠ è¶Šå¤šï¼Œç‰¹åˆ«éš¾å¤ç”¨ä¹‹åä»£ç è¶Šæ¥è¶Šå¤šçš„å†—ä½™ã€‚æˆ‘åœ¨çš„å¤„ç†æ¯”è¾ƒç¬¨ï¼Œé‚£å°±åœ¨ä¸€ä¸ªæœåŠ¡å±‚é‡Œé¢å†™ä¸Šæ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„æœç´¢æ¡ä»¶ï¼Œä»¥ä¸‹æ˜¯ä»£ç çš„å±•ç¤ºï¼ˆè¯·å‹¿å˜²ç¬‘ï¼‰ï¼š</p><pre class="line-numbers language-PHP"><code class="language-PHP"><?php          public function searchService(object $query)    {        $page  = request('page', 1);        $limit = request('limit', 20);        $query = $query::query();        if ($mobile = request('mobile'))        {            $query->where([                'mobile' => $mobile            ]);        }        if ($inviteMobile = request('invite_mobile'))        {            $query->where([                'id' => User::where([                    'mobile' => $inviteMobile                ])->select('id')->first()->id            ]);        }        if ($address = request('address'))        {            $query->where([                'address' => $address            ]);        }        if ($erhAddress = request('eth_address'))        {            $query->where([                'eth_address' => $erhAddress            ]);        }        if ($googleKey = request('google_key'))        {            $query->where([                'google_key' => $googleKey            ]);        }        if (in_array($googleStatus = request('google_status',3),[0,1]))        {            $query->where([                'google_status' => $googleStatus            ]);        }        if ($nickname = request('nickname'))        {            $query->where([                'nickname' => $nickname            ]);        }        if ($identity = request('user_identity'))        {            $query->where([                'user_identity' => $identity            ]);        }        if ($inviteCode = request('invite_code'))        {            $query->where([                'invite_code' => $inviteCode            ]);        }        if (in_array($status = request('status',3),[0,1]))        {            $query->where([                'status' => $status            ]);        }        if($time = request('created_at'))        {            $time = explode(' ',$time);            if (count($time) != 4) ApiExceptionError('æ—¥æœŸé”™è¯¯');            $endTime = $time[3] == '00:00:00' ? '23:59:59' : $time[3];            $query->whereDate('created_at','>=',$time[0])                ->whereDate('created_at','<=',$time[2])                ->whereTime('created_at','>=',$time[1])                ->whereTime('created_at','<=',$endTime);        }        ... æ­¤æ¬¡çœç•¥ N ä¸ª        return $query->paginate($limit, ['*'], 'page', $page)            ->toArray();    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Eloquentfilter"><a href="#Eloquentfilter" class="headerlink" title="Eloquentfilter"></a>Eloquentfilter</h3><p><a href="https://packagist.org/packages/tucker-eric/eloquentfilter" target="_blank" rel="noopener">Eloquentfilter</a> ä¸€ç§æœ‰è¯´æœåŠ›çš„è¿‡æ»¤ Laravel æ¨¡å‹åŠå…¶å…³ç³»çš„æ–¹æ³•çš„æ‰©å±•åŒ…ï¼Œèƒ½å¾ˆå¥½çš„å¸®åŠ©æˆ‘ä»¬å¤„ç†å¥½æ¡ä»¶æœç´¢çš„å„ç§é—®é¢˜ï¼Œè€Œä¸”ä¹Ÿå¯èƒ½å¾ˆå¥½åšåˆ°çš„å¤ç”¨ã€‚</p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><pre class="line-numbers language-bash"><code class="language-bash">composer require tucker-eric/eloquentfilter<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ <code>config/app.php</code> é…ç½®æ–‡ä»¶ä¸­æ³¨å†ŒæœåŠ¡æä¾›è€…:</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token string">'providers'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>    EloquentFilter\ServiceProvider::class,<span class="token punctuation">]</span>,<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨ publish å‘½ä»¤å°†åŒ…é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°é…ç½®æ–‡ä»¶:</p><pre class="line-numbers language-bash"><code class="language-bash">php artisan vendor:publish --provider<span class="token operator">=</span><span class="token string">"EloquentFilter\ServiceProvider"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å‘å¸ƒé…ç½®æ–‡ä»¶åï¼Œä¼šåœ¨ config ç›®å½•å½“ä¸­çœ‹è§ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ <code>config/eloquentfilter.php</code></p><pre class="line-numbers language-PHP"><code class="language-PHP"># è®¾ç½®æ¨¡å‹çš„å‘½ä»¤ç©ºé—´ï¼Œå¦‚æœè¦æ”¹åˆ°è‡ªå·±æ¨¡å‹ç›®å½•å½“ä¸­å¯ä»¥è¿™æ ·'namespace' => "App\\ModelFilters\\",# ä¿®æ”¹åˆ° Models ç›®å½•ä¸‹'namespace' => "App\\Models\Filters\\",<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ç”Ÿæˆ"><a href="#ç”Ÿæˆ" class="headerlink" title="ç”Ÿæˆ"></a>ç”Ÿæˆ</h4><p>æ‰©å±•å·²ç»æä¾›äº†ç”Ÿæˆæ¨¡æ¿çš„å‘½ä»¤ï¼Œæ‰§è¡Œå‘½ä»¤åä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ Filterã€‚</p><pre class="line-numbers language-bash"><code class="language-bash">php artisan model:filter UserFilter<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰€æœ‰è¿‡æ»¤å™¨çš„é»˜è®¤åç§°ç©ºé—´æ˜¯ <code>App ModelFilters</code>ï¼Œæ¯ä¸ª Model éƒ½å¸Œæœ›è¿‡æ»¤å™¨ç±»åéµå¾ª { $ModelName } è¿‡æ»¤å™¨å˜æ•°å‘½ååŸåˆ™ï¼Œè€Œä¸ç®¡æ¨¡å‹åœ¨å“ªä¸ªåç§°ç©ºé—´ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºäºé»˜è®¤å˜æ•°å‘½ååŸåˆ™çš„æ¨¡å‹å’Œå®ƒä»¬å„è‡ªçš„è¿‡æ»¤å™¨çš„ä¾‹å­ã€‚</p><table><thead><tr><th>Model</th><th>ModelFilter</th></tr></thead><tbody><tr><td><code>App\User</code></td><td><code>App\ModelFilters\UserFilter</code></td></tr><tr><td><code>App\FrontEnd\PrivatePost</code></td><td><code>App\ModelFilters\PrivatePostFilter</code></td></tr><tr><td><code>App\FrontEnd\Public\GuestPost</code></td><td><code>App\ModelFilters\GuestPostFilter</code></td></tr></tbody></table><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>å·²ç»ç”Ÿæˆå¥½äº† Filter ä¹‹åæ”¹å¦‚ä½•å»ä½¿ç”¨å‘¢ï¼Ÿ</p><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">EloquentFilter<span class="token punctuation">\</span>Filterable</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Eloquent<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">UserRole</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span><span class="token punctuation">{</span>    <span class="token keyword">use</span> <span class="token package">Filterable</span><span class="token punctuation">;</span> <span class="token shell-comment comment"># use æ‰©å±•æä¾›çš„ trait</span>    <span class="token keyword">protected</span> <span class="token variable">$guarded</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token shell-comment comment"># åˆ›å»ºä¸€ä¸ªå…¬å…±çš„æ–¹æ³•å¹¶å¼•å…¥åˆ›å»ºçš„ Filter</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">modelFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">provideFilter</span><span class="token punctuation">(</span>\<span class="token package">App<span class="token punctuation">\</span>Model<span class="token punctuation">\</span>Filters<span class="token punctuation">\</span>UserFilter</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸‹æ˜¯å®šä¹‰æ¨¡å‹ä½¿ç”¨ Filter ï¼Œåˆ›å»º Filter è‚¯å®šæ˜¯è¦æ‹¿æ¥è¿‡æ»¤æœç´¢ã€‚</p><pre class="line-numbers language-PHP"><code class="language-PHP"><?phpnamespace App\Model\Filters;use EloquentFilter\ModelFilter;class UserFilter extends ModelFilter{    use CommonFilter; # ä½¿ç”¨ä¸€ä¸ª trait å®šä¹‰ä¸€äº›å…¬å…±çš„æ¡ä»¶    /**    * Related Models that have ModelFilters as well as the method on the ModelFilter    * As [relationMethod => [input_key1, input_key2]].    *    * @var array    */    public $relations = [''];        protected $blacklist = ['name']; # é»‘åå•ï¼Œç¦æ­¢ä½¿ç”¨çš„æ–¹æ³• $this->blacklistMethod() æ‰©å±•åŒ…æä¾›çš„æ·»åŠ é»‘åå•ï¼Œ$this->whitelistMethod() æ‰©å±•åŒ…æä¾›çš„åˆ é™¤é»‘åå•ã€‚å˜¿å˜¿ï¼Œç™½è‰²ï¼Œé»‘è‰² æ”¿æ²»ä¸æ­£ç¡®å“¦ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆï¼        # çœ‹ç€è¿™é‡Œæ³¨æ„ï¼šï¼ï¼æ–¹æ³•å ï¼ï¼å°±æ˜¯å‰æ®µä¼ é€’çš„æœç´¢çš„å­—æ®µ    public function name($name)    {        return $this->whereLike('role_name',$name);     }      # çœ‹ç€è¿™é‡Œæ³¨æ„ï¼šï¼ï¼æ–¹æ³•å ï¼ï¼å°±æ˜¯å‰æ®µä¼ é€’çš„æœç´¢çš„å­—æ®µ    public function introduction($introduction)    {        return $this->whereLike('introduction',$introduction);    }    # çœ‹ç€è¿™é‡Œæ³¨æ„ï¼šï¼ï¼æ–¹æ³•å ï¼ï¼å°±æ˜¯å‰æ®µä¼ é€’çš„æœç´¢çš„å­—æ®µ    public function role($role)    {        # å¦‚æœå­—æ®µçš„ä»¥ _id ç»“å°¾å¯ä»¥çœç•¥ _id ,å¦‚æœä½ ä¸æƒ³è¿™æ ·å¯ä»¥ protected $drop_id = false;        return $this->whereLike('role_id',$role);    }    # çœ‹ç€è¿™é‡Œæ³¨æ„ï¼šsetup å¾ˆç‰¹æ®Šï¼Œåªè¦å®šä¹‰äº† setup é‚£ä¹ˆä»–éƒ½ä¼šæ¯æ¬¡ä½¿ç”¨è¿™ä¸ª filter çš„æ—¶å€™éƒ½ä¼šå»æ‰§è¡Œä¸€æ¬¡    public function setup()    {        return $this->with('roles')    }    # $this->input('x') # è·å–å‰ç«¯ä¼ é€’çš„æŸä¸ªå­—æ®µ    # $this->push('x','xx') # å¦‚æœåœ¨ setup æ–¹æ³•ä¸­è°ƒç”¨ï¼Œåˆ™æ·»åŠ è¦è¿‡æ»¤çš„å€¼ã€‚å¦‚æœè°ƒç”¨å…¶ä»–æ–¹æ³•ï¼Œåˆ™åªä¼šè¿‡æ»¤å…³ç³»}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Requests</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>ModelFilters<span class="token punctuation">\</span>Admin<span class="token punctuation">\</span>UserFilter</span> <span class="token keyword">as</span> AdminFilter<span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>ModelFilters<span class="token punctuation">\</span>User<span class="token punctuation">\</span>UserFilter</span> <span class="token keyword">as</span> BasicUserFilter<span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Auth</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span><span class="token punctuation">{</span>            <span class="token shell-comment comment"># ä½¿ç”¨æ–¹æ³•1</span>      <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">test1</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>                User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>      <span class="token shell-comment comment"># ä½¿ç”¨æ–¹æ³•2ï¼Œå¯ä»¥é€šè¿‡ä¼ é€’è¦ç”¨ä½œ filter() æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°çš„ç­›é€‰å™¨æ¥åŠ¨æ€å®šä¹‰ç­›é€‰å™¨ã€‚åŠ¨æ€å®šä¹‰è¿‡æ»¤å™¨å°†æ¯”ä¸ºæ¨¡å‹å®šä¹‰çš„ä»»ä½•å…¶ä»–è¿‡æ»¤å™¨é‡‡ç”¨å…ˆä¾‹ã€‚  </span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">test2</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$userFilter</span> <span class="token operator">=</span> Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">isAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> AdminFilter<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span> <span class="token punctuation">:</span> BasicUserFilter<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$userFilter</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="é€šè¿‡å…³ç³»è¿‡æ»¤"><a href="#é€šè¿‡å…³ç³»è¿‡æ»¤" class="headerlink" title="é€šè¿‡å…³ç³»è¿‡æ»¤"></a>é€šè¿‡å…³ç³»è¿‡æ»¤</h4><p>å…¶å®å°±æ˜¯æ¨¡å‹å…³è”ï¼Œä¸¾ä¸ªç®€å•çš„ğŸŒ°ï¼šå‡å¦‚ç”¨æˆ·å’Œè§’è‰²æ˜¯ä¸€å¯¹ä¸€ï¼Œè§’è‰²æœ‰è§’è‰²çš„åç§°</p><p>ç°åœ¨æœ‰ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯é€šè¿‡æœç´¢è§’è‰²åç§°æŸ¥è¯¢å‡ºç”¨æˆ·ï¼Œç°åœ¨çš„æ•°æ®ç»“æ„è¿™ï¼š</p><pre><code>{    &quot;code&quot;: 0,    &quot;msg&quot;: &quot;success&quot;,    &quot;data&quot;: {        &quot;data&quot;: [            {                &quot;id&quot;: 1,                &quot;uid&quot;: &quot;2af04c60-d78c-11ea-ada2-3b19d33d4b22&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;boyi6868@163.com&quot;,                &quot;username&quot;: &quot;boyi6868&quot;,                &quot;google_status&quot;: 1,                &quot;google_key&quot;: &quot;X55ERBFUJRMZAP6PWQMY5A3PUMLYQ4CLRQ3CLEL3K72LAKLYSISCAGZWC5DL3QCA&quot;,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:26:00&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 08:15:21&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 2,                &quot;uid&quot;: &quot;dc643e80-d78d-11ea-b343-d17dbdf776b7&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;abdul.becker@krajcik.net&quot;,                &quot;username&quot;: &quot;Dr. Alexandro Moen&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 3,                &quot;uid&quot;: &quot;dc9406b0-d78d-11ea-bc67-ff4416fdb6a7&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;buckridge.raina@hotmail.com&quot;,                &quot;username&quot;: &quot;Agustin Bogan&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 4,                &quot;uid&quot;: &quot;dca3fee0-d78d-11ea-959c-29ea7bbc8023&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;umayer@yahoo.com&quot;,                &quot;username&quot;: &quot;Mr. Rico Walsh&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 5,                &quot;uid&quot;: &quot;dcb3ba10-d78d-11ea-9699-2d7b3d45b6b9&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;juanita34@cole.net&quot;,                &quot;username&quot;: &quot;Dr. Tyree Bednar&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 6,                &quot;uid&quot;: &quot;dcc3b140-d78d-11ea-bce0-a56cef20050c&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;kara.dach@swift.com&quot;,                &quot;username&quot;: &quot;Erin Abshire&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 7,                &quot;uid&quot;: &quot;dcd2df80-d78d-11ea-ae70-c1b527fa12fc&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;devan.grady@yahoo.com&quot;,                &quot;username&quot;: &quot;Abbie Crona&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 8,                &quot;uid&quot;: &quot;dce248c0-d78d-11ea-be1c-4f69f3e57beb&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;tmoen@schroeder.com&quot;,                &quot;username&quot;: &quot;Marielle Ernser&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 9,                &quot;uid&quot;: &quot;dcf29ca0-d78d-11ea-8191-170a814a5d37&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;kromaguera@schimmel.com&quot;,                &quot;username&quot;: &quot;Jaydon Mertz&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 10,                &quot;uid&quot;: &quot;dd029040-d78d-11ea-baf2-e3152a4f7558&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;kamren.cormier@hotmail.com&quot;,                &quot;username&quot;: &quot;Myrl Koepp&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 11,                &quot;uid&quot;: &quot;dd125db0-d78d-11ea-b7af-316788adee55&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;reichel.lela@yahoo.com&quot;,                &quot;username&quot;: &quot;Dr. Anastacio Abernathy Jr.&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 12,                &quot;uid&quot;: &quot;dd221620-d78d-11ea-aec7-b3c06b5e1d30&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;bkonopelski@luettgen.info&quot;,                &quot;username&quot;: &quot;Miss Mattie Baumbach DDS&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 13,                &quot;uid&quot;: &quot;dd317060-d78d-11ea-9bfa-b1aace9a9939&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;hoeger.keyshawn@yahoo.com&quot;,                &quot;username&quot;: &quot;Mrs. Keara Shields Sr.&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 1,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 1,                    &quot;role_name&quot;: &quot;ä¸ªäºº&quot;                }            },            {                &quot;id&quot;: 14,                &quot;uid&quot;: &quot;dd415c30-d78d-11ea-9524-ad8181d0f16d&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;hoeger.gustave@damore.com&quot;,                &quot;username&quot;: &quot;Dr. Kaleigh Kuhlman V&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 2,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 2,                    &quot;role_name&quot;: &quot;åº—å®¶&quot;                }            },            {                &quot;id&quot;: 15,                &quot;uid&quot;: &quot;dd58ce50-d78d-11ea-973f-9f9ae3a97408&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;malika00@yahoo.com&quot;,                &quot;username&quot;: &quot;Janie Reilly&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 2,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 2,                    &quot;role_name&quot;: &quot;åº—å®¶&quot;                }            }        ],        &quot;total&quot;: 101    }}</code></pre><p>è¿™æ—¶å€™ filter æä¾›çš„æ¨¡å‹å…³è”è¿‡æ»¤å°±å¾ˆå¥½ç”¨äº†ï¼Œè¯·çœ‹ä»¥ä¸‹æ“ä½œï¼š</p><pre class="line-numbers language-php"><code class="language-php"><span class="token shell-comment comment"># ç”¨æˆ·æ¨¡å‹ï¼Œæˆ‘ä»¬å…³è”è§’è‰²ï¼Œè§’è‰²æ¨¡å‹å¯ä»¥ä¸åšä»»ä½•æ“ä½œ</span><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span><span class="token punctuation">{</span>      <span class="token keyword">use</span> <span class="token package">Filterable</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">roles</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">hasOne</span><span class="token punctuation">(</span>Role<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token shell-comment comment"># è§’è‰²çš„ Filter ï¼Œæˆ‘ä»¬åªæŸ¥è¯¢è§’è‰²åç§°</span><span class="token keyword">class</span> <span class="token class-name">UserRoleFilter</span> <span class="token keyword">extends</span> <span class="token class-name">ModelFilter</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**    * Related Models that have ModelFilters as well as the method on the ModelFilter    * As [relationMethod => [input_key1, input_key2]].    *    * @var array    */</span>    <span class="token keyword">public</span> <span class="token variable">$relations</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">whereLike</span><span class="token punctuation">(</span><span class="token string">'role_name'</span><span class="token punctuation">,</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token shell-comment comment"># ç”¨æˆ· Filterï¼Œå¯ä»¥è¯•ç”¨ $this->related(),ä½†æ˜¯æˆ‘ä¸ªäººè¿˜æ˜¯å–œæ¬¢ä½¿ç”¨ $relations æ•°ç»„</span><span class="token keyword">class</span> <span class="token class-name">UserFilter</span> <span class="token keyword">extends</span> <span class="token class-name">ModelFilter</span><span class="token punctuation">{</span>      <span class="token shell-comment comment"># roles ä¹Ÿå°±æ˜¯ç”¨æˆ·æ¨¡å‹å½“ä¸­æ¨¡å‹å…³è”ï¼Œname ä¹Ÿå°±æ˜¯ è§’è‰² Filter å½“ä¸­çš„æœç´¢å­—æ®µ</span>    <span class="token keyword">public</span> <span class="token variable">$relations</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'roles'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç°åœ¨æ¥æœç´¢ç°åœ¨è§’è‰²æ˜¯ åº—å®¶ çš„æ‰€æœ‰ç”¨æˆ·ç»“æœï¼š</p><pre><code>{    &quot;code&quot;: 0,    &quot;msg&quot;: &quot;success&quot;,    &quot;data&quot;: {        &quot;data&quot;: [            {                &quot;id&quot;: 14,                &quot;uid&quot;: &quot;dd415c30-d78d-11ea-9524-ad8181d0f16d&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;hoeger.gustave@damore.com&quot;,                &quot;username&quot;: &quot;Dr. Kaleigh Kuhlman V&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 2,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 2,                    &quot;role_name&quot;: &quot;åº—å®¶&quot;                }            },            {                &quot;id&quot;: 15,                &quot;uid&quot;: &quot;dd58ce50-d78d-11ea-973f-9f9ae3a97408&quot;,                &quot;team_id&quot;: 1,                &quot;mobile&quot;: &quot;&quot;,                &quot;email&quot;: &quot;malika00@yahoo.com&quot;,                &quot;username&quot;: &quot;Janie Reilly&quot;,                &quot;google_status&quot;: 0,                &quot;google_key&quot;: null,                &quot;role&quot;: 2,                &quot;identity&quot;: null,                &quot;status&quot;: 1,                &quot;deleted_at&quot;: null,                &quot;created_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;updated_at&quot;: &quot;2020-08-06 02:38:18&quot;,                &quot;roles&quot;: {                    &quot;id&quot;: 2,                    &quot;role_name&quot;: &quot;åº—å®¶&quot;                }            }        ],        &quot;total&quot;: 2    }}</code></pre><blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://tucker-eric.github.io/EloquentFilter/ï¼ŒFilter" target="_blank" rel="noopener">http://tucker-eric.github.io/EloquentFilter/ï¼ŒFilter</a> çš„ä½¿ç”¨å¤§æ¦‚å°±å¦‚æ­¤äº†ï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„å¼€ç®±å³ç”¨ã€‚</p></blockquote><h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><p>ä¸ä¾èµ–æ‰©å±•åŒ…ï¼Œè‡ªå·±æ‰‹å†™ä¸€ä¸ª Filter çš„æ€è·¯ã€‚</p><p>æœªå®Œå¾…ç»­â€¦</p>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL-å”¯ä¸€ç´¢å¼•ä¸ NULL</title>
      <link href="/2020/07/28/MySQL-%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E4%B8%8ENULL/"/>
      <url>/2020/07/28/MySQL-%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E4%B8%8ENULL/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>æœ‰æ²¡æœ‰é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œæ‰‹æœºå·ç ã€é‚®ç®±è´¦å·ã€ç”¨æˆ·è´¦å·ã€éƒ½è¯´ç™»é™†çš„è´¦å·ã€‚è€Œä¸ºäº†ç®€åŒ–ç”¨æˆ·çš„æ“ä½œï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ‰‹æœºå·ç æˆ–é‚®ç®±è´¦å·ï¼Œé‚£ä¹ˆä¹Ÿå°±è¯´ä»–ä»¬ä¹‹ä¸­æœ‰ä¸€ä¸ªä¼šä¸ºç©ºã€‚å½“ç»™è¿™ä¸‰ä¸ªå­—æ®µå”¯ä¸€ç´¢å¼•æ—¶ï¼Œå¯ä»¥ç¡®å®šçš„å°±æ˜¯ç”¨æˆ·è´¦å·è‚¯å®šä¸ä¸ºç©ºï¼Œå…¶ä»–äºŒä¸ªå¯èƒ½ä¸ºç©ºè€Œç»™å®šäº†ç©ºå­—ç¬¦ä¸²ã€‚æ³¨å†Œå®Œæˆç¬¬ä¸€ä¸ªè´¦å·ï¼Œå®Œå…¨æ²¡é—®é¢˜ï¼Œåœ¨æ³¨å†Œç¬¬äºŒä¸ªè´¦å·æ—¶ï¼Œä¼šæç¤ºç´¢å¼•é‡å¤ã€‚â€œæˆ‘æ²¡æœ‰é‡å¤çš„å‘€ï¼â€ï¼Œå”¯ä¸€ç´¢å¼•ï¼Œåªå¯æœ‰ä¸€è¡Œç©ºå­—ç¬¦ä¸²ï¼Œå¤šä¸€è¡Œå°±ä¼šæŠ¥é”™ç´¢å¼•é‡å¤ã€‚é‚£ä¹ˆåˆåœ¨æƒ³æˆ‘ç»™é»˜è®¤ NULL å‘¢ï¼Ÿ</p><p><strong>é»˜è®¤ NULL å½“ç„¶å¯ä»¥ï¼ŒNULL å¯ä»¥å¤šè¡Œï¼Œä½†æ˜¯ NUll ä¼šå¯¼è‡´ç´¢å¼•å¾ˆéº»çƒ¦ï¼Œæ­¤æ–¹æ¡ˆä¹Ÿä¸å¯é€‰</strong>ï¼Œ<strong>NULL åœ¨ MySQL å½“ä¸­ä¼šåœ¨ç©ºé—´é•¿åº¦ä¸º 1 ï¼Œè€Œç©ºå­—ç¬¦ä¸²æ˜¯ä¸ä¼šå ç©ºé—´ï¼Œé•¿åº¦ä¸º 0 ã€‚</strong></p><h3 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h3><p>æ‰‹æœºå·ç å’Œé‚®ç®±è´¦å·ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚ä»–ä»¬éƒ½ä½¿ç”¨æ™®é€šç´¢å¼•ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>MySQL åœ¨å”¯ä¸€ç´¢å¼•ä¸­å…è®¸å­˜åœ¨å€¼ä¸º NULL çš„å­—æ®µã€‚NULL å€¼åœ¨ MySQL å¯ä»¥ä»£è¡¨æ˜¯ä»»æ„å€¼ï¼ŒNULL å…¶å®å¹¶ä¸æ˜¯ç©ºå€¼ï¼Œè€Œæ˜¯è¦å ç”¨ç©ºé—´ï¼Œæ‰€ä»¥ MySQL åœ¨è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼ŒNULL ä¼šå‚ä¸å­—æ®µæ¯”è¾ƒï¼Œæ‰€ä»¥å¯¹æ•ˆç‡æœ‰ä¸€éƒ¨åˆ†å½±å“ï¼Œè€Œä¸”B æ ‘ç´¢å¼•æ—¶ä¸ä¼šå­˜å‚¨ NULL å€¼çš„ï¼Œæ‰€ä»¥å¦‚æœç´¢å¼•çš„å­—æ®µå¯ä»¥ä¸º NULLï¼Œç´¢å¼•çš„æ•ˆç‡ä¼šä¸‹é™å¾ˆå¤šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql-datetime å’Œ timestamp</title>
      <link href="/2020/07/28/MySQL-datetime%E5%92%8Ctimestamp/"/>
      <url>/2020/07/28/MySQL-datetime%E5%92%8Ctimestamp/</url>
      
        <content type="html"><![CDATA[<h3 id="datetime"><a href="#datetime" class="headerlink" title="datetime"></a>datetime</h3><p>ä¿å­˜æ ¼å¼ä¸º YYYYMMDDHHMMSSï¼ˆå¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼‰çš„æ•´æ•°ï¼Œæ‰€ä»¥ï¼Œ<strong>å®ƒä¸æ—¶åŒºæ— å…³</strong>ï¼Œå­˜å…¥çš„æ˜¯ä»€ä¹ˆå€¼å°±æ˜¯ä»€ä¹ˆå€¼ï¼Œ<strong>ä¸ä¼šæ ¹æ®å½“å‰æ—¶åŒºè¿›è¡Œè½¬æ¢</strong>ã€‚</p><p>å­˜å‚¨èŒƒå›´ï¼šä» <code>1000-01-01 00:00:00</code> åˆ° <code>9999-12-31 23:59:59</code></p><p>é•¿åº¦ï¼š8 ä¸ªå­—èŠ‚ï¼Œdatetime(n), n ä¸æ˜¯å­˜å‚¨é•¿åº¦ï¼Œè€Œæ˜¯æ˜¾ç¤ºçš„å°æ•°ä½æ•°ï¼Œå³ä½¿å°æ•°ä½æ•°æ˜¯ 0ï¼Œå­˜å‚¨æ˜¯ä¹Ÿæ˜¯å­˜å‚¨çš„6ä½å°æ•°ï¼Œä»…ä»…æ˜¾ç¤º 0 ä½è€Œå·²ã€‚</p><p>æ˜¾ç¤ºï¼šæ˜¾ç¤ºæ—¥æœŸå’Œæ—¶é—´ã€‚</p><h3 id="timestamp"><a href="#timestamp" class="headerlink" title="timestamp"></a>timestamp</h3><p>å­˜å…¥çš„æ˜¯è‡ª 1970-01-01 åˆå¤œ(æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´)ä»¥æ¥çš„ç§’æ•°ï¼Œå®ƒå’Œ unix æ—¶é—´æˆ³ç›¸åŒã€‚æ‰€ä»¥å®ƒä¸æ—¶åŒºæœ‰å…³ï¼ŒæŸ¥è¯¢æ—¶è½¬ä¸ºç›¸åº”çš„æ—¶åŒºæ—¶é—´ã€‚æ¯”å¦‚ï¼Œå­˜å‚¨çš„æ˜¯ 1970-01-01 00:00:00ï¼Œå®¢æˆ·ç«¯æ˜¯åŒ—äº¬ï¼Œé‚£ä¹ˆå°±åŠ 8ä¸ªæ—¶åŒºçš„å°æ—¶ 1970-01-01 08:00:00ã€‚</p><p>å­˜å‚¨èŒƒå›´ï¼š<code>&#39;1970-01-01 00:00:01&#39;</code> UTC to<code>&#39;2038-01-19 03:14:07&#39;</code> </p><p>å¯ä»¥å½“åšæ—¶é—´æˆ³ä½¿ç”¨ï¼Œåœ¨æ›´æ–°æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°ï¼Œè¿™ä¸€åˆ—åªèƒ½ç”±ç³»ç»Ÿè‡ªåŠ¨æ›´æ–°ï¼Œä¸èƒ½ç”± sql æ›´æ–°ï¼Œè¿™ä¸ªåœ¨ä¹è§‚é”æ—¶æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚</p><p>é•¿åº¦ï¼š4å­—èŠ‚ï¼Œå› ä¸ºå­˜å‚¨é•¿åº¦çš„åŸå› ï¼Œå†³å®šäº†å®ƒæ”¯æŒçš„èŒƒå›´çš„æ¯” datetime çš„è¦å°ã€‚</p><p>æ˜¾ç¤ºï¼šæ˜¾ç¤ºæ—¥æœŸå’Œæ—¶é—´ã€‚</p><blockquote><p>åŸæ–‡åœ°å€ï¼š</p><p><a href="https://blog.csdn.net/wangjun5159/article/details/48010563" target="_blank" rel="noopener">https://blog.csdn.net/wangjun5159/article/details/48010563</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-æƒé™ç®¡ç†</title>
      <link href="/2020/07/28/Laravel-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"/>
      <url>/2020/07/28/Laravel-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>æˆ‘ä»¬å¸¸è¯´çš„ RBAC å°±æ˜¯åŸºäºè§’è‰²çš„æƒé™è®¿é—®æ§åˆ¶ï¼ˆRole-Based Access Controlï¼‰ï¼Œæˆ‘ä»¬ä¼šåˆ©ç”¨ç”¨æˆ·ï¼Œè§’è‰²å’Œæƒé™çš„å…³ç³»ï¼Œå†³å®šç”¨æˆ·èƒ½åšä»€ä¹ˆäº‹ï¼Œä¸èƒ½åšä»€ä¹ˆäº‹ã€‚åœ¨ RBAC æˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ï¼š</p><p>ç”¨æˆ·ï¼ˆUserï¼‰â€”â€” æ‹¥æœ‰è§’è‰²çš„ä¸»ä½“ï¼›<br>è§’è‰²ï¼ˆRoleï¼‰â€”â€” ä¸€å®šæ•°é‡çš„æƒé™çš„é›†åˆï¼›<br>æƒé™ ï¼ˆPermissionï¼‰â€”â€” æ˜¯å¦å¯ä»¥åšå…·ä½“çš„æŸä¸ªæ“ä½œã€‚</p><p>å…·ä½“çš„æƒé™æ˜¯åˆ¤æ–­æ˜¯å¦èƒ½åšæŸä»¶äº‹çš„å†³å®šå› ç´ ï¼Œ<strong>ä¸€ä¸ªè§’è‰²å¯ä»¥æ‹¥æœ‰å¤šä¸ªæƒé™</strong>ï¼Œ<strong>è§’è‰²å’Œæƒé™ä¹‹é—´æ˜¯å¤šå¯¹å¤šçš„å…³ç³»</strong>ã€‚ç»™ç”¨æˆ·èµ‹äºˆæŸä¸ªè§’è‰²ï¼Œç”¨æˆ·å°±å¯ä»¥å¾—åˆ°è§’è‰²æ‹¥æœ‰çš„æ‰€æœ‰æƒé™ï¼Œç”¨æˆ·å°±å¯ä»¥å¹²æŸä»¶äº‹ï¼Œ<strong>åŒæ ·ç”¨æˆ·ä¸è§’è‰²ä¹Ÿæ˜¯å¤šå¯¹å¤šçš„å…³ç³»</strong>ã€‚æ€»ç»“ä¸€ä¸‹å°±æ˜¯ç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè§’è‰²ï¼Œè§’è‰²å¯ä»¥æœ‰å¤šä¸ªæƒé™ï¼Œç”¨æˆ·çš„ä»»æ„ä¸€ä¸ªè§’è‰²ä¸­æ‹¥æœ‰æŸä¸ªæƒé™ï¼Œä»–å°±å¯ä»¥åšè¿™ä¸ªæƒé™å¯¹åº”çš„äº‹ã€‚</p><h3 id="è·¯ç”±-Action-å±æ€§åšæ ‡è®°"><a href="#è·¯ç”±-Action-å±æ€§åšæ ‡è®°" class="headerlink" title="è·¯ç”± Action å±æ€§åšæ ‡è®°"></a>è·¯ç”± Action å±æ€§åšæ ‡è®°</h3><p>æ€è·¯ï¼šæŠŠè·¯ç”±çš„ Action å±æ€§æ‹¿æ¥åšæ ‡è®°ï¼Œå°±ç›¸å½“äºæˆ‘ä»¬ç»™è¿™ä¸ªè·¯ç”±è´´ä¸Šè‡ªå·±çš„æ ‡ç­¾ã€‚å®ƒå±äºå“ªä¸€ç±»ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä¸€ç›®äº†ç„¶ã€‚è®©ä¸çŸ¥é“çš„äººçœ‹ä¸‹å®ƒçš„ä¿¡æ¯å°±å¯ä»¥çŸ¥é“å…¶çš„ä½œç”¨ã€‚å½“ç„¶å¯ä»¥ä¸æ˜¯æ‰€æœ‰çš„è·¯ç”±éƒ½å»ç»™å®ƒè´´ä¸Šä¸€ä¸ªæ ‡ç­¾ï¼Œå…¬å…±éƒ¨åˆ†é‚£ä¹ˆå°±ä¸éœ€è¦å»åŒºåˆ†ï¼Œä¸åšæƒé™çš„è®°å½•ã€‚</p><pre class="line-numbers language-PHP"><code class="language-PHP">Route::get('role',['title' => 'è·å–è§’è‰²åˆ—è¡¨' ,'as' => 'role.query','uses' => 'RoleController@queryRoleList']);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="åˆ·æ–°æƒé™"><a href="#åˆ·æ–°æƒé™" class="headerlink" title="åˆ·æ–°æƒé™"></a>åˆ·æ–°æƒé™</h3><p>ä¸Šé¢æŠŠè·¯ç”±ä½œä¸ºäº†æ ‡è®°ï¼Œéšæ—¶å…¥åº“æƒé™è¡¨ã€‚</p><pre class="line-numbers language-php"><code class="language-php">        <span class="token variable">$routes</span> <span class="token operator">=</span> <span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">routes</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">getRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$routes</span> <span class="token keyword">as</span> <span class="token variable">$route</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$route</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">action</span><span class="token punctuation">[</span><span class="token string">'as'</span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token variable">$route</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">action</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>                    <span class="token string">'name'</span>          <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$route</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">action</span><span class="token punctuation">[</span><span class="token string">'as'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token string">'title'</span>                 <span class="token operator">=</span><span class="token operator">></span> <span class="token variable">$route</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">action</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token variable">$result</span> <span class="token operator">=</span> Permission<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">array_filter</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span>                <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$v</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token operator">!</span> <span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$v</span><span class="token punctuation">,</span> <span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            Permission<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Permission<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æƒé™éªŒè¯ä¸­é—´ä»¶"><a href="#æƒé™éªŒè¯ä¸­é—´ä»¶" class="headerlink" title="æƒé™éªŒè¯ä¸­é—´ä»¶"></a>æƒé™éªŒè¯ä¸­é—´ä»¶</h3><p>ç»™ä¸ç”¨æˆ·æƒé™åï¼Œé‚£ä¹ˆç”¨æˆ·è®¿é—®è·¯ç”±æ—¶ï¼Œè¿›è¡Œæƒé™çš„éªŒè¯ã€‚</p><pre class="line-numbers language-php"><code class="language-php">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">,</span> Closure <span class="token variable">$next</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$result</span> <span class="token operator">=</span> UserRole<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">[</span>            <span class="token string">'id'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">role</span>        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'competence'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">competence</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token function">ApiExceptionError</span><span class="token punctuation">(</span><span class="token function">trans</span><span class="token punctuation">(</span><span class="token string">'message.permissions.error'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">array_search</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">route</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token variable">$next</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">[</span>                <span class="token string">'code'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">,</span>                <span class="token string">'mes'</span>  <span class="token operator">=</span><span class="token operator">></span> <span class="token function">trans</span><span class="token punctuation">(</span><span class="token string">'message.permissions.error'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token string">'date'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">''</span>            <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">403</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP-OpCache</title>
      <link href="/2020/06/10/PHP-OpCache/"/>
      <url>/2020/06/10/PHP-OpCache/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>å®ƒæ˜¯ç”± PHP å®˜æ–¹å…¬å¸ Zend å¼€å‘çš„ä¸€æ¬¾å…è´¹ä½¿ç”¨çš„ PHP ä¼˜åŒ–åŠ é€Ÿæ‹“å±•ã€‚å°† PHP Code é¢„ç¼–è¯‘ç”Ÿæˆçš„è„šæœ¬æ–‡ä»¶ OPcode ç¼“å­˜åœ¨å…±äº«å†…å­˜ä¸­ä¾›ä»¥ååå¤ä½¿ç”¨ï¼Œä»è€Œé¿å…äº†ä»ç£ç›˜è¯»å–ä»£ç å†æ¬¡ç¼–è¯‘çš„æ—¶é—´æ¶ˆè€—ã€‚åŒæ—¶ï¼Œå®ƒè¿˜åº”ç”¨äº†ä¸€äº›ä»£ç ä¼˜åŒ–æ¨¡å¼ï¼Œä½¿å¾—ä»£ç æ‰§è¡Œæ›´å¿«ã€‚ä»è€ŒåŠ é€Ÿ PHP åº”ç”¨å“åº”ã€‚</p><p>å®ç° OPcache çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯æ¯æ¬¡æ›´æ”¹ä»»ä½• PHP ä»£ç æ—¶ä½ éƒ½ä¸å¾—ä¸å»æ¸…é™¤ç¼“å­˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-é˜Ÿåˆ—</title>
      <link href="/2020/06/02/Laravel-%E9%98%9F%E5%88%97/"/>
      <url>/2020/06/02/Laravel-%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>Laravel é˜Ÿåˆ—ä¸ºä¸åŒçš„é˜Ÿåˆ—åå°æœåŠ¡æä¾›äº†ç»Ÿä¸€çš„ APIï¼Œæ¯”å¦‚ Beanstalk, Amazon SQS, Redis, ç”šè‡³æ˜¯å…³ç³»å‹æ•°æ®åº“ã€‚é˜Ÿåˆ—å¯ä»¥ä½¿ä½ å»¶è¿Ÿå¤„ç†ä¸€äº›è€—æ—¶çš„ä»»åŠ¡ï¼Œæ¯”å¦‚å‘é€é‚®ä»¶ã€‚å»¶è¿Ÿè¿™äº›è€—æ—¶çš„ä»»åŠ¡ä¼šå¤§å¹…æé«˜ä½ çš„åº”ç”¨å¯¹ web è¯·æ±‚çš„å¤„ç†é€Ÿåº¦ã€‚<code>åˆ’é‡ç‚¹ï¼šå½“ä¿®æ”¹äº†é˜Ÿåˆ—åï¼Œä¸€ç‚¹è¦å…ˆé‡å¯é˜Ÿåˆ—ï¼ï¼ï¼å› ä¸ºé˜Ÿåˆ—å¤„ç†å™¨æ˜¯å¸¸é©»è¿›ç¨‹ï¼Œä»–ä»¬åœ¨é‡å¯å‰ä¸ä¼šåº”ç”¨ä½ ä»£ç çš„æ›´æ”¹ã€‚</code></p><p>è®¤è¯†é˜Ÿåˆ—å’Œæ ˆï¼š<a href="https://daixianjin.github.io/2020/04/14/%E9%98%9F%E5%88%97%E5%92%8C%E6%A0%88/">ç‚¹æˆ‘è·³è½¬</a></p><p>è¿™é‡Œåªè¯´ Redis çš„é…ç½®ï¼Œå…¶ä»–é…ç½®æ²¡æœ‰æ“ä½œè¿‡ã€‚åœ¨ Laravel 6.x ç‰ˆæœ¬ä¹‹å‰ä½¿ç”¨ Redis æˆ‘ä»¬ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯ Predis è¿™ä¸ªæ‰©å±•åŒ…ï¼Œå®ƒå¯ä»¥ä¸å®‰è£… Redis æ‰©å±•éƒ½å¯ä»¥ä½¿ç”¨ Redisï¼Œåœ¨ Laravel 6.x ä»¥åéƒ½å»ºè®®ä½¿ç”¨ PHP Redis æ‰©å±•ã€‚</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>é…ç½®é˜Ÿåˆ—å…ˆçœ‹ <code>config/queue.php</code>ã€‚</p><p>å¯ä»¥çœ‹åˆ°ç°åœ¨é˜Ÿåˆ—ä½¿ç”¨çš„æ˜¯åŒæ­¥ï¼Œä¿®æ”¹ä¸º redis é©±åŠ¨ï¼Œä½†ä¸è¦ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶é‡Œé¢æ•°æ®ï¼Œè€Œæ˜¯ä¿®æ”¹ env é‡Œé¢ã€‚åŒæ­¥é©±åŠ¨çš„é˜Ÿåˆ—ï¼Œé€‚ç”¨äºå¼€å‘ç¯å¢ƒçš„æµ‹è¯•ä½¿ç”¨ã€‚</p><pre class="line-numbers language-php"><code class="language-php"> <span class="token string">'default'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'QUEUE_CONNECTION'</span><span class="token punctuation">,</span> <span class="token string">'sync'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// QUEUE_CONNECTION=sync</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç»§ç»­å¾€ä¸‹å¯ä»¥çœ‹åˆ° redis çš„é©±åŠ¨ï¼Œè¿™é‡Œå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚è€Œä¿®æ”¹ã€‚</p><pre class="line-numbers language-php"><code class="language-php"><span class="token shell-comment comment"># æ™®é€š redis é˜Ÿåˆ—é…ç½®</span><span class="token string">'redis'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>    <span class="token string">'driver'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'redis'</span><span class="token punctuation">,</span>    <span class="token string">'connection'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'default'</span><span class="token punctuation">,</span>    <span class="token string">'queue'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'default'</span><span class="token punctuation">,</span>    <span class="token string">'retry_after'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">90</span><span class="token punctuation">,</span>    <span class="token string">'block_for'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>driverï¼šé©±åŠ¨è°</li><li>connectionï¼šè¿æ¥é©±åŠ¨é‡Œçš„è°</li><li>queueï¼šé˜Ÿåˆ—åç§°</li><li>retry_afterï¼šå®šä¹‰ä»»åŠ¡åœ¨æ‰§è¡Œä»¥åå¤šå°‘ç§’åé‡Šæ”¾å›é˜Ÿåˆ—ï¼Œå¦‚æœè®¾å®šä¸º 90 ï¼Œä»»åŠ¡åœ¨è¿è¡Œ 90 ç§’åè¿˜æœªå®Œæˆï¼Œé‚£ä¹ˆå°†é‡Šæ”¾å›é˜Ÿåˆ—è€Œä¸æ˜¯åˆ é™¤ã€‚</li><li>block_forï¼šé˜»å¡ï¼Œåœ¨éå† worker å¾ªç¯å’Œé‡æ–°è½®è¯¢ Redis æ•°æ®åº“ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºéœ€è¦ç­‰å¾…å¤šé•¿æ—¶é—´æ‰èƒ½ä½¿ä»»åŠ¡å˜å¾—å¯ç”¨ï¼Œä¸º 0 è¡¨ç¤ºä¸€ç›´é˜»å¡ï¼ŒçŸ¥é“æŸä¸€ä¸ªä»»åŠ¡å˜å¾—å¯ç”¨ã€‚</li></ul><pre class="line-numbers language-php"><code class="language-php"><span class="token shell-comment comment"># redis é›†ç¾¤ç‰ˆæœ¬é…ç½®</span><span class="token string">'redis'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>    <span class="token string">'driver'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'redis'</span><span class="token punctuation">,</span>    <span class="token string">'connection'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'queue'</span><span class="token punctuation">,</span>    <span class="token string">'queue'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'{default}'</span><span class="token punctuation">,</span>    <span class="token string">'retry_after'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token number">90</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å”¯ä¸€æ”¹å˜çš„å°±æ˜¯ queueï¼Œè¿æ¥ redis é›†ç¾¤ï¼Œé‚£ä¹ˆä½ çš„é˜Ÿåˆ—åç§°å°±å¿…é¡»åŒ…å«ä¸€ä¸ª <a href="https://redis.io/topics/cluster-spec#keys-hash-tags" target="_blank" rel="noopener">key hash tag</a>ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿ä¸€ä¸ªç»™å®šé˜Ÿåˆ—çš„æ‰€æœ‰ Redis é”®éƒ½è¢«æ”¾åœ¨åŒä¸€ä¸ªå“ˆå¸Œæ§½ã€‚</p><p>ä»¥ä¸Šé…ç½®éƒ½æ˜¯é’ˆå¯¹ <code>config/queue.php</code>é…ç½®ï¼Œåœ¨é…ç½®å¥½é˜Ÿåˆ—ä»¥åï¼Œå¯ç”¨åœ¨ <code>config/database.php</code>é…ç½® Redis çš„é©±åŠ¨ï¼Œå½“ç„¶ä¹Ÿå¯ç”¨ä½¿ç”¨é»˜è®¤çš„é…ç½®ã€‚</p><pre class="line-numbers language-php"><code class="language-php">    <span class="token string">'redis'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>        <span class="token string">'client'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'predis'</span><span class="token punctuation">,</span>        <span class="token string">'default'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>            <span class="token string">'host'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_HOST'</span><span class="token punctuation">,</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'password'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_PASSWORD'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'port'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_PORT'</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'database'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_DB'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token string">'cache'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>            <span class="token string">'host'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_HOST'</span><span class="token punctuation">,</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'password'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_PASSWORD'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'port'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_PORT'</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'database'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_CACHE_DB'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token string">'queue'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span> <span class="token shell-comment comment"># è¿™é‡Œæ–°å»ºçš„ queue é‚£ä¹ˆå°±å¯¹åº”ä¸Š â€œè¿æ¥é©±åŠ¨é‡Œçš„è°â€</span>            <span class="token string">'host'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_HOST'</span><span class="token punctuation">,</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'password'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_PASSWORD'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'port'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_PORT'</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'database'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'REDIS_DB'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>config/database.php</code>é‡Œé¢çš„ redis é©±åŠ¨å¯ç”¨ä½¿ç”¨é»˜è®¤ï¼Œä¹Ÿå¯ä»¥è‡ªå·±åœ¨é…ç½®ï¼Œçœ‹ä¸ªäººé¡¹ç›®è€Œå®šã€‚</p><h3 id="ç”Ÿæˆä»»åŠ¡ç±»"><a href="#ç”Ÿæˆä»»åŠ¡ç±»" class="headerlink" title="ç”Ÿæˆä»»åŠ¡ç±»"></a>ç”Ÿæˆä»»åŠ¡ç±»</h3><pre class="line-numbers language-bash"><code class="language-bash">php artisan make:job Name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰§è¡Œä»¥ä¸Šå‘½ä»¤ï¼Œä¼šåœ¨é¡¹ç›®ç›®å½•ä¸‹ <code>app\jobs</code>ç”Ÿæˆåˆ›å»ºçš„é˜Ÿåˆ—ä»»åŠ¡ç±»ã€‚</p><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Jobs</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Bus<span class="token punctuation">\</span>Queueable</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>SerializesModels</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>InteractsWithQueue</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>ShouldQueue</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Bus<span class="token punctuation">\</span>Dispatchable</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Name</span> <span class="token keyword">implements</span> <span class="token class-name">ShouldQueue</span><span class="token punctuation">{</span>    <span class="token keyword">use</span> <span class="token package">Dispatchable</span><span class="token punctuation">,</span> InteractsWithQueue<span class="token punctuation">,</span> Queueable<span class="token punctuation">,</span> SerializesModels<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * Create a new job instance.     *     * @return void     */</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å¯ä»¥æ¥æ”¶ä¼ é€’çš„å‚æ•°ï¼Œæœ€ä¸ºåˆå§‹åŒ–ã€‚</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * Execute the job.     *     * @return void     */</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// æ‰§è¡Œé˜Ÿåˆ—çš„ä¸šåŠ¡é€»è¾‘å¤„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è°ƒç”¨å¤–éƒ¨çš„ Controller æˆ–æ˜¯ Service Model ä¹‹ç±»ã€‚</span>    <span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">/**     * é”™è¯¯çš„å¤„ç†     * @param Exception $e     * */</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">failed</span><span class="token punctuation">(</span>Exception <span class="token variable">$e</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// failed ä¼šæ•æ‰å…¨å±€å¼‚å¸¸ï¼ˆä¸ç®¡ç³»ç»Ÿè¿˜æ˜¯ä½ è‡ªå·±æŠ›å‡ºçš„å…¨å±€å¼‚å¸¸ï¼‰ï¼Œä¹Ÿå°±æ˜¯å‡ºç°å¼‚å¸¸äº†ï¼Œè¿™é‡Œå¯ä»¥å¤„ç†å‡ºç°å¼‚å¸¸çš„é€»è¾‘ï¼Œæ¯”å¦‚ä¸€äº›ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œå‡ºç°å…¨å±€å¼‚å¸¸äº†ï¼Œæˆ‘ä»¬ä¼šç»™ç”¨æˆ·å‘ä¸€ä»½é‚®ä»¶...</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>é˜Ÿåˆ—å¯ä»¥ç†è§£ä¸ºç¼“å­˜çš„ HTTP è¯·æ±‚å¤„ç†ï¼Œç”¨æˆ·çš„ TCP é“¾æ¥æ—©å·²æ–­å¼€ï¼Œæ‰€ä»¥é˜Ÿåˆ—å½“ä¸­æ— æ³•ä½¿ç”¨ return ï¼Œåœ¨é˜Ÿåˆ—å½“ä¸­é”™è¯¯çš„å¤„ç†åªæœ‰å¼‚å¸¸ï¼Œå½“ç„¶åŒæ­¥çš„é˜Ÿåˆ—é™¤å¤–ã€‚</p></blockquote><h3 id="è°ƒç”¨é˜Ÿåˆ—"><a href="#è°ƒç”¨é˜Ÿåˆ—" class="headerlink" title="è°ƒç”¨é˜Ÿåˆ—"></a>è°ƒç”¨é˜Ÿåˆ—</h3><p>è¿™é‡Œåªè¯´ç®€å•çš„æ“ä½œï¼Œå…¶ä»–å¤æ‚æ“ä½œå¯ä»¥å’¨è¯¢é˜…è¯»æ–‡æ¡£ã€‚</p><pre class="line-numbers language-php"><code class="language-php"><span class="token comment" spellcheck="true">// è¿™ä¸ªä»»åŠ¡å°†è¢«åˆ†å‘åˆ°é»˜è®¤é˜Ÿåˆ—</span>Job<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¿™ä¸ªä»»åŠ¡å°†è¢«åˆ†å‘åˆ°é»˜è®¤é˜Ÿåˆ—-ä½¿ç”¨æ­¤æ–¹æ³•æ—¶ï¼Œé˜Ÿåˆ—ä»»åŠ¡å°†ä¸ä¼šæ’é˜Ÿï¼Œå¹¶ç«‹å³åœ¨å½“å‰è¿›ç¨‹ä¸­è¿è¡Œ</span>Job<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatchNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¿™ä¸ªä»»åŠ¡å°†è¢«åˆ†å‘åˆ°æŒ‡å®šçš„é©±åŠ¨å½“ä¸­</span>Job<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">onConnection</span><span class="token punctuation">(</span><span class="token string">'é©±åŠ¨'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¿™ä¸ªä»»åŠ¡å°†è¢«åˆ†å‘åˆ°æŒ‡å®šé˜Ÿåˆ—å½“ä¸­</span>Job<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">onQueue</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¿™ä¸ªä»»åŠ¡å°†åˆ†å‘åˆ°æŒ‡å®šçš„é©±åŠ¨å½“ä¸­æŒ‡å®šçš„é˜Ÿåˆ—å½“ä¸­</span>Job<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">onConnection</span><span class="token punctuation">(</span><span class="token string">'é©±åŠ¨'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">onQueue</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token shell-comment comment"># åŒæ­¥é©±åŠ¨æ— æ³•æŒ‡å®šé©±åŠ¨å’ŒæŒ‡å®šé˜Ÿåˆ—,å½“ç„¶é˜Ÿåˆ—ä¹Ÿå¯ä»¥æœ‰æ‰§è¡Œçš„ä¼˜å…ˆçº§ï¼Œä¸‹é¢ä¼šè¯´ã€‚</span><span class="token shell-comment comment"># æ¯”è¾ƒå®ç”¨çš„å»¶è¿Ÿé˜Ÿåˆ—ï¼Œå¦‚åšè®¢å•çš„ä¸€äº›åˆ—æ“ä½œï¼Œå»¶è¿Ÿ10åˆ†é’Ÿï¼Œæ³¨æ„ï¼šAmazon SQS é˜Ÿåˆ—æœåŠ¡æœ€å¤§å»¶è¿Ÿ 15 åˆ†é’Ÿçš„æ—¶é—´ã€‚</span>Job<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">addMinutes</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token shell-comment comment"># ä»¥ä¸Šéƒ½æ˜¯ä»£ç è°ƒç”¨é˜Ÿåˆ—</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä½¿ç”¨é˜Ÿåˆ—"><a href="#ä½¿ç”¨é˜Ÿåˆ—" class="headerlink" title="ä½¿ç”¨é˜Ÿåˆ—"></a>ä½¿ç”¨é˜Ÿåˆ—</h3><h3 id="å®ˆæŠ¤è¿›ç¨‹ç¨‹åº"><a href="#å®ˆæŠ¤è¿›ç¨‹ç¨‹åº" class="headerlink" title="å®ˆæŠ¤è¿›ç¨‹ç¨‹åº"></a>å®ˆæŠ¤è¿›ç¨‹ç¨‹åº</h3><p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins + ç äº‘ è‡ªåŠ¨éƒ¨ç½² PHP é¡¹ç›®</title>
      <link href="/2020/05/23/jenkins-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/"/>
      <url>/2020/05/23/jenkins-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>Jenkins æ˜¯ä¸€æ¬¾ç”± <a href="https://zh.wikipedia.org/wiki/Java" target="_blank" rel="noopener">Java</a> ç¼–å†™çš„<a href="https://zh.wikipedia.org/wiki/å¼€æº" target="_blank" rel="noopener">å¼€æº</a>çš„<a href="https://zh.wikipedia.org/wiki/æŒç»­é›†æˆ" target="_blank" rel="noopener">æŒç»­é›†æˆ</a>å·¥å…·ã€‚åœ¨ä¸ <a href="https://zh.wikipedia.org/wiki/Oracle" target="_blank" rel="noopener">Oracle</a> å‘ç”Ÿäº‰æ‰§åï¼Œé¡¹ç›®ä» <a href="https://zh.wikipedia.org/wiki/Hudson_(è½¯ä»¶)" target="_blank" rel="noopener">Hudson</a> é¡¹ç›®<a href="https://zh.wikipedia.org/wiki/å¤åˆ»_(è½¯ä»¶å·¥ç¨‹)" target="_blank" rel="noopener">å¤åˆ»</a>ã€‚è¿™ä¸ªå…³ç³»å°±è·Ÿ MySQL å’Œ MariaDB å…³ç³»ä¸€æ ·ã€‚åªèƒ½è¯´ <a href="https://zh.wikipedia.org/wiki/Oracle" target="_blank" rel="noopener">Oracle</a> æ•…äº‹çœŸå¤šï¼ï¼ï¼</p><p>Jenkins æä¾›äº†è½¯ä»¶å¼€å‘çš„æŒç»­é›†æˆæœåŠ¡ã€‚å®ƒè¿è¡Œåœ¨ Servlet å®¹å™¨ä¸­ï¼ˆä¾‹å¦‚ Apache Tomcatï¼‰ã€‚</p><p>å®ƒæ”¯æŒ<a href="https://zh.wikipedia.org/wiki/è½¯ä»¶é…ç½®ç®¡ç†" target="_blank" rel="noopener">è½¯ä»¶é…ç½®ç®¡ç†</a>ï¼ˆSCMï¼‰å·¥å…·ï¼ˆåŒ…æ‹¬ <a href="https://zh.wikipedia.org/w/index.php?title=AccuRev_SCM&action=edit&redlink=1" target="_blank" rel="noopener">AccuRev SCM</a>ã€<a href="https://zh.wikipedia.org/wiki/CVS" target="_blank" rel="noopener">CVS</a>ã€<a href="https://zh.wikipedia.org/wiki/Subversion" target="_blank" rel="noopener">Subversion</a>ã€<a href="https://zh.wikipedia.org/wiki/Git" target="_blank" rel="noopener">Git</a>ã€<a href="https://zh.wikipedia.org/w/index.php?title=Perforce&action=edit&redlink=1" target="_blank" rel="noopener">Perforce</a>ã€<a href="https://zh.wikipedia.org/w/index.php?title=Clearcase&action=edit&redlink=1" target="_blank" rel="noopener">Clearcase</a> å’Œ <a href="https://zh.wikipedia.org/w/index.php?title=Rational_Team_Concert&action=edit&redlink=1" target="_blank" rel="noopener">RTC</a>ï¼‰ï¼Œå¯ä»¥æ‰§è¡ŒåŸºäº<a href="https://zh.wikipedia.org/wiki/Apache_Ant" target="_blank" rel="noopener">Apache Ant</a> å’Œ <a href="https://zh.wikipedia.org/wiki/Apache_Maven" target="_blank" rel="noopener">Apache Maven</a> çš„é¡¹ç›®ï¼Œä»¥åŠä»»æ„çš„ <a href="https://zh.wikipedia.org/wiki/Shellè„šæœ¬" target="_blank" rel="noopener">Shellè„šæœ¬</a> å’Œ Windows <a href="https://zh.wikipedia.org/wiki/æ‰¹æ¬¡æª”" target="_blank" rel="noopener">æ‰¹å¤„ç†å‘½ä»¤</a>ã€‚å¯ä»¥é€šè¿‡å„ç§æ‰‹æ®µè§¦å‘æ„å»ºã€‚ä¾‹å¦‚æäº¤ç»™ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ—¶è¢«è§¦å‘ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç±»ä¼¼ <a href="https://zh.wikipedia.org/wiki/Cron" target="_blank" rel="noopener">Cron</a> çš„æœºåˆ¶è°ƒåº¦ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–çš„æ„å»ºå·²ç»å®Œæˆæ—¶ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¸€ä¸ªç‰¹å®šçš„ <a href="https://zh.wikipedia.org/wiki/URL" target="_blank" rel="noopener">URL</a> è¿›è¡Œè¯·æ±‚ã€‚</p><h4 id="æŒç»­é›†æˆæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æŒç»­é›†æˆæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æŒç»­é›†æˆæ˜¯ä»€ä¹ˆï¼Ÿ"></a>æŒç»­é›†æˆæ˜¯ä»€ä¹ˆï¼Ÿ</h4><h5 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h5><p>äº’è”ç½‘è½¯ä»¶çš„å¼€å‘å’Œå‘å¸ƒï¼Œå·²ç»å½¢æˆäº†ä¸€å¥—æ ‡å‡†æµç¨‹ï¼Œæœ€é‡è¦çš„ç»„æˆéƒ¨åˆ†å°±æ˜¯æŒç»­é›†æˆï¼ˆContinuous integrationï¼Œç®€ç§° CIï¼‰ã€‚</p><p><strong>æŒç»­é›†æˆæŒ‡çš„æ˜¯ï¼Œé¢‘ç¹åœ°ï¼ˆä¸€å¤©å¤šæ¬¡ï¼‰å°†ä»£ç é›†æˆåˆ°ä¸»å¹²ã€‚</strong></p><p>å®ƒçš„å¥½å¤„ä¸»è¦æœ‰ä¸¤ä¸ªã€‚</p><ol><li><strong>å¿«é€Ÿå‘ç°é”™è¯¯ã€‚</strong>æ¯å®Œæˆä¸€ç‚¹æ›´æ–°ï¼Œå°±é›†æˆåˆ°ä¸»å¹²ï¼Œå¯ä»¥å¿«é€Ÿå‘ç°é”™è¯¯ï¼Œå®šä½é”™è¯¯ä¹Ÿæ¯”è¾ƒå®¹æ˜“ã€‚</li><li><strong>é˜²æ­¢åˆ†æ”¯å¤§å¹…åç¦»ä¸»å¹²ã€‚</strong>å¦‚æœä¸æ˜¯ç»å¸¸é›†æˆï¼Œä¸»å¹²åˆåœ¨ä¸æ–­æ›´æ–°ï¼Œä¼šå¯¼è‡´ä»¥åé›†æˆçš„éš¾åº¦å˜å¤§ï¼Œç”šè‡³éš¾ä»¥é›†æˆã€‚</li></ol><p><strong>æŒç»­é›†æˆçš„ç›®çš„ï¼Œå°±æ˜¯è®©äº§å“å¯ä»¥å¿«é€Ÿè¿­ä»£ï¼ŒåŒæ—¶è¿˜èƒ½ä¿æŒé«˜è´¨é‡ã€‚</strong>å®ƒçš„æ ¸å¿ƒæªæ–½æ˜¯ï¼Œä»£ç é›†æˆåˆ°ä¸»å¹²ä¹‹å‰ï¼Œå¿…é¡»é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚åªè¦æœ‰ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¤±è´¥ï¼Œå°±ä¸èƒ½é›†æˆã€‚</p><p>Martin Fowler è¯´è¿‡ï¼Œâ€æŒç»­é›†æˆå¹¶ä¸èƒ½æ¶ˆé™¤ Bugï¼Œè€Œæ˜¯è®©å®ƒä»¬éå¸¸å®¹æ˜“å‘ç°å’Œæ”¹æ­£ã€‚â€</p><p>ä¸æŒç»­é›†æˆç›¸å…³çš„ï¼Œè¿˜æœ‰ä¸¤ä¸ªæ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯æŒç»­äº¤ä»˜å’ŒæŒç»­éƒ¨ç½²ã€‚</p><h5 id="æŒç»­äº¤ä»˜"><a href="#æŒç»­äº¤ä»˜" class="headerlink" title="æŒç»­äº¤ä»˜"></a>æŒç»­äº¤ä»˜</h5><p><strong>æŒç»­äº¤ä»˜ï¼ˆContinuous deliveryï¼‰æŒ‡çš„æ˜¯ï¼Œé¢‘ç¹åœ°å°†è½¯ä»¶çš„æ–°ç‰ˆæœ¬ï¼Œäº¤ä»˜ç»™è´¨é‡å›¢é˜Ÿæˆ–è€…ç”¨æˆ·ï¼Œä»¥ä¾›è¯„å®¡ã€‚</strong>å¦‚æœè¯„å®¡é€šè¿‡ï¼Œä»£ç å°±è¿›å…¥ç”Ÿäº§é˜¶æ®µã€‚</p><p>æŒç»­äº¤ä»˜å¯ä»¥çœ‹ä½œæŒç»­é›†æˆçš„ä¸‹ä¸€æ­¥ã€‚å®ƒå¼ºè°ƒçš„æ˜¯ï¼Œä¸ç®¡æ€ä¹ˆæ›´æ–°ï¼Œè½¯ä»¶æ˜¯éšæ—¶éšåœ°å¯ä»¥äº¤ä»˜çš„ã€‚</p><h5 id="æŒç»­éƒ¨ç½²"><a href="#æŒç»­éƒ¨ç½²" class="headerlink" title="æŒç»­éƒ¨ç½²"></a>æŒç»­éƒ¨ç½²</h5><p><strong>æŒç»­éƒ¨ç½²ï¼ˆcontinuous deploymentï¼‰æ˜¯æŒç»­äº¤ä»˜çš„ä¸‹ä¸€æ­¥ï¼ŒæŒ‡çš„æ˜¯ä»£ç é€šè¿‡è¯„å®¡ä»¥åï¼Œè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</strong></p><p>æŒç»­éƒ¨ç½²çš„ç›®æ ‡æ˜¯ï¼Œä»£ç åœ¨ä»»ä½•æ—¶åˆ»éƒ½æ˜¯å¯éƒ¨ç½²çš„ï¼Œå¯ä»¥è¿›å…¥ç”Ÿäº§é˜¶æ®µã€‚</p><h5 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h5><h6 id="1ã€æäº¤"><a href="#1ã€æäº¤" class="headerlink" title="1ã€æäº¤"></a>1ã€æäº¤</h6><p>æµç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯å¼€å‘è€…å‘ä»£ç ä»“åº“æäº¤ä»£ç ã€‚æ‰€æœ‰åé¢çš„æ­¥éª¤éƒ½å§‹äºæœ¬åœ°ä»£ç çš„ä¸€æ¬¡æäº¤ï¼ˆcommitï¼‰ã€‚</p><h6 id="2ã€æµ‹è¯•ï¼ˆç¬¬ä¸€è½®ï¼‰"><a href="#2ã€æµ‹è¯•ï¼ˆç¬¬ä¸€è½®ï¼‰" class="headerlink" title="2ã€æµ‹è¯•ï¼ˆç¬¬ä¸€è½®ï¼‰"></a>2ã€æµ‹è¯•ï¼ˆç¬¬ä¸€è½®ï¼‰</h6><p>ä»£ç ä»“åº“å¯¹ commit æ“ä½œé…ç½®äº†é’©å­ï¼ˆhookï¼‰ï¼Œåªè¦æäº¤ä»£ç æˆ–è€…åˆå¹¶è¿›ä¸»å¹²ï¼Œå°±ä¼šè·‘è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p><p>æµ‹è¯•æœ‰å¥½å‡ ç§ã€‚</p><ul><li>å•å…ƒæµ‹è¯•ï¼šé’ˆå¯¹å‡½æ•°æˆ–æ¨¡å—çš„æµ‹è¯•</li><li>é›†æˆæµ‹è¯•ï¼šé’ˆå¯¹æ•´ä½“äº§å“çš„æŸä¸ªåŠŸèƒ½çš„æµ‹è¯•ï¼Œåˆç§°åŠŸèƒ½æµ‹è¯•</li><li>ç«¯å¯¹ç«¯æµ‹è¯•ï¼šä»ç”¨æˆ·ç•Œé¢ç›´è¾¾æ•°æ®åº“çš„å…¨é“¾è·¯æµ‹è¯•</li></ul><p>ç¬¬ä¸€è½®è‡³å°‘è¦è·‘å•å…ƒæµ‹è¯•ã€‚</p><h6 id="3ã€æ„å»º"><a href="#3ã€æ„å»º" class="headerlink" title="3ã€æ„å»º"></a>3ã€æ„å»º</h6><p>é€šè¿‡ç¬¬ä¸€è½®æµ‹è¯•ï¼Œä»£ç å°±å¯ä»¥åˆå¹¶è¿›ä¸»å¹²ï¼Œå°±ç®—å¯ä»¥äº¤ä»˜äº†ã€‚</p><p>äº¤ä»˜åï¼Œå°±å…ˆè¿›è¡Œæ„å»ºï¼ˆbuildï¼‰ï¼Œå†è¿›å…¥ç¬¬äºŒè½®æµ‹è¯•ã€‚æ‰€è°“æ„å»ºï¼ŒæŒ‡çš„æ˜¯å°†æºç è½¬æ¢ä¸ºå¯ä»¥è¿è¡Œçš„å®é™…ä»£ç ï¼Œæ¯”å¦‚å®‰è£…ä¾èµ–ï¼Œé…ç½®å„ç§èµ„æºï¼ˆæ ·å¼è¡¨ã€JSè„šæœ¬ã€å›¾ç‰‡ï¼‰ç­‰ç­‰ã€‚</p><p>å¸¸ç”¨çš„æ„å»ºå·¥å…·å¦‚ä¸‹ã€‚</p><ul><li><a href="http://jenkins-ci.org/" target="_blank" rel="noopener">Jenkins</a></li><li><a href="https://travis-ci.com/" target="_blank" rel="noopener">Travis</a></li><li><a href="https://www.codeship.io/" target="_blank" rel="noopener">Codeship</a></li><li><a href="http://stridercd.com/" target="_blank" rel="noopener">Strider</a></li></ul><p>Jenkins å’Œ Strider æ˜¯å¼€æºè½¯ä»¶ï¼ŒTravis å’Œ Codeship å¯¹äºå¼€æºé¡¹ç›®å¯ä»¥å…è´¹ä½¿ç”¨ã€‚å®ƒä»¬éƒ½ä¼šå°†æ„å»ºå’Œæµ‹è¯•ï¼Œåœ¨ä¸€æ¬¡è¿è¡Œä¸­æ‰§è¡Œå®Œæˆã€‚</p><h6 id="4ã€æµ‹è¯•ï¼ˆç¬¬äºŒè½®ï¼‰"><a href="#4ã€æµ‹è¯•ï¼ˆç¬¬äºŒè½®ï¼‰" class="headerlink" title="4ã€æµ‹è¯•ï¼ˆç¬¬äºŒè½®ï¼‰"></a>4ã€æµ‹è¯•ï¼ˆç¬¬äºŒè½®ï¼‰</h6><p>æ„å»ºå®Œæˆï¼Œå°±è¦è¿›è¡Œç¬¬äºŒè½®æµ‹è¯•ã€‚å¦‚æœç¬¬ä¸€è½®å·²ç»æ¶µç›–äº†æ‰€æœ‰æµ‹è¯•å†…å®¹ï¼Œç¬¬äºŒè½®å¯ä»¥çœç•¥ï¼Œå½“ç„¶ï¼Œè¿™æ—¶æ„å»ºæ­¥éª¤ä¹Ÿè¦ç§»åˆ°ç¬¬ä¸€è½®æµ‹è¯•å‰é¢ã€‚</p><p>ç¬¬äºŒè½®æ˜¯å…¨é¢æµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•éƒ½ä¼šè·‘ï¼Œæœ‰æ¡ä»¶çš„è¯ï¼Œä¹Ÿè¦åšç«¯å¯¹ç«¯æµ‹è¯•ã€‚æ‰€æœ‰æµ‹è¯•ä»¥è‡ªåŠ¨åŒ–ä¸ºä¸»ï¼Œå°‘æ•°æ— æ³•è‡ªåŠ¨åŒ–çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå°±è¦äººå·¥è·‘ã€‚</p><p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œæ–°ç‰ˆæœ¬çš„æ¯ä¸€ä¸ªæ›´æ–°ç‚¹éƒ½å¿…é¡»æµ‹è¯•åˆ°ã€‚å¦‚æœæµ‹è¯•çš„è¦†ç›–ç‡ä¸é«˜ï¼Œè¿›å…¥åé¢çš„éƒ¨ç½²é˜¶æ®µåï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°ä¸¥é‡çš„é—®é¢˜ã€‚</p><h6 id="5ã€éƒ¨ç½²"><a href="#5ã€éƒ¨ç½²" class="headerlink" title="5ã€éƒ¨ç½²"></a>5ã€éƒ¨ç½²</h6><p>é€šè¿‡äº†ç¬¬äºŒè½®æµ‹è¯•ï¼Œå½“å‰ä»£ç å°±æ˜¯ä¸€ä¸ªå¯ä»¥ç›´æ¥éƒ¨ç½²çš„ç‰ˆæœ¬ï¼ˆartifactï¼‰ã€‚å°†è¿™ä¸ªç‰ˆæœ¬çš„æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…ï¼ˆ <code>tar filename.tar</code> ï¼‰å­˜æ¡£ï¼Œå‘åˆ°ç”Ÿäº§æœåŠ¡å™¨ã€‚</p><p>ç”Ÿäº§æœåŠ¡å™¨å°†æ‰“åŒ…æ–‡ä»¶ï¼Œè§£åŒ…æˆæœ¬åœ°çš„ä¸€ä¸ªç›®å½•ï¼Œå†å°†è¿è¡Œè·¯å¾„çš„ç¬¦å·é“¾æ¥ï¼ˆsymlinkï¼‰æŒ‡å‘è¿™ä¸ªç›®å½•ï¼Œç„¶åé‡æ–°å¯åŠ¨åº”ç”¨ã€‚è¿™æ–¹é¢çš„éƒ¨ç½²å·¥å…·æœ‰ <a href="http://www.ansible.com/" target="_blank" rel="noopener">Ansible</a>ï¼Œ<a href="https://www.chef.io/chef/" target="_blank" rel="noopener">Chef</a>ï¼Œ<a href="https://puppetlabs.com/" target="_blank" rel="noopener">Puppet</a> ç­‰ã€‚</p><h6 id="6ã€å›æ»š"><a href="#6ã€å›æ»š" class="headerlink" title="6ã€å›æ»š"></a>6ã€å›æ»š</h6><p>ä¸€æ—¦å½“å‰ç‰ˆæœ¬å‘ç”Ÿé—®é¢˜ï¼Œå°±è¦å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æ„å»ºç»“æœã€‚æœ€ç®€å•çš„åšæ³•å°±æ˜¯ä¿®æ”¹ä¸€ä¸‹ç¬¦å·é“¾æ¥ï¼ŒæŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„ç›®å½•ã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><h4 id="Java-JDKï¼Œæ˜¯-Jenkins-å¿…å¤‡ï¼Œå¦‚å·²å®‰è£…è¯·å¿½ç•¥ï¼Œå½“å‰å®‰è£…éƒ½ä»¥-Centos-ä¸ºæ ‡å‡†"><a href="#Java-JDKï¼Œæ˜¯-Jenkins-å¿…å¤‡ï¼Œå¦‚å·²å®‰è£…è¯·å¿½ç•¥ï¼Œå½“å‰å®‰è£…éƒ½ä»¥-Centos-ä¸ºæ ‡å‡†" class="headerlink" title="Java JDKï¼Œæ˜¯ Jenkins å¿…å¤‡ï¼Œå¦‚å·²å®‰è£…è¯·å¿½ç•¥ï¼Œå½“å‰å®‰è£…éƒ½ä»¥ Centos ä¸ºæ ‡å‡†"></a>Java JDKï¼Œæ˜¯ Jenkins å¿…å¤‡ï¼Œå¦‚å·²å®‰è£…è¯·å¿½ç•¥ï¼Œå½“å‰å®‰è£…éƒ½ä»¥ Centos ä¸ºæ ‡å‡†</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 1ã€æŸ¥çœ‹æ˜¯å¦å·²å®‰è£… </span>java -version<span class="token comment" spellcheck="true"># 2ã€å¦‚æ²¡æœ‰å®‰è£…ï¼Œå®‰è£… JDK</span>yum <span class="token function">install</span> java-1.8.0-openjdk-devel.x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Jenkins-è½¯ä»¶æº"><a href="#Jenkins-è½¯ä»¶æº" class="headerlink" title="Jenkins  è½¯ä»¶æº"></a>Jenkins  è½¯ä»¶æº</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">wget</span> -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo<span class="token function">sudo</span> rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.keyyum <span class="token function">install</span> jenkins<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ°æ­¤ Jenkins å°±ç®—å·²ç»å®‰è£…å¥½ï¼Œä½†æ˜¯å®‰è£…å¥½äº†è¿˜ä¸ç®—å®Œäº‹ï¼Œè¿˜éœ€è¦å¯¹ Jenkins è¿›è¡Œä¸€äº›é…ç½®ï¼Œçœ‹é¡¹ç›®éœ€æ±‚è€Œå®šã€‚</p><h4 id="Jenkins-é…ç½®"><a href="#Jenkins-é…ç½®" class="headerlink" title="Jenkins é…ç½®"></a>Jenkins é…ç½®</h4><p>ä¿®æ”¹ Jenkins å½“ä¸­é»˜è®¤çš„ç”¨æˆ·ï¼Œä¿®æ”¹æˆ root ç”¨æˆ·ï¼Œå’Œ Jenkins é»˜è®¤ç›‘å¬çš„ç«¯å£ï¼ŒJenkins é»˜è®¤ç›‘å¬çš„ 8080ï¼Œå¦‚è·Ÿè‡ªå·±çš„ä¸€äº›è½¯ä»¶æœ‰å†²çªï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç›‘å¬çš„ç«¯å£ã€‚</p><pre class="line-numbers language-bash"><code class="language-bash">vim /etc/sysconfig/jenkins<span class="token comment" spellcheck="true">#  29  è¡Œï¼ŒJENKINS_USER="jenkins"</span>JENKINS_USER<span class="token operator">=</span><span class="token string">"root"</span><span class="token comment" spellcheck="true"># 58 è¡Œï¼ŒJENKINS_PORT="8080"</span>JENKINS_PORT<span class="token operator">=</span><span class="token string">"xxxx"</span><span class="token comment" spellcheck="true"># ä¿å­˜ï¼Œé‡å¯ Jenkins</span><span class="token function">service</span> jenkins restart<span class="token comment" spellcheck="true"># ä¿®æ”¹æƒé™</span><span class="token function">chown</span> -R root:root /var/log/jenkins<span class="token function">chown</span> -R root:root /var/lib/jenkins<span class="token function">chown</span> -R root:root /var/cache/jenkins<span class="token comment" spellcheck="true"># ä¿®æ”¹ /etc/init.d/jenkins</span>candidates<span class="token operator">=</span><span class="token string">" /etc/alternatives/java /usr/lib/jvm/java-1.8.0/bin/java /usr/lib/jvm/jre-1.8.0/bin/java /usr/lib/jvm/java-1.7.0/bin/java /usr/lib/jvm/jre-1.7.0/bin/java /usr/lib/jvm/java-11.0/bin/java /usr/lib/jvm/jre-11.0/bin/java /usr/lib/jvm/java-11-openjdk-amd64 /usr/bin/java "</span><span class="token comment" spellcheck="true"># åœ¨é‡Œé¢åŠ ä¸Šè‡ªå·±çš„ JDK è·¯å¾„ï¼Œå¦‚æœæ˜¯ yum å®‰è£… é‚£ä¹ˆå°±åœ¨ /usr/lib/jvm å½“ä¸­</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Jenkins åŸºæœ¬çš„å››ä¸ªå‘½ä»¤</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æŸ¥çœ‹çŠ¶æ€</span><span class="token function">service</span> jenkins status<span class="token comment" spellcheck="true"># å¯åŠ¨ </span><span class="token function">service</span> jenkins start<span class="token comment" spellcheck="true"># é‡å¯</span><span class="token function">service</span> jenkins restart<span class="token comment" spellcheck="true"># åœæ­¢</span><span class="token function">service</span> jenkins stop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­£å¸¸çš„çŠ¶æ€</p><pre class="line-numbers language-bash"><code class="language-bash">â— jenkins.service - LSB: Jenkins Automation Server   Loaded: loaded <span class="token punctuation">(</span>/etc/rc.d/init.d/jenkins<span class="token punctuation">;</span> bad<span class="token punctuation">;</span> vendor preset: disabled<span class="token punctuation">)</span>   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Sun 2020-05-24 19:38:08 CST<span class="token punctuation">;</span> 2h 45min ago     Docs: man:systemd-sysv-generator<span class="token punctuation">(</span>8<span class="token punctuation">)</span>  Process: 11681 ExecStop<span class="token operator">=</span>/etc/rc.d/init.d/jenkins stop <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, status<span class="token operator">=</span>0/SUCCESS<span class="token punctuation">)</span>  Process: 11738 ExecStart<span class="token operator">=</span>/etc/rc.d/init.d/jenkins start <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, status<span class="token operator">=</span>0/SUCCESS<span class="token punctuation">)</span>   CGroup: /system.slice/jenkins.service           â””â”€11759 /etc/alternatives/java -Dcom.sun.akuma.Daemon<span class="token operator">=</span>daemonized -Djava.awt.headless<span class="token operator">=</span>true -DJENKINS_HOME<span class="token operator">=</span>/var/lib/jenkins -jar /usr/lib/jenkins/<span class="token punctuation">..</span>.May 24 19:38:08 iZ8vbhj6wlgflm1cdhbzbnZ systemd<span class="token punctuation">[</span>1<span class="token punctuation">]</span>: Starting LSB: Jenkins Automation Server<span class="token punctuation">..</span>.May 24 19:38:08 iZ8vbhj6wlgflm1cdhbzbnZ runuser<span class="token punctuation">[</span>11743<span class="token punctuation">]</span>: pam_unix<span class="token punctuation">(</span>runuser:session<span class="token punctuation">)</span>: session opened <span class="token keyword">for</span> user root by <span class="token punctuation">(</span>uid<span class="token operator">=</span>0<span class="token punctuation">)</span>May 24 19:38:08 iZ8vbhj6wlgflm1cdhbzbnZ systemd<span class="token punctuation">[</span>1<span class="token punctuation">]</span>: Started LSB: Jenkins Automation Server.May 24 19:38:08 iZ8vbhj6wlgflm1cdhbzbnZ jenkins<span class="token punctuation">[</span>11738<span class="token punctuation">]</span>: Starting Jenkins <span class="token punctuation">[</span>  OK  <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Dokcer-å®‰è£…"><a href="#Dokcer-å®‰è£…" class="headerlink" title="Dokcer å®‰è£…"></a>Dokcer å®‰è£…</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 1ã€æ‹‰å– Jenkins é•œåƒ</span>docker pull jenkins/jenkins:lts<span class="token comment" spellcheck="true"># 2ã€åˆ›å»ºæ˜ å°„ç›®å½•</span><span class="token function">mkdir</span> /opt/jenkins<span class="token function">chmod</span> -R 777 jenkins<span class="token comment" spellcheck="true"># 3ã€åˆ›å»ºå®¹å™¨</span>docker run -p 8080:8080 -p 50000:50000 -v /opt/jenkins:/var/jenkins_home -d jenkins/jenkins:lts<span class="token comment" spellcheck="true"># åˆ›å»ºå®¹å™¨çš„ä¸€äº›å‘½ä»¤ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šè¯´äº†ï¼Œæœ‰æ€§è¶£å¯ä»¥çœ‹æˆ‘é‚£ç¯‡ Docker æ–‡ç« </span><span class="token comment" spellcheck="true"># å®˜æ–¹ Dokcer å®‰è£… Jenkins æ•™ç¨‹åœ°å€ï¼šhttps://github.com/jenkinsci/docker/blob/master/README.md</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Web-é…ç½®"><a href="#Web-é…ç½®" class="headerlink" title="Web é…ç½®"></a>Web é…ç½®</h4><p>åœ¨é‚£æˆ‘ä»¬ä¸ç®¡æ˜¯ Docker æ­å»ºå¥½äº†æˆ–è€…åŸç”Ÿå®‰è£…ï¼Œ<a href="http://ip:port" target="_blank" rel="noopener">http://ip:port</a> å°±å¯ä»¥è®¿é—® Jenkens äº†ï¼Œå¦‚æœè®¿é—®ä¸é€šæ€ä¹ˆåŠï¼Ÿ</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># é¦–å…ˆçœ‹æœåŠ¡å™¨å†…å¤–æ˜¯å¦æœ‰è¿”å›å†…å®¹</span>curl 127.0.0.1:prot<span class="token comment" spellcheck="true"># å‡ºç°ä»¥ä¸‹è¯´æ˜å·²ç»æ­å»ºå¥½äº† Jenkinsï¼Œå¦‚æœæœåŠ¡å™¨ IP ä¸èƒ½è®¿é—®ï¼Œç»å¤§çš„é—®é¢˜åœ¨æœåŠ¡å•†çš„å®‰å…¨ç»„è§„åˆ™ï¼Œé˜¿é‡Œäº‘ä¸ºä¾‹ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/%E6%88%AA%E5%9B%BE%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20200524220622.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-24_22-13.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-24_22-14.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-24_22-17.png" alt></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># åŸç”Ÿå®‰è£…è·å–å¯†ç </span><span class="token function">cat</span> /var/jenkins_home/secrets/initialAdminPassword<span class="token comment" spellcheck="true"># Dokcer å®‰è£…è·å–å¯†ç ï¼Œåˆšæ‰æ˜ å°„ç›®å½•é‡Œé¢è·å–</span><span class="token function">cat</span> /opt/jenkins/secrets/initialAdminPassword<span class="token comment" spellcheck="true"># åˆ°æ­¤å®‰è£… Jenkins å‰éƒ¨æ­¥éª¤å°±å·²å®Œæˆï¼ŒDokcer å› ä¸ºæ˜¯æ‰“åŒ…å¥½äº†çš„å¯ä»¥çœå»æˆ‘ä»¬å¾ˆå¤šäº‹æƒ…ï¼ŒåŸç”Ÿå®‰è£…å°±ç¨å¾®éº»çƒ¦ä¸€äº›ï¼Œä¸è¿‡è¿™ä¸ªéƒ½çœ‹è‡ªå·±å¦‚ä½•å»ä½¿ç”¨äº†ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-25_10-03.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-25_10-04.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-25_10-07.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-25_10-08.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-25_10-13.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-25_10-13_1.png" alt></p><h4 id="è®¾ç½®ä¸­æ–‡"><a href="#è®¾ç½®ä¸­æ–‡" class="headerlink" title="è®¾ç½®ä¸­æ–‡"></a>è®¾ç½®ä¸­æ–‡</h4><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_14-52.png" alt></p><p>åœ¨å¯é€‰æ’ä»¶é‡Œé¢æœç´¢ï¼šLocaleã€Localization æ’ä»¶å¹¶ä¸”å®‰è£…</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_15-00.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_15-01.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_15-02.png" alt></p><p>æ‰¾åˆ° <strong>Locale</strong> è®¾ç½®é»˜è®¤ä¸º zh_CH å¹¶ä¸”å¼ºåˆ¶ä½¿ç”¨æ­¤è¯­è¨€</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_15-05.png" alt></p><blockquote><p>å¦‚æœæ›´æ–°äº†ä»€ä¹ˆæ’ä»¶é‡å¯äº†ï¼Œä¸­æ–‡åŒ–åˆä¸å®Œæ•´äº†å’‹åŠï¼Ÿä¸ç”¨æ¢ï¼Œå…ˆåˆ°ç³»ç»Ÿè®¾ç½®é‡Œé¢æŠŠ zh_CN åˆ äº†ï¼Œå†æŠŠä¸‹é¢å‹¾é€‰çš„å¼ºåˆ¶ä¹Ÿå…³äº†ï¼Œç„¶ååœ¨æŠŠ Locale å…³é—­é‡å¯ï¼Œä¹‹åå¼€å¯ Locale åœ¨è®¾ç½® zh_CN å’Œå‹¾é€‰å¼ºåˆ¶ï¼ï¼ï¼</p></blockquote><h3 id="æ„å»ºé¡¹ç›®"><a href="#æ„å»ºé¡¹ç›®" class="headerlink" title="æ„å»ºé¡¹ç›®"></a>æ„å»ºé¡¹ç›®</h3><h4 id="1ã€å®‰è£…æ’ä»¶"><a href="#1ã€å®‰è£…æ’ä»¶" class="headerlink" title="1ã€å®‰è£…æ’ä»¶"></a>1ã€å®‰è£…æ’ä»¶</h4><p>Git Parameter  + Gitee Plugin + Publish Over SSHï¼Œæ’ä»¶å®‰è£…å°±æ˜¯è¿™æ ·æ ·å­</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_10-22.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_10-23.png" alt></p><h4 id="2ã€ç äº‘é…ç½®"><a href="#2ã€ç äº‘é…ç½®" class="headerlink" title="2ã€ç äº‘é…ç½®"></a>2ã€ç äº‘é…ç½®</h4><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_15-55.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-31_18-07.png" alt></p><ul><li>é“¾æ¥åç§°ï¼šéšä¾¿å¡«â€¦</li><li>Gitee åŸŸå URLï¼š<a href="https://gitee.com" target="_blank" rel="noopener">https://gitee.com</a></li><li>è¯ä¹¦ä»¤ç‰Œï¼šæ·»åŠ  -&gt; jenkins </li></ul><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_16-14.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_16-08.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_16-11.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_16-15.png" alt></p><h4 id="3ã€SSH-è®¾ç½®"><a href="#3ã€SSH-è®¾ç½®" class="headerlink" title="3ã€SSH è®¾ç½®"></a>3ã€SSH è®¾ç½®</h4><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-06-01_21-12.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-06-01_21-13.png" alt></p><h4 id="4ã€åˆ›å»ºä¸€ä¸ªé¡¹ç›®"><a href="#4ã€åˆ›å»ºä¸€ä¸ªé¡¹ç›®" class="headerlink" title="4ã€åˆ›å»ºä¸€ä¸ªé¡¹ç›®"></a>4ã€åˆ›å»ºä¸€ä¸ªé¡¹ç›®</h4><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_15-07.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-31_19-45.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_16-50.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_16-51.png" alt></p><p>è§¦å‘ HOOK ï¼Œåœ¨ç äº‘é¡¹ç›®æ‰¾åˆ° Settings -&gt; WebHooks -&gt; add</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_17-02.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-05-29_17-08.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-06-01_21-17.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-06-01_21-19.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/2020-06-01_21-25.png" alt></p><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æŒç»­é›†æˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŒç»­é›†æˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Golang-å­¦ä¹ ç¬”è®°</title>
      <link href="/2020/04/29/Golang-%E7%AC%94%E8%AE%B0/"/>
      <url>/2020/04/29/Golang-%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>Go æ˜¯ä¸€é—¨å…¨æ–°çš„è¯­è¨€ã€‚å°½ç®¡å®ƒä»ç°æœ‰çš„è¯­è¨€ä¸­å€Ÿé‰´äº†è®¸å¤šç†å¿µï¼Œä½†å…¶ä¸ä¼—ä¸åŒçš„ç‰¹æ€§ï¼Œ ä½¿å¾—ä½¿ç”¨ Go ç¼–ç¨‹åœ¨æœ¬è´¨ä¸Šå°±ä¸åŒäºå…¶å®ƒè¯­è¨€ã€‚åšä¸º PHP å¼€å‘äººå‘˜ï¼Œç¬¬äºŒé—¨è¯­è¨€é€‰ Go çš„åŒæ’©è¿˜æ˜¯æ¯”è¾ƒå¤šï¼Œä»æ­¤å¯ä»¥è®ºè¯ Go è¿˜æ˜¯éå¸¸å€¼å¾—å­¦ä¹ ï¼</p><p><strong>Go ç‰¹æ€§å¯¹æ¯”å¤§å¤šæ•°è¯­è¨€ï¼š</strong></p><ol><li>ä¸ºäº†ç®€åŒ–è®¾è®¡ï¼Œä¸æ”¯æŒå‡½æ•°é‡è½½å’Œæ“ä½œç¬¦é‡è½½</li><li>ä¸ºäº†é¿å…åœ¨ C/C++ å¼€å‘ä¸­çš„ä¸€äº› Bug å’Œæ··ä¹±ï¼Œä¸æ”¯æŒéšå¼è½¬æ¢</li><li>Go è¯­è¨€é€šè¿‡å¦ä¸€ç§é€”å¾„å®ç°é¢å‘å¯¹è±¡è®¾è®¡ï¼ˆç»“æ„ï¼‰æ¥æ”¾å¼ƒç±»å’Œç±»å‹çš„ç»§æ‰¿ï¼Œå°½ç®¡åœ¨æ¥å£çš„ä½¿ç”¨æ–¹é¢å¯ä»¥å®ç°ç±»ä¼¼å˜ä½“ç±»å‹çš„åŠŸèƒ½ï¼Œä½†æœ¬èº«ä¸æ”¯æŒå˜ä½“ç±»å‹</li><li>ä¸æ”¯æŒåŠ¨æ€åŠ è½½ä»£ç </li><li>ä¸æ”¯æŒåŠ¨æ€é“¾æ¥åº“</li><li>ä¸æ”¯æŒæ³›å‹</li><li>é€šè¿‡ recover å’Œ panic æ¥æ›¿ä»£å¼‚å¸¸æœºåˆ¶</li><li>ä¸æ”¯æŒæ–­è¨€</li><li>ä¸æ”¯æŒé™æ€å˜é‡</li></ol><h4 id="GO-è¯­è¨€å¾ˆç‰¹åˆ«"><a href="#GO-è¯­è¨€å¾ˆç‰¹åˆ«" class="headerlink" title="GO è¯­è¨€å¾ˆç‰¹åˆ«"></a>GO è¯­è¨€å¾ˆç‰¹åˆ«</h4><p>æ²¡æœ‰ â€œå¯¹è±¡â€ï¼Œæ²¡æœ‰ç»§æ‰¿ã€å¤šæ€ï¼Œæ²¡æœ‰æ³›å‹ï¼Œæ²¡æœ‰ try/catch</p><p>æœ‰æ¥å£ï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼ŒCSP å¹¶å‘ç¼–ç¨‹ï¼ˆgoroutine + channelï¼‰</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>ä» Go è¯­è¨€ä¸­æ–‡ç½‘ï¼š<a href="https://studygolang.com/dl" target="_blank" rel="noopener">Go ä¸­æ–‡ç¤¾åŒº</a> ä¸Šä¸‹è½½åˆé€‚çš„ äºŒè¿›åˆ¶å‘è¡Œç‰ˆï¼Œæ ¹æ®è‡ªå·±æ“ä½œç³»ç»Ÿè€Œå®šäºŒè¿›åˆ¶æ–‡ä»¶</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">tar</span> -xzf go1.13.6.linux-amd64.tar.gz -C /usr/local<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å»ºç«‹è½¯é“¾æ¥</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">ln</span> -s /usr/local/go/bin/* /usr/bin/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æµ‹è¯•</p><pre class="line-numbers language-bash"><code class="language-bash">go version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæ²¡æœ‰å‡ºç°é—®é¢˜ï¼Œé‚£ä¹ˆå°±ç®—è£…å¥½äº†ã€‚æ¥ä¸‹æ¥å°±æ˜¯è®¾ç½® Go çš„å¼€å‘ç¯å¢ƒäº†</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># å¦‚æœæ˜¯zsh,å°±æŠŠ/.bashrc æ”¹æˆ /.zshr</span><span class="token function">sudo</span> vim <span class="token variable">$HOME</span>/.bashrc<span class="token function">export</span> GOROOT<span class="token operator">=</span>/usr/local/go   <span class="token comment" spellcheck="true"># è¡¨ç¤º Go åœ¨ä½ çš„ç”µè„‘ä¸Šçš„å®‰è£…ä½ç½®ï¼Œæœ‰äº›å®‰è£…åŒ…ä¼šè‡ªåŠ¨è®¾ç½®é»˜è®¤çš„ goroot</span><span class="token function">export</span> GOPATH<span class="token operator">=</span><span class="token variable">$HOME</span>/go-work   <span class="token comment" spellcheck="true"># é»˜è®¤å®‰è£…åŒ…çš„è·¯å¾„,æ ¹æ®è‡ªå·±éœ€è¦æ¥é€‰æ‹©ä½ç½®</span><span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">$PATH</span><span class="token keyword">:</span><span class="token variable">$GOROOT</span>/bin:<span class="token variable">$GOPATH</span>/bin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼Œè¿™é‡Œæœ‰ä¸ªå¤§å‘ï¼Œåƒä¸‡åˆ«ç”¨ fish é‡Œé¢æ‰§è¡Œå®ƒä¸€ç›´æŠ¥é”™ï¼Œäººéƒ½å·®ç‚¹ææ­»äº†</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">source</span> <span class="token variable">$HOME</span>/.bashrcã€€<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯è¿è¡Œ go env æŸ¥çœ‹ Go ç¯å¢ƒå˜é‡</p><pre class="line-numbers language-bash"><code class="language-bash">go <span class="token function">env</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="å›½é™…æƒ¯ä¾‹"><a href="#å›½é™…æƒ¯ä¾‹" class="headerlink" title="å›½é™…æƒ¯ä¾‹"></a>å›½é™…æƒ¯ä¾‹</h3><pre class="line-numbers language-go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">func</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½ä¸–ç•Œ"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Go è¯­è¨€çš„ä»£ç é€šè¿‡<strong>åŒ…</strong>ï¼ˆpackageï¼‰ç»„ç»‡ï¼ŒåŒ…ç±»ä¼¼äºå…¶å®ƒè¯­è¨€é‡Œçš„åº“ï¼ˆlibrariesï¼‰æˆ–è€…æ¨¡å—ï¼ˆmodulesï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ç¨‹åºä¸€å¼€å§‹ï¼Œå°±è¦å£°æ˜è¿™ä¸ªç¨‹åºå±äºå“ªä¸ªåŒ…ã€‚ä¸€ä¸ªåŒ…ç”±ä½äºå•ä¸ªç›®å½•ä¸‹çš„ä¸€ä¸ªæˆ–å¤šä¸ª<code>.go</code>æºä»£ç æ–‡ä»¶ç»„æˆ, ç›®å½•å®šä¹‰åŒ…çš„ä½œç”¨ã€‚æ¯ä¸ªæºæ–‡ä»¶éƒ½ä»¥ä¸€æ¡<code>package</code>å£°æ˜è¯­å¥å¼€å§‹ï¼Œç´§è·Ÿç€ä¸€ç³»åˆ—å¯¼å…¥ï¼ˆimportï¼‰çš„åŒ…ï¼Œä¹‹åæ˜¯å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œçš„ç¨‹åºè¯­å¥ã€‚</p><h4 id="ç‰¹æ®Šçš„-main-åŒ…"><a href="#ç‰¹æ®Šçš„-main-åŒ…" class="headerlink" title="ç‰¹æ®Šçš„ main åŒ…"></a>ç‰¹æ®Šçš„ main åŒ…</h4><p>main åŒ…æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªç‹¬ç«‹å¯æ‰§è¡Œçš„ç¨‹åºï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªåº“ï¼å®ƒæ˜¯æ•´ä¸ªç¨‹åºæ‰§è¡Œçš„å…¥å£ã€‚main åŒ…å½“ä¸­çš„ main å‡½æ•°å°±æ˜¯æˆ‘ä»¬æ‰€è¯´æ•´ä¸ªç¨‹åºæ‰§è¡Œçš„å…¥å£äº†ï¼Œä¸€èˆ¬ main å‡½æ•°å½“ä¸­ä¼šè°ƒç”¨å…¶å®ƒå¾ˆå¤šå‡½æ•°å®Œæˆå·¥ä½œã€‚</p><h4 id="éœ€è¦éµå¾ªçš„è§„å®š"><a href="#éœ€è¦éµå¾ªçš„è§„å®š" class="headerlink" title="éœ€è¦éµå¾ªçš„è§„å®š"></a>éœ€è¦éµå¾ªçš„è§„å®š</h4><p>é¦–å…ˆè¦æ³¨æ„ä¸€ç‚¹ï¼Œpackage å…ˆ ï¼Œimport åï¼Œå®ƒä»¬ä¸èƒ½é¢ å€’ä½ç½®ï¼Œpackage åªèƒ½æœ‰ä¸€ä¸ªè€Œä¸èƒ½å¤šä¸ªï¼Œimport å¯ä»¥æœ‰å¤šä¸ªã€‚å…¶æ¬¡å¦‚æœè¯´ import å¯¼å…¥å¤šä¸ªåŒ…ï¼Œé‚£ä¹ˆä½ éƒ½å¿…é¡»å»ä½¿ç”¨å¯¼å…¥çš„åŒ…ï¼Œä¸ç„¶ç¼–è¯‘æ— æ³•é€šè¿‡ï¼Œè¿™æ­£æ˜¯éµå¾ªäº† Go çš„æ ¼è¨€ï¼šâ€œæ²¡æœ‰ä¸å¿…è¦çš„ä»£ç ï¼â€œã€‚Go çš„è¯­æ³•è¦æ±‚ç‰¹åˆ«çš„ä¸¥æ ¼ï¼Œåœ¨ package å’Œ import ä¹‹åï¼Œæ‰å¯ä»¥å®šä¹‰ å‡½æ•°ã€å¸¸äº®ã€å˜é‡ã€ç±»å‹çš„å£°æ˜è¯­å¥ã€‚å®ƒä»¬æ²¡æœ‰é¡ºåºè¦æ±‚ï¼Œå¯ä»¥éšå¿ƒæ‰€æ¬²æ¥ï¼Go è¯­è¨€ä¸éœ€è¦åœ¨è¯­å¥æˆ–è€…å£°æ˜çš„æœ«å°¾æ·»åŠ åˆ†å·ï¼Œé™¤éä¸€è¡Œä¸Šæœ‰å¤šæ¡è¯­å¥ã€‚å¦‚ï¼šforï¼Œif ç­‰ã€‚å®é™…ä¸Šï¼Œç¼–è¯‘å™¨ä¼šä¸»åŠ¨æŠŠç‰¹å®šç¬¦å·åçš„æ¢è¡Œç¬¦è½¬æ¢ä¸ºåˆ†å·, å› æ­¤æ¢è¡Œç¬¦æ·»åŠ çš„ä½ç½®ä¼šå½±å“ Go ä»£ç çš„æ­£ç¡®è§£æã€‚</p><h4 id="ç¼–è¯‘ç¨‹åº"><a href="#ç¼–è¯‘ç¨‹åº" class="headerlink" title="ç¼–è¯‘ç¨‹åº"></a>ç¼–è¯‘ç¨‹åº</h4><p>Go æ˜¯ä¸€é—¨ç¼–è¯‘å‹è¯­è¨€ï¼ŒGo è¯­è¨€çš„å·¥å…·é“¾å°†æºä»£ç åŠå…¶ä¾èµ–è½¬æ¢æˆè®¡ç®—æœºçš„æœºå™¨æŒ‡ä»¤ï¼ˆè¯‘æ³¨ï¼šé™æ€ç¼–è¯‘ï¼‰ã€‚ Go è¯­è¨€æä¾›çš„å·¥å…·éƒ½é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„å‘½ä»¤ Go è°ƒç”¨ï¼ŒGo å‘½ä»¤æœ‰ä¸€ç³»åˆ—å­å‘½ä»¤ã€‚æœ€ç®€å•çš„ä¸€ä¸ªå­å‘½ä»¤å°±æ˜¯ runã€‚è¿™ä¸ªå‘½ä»¤ç¼–è¯‘ä¸€ä¸ªæˆ–å¤šä¸ªä»¥ <code>.go</code> ç»“å°¾çš„æºæ–‡ä»¶ï¼Œé“¾æ¥åº“æ–‡ä»¶ï¼Œå¹¶è¿è¡Œæœ€ç»ˆç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>ç¼–è¯‘å¹¶è¿è¡Œæºæ–‡ä»¶</p><pre class="line-numbers language-bash"><code class="language-bash">go run hello.go<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¯‘ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨ Windows ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª <code>.exe</code>æ–‡ä»¶ï¼ŒOS X  å’Œ Linux ä¸‹ä¼šæˆæ‰ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼ŒGo ç¼–è¯‘åä¸ä¾é™„ç¯å¢ƒï¼Œä½†æ˜¯éœ€è¦ç›¸åŒçš„å¹³å°æ‰èƒ½è¿è¡Œã€‚</p><pre class="line-numbers language-bash"><code class="language-bash">go build hello.go<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="ä¸‹è½½å¹¶å®‰è£…åŒ…"><a href="#ä¸‹è½½å¹¶å®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½å¹¶å®‰è£…åŒ…"></a>ä¸‹è½½å¹¶å®‰è£…åŒ…</h4><p>æ ¹æ®è¦æ±‚å’Œå®é™…æƒ…å†µä»äº’è”ç½‘ä¸Šä¸‹è½½æˆ–æ›´æ–°æŒ‡å®šçš„ä»£ç åŒ…åŠå…¶ä¾èµ–åŒ…ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œç¼–è¯‘å’Œå®‰è£…ï¼Œå®‰è£…çš„ç›®å½•å°±æ˜¯ GOPATH ç¯å¢ƒå˜é‡è®¾ç½®çš„ç›®å½•å½“ä¸­ï¼Œä½†æ˜¯ä¾èµ– Git æˆ– SVN ç­‰å·¥å…·è¿›è¡Œä¸‹è½½ã€‚</p><pre class="line-numbers language-bash"><code class="language-bash">go get -u github.com/gin-gonic/gin<span class="token comment" spellcheck="true"># é™„åŠ å‚æ•°</span><span class="token comment" spellcheck="true"># -v æ˜¾ç¤ºæ“ä½œæµç¨‹çš„æ—¥å¿—åŠä¿¡æ¯ï¼Œæ–¹ä¾¿æ£€æŸ¥é”™è¯¯</span><span class="token comment" spellcheck="true"># -u ä¸‹è½½ä¸¢å¤±çš„åŒ…ï¼Œä½†ä¸ä¼šæ›´æ–°å·²ç»å­˜åœ¨çš„åŒ…</span><span class="token comment" spellcheck="true"># -d åªä¸‹è½½ï¼Œä¸å®‰è£…</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p>Go åœ£ç»ï¼š<a href="https://books.studygolang.com/gopl-zh/ch1/ch1-01.html" target="_blank" rel="noopener">https://books.studygolang.com/gopl-zh/ch1/ch1-01.html</a> ï¼Œä¹‹åæ‰€æœ‰éƒ½ä¸º Go åœ£ç»å‚è€ƒã€‚</p></blockquote><h3 id="ç¨‹åºç»“æ„"><a href="#ç¨‹åºç»“æ„" class="headerlink" title="ç¨‹åºç»“æ„"></a>ç¨‹åºç»“æ„</h3><h4 id="å‘½å"><a href="#å‘½å" class="headerlink" title="å‘½å"></a>å‘½å</h4><p>Go è¯­è¨€ä¸­çš„å‡½æ•°åã€å˜é‡åã€å¸¸é‡åã€ç±»å‹åã€è¯­å¥æ ‡å·å’ŒåŒ…åç­‰æ‰€æœ‰çš„å‘½åï¼Œéƒ½éµå¾ªä¸€ä¸ªç®€å•çš„å‘½åè§„åˆ™ï¼šä¸€ä¸ªåå­—å¿…é¡»ä»¥ä¸€ä¸ªå­—æ¯ï¼ˆUnicodeå­—æ¯ï¼‰æˆ–ä¸‹åˆ’çº¿å¼€å¤´ï¼Œåé¢å¯ä»¥è·Ÿä»»æ„æ•°é‡çš„å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ã€‚</p><p>Go è¯­è¨€ä¸­ç±»ä¼¼ if å’Œ switch çš„å…³é”®å­—æœ‰25ä¸ªï¼›å…³é”®å­—ä¸èƒ½ç”¨äºè‡ªå®šä¹‰åå­—ï¼Œåªèƒ½åœ¨ç‰¹å®šè¯­æ³•ç»“æ„ä¸­ä½¿ç”¨ã€‚</p><pre class="line-numbers language-yaml"><code class="language-yaml">break      default       func     interface   selectcase       defer         go       map         structchan       else          goto     package     switchconst      fallthrough   if       range       typecontinue   for           import   return      var<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤å¤–ï¼Œè¿˜æœ‰å¤§çº¦ 30 å¤šä¸ªé¢„å®šä¹‰çš„åå­—ï¼Œæ¯”å¦‚ int å’Œ true ç­‰ï¼Œä¸»è¦å¯¹åº”å†…å»ºçš„å¸¸é‡ã€ç±»å‹å’Œå‡½æ•°ã€‚</p><pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">å†…å»ºå¸¸é‡</span><span class="token punctuation">:</span>  true false iota nil<span class="token key atrule">å†…å»ºç±»å‹</span><span class="token punctuation">:</span>  int int8 int16 int32 int64          uint uint8 uint16 uint32 uint64 uintptr          float32 float64 complex128 complex64          bool byte rune string error<span class="token key atrule">å†…å»ºå‡½æ•°</span><span class="token punctuation">:</span>  make len cap new append copy close delete          complex real imag          panic recover<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™äº›å†…éƒ¨é¢„å…ˆå®šä¹‰çš„åå­—å¹¶ä¸æ˜¯å…³é”®å­—ï¼Œä½ å¯ä»¥åœ¨å®šä¹‰ä¸­é‡æ–°ä½¿ç”¨å®ƒä»¬ã€‚åœ¨ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯ä¸­é‡æ–°å®šä¹‰å®ƒä»¬ä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„ï¼Œä½†æ˜¯ä¹Ÿè¦æ³¨æ„é¿å…è¿‡åº¦è€Œå¼•èµ·è¯­ä¹‰æ··ä¹±ã€‚</p><p>å½“æ ‡è¯†ç¬¦ï¼ˆåŒ…æ‹¬å¸¸é‡ã€å˜é‡ã€ç±»å‹ã€å‡½æ•°åã€ç»“æ„å­—æ®µç­‰ç­‰ï¼‰ä»¥ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´ï¼Œå¦‚ï¼šEchoï¼Œé‚£ä¹ˆä½¿ç”¨è¿™ç§å½¢å¼çš„æ ‡è¯†ç¬¦çš„å¯¹è±¡å°±å¯ä»¥è¢«å¤–éƒ¨åŒ…çš„ä»£ç æ‰€ä½¿ç”¨ï¼ˆå®¢æˆ·ç«¯ç¨‹åºéœ€è¦å…ˆ import å¯¼å…¥è¿™ä¸ªåŒ…ï¼‰ï¼Œè¿™è¢«ç§°ä¸º<code>å¯¼å‡º</code>ï¼ˆåƒé¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„ public ï¼‰ï¼›æ ‡è¯†ç¬¦å¦‚æœä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œåˆ™å¯¹åŒ…å¤–æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯ä»–ä»¬åœ¨æ•´ä¸ªåŒ…çš„å†…éƒ¨æ˜¯å¯è§å¹¶ä¸”å¯ç”¨çš„ï¼ˆåƒé¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„ private ï¼‰ã€‚</p><p>åå­—çš„é•¿åº¦æ²¡æœ‰é€»è¾‘é™åˆ¶ï¼Œä½†æ˜¯ Go è¯­è¨€çš„é£æ ¼æ˜¯å°½é‡ä½¿ç”¨çŸ­å°çš„åå­—ã€‚å¦‚æœä¸€ä¸ªåå­—çš„ä½œç”¨åŸŸæ¯”è¾ƒå¤§ï¼Œç”Ÿå‘½å‘¨æœŸä¹Ÿæ¯”è¾ƒé•¿ï¼Œé‚£ä¹ˆç”¨é•¿çš„åå­—å°†ä¼šæ›´æœ‰æ„ä¹‰ã€‚Go åœ¨ä¹ æƒ¯ä¸Šæ¨èä½¿ç”¨é©¼å³°å‘½ä»¤æ³•ã€‚</p><h4 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h4><p>Go æ˜¯ä¸€é—¨å¼ºç±»å‹è¯­è¨€ï¼Œä½†æ˜¯ Go ä¹Ÿæä¾›äº†éšå¼å£°æ˜ï¼Œåœ¨æˆ‘çš„è®¤çŸ¥å½“ä¸­ï¼Œåªè¦å£°æ˜æ—¶æ²¡æœ‰ç±»å‹åªæœ‰è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆå°±å±äºéšå¼å£°æ˜ã€‚</p><h5 id="var-å£°æ˜å˜é‡"><a href="#var-å£°æ˜å˜é‡" class="headerlink" title="var å£°æ˜å˜é‡"></a>var å£°æ˜å˜é‡</h5><p>è¯­æ³•ï¼šç±»å‹å’Œè¡¨è¾¾å¼å¯ä»¥çœç•¥å…¶ä¸­ä¸€ä¸ªï¼Œä½†ä¸èƒ½äºŒä¸ªéƒ½çœç•¥ã€‚</p><pre class="line-numbers language-yaml"><code class="language-yaml">var å˜é‡åå­— ç±»å‹ = è¡¨è¾¾å¼<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœçœç•¥çš„æ˜¯<code>ç±»å‹</code>ä¿¡æ¯ï¼Œé‚£ä¹ˆå°†æ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼æ¥æ¨å¯¼å˜é‡çš„ç±»å‹ä¿¡æ¯ã€‚</p><pre class="line-numbers language-go"><code class="language-go"><span class="token comment" spellcheck="true">// éšå¼å£°æ˜</span><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 1 int </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœåˆå§‹åŒ–<code>è¡¨è¾¾å¼</code>è¢«çœç•¥ï¼Œé‚£ä¹ˆå°†ç”¨é›¶å€¼åˆå§‹åŒ–è¯¥å˜é‡ã€‚Go åœ¨å£°æ˜å˜é‡æ—¶ï¼Œå†…å­˜å½“ä¸­å°±å·²ç»å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œäº†åˆå§‹åŒ–æ“ä½œã€‚æ•°å€¼ç±»å‹å˜é‡å¯¹åº”çš„é›¶å€¼æ˜¯ 0ï¼Œå¸ƒå°”ç±»å‹å˜é‡å¯¹åº”çš„é›¶å€¼æ˜¯ falseï¼Œå­—ç¬¦ä¸²ç±»å‹å¯¹åº”çš„é›¶å€¼æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œæ¥å£æˆ–å¼•ç”¨ç±»å‹ï¼ˆåŒ…æ‹¬ sliceã€æŒ‡é’ˆã€mapã€chan å’Œå‡½æ•°ï¼‰å˜é‡å¯¹åº”çš„é›¶å€¼æ˜¯ nilã€‚æ•°ç»„æˆ–ç»“æ„ä½“ç­‰èšåˆç±»å‹å¯¹åº”çš„é›¶å€¼æ˜¯æ¯ä¸ªå…ƒç´ æˆ–å­—æ®µéƒ½æ˜¯å¯¹åº”è¯¥ç±»å‹çš„é›¶å€¼ã€‚</p><pre class="line-numbers language-go"><code class="language-go"><span class="token keyword">var</span> a <span class="token builtin">string</span><span class="token keyword">var</span> b <span class="token builtin">int</span><span class="token keyword">var</span> c <span class="token builtin">float32</span>fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ""ã€0ã€0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é›¶å€¼åˆå§‹åŒ–æœºåˆ¶å¯ä»¥ç¡®ä¿æ¯ä¸ªå£°æ˜çš„å˜é‡æ€»æ˜¯æœ‰ä¸€ä¸ªè‰¯å¥½å®šä¹‰çš„å€¼ï¼Œå› æ­¤åœ¨ Go è¯­è¨€ä¸­ä¸å­˜åœ¨æœªåˆå§‹åŒ–çš„å˜é‡ã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥ç®€åŒ–å¾ˆå¤šä»£ç ï¼Œè€Œä¸”å¯ä»¥åœ¨æ²¡æœ‰å¢åŠ é¢å¤–å·¥ä½œçš„å‰æä¸‹ç¡®ä¿è¾¹ç•Œæ¡ä»¶ä¸‹çš„åˆç†è¡Œä¸ºã€‚å¦å¤–éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå½“å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆå½“å‰ç¨‹åºä¸­å°±å¿…é¡»å»ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œå¦åˆ™æŠ¥é”™ã€‚è¿˜æ˜¯ Go çš„æ ¼è¨€ï¼šæ²¡æœ‰ä¸å¿…è¦çš„ä»£ç ã€‚</p><p>Go å£°æ˜å˜é‡éå¸¸å¤šå…ƒåŒ–ï¼Œé™¤äº†ä»¥ä¸Šå£°æ˜å˜é‡çš„æ–¹æ³•ï¼Œè¿˜æœ‰ä»¥ä¸‹å£°æ˜å˜é‡çš„æ–¹æ³•ï¼š</p><pre class="line-numbers language-go"><code class="language-go"><span class="token comment" spellcheck="true">// ä¸€ç»„å£°æ˜å¤šä¸ªï¼Œçœç•¥è¡¨è¾¾å¼</span><span class="token keyword">var</span> a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c <span class="token builtin">int</span> <span class="token comment" spellcheck="true">// 0ã€0ã€0 int int int</span><span class="token comment" spellcheck="true">// ä¸€ç»„å£°æ˜å¤šä¸ªï¼Œçœç•¥ç±»å‹</span><span class="token keyword">var</span> a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"ä½ å¥½ä¸–ç•Œ"</span><span class="token punctuation">,</span><span class="token number">3.1415</span> <span class="token comment" spellcheck="true">// int string float64</span><span class="token comment" spellcheck="true">// åˆ†ç»„å£°æ˜</span><span class="token keyword">var</span> <span class="token punctuation">(</span>    a <span class="token builtin">int</span>    b <span class="token operator">=</span> <span class="token string">"ä½ å¥½ä¸–ç•Œ"</span>    c <span class="token operator">=</span> <span class="token number">3.1415</span>    d <span class="token punctuation">,</span>e <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// int string float64 bool bool</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‡½æ•°è¿”å›å€¼åˆå§‹åŒ–å˜é‡ï¼Œæ³¨æ„ï¼š<strong>åœ¨åŒ…çº§åˆ«å£°æ˜çš„å˜é‡ä¼šåœ¨ main å…¥å£å‡½æ•°æ‰§è¡Œå‰å®Œæˆåˆå§‹åŒ–</strong>ï¼Œ<strong>å±€éƒ¨å˜é‡å°†åœ¨å£°æ˜è¯­å¥è¢«æ‰§è¡Œåˆ°çš„æ—¶å€™å®Œæˆåˆå§‹åŒ–</strong>ã€‚</p><pre class="line-numbers language-go"><code class="language-go"><span class="token keyword">var</span> f<span class="token punctuation">,</span> err <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// è¿”å›ä¸€ä¸ªæ–‡ä»¶å’Œä¸€ä¸ªé”™è¯¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="ç®€æ´å£°æ˜å˜é‡"><a href="#ç®€æ´å£°æ˜å˜é‡" class="headerlink" title="ç®€æ´å£°æ˜å˜é‡"></a>ç®€æ´å£°æ˜å˜é‡</h5><p>Go è¯­è¨€å½“ä¸­é™¤äº† var æ¥å£°æ˜å˜é‡ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ <code>:=</code>æ¥å£°æ˜å˜é‡ï¼Œæ›´åŠ çš„ç®€æ´ã€‚æˆ‘ä¹Ÿå–œæ¬¢æŠŠ <code>:=</code>å«åšéšå¼å£°æ˜å˜é‡ã€‚</p><p>è¯­æ³•ï¼šä¸èƒ½çœç•¥ä»»ä½•çš„ä¸œè¥¿ï¼Œå› ä¸ºå®ƒå·²ç»æ˜¯æœ€ç®€æ´çš„å£°æ˜æ–¹å¼äº†ã€‚è¯·è®°ä½<code>:=</code>æ˜¯ä¸€ä¸ªå˜é‡å£°æ˜è¯­å¥ï¼Œè€Œ<code>=</code>æ˜¯ä¸€ä¸ªå˜é‡èµ‹å€¼æ“ä½œã€‚</p><pre class="line-numbers language-yaml"><code class="language-yaml">å˜é‡åå­— <span class="token punctuation">:</span>= è¡¨è¾¾å¼<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®ƒä¹Ÿæ”¯æŒä¸€ç»„å¤šä¸ªå£°æ˜ï¼Œ<strong>ä½†æ˜¯æ²¡æœ‰åˆ†ç»„å£°æ˜</strong>ã€‚</p><pre class="line-numbers language-go"><code class="language-go">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"ä½ å¥½ä¸–ç•Œ"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®ƒä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°è¿”å›å€¼åˆå§‹åŒ–å˜é‡ã€‚</p><pre class="line-numbers language-go"><code class="language-go">f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// è¿”å›ä¸€ä¸ªæ–‡ä»¶å’Œä¸€ä¸ªé”™è¯¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç®€æ´å£°æ˜è¿˜æœ‰ä¸ªå¥‡å¦™çš„åœ°æ–¹ï¼Œç®€çŸ­å˜é‡å£°æ˜å·¦è¾¹çš„å˜é‡å¯èƒ½å¹¶ä¸æ˜¯å…¨éƒ¨éƒ½æ˜¯åˆšåˆšå£°æ˜çš„ã€‚å¦‚æœæœ‰ä¸€äº›å·²ç»åœ¨ç›¸åŒçš„è¯æ³•åŸŸå£°æ˜è¿‡äº†ï¼Œé‚£ä¹ˆç®€çŸ­å˜é‡å£°æ˜è¯­å¥å¯¹è¿™äº›å·²ç»å£°æ˜è¿‡çš„å˜é‡å°±åªæœ‰èµ‹å€¼è¡Œä¸ºäº†ã€‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªè¯­å¥å£°æ˜äº† in å’Œ err ä¸¤ä¸ªå˜é‡ã€‚åœ¨ç¬¬äºŒä¸ªè¯­å¥åªå£°æ˜äº†out ä¸€ä¸ªå˜é‡ï¼Œç„¶åå¯¹å·²ç»å£°æ˜çš„ err è¿›è¡Œäº†èµ‹å€¼æ“ä½œï¼Œvar å¹¶ä¸å¯ä»¥æœ‰ç±»ä¼¼çš„æ“ä½œã€‚<strong>ä½†æ˜¯ç®€çŸ­å˜é‡å£°æ˜è¯­å¥ä¸­å¿…é¡»è‡³å°‘è¦å£°æ˜ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œä¸‹é¢çš„ä»£ç å°†ä¸èƒ½ç¼–è¯‘é€šè¿‡</strong>ã€‚</p><pre class="line-numbers language-go"><code class="language-go">in<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>infile<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// ...</span>out<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>outfile<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h5 id="å®ƒä»¬çš„ä½œç”¨åŸŸ"><a href="#å®ƒä»¬çš„ä½œç”¨åŸŸ" class="headerlink" title="å®ƒä»¬çš„ä½œç”¨åŸŸ"></a>å®ƒä»¬çš„ä½œç”¨åŸŸ</h5><p><code>var</code> å£°æ˜å¯ä»¥åœ¨åŒ…å†…éƒ¨å£°æ˜ï¼ˆ import ä¸‹ï¼‰ï¼Œç®€æ´å£°æ˜ä¸å¯ä»¥åœ¨åŒ…å†…éƒ¨å£°æ˜ï¼ˆ import ä¸‹ï¼‰ã€‚<code>var</code> åœ¨åŒ…å†…éƒ¨å£°æ˜çš„å˜é‡å…¨å±€å¯ä»¥ä½¿ç”¨ï¼Œè€Œç®€æ´å£°æ˜åªæœ‰åœ¨å…¶å£°æ˜çš„å†…éƒ¨ä½¿ç”¨ã€‚</p><pre class="line-numbers language-go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment" spellcheck="true">// å…¨å±€å¯ä»¥ä½¿ç”¨</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    b <span class="token operator">:=</span> <span class="token number">100</span> <span class="token comment" spellcheck="true">// åªèƒ½åœ¨ main å‡½æ•°å½“ä¸­ä½¿ç”¨</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>var</code> å£°æ˜å’Œç®€æ´å£°æ˜ï¼Œå¦‚æœæ˜¯åœ¨ç›¸åŒçš„ä½œç”¨åŸŸä¸‹ä»–ä»¬ä¸èƒ½å£°æ˜ç›¸åŒå˜é‡ï¼Œå¦‚åœ¨ç›¸åŒçš„å‡½æ•°ä½“å½“ä¸­ã€‚å¦‚æœ var æ˜¯åœ¨åŒ…å†…éƒ¨å£°æ˜ï¼Œåœ¨å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨ç®€æ´å£°æ˜ä¸€ä¸ªç›¸åŒçš„å˜é‡ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±æ˜¯èµ‹å€¼ã€‚<strong>ç›¸åŒä½œç”¨åŸŸä¸‹ä¸èƒ½å­˜åœ¨äºŒä¸ªç›¸åŒçš„å˜é‡ï¼</strong></p><pre class="line-numbers language-go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">100</span>    a <span class="token operator">:=</span> <span class="token number">10000</span> <span class="token comment" spellcheck="true">// é”™è¯¯å£°æ˜</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// ...</span><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token string">"fmt"</span><span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment" spellcheck="true">// å…¨å±€å˜é‡</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    a <span class="token operator">:=</span> <span class="token number">100000</span> <span class="token comment" spellcheck="true">// å±€éƒ¨å˜é‡ï¼Œä»–ä»¬ä½œç”¨åŸŸå®Œå…¨ä¸ä¸€æ ·ï¼Œæ­¤æ—¶æ­£ç¡®å£°æ˜</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h4><p>é¦–å…ˆè¦äº†è§£ï¼Œå€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’ï¼Œè¿™äºŒä¸ªçš„åŒºåˆ«ã€‚</p><p>å€¼ä¼ é€’åˆç§°æ‹·è´ä¼ å€¼ï¼Œå°±æ˜¯å°†ä¸€ä¸ªå˜é‡çš„å€¼å¤åˆ¶ä¸€ä¸ªç»™å¦å¤–ä¸€ä¸ªå˜é‡ã€‚æ­¤æ—¶äºŒä¸ªå˜é‡çš„å€¼ç›¸åŒï¼Œä½†æ˜¯æ­¤æ—¶çš„äºŒä¸ªå˜é‡åˆæ˜¯äº’ç›¸ç‹¬ç«‹çš„å­˜åœ¨ï¼Œæ“ä½œå…¶ä¸­ä»»ä½•ä¸€ä¸ªå˜é‡ï¼Œå¦å¤–ä¸€ä¸ªå˜é‡éƒ½ä¸ä¼šå—åˆ°å…¶å½±å“ã€‚</p><pre class="line-numbers language-go"><code class="language-go">a <span class="token operator">:=</span> <span class="token number">100</span>b <span class="token operator">:=</span> aa<span class="token operator">++</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ç»“æœï¼ša = 101 ï¼Œb = 100</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ç»“æœå¯ä»¥å‘ç°ä»–ä»¬çš„å†…å­˜åœ°å€å®Œå…¨ä¸ä¸€æ ·ï¼Œéƒ½æ˜¯ç‹¬ç«‹çš„å­˜åœ¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŒ‡é’ˆï¼ˆå¼•ç”¨ä¼ é€’ï¼‰å°±æ˜¯å°†ä¸€ä¸ªæ•°æ®çš„å†…å­˜ç©ºé—´åœ°å€æ‹·è´ä¸€ä¸ªä¼ é€’ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œæ­¤æ—¶äºŒä¸ªå˜é‡çš„å†…å­˜ç©ºé—´åœ°å€éƒ½æŒ‡å‘ä¸€ä¸ªåœ°å€ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªå€¼å¦å¤–ä¸€ä¸ªå€¼ä¹Ÿä¼šå—åˆ°å½±å“è€Œæ”¹å˜ã€‚åœ¨å˜é‡å‰é¢åŠ ä¸Šä¸€ä¸ª<code>&amp;</code>ç¬¦å·å°±æ˜¯å–è¿™ä¸ªå˜é‡çš„å†…å­˜åœ°å€ã€‚å¦‚éœ€è¦ä½¿ç”¨æŒ‡é’ˆï¼ŒGo å½“éå¸¸ç®€å•æ‰§è¡Œè¦åœ¨å˜é‡å‰é¢åŠ ä¸Š <code>*</code>å³å¯è¡¨ç¤ºæŒ‡é’ˆï¼Œå¦å¤– Go çš„æŒ‡é’ˆä¸æ”¯æŒæŒ‡é’ˆçš„è¿ç®—ï¼</p><pre class="line-numbers language-go"><code class="language-go">a <span class="token operator">:=</span> <span class="token number">100</span>b <span class="token operator">:=</span> <span class="token operator">&amp;</span>afmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token operator">*</span>b<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ç»“æœ a = 100ï¼Œb = 100</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ç»“æœå¯ä»¥å‘ç°ä»–ä»¬çš„å†…å­˜åœ°å€å®Œå…¨ä¸€è‡´</span><span class="token comment" spellcheck="true">// ...</span><span class="token operator">*</span>b <span class="token operator">=</span> <span class="token operator">*</span>b <span class="token operator">+</span> <span class="token number">100</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token operator">*</span>b<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ç»“æœ a = 200ï¼Œb = 200</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ç»“æœå¯ä»¥å‘ç°ä»–ä»¬çš„å†…å­˜åœ°å€å®Œå…¨ä¸€è‡´</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»»ä½•ç±»å‹çš„æŒ‡é’ˆçš„é›¶å€¼éƒ½æ˜¯ nilã€‚å¦‚æœ p æŒ‡å‘æŸä¸ªæœ‰æ•ˆå˜é‡ï¼Œé‚£ä¹ˆ<code>p != nil</code>æµ‹è¯•ä¸ºçœŸã€‚æŒ‡é’ˆä¹‹é—´ä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œç›¸ç­‰æµ‹è¯•çš„ï¼Œåªæœ‰å½“å®ƒä»¬æŒ‡å‘åŒä¸€ä¸ªå˜é‡æˆ–å…¨éƒ¨æ˜¯ nil æ—¶æ‰ç›¸ç­‰ã€‚</p><pre class="line-numbers language-go"><code class="language-go"><span class="token keyword">var</span> x<span class="token punctuation">,</span> y <span class="token builtin">int</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x <span class="token operator">==</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>x <span class="token operator">==</span> <span class="token operator">&amp;</span>y<span class="token punctuation">,</span> <span class="token operator">&amp;</span>x <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// "true false false"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>Go è¯­è¨€å½“ä¸­ï¼Œè¿”å›å‡½æ•°ä¸­å±€éƒ¨å˜é‡ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œä½†æ¯æ¬¡è¿”å›çš„ç»“æœéƒ½ä¸åŒã€‚</p><pre class="line-numbers language-go"><code class="language-go"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">b</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>    a <span class="token operator">:=</span> <span class="token number">1</span>    <span class="token keyword">return</span> <span class="token operator">&amp;</span>a<span class="token punctuation">}</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å­¦ä¹ å½“ä¸­â€¦</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨ Github + PicGo + JsDelivr æ­å»ºå…è´¹é«˜é€Ÿå›¾åºŠ</title>
      <link href="/2020/04/20/%E6%90%AD%E5%BB%BA%E5%85%8D%E8%B4%B9%E7%9A%84%E5%9B%BE%E5%BA%8A/"/>
      <url>/2020/04/20/%E6%90%AD%E5%BB%BA%E5%85%8D%E8%B4%B9%E7%9A%84%E5%9B%BE%E5%BA%8A/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>ä»¥å‰ä½¿ç”¨çš„å¾®åšå›¾åºŠï¼Œæˆ‘ä½¿ç”¨ Manjaro 18 ç‰ˆæœ¬çš„æ—¶å€™ Chrome æ’ä»¶å¥½å¥½çš„å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯æœ‰ä¸€æ¬¡é‡æ–°è£…äº†ä¸€æ¬¡ç³»ç»Ÿåå‡‰äº†ï¼Œä¹Ÿæ‰¾ä¸åˆ°è§£å†³æ–¹æ³•ï¼Œæ”¾å¼ƒäº†ã€‚SM.SM è™½ç„¶å…è´¹ä½¿ç”¨ï¼Œä¹Ÿæ˜¯ç°åœ¨ä¸€ç›´ä½¿ç”¨çš„å›¾åºŠï¼Œä½†æ˜¯æœ€è¿‘å‡ºæ¥äº†æ”¶è´¹æ¨¡å¼ï¼Œçªç„¶æ„Ÿè§‰é€Ÿåº¦ä¸Šå¥½åƒæ…¢äº†é‚£ä¹ˆç‚¹ï¼Œä¹Ÿå¯èƒ½æ˜¯å¿ƒé‡Œä½œç”¨å§ã€‚åˆšå¥½ä¹Ÿçœ‹è§ä¸€ç¯‡æ–‡ç« åˆ©ç”¨ Github åšä»“åº“ï¼Œåœ¨é…åˆç€ PicGo ä½¿ç”¨ï¼Œæ„Ÿè§‰ä¸Šæœ‰ä¸œè¥¿å•Šï¼Œæ¯•ç«Ÿ Github æ˜¯å…è´¹çš„è€Œä¸”ä¸é™å¤§å°ï¼Œè¯´ç€èµ°èµ·ï¼</p><h3 id="åˆ›å»ºä»“åº“"><a href="#åˆ›å»ºä»“åº“" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h3><h4 id="1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“"><a href="#1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“" class="headerlink" title="1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“"></a>1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“</h4><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20200421144549.png" alt></p><h4 id="2ã€è®¾ç½®æˆæƒ-Token"><a href="#2ã€è®¾ç½®æˆæƒ-Token" class="headerlink" title="2ã€è®¾ç½®æˆæƒ Token"></a>2ã€è®¾ç½®æˆæƒ Token</h4><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20200421144732.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20200421144810.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20200421144831.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20200421145553.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20200421145658.png" alt></p><h3 id="PicGo"><a href="#PicGo" class="headerlink" title="PicGo"></a>PicGo</h3><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200421153900.png" alt></p><p>æ ¼å¼ï¼š</p><ul><li><p>è®¾å®šä»“åº“åï¼šåˆšæ‰æ–°åˆ›å»ºçš„ä»“åº“</p></li><li><p>è®¾å®šåˆ†æ”¯åï¼šä¸€èˆ¬é»˜è®¤ä½¿ç”¨ master å½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©åˆ«çš„åˆ†æ”¯</p></li><li><p>è®¾å®š Token ï¼šç¬¬äºŒæ­¥æ“ä½œæ‰€å¾—çš„æˆæƒ Token ï¼Œä»–æ˜¯æ¥è°ƒç”¨ Github æ¥å£æ‰€ç”¨</p></li><li><p>æŒ‡å®šå­˜å‚¨è·¯å¾„ï¼šå¯ä»¥è‡ªè¡Œåœ¨ä»“åº“ä¸‹é¢åˆ›å»ºæ–‡ä»¶ç›®å½•ï¼Œç„¶åæŒ‡å®šè‡ªå·±æƒ³å‚¨å­˜çš„ç›®å½•ï¼Œä¹Ÿå¯ä»¥ä¸é€‰æ‹©å­˜å‚¨ç›®å½•</p></li><li><p>è®¾å®šè‡ªå®šä¹‰çš„åŸŸåï¼šåˆ©ç”¨ <strong>jsDelivr</strong> æ¥å…è´¹åŠ é€Ÿæˆ‘ä»¬çš„è®¿é—®ï¼Œæ ¼å¼æ˜¯ï¼š<a href="https://cdn.jsdelivr.net/gh/Githubç”¨æˆ·å/åˆ›å»ºçš„ä»“åº“å" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/Githubç”¨æˆ·å/åˆ›å»ºçš„ä»“åº“å</a></p></li></ul><blockquote><p>å‚è€ƒåœ°å€ï¼š<br><a href="https://www.itrhx.com/2019/08/01/A27-image-hosting/" target="_blank" rel="noopener">https://www.itrhx.com/2019/08/01/A27-image-hosting/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Manjaro æ‰“é€ èˆ’é€‚çš„æ¡Œé¢å¼€å‘ç¯å¢ƒ</title>
      <link href="/2020/04/18/Manjaro/"/>
      <url>/2020/04/18/Manjaro/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>èåœé’èœå„æœ‰æ‰€çˆ±ï¼ŒLinux æ¡Œé¢å¯ä»¥è¯´å¸¸å¹´æ˜¯ä¸€ä¸ªå¤§ä¹±æ–—çš„ç¯å¢ƒï¼Œè°éƒ½ä¸æœè°ï¼Œä¹Ÿæ²¡æœ‰äººèƒ½ç«™å‡ºæ¥ç»Ÿä¸€å¤©ä¸‹ï¼Œä¹Ÿä¸å¯èƒ½ç»Ÿä¸€ï¼Œæ¯•ç«Ÿå¼€æºè‡ªç”±æ˜¯ Linux çš„å®—æ—¨ï¼è¿™ä¹Ÿç®— Linux çš„é­…åŠ›ä¹‹ä¸€å§ï¼ï¼ï¼ä¸åŒäº Windows å’Œ OS X çš„è½¯ä»¶ç”Ÿæ€ï¼ŒLinux ç¡®å®å¼±äº†é‚£ä¹ˆ[ä¸€ç‚¹]ï¼Œæˆ‘è§‰å¾—è¿™ä¹ˆ[ä¸€ç‚¹]çš„èŒƒå›´åº”è¯¥æ˜¯æˆ‘ä»¬å›½äººæ—¥å¸¸ç”¨äº›çš„ä¸€äº›ç”Ÿæ´»å¨±ä¹è½¯ä»¶ï¼Œä¸è¿‡åœ¨æˆ‘æ—¥å¸¸çš„å¼€å‘å’Œç”Ÿæ´»å¨±ä¹ä¸‹ï¼ŒLinux çš„è½¯ä»¶å®Œå…¨å¤Ÿç”¨ï¼Œå½“ç„¶å¦‚æœç©æ¸¸æˆçš„è¯é‚£ä¹ˆ Windows æ˜¯ä¸äºŒçš„é€‰æ‹©ã€‚</p><p><strong>Manjaro Linux</strong> æ˜¯åŸºäº <a href="https://zh.wikipedia.org/wiki/Arch_Linux" target="_blank" rel="noopener">Arch Linux</a> çš„ Linux å‘è¡Œç‰ˆï¼Œä½¿ç”¨ Xfce ã€KDE Plasma ã€GNOME ä½œä¸ºé»˜è®¤æ¡Œé¢ç¯å¢ƒï¼Œå½“ç„¶é™¤äº†è¿™ä¸‰ä¸ªä»¥å¤–è¿˜æœ‰ä¼—å¤šçš„ç¤¾åŒºç‰ˆæœ¬æä¾›é€‰æ‹©ã€‚Manjaro å’Œ Arch ä¸€æ ·ï¼Œéƒ½é‡‡ç”¨æ»šåŠ¨æ›´æ–°æ¨¡å¼ã€‚å…¶ç›®æ ‡æ˜¯ä¸º PC æä¾›æ˜“äºä½¿ç”¨çš„è‡ªç”±çš„æ“ä½œç³»ç»Ÿã€‚</p><p>ä¸ºä»€ä¹ˆä¼šé€‰æ‹© Manjaro è¿™ä¸ªå‘è¡Œç‰ˆæœ¬å‘¢ï¼Ÿ</p><ol><li>æ»šåŠ¨å‡çº§</li><li>è‡ªåŠ¨ç¡¬ä»¶æ£€æµ‹å®‰è£…ï¼Œæœ€æ–°çš„æ¬¾ç”µè„‘æ˜¾å¡å¯èƒ½æ— æ³•å…¼å®¹ï¼ˆåŒäº‹æœ€æ–°æ¬¾è”æƒ³å°æ–°æ— æ³•å…¼å®¹ï¼‰</li><li>å…ˆè¿›çš„åŒ…ç®¡ç†ã€æœ€å¤šè½¯ä»¶æ”¯æŒçš„ Linux å‘è¡Œç‰ˆæœ¬</li><li>è¶…çº§é«˜åº¦ç”¨æˆ·è‡ªå®šä¹‰ã€æ¡Œé¢ã€ä¸»é¢˜ã€ç•Œé¢ã€æ–‡ä»¶ã€æ“ä½œã€æ˜¾ç¤ºç­‰ç­‰ï¼Œå…¨éƒ¨æ”¾æƒç»™ç”¨æˆ·è‡ªå·±æ“ä½œ</li><li>è½¯ä»¶åŒ…ç‰ˆæœ¬åŒæ­¥å¿«ï¼ŒåŸºæœ¬å‘è¡Œè½¯ä»¶ç‰ˆæœ¬æŒå¹³</li><li>è¶…çº§ç¨³å®šï¼Œå…¼å®¹æ€§å¥½</li><li>Linux æ¡Œé¢ç³»ç»Ÿæ’è¡Œæ¦œï¼š<a href="https://distrowatch.com/" target="_blank" rel="noopener">https://distrowatch.com/</a></li></ol><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/TWKqyaZzEUmnOR7.webp" alt></p><h3 id="åˆ‡æ¢æº"><a href="#åˆ‡æ¢æº" class="headerlink" title="åˆ‡æ¢æº"></a>åˆ‡æ¢æº</h3><h4 id="è‡ªåŠ¨é€‰æ‹©æºï¼ŒManjaro-å®˜æ–¹æº"><a href="#è‡ªåŠ¨é€‰æ‹©æºï¼ŒManjaro-å®˜æ–¹æº" class="headerlink" title="è‡ªåŠ¨é€‰æ‹©æºï¼ŒManjaro å®˜æ–¹æº"></a>è‡ªåŠ¨é€‰æ‹©æºï¼ŒManjaro å®˜æ–¹æº</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># è‡ªåŠ¨é€‰æ‹©æº</span><span class="token function">sudo</span> pacman-mirrors -i -c China -m rank <span class="token comment" spellcheck="true"># å¼ºåˆ¶æ›´æ–°æº</span><span class="token function">sudo</span> pacman -Syy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/eSAmPTD4g7nRCwI.webp" alt></p><h4 id="æ‰‹åŠ¨é…ç½®è½¯ä»¶æºï¼Œéå®˜æ–¹æº-Arch-Linux-å›½å†…æºï¼Œä¸­ç§‘å¤§æº"><a href="#æ‰‹åŠ¨é…ç½®è½¯ä»¶æºï¼Œéå®˜æ–¹æº-Arch-Linux-å›½å†…æºï¼Œä¸­ç§‘å¤§æº" class="headerlink" title="æ‰‹åŠ¨é…ç½®è½¯ä»¶æºï¼Œéå®˜æ–¹æº Arch Linux å›½å†…æºï¼Œä¸­ç§‘å¤§æº"></a>æ‰‹åŠ¨é…ç½®è½¯ä»¶æºï¼Œéå®˜æ–¹æº Arch Linux å›½å†…æºï¼Œä¸­ç§‘å¤§æº</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ é…ç½®åˆ°æœ«å°¾</span><span class="token function">sudo</span> vim /etc/pacman.conf<span class="token punctuation">[</span>archlinuxcn<span class="token punctuation">]</span>SigLevel <span class="token operator">=</span> Optional TrustedOnlyServer <span class="token operator">=</span> https://mirrors.ustc.edu.cn/archlinuxcn/<span class="token variable">$arch</span><span class="token comment" spellcheck="true"># å¯¼å…¥ GPG Key</span><span class="token function">sudo</span> pacman -Syy <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> pacman -S archlinuxcn-keyring<span class="token comment" spellcheck="true"># å¼ºåˆ¶æ›´æ–°åŒ…æ•°æ®ï¼ŒåŒæ—¶æ›´æ–°è½¯ä»¶</span><span class="token function">sudo</span> pacman -Syyu <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¸¸ç”¨åŒ…ç®¡ç†å‘½ä»¤"><a href="#å¸¸ç”¨åŒ…ç®¡ç†å‘½ä»¤" class="headerlink" title="å¸¸ç”¨åŒ…ç®¡ç†å‘½ä»¤"></a>å¸¸ç”¨åŒ…ç®¡ç†å‘½ä»¤</h3><table><thead><tr><th align="center">å‘½ä»¤</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">pacman -Syy</td><td align="center">å¼ºåˆ¶æ›´æ–°æº</td></tr><tr><td align="center">pacman -Syyu</td><td align="center">å¼ºåˆ¶æ›´æ–°åŒ…æ•°æ®ï¼ŒåŒæ—¶æ›´æ–°è½¯ä»¶</td></tr><tr><td align="center">pacman -S package</td><td align="center">å®‰è£…åŒ…</td></tr><tr><td align="center">pacman -Ss package</td><td align="center">æŸ¥è¯¢åŒ…</td></tr><tr><td align="center">pacman -Qs package</td><td align="center">æŸ¥è¯¢å·²å®‰è£…åŒ…</td></tr><tr><td align="center">pacman -U package</td><td align="center">å®‰è£…æœ¬åœ°åŒ…</td></tr><tr><td align="center">pacman -U package_url</td><td align="center">å®‰è£…è¿œç¨‹åŒ…</td></tr><tr><td align="center">pacman -R package</td><td align="center">åˆ é™¤åŒ…ï¼Œä¸ä¼šåˆ é™¤ä¾èµ–</td></tr><tr><td align="center">pacman -Rs package</td><td align="center">åˆ é™¤åŒ…ï¼Œå¹¶åˆ é™¤ä¾èµ–</td></tr><tr><td align="center">pacman -Rsc package</td><td align="center">åˆ é™¤åŒ…ï¼Œå¹¶åˆ é™¤ä¾èµ–è¿™ä¸ªåŒ…çš„æ‰€æœ‰ç¨‹åºï¼ˆæ…ç”¨ï¼‰</td></tr><tr><td align="center">pacman -Sc</td><td align="center">æ¸…ç†æœªå®‰è£…åŒ…</td></tr><tr><td align="center">pacman -Scc</td><td align="center">æ¸…ç†åŒ…ç¼“å­˜</td></tr><tr><td align="center">yaourt -S package</td><td align="center">å®‰è£… AUR åŒ…</td></tr><tr><td align="center">yaourt -Ss package</td><td align="center">æŸ¥çœ‹ AUR åŒ…</td></tr></tbody></table><blockquote><p>Manjaro åŒ…çš„ç®¡ç†æä¾›äº†å¼ºå¤§çš„ GUIï¼Œå‘½ä»¤çš„ç”¨é€”å…¶å®å¹¶ä¸å¤§ï¼Œä½†æ˜¯ä¹Ÿè¦äº†è§£ä¸€ä¸‹ã€‚</p></blockquote><h3 id="æˆå“å±•ç¤º"><a href="#æˆå“å±•ç¤º" class="headerlink" title="æˆå“å±•ç¤º"></a>æˆå“å±•ç¤º</h3><p><img src="https://i.loli.net/2019/10/11/GiH5keFqWfunK8c.jpg" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_plasmashell_20200502192313.gif" alt></p><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>åˆå§‹åŒ–ç³»ç»Ÿï¼Œå…¶å®å°±æ˜¯å®‰è£…é©±åŠ¨å’Œè¯­è¨€åŒ…äº†ï¼Œéƒ½æ˜¯å‚»ç“œå¼çš„ä¸€é”®å®‰è£…ï¼Œä½†æ˜¯å‰ææ¡ä»¶æ˜¯å¿…é¡»ç³»ç»Ÿä¸ºæœ€æ–°çš„çŠ¶æ€ï¼Œå¦‚æœ‰æœªæ›´æ–°éœ€è¦æ›´æ–°åå†æ“ä½œã€‚æ‰¾åˆ° <code>æ·»åŠ /åˆ é™¤è½¯ä»¶</code>æŸ¥çœ‹æ˜¯å¦æœ‰æ›´æ–°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/2020-05-01_20-50.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/2020-05-01_20-50_1.png" alt></p><p>æ‰¾åˆ°<code>ç³»ç»Ÿè®¾ç½®-&gt;ç¡¬ä»¶è®¾å®š-&gt;è¯­è¨€åŒ…</code>ã€‚æ³¨ï¼šå°±ç®—ä¸å®‰è£…é©±åŠ¨å’Œè¯­è¨€åŒ…ï¼Œä¹Ÿä¸ä¼šå½±å“æ­£å¸¸ä½¿ç”¨ã€‚å®Œæˆåæ³¨é”€ä¸€ä¸‹ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501205732.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501210030.png" alt>    </p><h3 id="ç¾åŒ–æ¡Œé¢"><a href="#ç¾åŒ–æ¡Œé¢" class="headerlink" title="ç¾åŒ–æ¡Œé¢"></a>ç¾åŒ–æ¡Œé¢</h3><h4 id="å®‰è£…ä¸»é¢˜"><a href="#å®‰è£…ä¸»é¢˜" class="headerlink" title="å®‰è£…ä¸»é¢˜"></a>å®‰è£…ä¸»é¢˜</h4><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501210828.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501211125.png" alt></p><h4 id="Plasma-æ ·å¼"><a href="#Plasma-æ ·å¼" class="headerlink" title="Plasma æ ·å¼"></a>Plasma æ ·å¼</h4><p>Plasma å°±æ˜¯ä»»åŠ¡æ çš„æ ·å¼ï¼Œæ“ä½œè·Ÿä¸»é¢˜å®‰è£…ä¸€è‡´ï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„æ ·å¼æ¥ï¼Œåœ¨å®‰è£…ä¸»é¢˜å®Œæˆåï¼ŒPlasma æ ·å¼ä½¿ç”¨çš„å°±æ˜¯åˆšå®‰è£…ä¸»é¢˜çš„æ ·å¼ï¼Œä¹‹åçš„ä¸€ç³»åˆ—æ“ä½œåŸºæœ¬éƒ½æ˜¯è·Ÿå®‰è£…ä¸»é¢˜ä¸€æ ·ã€‚</p><h4 id="åº”ç”¨ç¨‹åºé£æ ¼"><a href="#åº”ç”¨ç¨‹åºé£æ ¼" class="headerlink" title="åº”ç”¨ç¨‹åºé£æ ¼"></a>åº”ç”¨ç¨‹åºé£æ ¼</h4><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501212014.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501212128.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501212711.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501212846.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501213551.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_systemsettings5_20200501214032.gif" alt></p><blockquote><p>ç¨‹åºçš„é£æ ¼å®‰è£…çš„è¯éƒ½é€‰æ‹©å®‰è£… GTK 3 ä¸»é¢˜ï¼Œå¦å¤–æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œé€‰æ‹©ä½¿ç”¨ GTK ä¸»é¢˜æ—¶è¦å’Œä¸»é¢˜åŒ¹é…ï¼Œåˆ«ä¸»é¢˜é€‰çš„é»‘è‰²ï¼ŒGTK é€‰ç™½è‰²é‚£ä¹ˆå°±ä¼šå‡ºé—®é¢˜ï¼Œæ‰€ä»¥ä¸‹è½½å¥½ä»¥åå…ˆé¢„è§ˆä¸€ä¸‹ï¼</p></blockquote><h4 id="é¢œè‰²"><a href="#é¢œè‰²" class="headerlink" title="é¢œè‰²"></a>é¢œè‰²</h4><p>è½¯ä»¶å’Œä¸»é¢˜çš„é¢œè‰²ï¼Œæ“ä½œè·Ÿä¸»é¢˜å®‰è£…ä¸€è‡´ï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„æ ·å¼æ¥ï¼Œåœ¨å®‰è£…ä¸»é¢˜å®Œæˆåï¼Œä½¿ç”¨çš„å°±æ˜¯åˆšå®‰è£…ä¸»é¢˜çš„é¢œè‰²ã€‚</p><h4 id="å›¾æ ‡"><a href="#å›¾æ ‡" class="headerlink" title="å›¾æ ‡"></a>å›¾æ ‡</h4><p>è½¯ä»¶å’Œä¸»é¢˜çš„å›¾æ ‡ï¼Œæ“ä½œè·Ÿä¸»é¢˜å®‰è£…ä¸€è‡´ï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„æ ·å¼æ¥ï¼Œåœ¨å®‰è£…ä¸»é¢˜å®Œæˆåï¼Œä½¿ç”¨çš„å°±æ˜¯åˆšå®‰è£…ä¸»é¢˜çš„å›¾æ ‡ã€‚</p><h4 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h4><p>ä¸ªäººæ„Ÿè§‰åˆå§‹åŒ–çš„å­—ä½“å·²ç»å¾ˆå¥½ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„çˆ±å¥½æ¥è‡ªå®šä¹‰ï¼Œæ€»ä¹‹ä¸€å¥è¯ï¼Œè‡ªå·±æ€ä¹ˆè§‰å¾—èˆ’æœæ€ä¹ˆæ¥ï¼</p><h4 id="å…‰æ ‡"><a href="#å…‰æ ‡" class="headerlink" title="å…‰æ ‡"></a>å…‰æ ‡</h4><p>æ“ä½œè·Ÿä¸»é¢˜å®‰è£…ä¸€è‡´ï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„æ ·å¼æ¥ï¼Œåœ¨å®‰è£…ä¸»é¢˜å®Œæˆåï¼Œä½¿ç”¨çš„å°±æ˜¯åˆšå®‰è£…ä¸»é¢˜çš„å›¾æ ‡ã€‚</p><h4 id="çª—å£ç©ºé—´è¡Œä¸º"><a href="#çª—å£ç©ºé—´è¡Œä¸º" class="headerlink" title="çª—å£ç©ºé—´è¡Œä¸º"></a>çª—å£ç©ºé—´è¡Œä¸º</h4><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_systemsettings5_20200501220724.gif" alt></p><p>æ•ˆæœå›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_plasmashell_20200501221008.gif" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501224526.png" alt></p><p>æ•ˆæœå›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_plasmashell_20200501224734.gif" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501224941.png" alt></p><p>æ•ˆæœå›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_plasmashell_20200501225058.gif" alt>    </p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501230158.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501230314.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501230618.png" alt></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> pacman -S kvantummanager<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_kvantummanager_20200502003746.gif" alt></p><blockquote><p>åŸºæœ¬çš„å·®ä¸å¤šå°±è¿™è¿™æ ·ï¼Œå½“ç„¶è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½è¿™å°±æ˜¯æ¨èä¸€ä¸‹ï¼Œç©ºé—²æ—¶å¯ä»¥è‡ªè¡Œç ”ç©¶ä¸€ä¸‹ï¼è¿˜æ˜¯é‚£å¥è¯ï¼Œè‡ªå·±è§‰å¾—æ€ä¹ˆèˆ’æœï¼Œé‚£ä¹ˆå°±æ€ä¹ˆæ¥ï¼Œè¿™é‡Œå°±æ˜¯æä¾›ä¸€ä¸‹å‚è€ƒï¼</p></blockquote><h3 id="ä¸­æ–‡è¾“å…¥æ³•"><a href="#ä¸­æ–‡è¾“å…¥æ³•" class="headerlink" title="ä¸­æ–‡è¾“å…¥æ³•"></a>ä¸­æ–‡è¾“å…¥æ³•</h3><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/2020-05-01_20-17.png" alt></p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/2020-05-01_20-17_1.png" alt></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># å®‰è£…æœç‹—è¾“å…¥æ³•ï¼Œä»¥å‰ä¸æ¨èæœç‹—è¾“å…¥æ³•çš„ï¼Œä½†æ˜¯æœ€è¿‘ä¼˜éº’éºŸæ‰“åŒ…çš„æœç‹—è¾“å…¥æ³•è¿˜æ˜¯ä¸é”™çš„</span><span class="token comment" spellcheck="true"># é“¾æ¥: https://pan.baidu.com/s/1b0gHa6XBvkhz_8k6iVdQgQ  å¯†ç : gvjv</span><span class="token function">sudo</span> pacman -U fcitx-sogouimebs-2.0.0.38-1-x86_64.pkg.tar.xz<span class="token comment" spellcheck="true"># è®¾ç½®ä¸­æ–‡è¾“å…¥ï¼Œæ³¨é”€</span><span class="token function">sudo</span> vim /etc/profile<span class="token function">export</span> GTK_IM_MODULE<span class="token operator">=</span>fcitx<span class="token function">export</span> QT_IM_MODULE<span class="token operator">=</span>fcitx<span class="token function">export</span> XMODIFIERS<span class="token operator">=</span>@im<span class="token operator">=</span>fcitx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_plasmashell_20200501203809.png" alt></p><h4 id="Plasma"><a href="#Plasma" class="headerlink" title="Plasma"></a>Plasma</h4><p>æ·»åŠ éƒ¨ä»¶æ¨èï¼šéƒ¨ä»¶ä¹Ÿå¯ä»¥åœ¨çº¿å®‰è£…ï¼Œè·Ÿä¸Šé¢æ“ä½œåŸºæœ¬ä¸€è‡´</p><ul><li>application title å¯ä»¥å±•ç¤ºè½¯ä»¶å›¾ç‰‡ä¸è½¯ä»¶åç§°ï¼Œå¦‚æ²¡æœ‰è¯·å®‰è£…</li><li>å…¨å±€èœå• è·Ÿ OS X çš„å…¨å±€èœå•ä¸€æ ·è€Œä¸”åŸç”Ÿï¼Œä½†æœ‰äº›è½¯ä»¶ä¸æ”¯æŒ</li><li>æ•°å­—æ—¶é’Ÿ æ—¥æœŸæ—¶é—´å±•ç¤º</li><li>ä»»åŠ¡è°ƒåº¦ è™šæ‹Ÿå·¥ä½œæ¡Œé¢ï¼Œä¸åŒæ¡Œé¢ç”¨ä¸åŒçš„è½¯ä»¶ï¼Œè§†è§‰æ•ˆæœå¥½</li><li>ç³»ç»Ÿæ‰˜ç›˜ å±äºä¸€ä¸ªå¿…å¤‡çš„éƒ¨ä»¶</li><li>åº”ç”¨ç¨‹åºé¢æ¿ å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç¨‹åºå’Œä¸€äº›å¿«æ·çš„æ“ä½œï¼Œéå¸¸æ–¹ä¾¿</li></ul><p>å…¨å±€èœå•è¿˜éœ€è¦å®‰è£…ä¸€ä¸ªæ‰©å±•</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> pacman -S appmenu-gtk-module<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¼”ç¤ºå›¾ï¼šå½“é€‰æ‹©éƒ¨ä»¶åï¼Œé¼ æ ‡å³é”®ç‚¹ä¸€ä¸‹å³å¯é€‰æ‹©éƒ¨ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_plasmashell_20200501233657.gif" alt></p><p>æ’ç‰ˆåŠä¸€äº›æ“ä½œæ¼”ç¤ºå›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_plasmashell_20200501234328.gif" alt></p><blockquote><p>ä»»åŠ¡æ åŸºæœ¬è¿™å‡ ä¸ªéƒ¨ä»¶æˆ‘æ„Ÿè§‰å®Œå…¨å¤Ÿç”¨äº†ï¼Œéƒ¨ä»¶å¤ªå¤šäº†ï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢è‡ªå·±åˆé€‚çš„æ¥ï¼Œä»»åŠ¡æ æ¨èä½¿ç”¨çª—å£å¯ä»¥è¦†ç›–ï¼Œè¿™æ ·çœ‹ä¸œè¥¿æ—¶è‡ªåŠ¨éšè—çœ‹èµ·æ¥ç®€æ´ä¸€äº›ï¼Œä»»åŠ¡æ çš„ä»€ä¹ˆé«˜åº¦ã€æ’ç‰ˆã€ä½ç½®å’Œéƒ¨ä»¶åœ¨åºŸè¯ä¸€ä¸‹ï¼ŒæŒ‰ç…§è‡ªå·±å–œæ¬¢çš„æ¥ï¼</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> pacman -S latte-dock<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¼”ç¤ºå›¾ï¼šDocky ä¹Ÿå¯ä»¥æ·»åŠ éƒ¨ä»¶ï¼Œå¯ä»¥å½“ä»»åŠ¡æ ä½¿ç”¨</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_plasmashell_20200502000920.gif" alt></p><h3 id="è½¯ä»¶æ¨è"><a href="#è½¯ä»¶æ¨è" class="headerlink" title="è½¯ä»¶æ¨è"></a>è½¯ä»¶æ¨è</h3><h4 id="ç»ˆç«¯"><a href="#ç»ˆç«¯" class="headerlink" title="ç»ˆç«¯"></a>ç»ˆç«¯</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ·±åº¦ç»ˆç«¯ï¼ŒçœŸå¿ƒä¸é”™</span><span class="token function">sudo</span> pamcan -S deepin-terminal<span class="token comment" spellcheck="true"># ç³»ç»Ÿè‡ªå¸¦ç»ˆç«¯ å¿«æ·é”®ï¼šctrl + alt + t å‘¼å‡ºï¼Œctrl + shift + t å¯ä»¥æ–°å»ºçª—å£</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20200502010721.gif" alt></p><h4 id="åŒ…ç®¡ç†"><a href="#åŒ…ç®¡ç†" class="headerlink" title="åŒ…ç®¡ç†"></a>åŒ…ç®¡ç†</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># yaourt åŒ…ç®¡ç†ï¼Œä»–ä»¬éƒ½è¦åŸºäº git æ‰€ä»¥ç³»ç»Ÿå·²å®‰è£…å¥½ï¼Œgit å°±å·²ç»å®‰è£…äº†</span><span class="token function">sudo</span> pacman -S yaourt<span class="token comment" spellcheck="true"># yay åŒ…ç®¡ç†</span><span class="token function">sudo</span> pacman -S yay<span class="token comment" spellcheck="true"># 20 ç‰ˆæœ¬åå®˜æ–¹æœ‰æ”¯æŒäº†ä¸‰ä¸ªåŒ…ç®¡ç†ï¼Œä½†æ˜¯æ¨èè¿˜æ˜¯ AUR </span><span class="token comment" spellcheck="true"># ç”¨åˆ° yaourt å‘½ä»¤å®‰è£…è½¯ä»¶ç°åœ¨éƒ½å¯ä»¥ç›´æ¥åœ¨è½¯ä»¶å•†åº—æœç´¢å®‰è£…ï¼ï¼ï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_pamac-manager_20200502002354.gif" alt></p><h4 id="è¾“å…¥æ³•"><a href="#è¾“å…¥æ³•" class="headerlink" title="è¾“å…¥æ³•"></a>è¾“å…¥æ³•</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># ä¹‹å‰æ¨è </span><span class="token function">sudo</span> pacman -S Sunpinyin<span class="token comment" spellcheck="true"># ç°åœ¨æ¨è-æœç‹—è¾“å…¥æ³•</span><span class="token comment" spellcheck="true"># é“¾æ¥: https://pan.baidu.com/s/1b0gHa6XBvkhz_8k6iVdQgQ  å¯†ç : gvjv</span><span class="token function">sudo</span> pacman -U fcitx-sogouimebs-2.0.0.38-1-x86_64.pkg.tar.xz<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># è°·æ­Œæµè§ˆå™¨</span><span class="token function">sudo</span> pacman -S google-chrome<span class="token comment" spellcheck="true"># ç«ç‹æµè§ˆå™¨</span><span class="token function">sudo</span> pacman -S firefox<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20200502004718.gif" alt></p><h4 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æœ€çˆ±</span><span class="token function">sudo</span> pacman -S fish<span class="token comment" spellcheck="true"># è®¾ç½®é»˜è®¤ï¼Œå»ºè®®ä¸è¦é»˜è®¤</span><span class="token function">sudo</span> chsh -s /usr/bin/fish<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å¿«é€Ÿå¯åŠ¨"><a href="#å¿«é€Ÿå¯åŠ¨" class="headerlink" title="å¿«é€Ÿå¯åŠ¨"></a>å¿«é€Ÿå¯åŠ¨</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># ä¸ªäººè¶…çˆ±</span><span class="token function">sudo</span> pacman -S kupfer<span class="token comment" spellcheck="true"># å¦å¤–æ¨è</span><span class="token function">sudo</span> pacman -S albert<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/%E6%B7%B1%E5%BA%A6%E5%BD%95%E5%B1%8F_plasmashell_20200502005446.gif" alt></p><h4 id="Cisco-AnyConnect"><a href="#Cisco-AnyConnect" class="headerlink" title="Cisco AnyConnect"></a>Cisco AnyConnect</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># yaourt å®‰è£…ï¼Œä½†æ˜¯æ— æ³•å®‰è£…ï¼Œæ‰“åŒ…çš„é‚£äººæ²¡äººæ‰“åŒ…ä¸‹è½½åœ°å€ï¼Œå¯èƒ½è¿‡æ®µæ—¶é—´å°±å¯ä»¥äº†å§</span>yaourt -S cisco-anyconnect<span class="token comment" spellcheck="true"># æ‰‹åŠ¨å®‰è£… é“¾æ¥: https://pan.baidu.com/s/19Pmw_FOw_TUaMyNIelpT-w æå–ç : tv6i </span><span class="token comment" spellcheck="true"># 1ã€ä»¥ä¸‹æ“ä½œ root è¿è¡Œï¼Œcd åˆ° vpn ç›®å½•ä¸‹æ³¨é‡Šå®‰è£…ç”¨æˆ·æƒé™éªŒè¯,43-47 è¡Œ</span>vim vpn_install.sh <span class="token comment" spellcheck="true"># Make sure we are root</span><span class="token comment" spellcheck="true"># if [ `id | sed -e 's/(.*//'` != "uid=0" ]; then</span><span class="token comment" spellcheck="true">#   echo "Sorry, you need super user privileges to run this script."</span><span class="token comment" spellcheck="true">#   exit 1</span><span class="token comment" spellcheck="true"># fi</span><span class="token comment" spellcheck="true"># åˆ›å»ºé…ç½®ç›®å½•</span><span class="token function">mkdir</span> /etc/rc.d<span class="token comment" spellcheck="true"># å®‰è£…</span>./vpn_install.sh<span class="token comment" spellcheck="true"># 4ã€å¯åŠ¨æœåŠ¡</span><span class="token function">sudo</span> /etc/rc.d/vpnagentd start<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="èŠå¤©å·¥å…·"><a href="#èŠå¤©å·¥å…·" class="headerlink" title="èŠå¤©å·¥å…·"></a>èŠå¤©å·¥å…·</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># QQ åŸç”Ÿ,å°±æ˜¯å½“å‰ç‰ˆæœ¬...</span>yaourt -s linuxqq<span class="token comment" spellcheck="true"># deepin wine æ‰“åŒ… MIT </span>yaourt -S deepin-wine-tim<span class="token comment" spellcheck="true"># ç½‘é¡µæ‰“åŒ…å¾®ä¿¡</span>yaourt -S electronic-wechat<span class="token comment" spellcheck="true"># deepin wine æ‰“åŒ…å¾®ä¿¡</span>yaourt -S deepin-wine-wechat<span class="token comment" spellcheck="true"># é’‰é’‰ ç½‘é¡µæ‰“åŒ…</span>yaourt -S dingtalk-electron<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="éŸ³ä¹è§†é¢‘"><a href="#éŸ³ä¹è§†é¢‘" class="headerlink" title="éŸ³ä¹è§†é¢‘"></a>éŸ³ä¹è§†é¢‘</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># å®‰è£…ç½‘æ˜“äº‘å®˜æ–¹</span><span class="token function">sudo</span> pacman -S netease-cloud-music<span class="token comment" spellcheck="true"># ç¬¬ä¸‰æ–¹ç½‘æ˜“äº‘éŸ³ä¹</span>yaourt -S iease-music<span class="token comment" spellcheck="true"># GTK ç‰ˆæœ¬</span><span class="token function">sudo</span> pacman -S netease-cloud-music-gtk<span class="token comment" spellcheck="true"># è…¾è®¯è§†é¢‘ï¼Œä¸æ¨èå®‰è£…ï¼Œæ„ä¹‰ä¸å¤§ï¼Œå¥½åƒæ˜¯ç½‘é¡µæ‰“åŒ…è€Œæˆ</span>yaourt -S tenvideo<span class="token comment" spellcheck="true"># ç½‘æ˜“äº‘éŸ³ä¹ä¸èƒ½è¾“å…¥ä¸­æ–‡</span><span class="token comment" spellcheck="true"># å…¨éƒ¨è¦†ç›–</span><span class="token function">sudo</span> vim /opt/netease/netease-cloud-music/netease-cloud-music.bash<span class="token comment" spellcheck="true">#!/bin/sh</span>HERE<span class="token operator">=</span><span class="token string">"$(dirname "</span><span class="token punctuation">$(</span>readlink -f <span class="token string">"<span class="token variable">${0}</span>"</span><span class="token punctuation">)</span><span class="token string">")"</span><span class="token comment" spellcheck="true">#export LD_LIBRARY_PATH="${HERE}"/libs</span><span class="token comment" spellcheck="true">#export QT_PLUGIN_PATH="${HERE}"/plugins </span><span class="token comment" spellcheck="true">#export QT_QPA_PLATFORM_PLUGIN_PATH="${HERE}"/plugins/platforms</span><span class="token function">export</span> XDG_CURRENT_DESKTOP<span class="token operator">=</span>DDE<span class="token function">export</span> LD_LIBRARY_PATH<span class="token operator">=</span>/usr/lib<span class="token function">exec</span> <span class="token string">"<span class="token variable">${HERE}</span>"</span>/netease-cloud-music <span class="token variable">$@</span><span class="token comment" spellcheck="true"># æŠŠåŸæ¥çš„åˆ é™¤æˆ–è€…æ³¨é‡Š</span><span class="token comment" spellcheck="true"># å®‰è£… qcef é“¾æ¥: https://pan.baidu.com/s/1UfWLQwTmocGt8NF6PLrxpw æå–ç : wmws</span><span class="token function">sudo</span> pacman -U ä¸‹è½½çš„ qcef æ–‡ä»¶<span class="token comment" spellcheck="true"># å®‰è£… vlcï¼Œå®Œæˆåæ³¨é”€ä¸€ä¸‹</span><span class="token function">sudo</span> pacman -S vlc<span class="token comment" spellcheck="true"># åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/duapple/article/details/105314391</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h4><pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># å®‰è£… npm nodejs</span>sudo pacman <span class="token punctuation">-</span>S npmsudo pacman <span class="token punctuation">-</span>S nodejs<span class="token comment" spellcheck="true"># å®‰è£… hexo</span>sudo npm install <span class="token punctuation">-</span>g hexo<span class="token punctuation">-</span>cli <span class="token comment" spellcheck="true"># å¦‚æœæ˜¯ä»¥å‰ç³»ç»Ÿå¤‡ä»½çš„ hexo åªéœ€è¦åˆ é™¤ .deploy_git</span>sudo rm <span class="token punctuation">-</span>rf .deploy_git<span class="token comment" spellcheck="true"># é™„ä¸Šçº¤ç»†å®‰è£… Hexo æ–‡ç« </span>https<span class="token punctuation">:</span>//godweiyang.com/2018/04/13/hexo<span class="token punctuation">-</span>blog/https<span class="token punctuation">:</span>//github.com/blinkfox/hexo<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>matery<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="PicGo"><a href="#PicGo" class="headerlink" title="PicGo"></a>PicGo</h4><pre class="line-numbers language-bash"><code class="language-bash">yaourt -S picgo-appimage<span class="token comment" spellcheck="true"># PicGo + github + JsDelivr æ­å»ºå…è´¹é«˜é€Ÿå›¾åºŠ</span><span class="token comment" spellcheck="true"># https://daixianjin.github.io/2020/04/20/%E6%90%AD%E5%BB%BA%E5%85%8D%E8%B4%B9%E7%9A%84%E5%9B%BE%E5%BA%8A/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ·±åº¦å…¨å®¶æ¡¶"><a href="#æ·±åº¦å…¨å®¶æ¡¶" class="headerlink" title="æ·±åº¦å…¨å®¶æ¡¶"></a>æ·±åº¦å…¨å®¶æ¡¶</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ·±åº¦çœ‹å›¾</span><span class="token function">sudo</span> pacman -S deepin-image-viewer<span class="token comment" spellcheck="true"># æ·±åº¦æˆªå›¾</span><span class="token function">sudo</span> pacman -S deepin-screenshot<span class="token comment" spellcheck="true"># æ·±åº¦å½•å±</span><span class="token function">sudo</span> pacman -S deepin-screen-recorder<span class="token comment" spellcheck="true"># æ·±åº¦ç”»æ¿</span><span class="token function">sudo</span> pacman -S deepin-draw<span class="token comment" spellcheck="true"># æ·±åº¦è®¡ç®—å™¨</span><span class="token function">sudo</span> pacman -S deepin-calculator<span class="token comment" spellcheck="true"># æ·±åº¦è§†é¢‘æ’­æ”¾å™¨</span><span class="token function">sudo</span> pacman -S deepin-movie<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ä¸‹è½½å‚¨å­˜"><a href="#ä¸‹è½½å‚¨å­˜" class="headerlink" title="ä¸‹è½½å‚¨å­˜"></a>ä¸‹è½½å‚¨å­˜</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># qb ç§å­ç¥å™¨ï¼Œæ‹¿æ¥ä¸‹ç”µå½±ä¸é”™ï¼Œä¸æ˜¯é‚£ç§ç”µå½±</span><span class="token function">sudo</span> pacman -S qbittorrent<span class="token comment" spellcheck="true"># è¿…é›· deepin æ‰“åŒ…</span>yaourt -S deepin-wine-thunderspeed<span class="token comment" spellcheck="true"># ç™¾åº¦ç½‘ç›˜åŸç”Ÿ</span><span class="token function">sudo</span> pacman -S baidunetdisk<span class="token comment" spellcheck="true"># FTP å·¥å…·</span><span class="token function">sudo</span> pacman -S filezilla<span class="token comment" spellcheck="true"># oss å¯è§†åŒ–å·¥å…·</span>curl http://gosspublic.alicdn.com/oss-browser/1.10.0/oss-browser-linux-x64.zip?spm<span class="token operator">=</span>a2c4g.11186623.2.15.6e3e1144tYcTZm<span class="token operator">&amp;</span>file<span class="token operator">=</span>oss-browser-linux-x64.zip<span class="token comment" spellcheck="true"># è§£å‹</span>unzip oss-browser-linux-x64.zip<span class="token comment" spellcheck="true"># è¿è¡Œ</span>./oss-browser<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ–‡æ¡£æ–‡æœ¬å·¥å…·"><a href="#æ–‡æ¡£æ–‡æœ¬å·¥å…·" class="headerlink" title="æ–‡æ¡£æ–‡æœ¬å·¥å…·"></a>æ–‡æ¡£æ–‡æœ¬å·¥å…·</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># è¿™å¯èƒ½æ˜¯ Linux ä¸‹é¢æœ€å¥½çš„äº†ï¼Œå¯ä»¥é…åˆè¿™ Phpstrom ä½¿ç”¨</span><span class="token function">sudo</span> pacman -S zeal<span class="token comment" spellcheck="true"># å®‰è£…å¥½ä¹‹å Phpstorm æ’ä»¶å½“ä¸­å®‰è£… dash æŒ‰ä½ ctrl + shift + d å³å¯è°ƒå‡ºæ–‡æ¡£</span><span class="token comment" spellcheck="true"># æ–‡æœ¬å¯¹æ¯”ï¼Œè¿™ä¹Ÿå¯èƒ½æ˜¯ Linux ä¸‹é¢æœ€å¥½çš„äº†</span><span class="token function">sudo</span> pacman -S meld<span class="token comment" spellcheck="true"># ç¦æ˜ŸPDF é˜…è¯»ï¼Œå…¶å®æ²¡å¤ªå¤šå¿…è¦ï¼Œç³»ç»Ÿè‡ªå¸¦çš„æŒºå¥½</span>yaourt -S foxit<span class="token comment" spellcheck="true"># Markdownï¼Œä¸€ç›´ä½¿ç”¨çš„éå¸¸å¥½</span>yaourt -S typora<span class="token comment" spellcheck="true"># wpsï¼Œè£…æœºå¿…å¤‡</span><span class="token function">sudo</span> pacman -S wsp-office<span class="token function">sudo</span> pacman -S ttf-wps-fonts<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ•°æ®åº“å¯è§†åŒ–å·¥å…·"><a href="#æ•°æ®åº“å¯è§†åŒ–å·¥å…·" class="headerlink" title="æ•°æ®åº“å¯è§†åŒ–å·¥å…·"></a>æ•°æ®åº“å¯è§†åŒ–å·¥å…·</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ•°æ®æŸ¥çœ‹èˆ’æœï¼Œæ•°æ®æ“ä½œä¹Ÿå¥½ï¼Œä½†æ˜¯æŸ¥çœ‹å­—æ®µå¤‡æ³¨ä¸å¤ªå¥½ï¼Œè€Œä¸”å…¨è‹±æ–‡ä¸”ä¸æ”¯æŒä¸­æ–‡è¾“å…¥</span>yaourt -S valentina-studio<span class="token comment" spellcheck="true"># wine æ‰“åŒ…ï¼Œä¸å¤ªèˆ’æœ</span>yaourt -S navicat<span class="token comment" spellcheck="true"># å®Œç¾çš„ Linux ä¸‹é¢æ•°æ®åº“å¯è§†åŒ–å·¥å…·</span><span class="token function">sudo</span> pacman -S dbeaver<span class="token comment" spellcheck="true"># ä¸ªäººå–œçˆ±</span>yaourt -S redis-desktop-manager<span class="token comment" spellcheck="true"># å¦å¤–æ¨è</span>yaourt -S another-redis-desktop-manager<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å¼€å‘å·¥å…·"><a href="#å¼€å‘å·¥å…·" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># PHPstormï¼Œå¿…å¤‡ç¥å™¨</span>yaourt -S phpstorm<span class="token comment" spellcheck="true"># Goland</span><span class="token function">sudo</span> pacman -S goland<span class="token comment" spellcheck="true"># vs code</span><span class="token function">sudo</span> pacman -S visual-studio-code-bin<span class="token comment" spellcheck="true"># å¾®ä¿¡å¼€å‘è€…å·¥å…·</span><span class="token function">sudo</span> pacman -S wechat-devtools<span class="token comment" spellcheck="true"># Postman</span><span class="token function">sudo</span> pacman -S postman<span class="token comment" spellcheck="true"># æŠ“åŒ…</span><span class="token function">sudo</span> pacman -S wireshark-qt<span class="token comment" spellcheck="true"># docker </span><span class="token function">sudo</span> pacman -S docker<span class="token comment" spellcheck="true"># docker æ­å»º PHP å¼€å‘ç¯å¢ƒ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="è¿œç¨‹å·¥å…·"><a href="#è¿œç¨‹å·¥å…·" class="headerlink" title="è¿œç¨‹å·¥å…·"></a>è¿œç¨‹å·¥å…·</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># Teamviewer</span><span class="token function">sudo</span> pacman -S teamviewer<span class="token comment" spellcheck="true"># å¯åŠ¨æœåŠ¡</span><span class="token function">sudo</span> teamviewer --daemon start<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å…¶ä»–å·¥å…·"><a href="#å…¶ä»–å·¥å…·" class="headerlink" title="å…¶ä»–å·¥å…·"></a>å…¶ä»–å·¥å…·</h4><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æˆªå›¾è½¯ä»¶</span><span class="token function">sudo</span> pacman -S Shutter<span class="token comment" spellcheck="true"># æ€ç»´å¯¼å›¾</span>yaourt -S xmind-electron<span class="token comment" spellcheck="true"># è§†é¢‘å‰ªè¾‘å·¥å…·</span><span class="token function">sudo</span> pacman -S blender<span class="token comment" spellcheck="true"># ç³»ç»ŸæŸ¥çœ‹</span><span class="token function">sudo</span> pacman -s screenfetch<span class="token comment" spellcheck="true"># ä½œå›¾è½¯ä»¶</span><span class="token function">sudo</span> pacman -S gimp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ›´å¤šè½¯ä»¶è¯·è‡ªè¡ŒæŸ¥è¯¢ï¼Œå¦‚æœ‰å¥½çš„æ¨èä¹Ÿè¯·ç•™è¨€å‘ŠçŸ¥ï¼æœ‰å¥½çš„è½¯ä»¶ï¼Œæˆ‘ä¹Ÿä¼šæ›´æ–°ï¼</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜Ÿåˆ—å’Œæ ˆ</title>
      <link href="/2020/04/14/%E9%98%9F%E5%88%97%E5%92%8C%E6%A0%88/"/>
      <url>/2020/04/14/%E9%98%9F%E5%88%97%E5%92%8C%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>é¦–å…ˆå¤§å®¶éƒ½æ¸…æ¥šï¼Œé˜Ÿåˆ—åªæ˜¯ä¸€ç§<code>è¿ç®—å—é™</code>çš„<code>çº¿æ€§è¡¨</code>æ•°æ®ç»“æ„ï¼Œä½†æ˜¯é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„<code>çº¿æ€§è¡¨</code>ï¼Œç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒåªå…è®¸åœ¨è¡¨çš„<code>é˜Ÿå¤´</code>ï¼ˆfrontï¼‰è¿›è¡Œåˆ é™¤æ“ä½œï¼Œåœ¨è¡¨çš„<code>é˜Ÿå°¾</code>ï¼ˆrearï¼‰è¿›è¡Œæ’å…¥æ“ä½œã€‚ä»ä»¥ä¸Šä¿¡æ¯å¯ä»¥çªæ˜¾å‡ºé˜Ÿåˆ—çš„æ ¸å¿ƒæ¦‚å¿µï¼š<code>å…ˆè¿›å…ˆå‡º</code>ï¼Œå°±è·Ÿæˆ‘ä»¬ç°å®ç”Ÿæ´»å½“ä¸­é£Ÿå ‚æ’é˜Ÿæ‰“é¥­ä¸€æ¨¡ä¸€æ ·ï¼Œå‰ææ˜¯<code>ä¸å…è®¸</code>æ’é˜Ÿä¸ç„¶è¦æŒ¨æ‰“ã€‚</p><p>æ•ˆæœå›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/v2-d350535401266dbb412dc2a580ec50b3_1200x500.jpg" alt></p><p>æ ˆä¹Ÿæ˜¯ä¸€ç§<code>è¿ç®—å—é™</code>çš„<code>çº¿æ€§è¡¨</code>æ•°æ®ç»“æ„ï¼Œé™å®šä»…åœ¨<code>è¡¨å°¾è¿›è¡Œæ’å…¥</code>å’Œ<code>åˆ é™¤</code>æ“ä½œçš„çº¿æ€§è¡¨ã€‚è¿™ä¸€ç«¯è¢«ç§°ä¸º<code>æ ˆé¡¶</code>ï¼Œç›¸å¯¹åœ°ï¼ŒæŠŠå¦ä¸€ç«¯ç§°ä¸º<code>æ ˆåº•</code>ã€‚å‘ä¸€ä¸ªæ ˆæ’å…¥æ–°å…ƒç´ åˆç§°ä½œ<code>è¿›æ ˆã€å…¥æ ˆæˆ–å‹æ ˆ</code>ï¼Œå®ƒæ˜¯æŠŠæ–°å…ƒç´ æ”¾åˆ°æ ˆé¡¶å…ƒç´ çš„ä¸Šé¢ï¼Œä½¿ä¹‹æˆä¸ºæ–°çš„æ ˆé¡¶å…ƒç´ ï¼›ä»ä¸€ä¸ªæ ˆåˆ é™¤å…ƒç´ åˆç§°ä½œ<code>å‡ºæ ˆæˆ–é€€æ ˆ</code>ï¼Œå®ƒæ˜¯æŠŠæ ˆé¡¶å…ƒç´ åˆ é™¤æ‰ï¼Œä½¿å…¶ç›¸é‚»çš„å…ƒç´ æˆä¸ºæ–°çš„æ ˆé¡¶å…ƒç´ ã€‚ä»ä»¥ä¸Šä¿¡æ¯å¯ä»¥çªæ˜¾å‡ºé˜Ÿåˆ—çš„æ ¸å¿ƒæ¦‚å¿µï¼š<code>å…ˆè¿›åå‡º</code>ï¼Œå°±è·Ÿæˆ‘ä»¬æ’é˜Ÿè¿›å…¥ä¸€ä¸ªåªæœ‰å…¥å£æ²¡æœ‰å‡ºå£çš„éš§é“ä¸€æ‘¸ä¸€æ ·ï¼Œåè¿›çš„å…ˆå‡ºï¼Œå‰ææ˜¯<code>ä¸å…è®¸</code>æ’å…¥ä¸ç„¶ä¹Ÿæ˜¯æŒ¨æ‰“ã€‚</p><p>æ•ˆæœå›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/Myimages/9wMwoevBZq_small.jpg" alt></p><p>ç›¸å…³åè¯ï¼š</p><ul><li>è¿ç®—å—é™ï¼šè¿™ä¸ªè¡¨ä¸èƒ½éšä¾¿çš„åˆ é™¤å’Œæ’å…¥ï¼Œåªèƒ½æŒ‰ç…§è§„å®šåˆ é™¤å’Œæ’å…¥ã€‚</li><li>çº¿æ€§è¡¨ï¼šé€»è¾‘ç»“æ„ï¼Œå°±æ˜¯å¯¹å¤–æš´éœ²æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œä¸å…³å¿ƒåº•å±‚å¦‚ä½•å®ç°ã€‚</li></ul><p>æœªå®Œå¾…ç»­â€¦</p><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="https://juejin.im/post/5d5386b1f265da03c8151832" target="_blank" rel="noopener">https://juejin.im/post/5d5386b1f265da03c8151832</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git ç®€å•å…¥é—¨</title>
      <link href="/2020/03/31/git/"/>
      <url>/2020/03/31/git/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>å¯ä»¥æ¯«ä¸å¤¸å¼ çš„æ¥è¯´ï¼ŒGit æ˜¯æ¯ä¸ªå¼€å‘å¿…å¤‡çš„ä¸€ä¸ªæŠ€èƒ½ï¼Œåœ¨å›¢é˜Ÿåä½œå¼€å‘å½“ä¸­ï¼ŒGit çš„å­˜åœ¨çŠ¹å¦‚é»‘æš—å½“ä¸­çš„ä¸€é“å…‰ç…§äº®ç€æˆ‘ä»¬ã€‚è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªå›¢é˜Ÿå¼€å‘å½“ä¸­ï¼Œè¿˜æ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„ FTP ä¸Šä¼ æ¨¡å¼ï¼Œä½ ä¼šå¤šç–¯ç‹‚ï¼Ÿå…¶å®å¾ˆæƒ³å†™ä¸€æ®µå¾ˆé•¿çš„è¯æ¥è¡¨è¾¾ï¼Œä¼ ç»Ÿæ¨¡å¼å’Œ Git çš„å¯¹æ¯”ï¼Œä¸è¿‡ä¸€æƒ³æ„ä¹‰ä¸å¤§ï¼Git ä½œä¸ºå½“å‰æ—¶ä»£ä¸‹æœ€å¼ºå¤§çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¼ºå¤§è‚¯å®šæœ‰å®ƒç‹¬ç‰¹çš„åœ°æ–¹ï¼PSï¼šä¸ªäººçœ‹æ³•ï¼Œå½“ç„¶è‚¯å®šæœ‰åŒåƒšå–œçˆ±åˆ«çš„å·¥å…·ï¼Œå„æœ‰å„çš„çœ‹æ³•å˜›ï¼</p><h4 id="å†å²"><a href="#å†å²" class="headerlink" title="å†å²"></a>å†å²</h4><p>è‡ª 2002 å¹´å¼€å§‹ï¼Œ<a href="https://zh.wikipedia.org/wiki/æ—çº³æ–¯Â·æ‰˜ç“¦å…¹" target="_blank" rel="noopener">æ—çº³æ–¯Â·æ‰˜ç“¦å…¹</a> å†³å®šä½¿ç”¨ <a href="https://zh.wikipedia.org/wiki/BitKeeper" target="_blank" rel="noopener">BitKeeper</a> ä½œä¸º <a href="https://zh.wikipedia.org/wiki/Linuxå…§æ ¸" target="_blank" rel="noopener">Linuxå†…æ ¸</a> ä¸»è¦çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿç”¨ä»¥ç»´æŠ¤ä»£ç ã€‚å› ä¸º BitKeeper ä¸ºå•†ä¸šè½¯ä»¶ï¼ˆBitMover å…¬å¸å…è´¹æˆæƒç»™ Linux ç¤¾åŒºä½¿ç”¨ï¼‰ï¼Œè¿™ä¸ªå†³å®šåœ¨ç¤¾åŒºä¸­é•¿æœŸé­å—è´¨ç–‘ã€‚åœ¨ Linux ç¤¾åŒºä¸­ï¼Œç‰¹åˆ«æ˜¯ <a href="https://zh.wikipedia.org/wiki/ç†æŸ¥å¾·Â·æ–¯æ‰˜æ›¼" target="_blank" rel="noopener">ç†æŸ¥å¾·Â·æ–¯æ‰˜æ›¼</a> ä¸ <a href="https://zh.wikipedia.org/wiki/è‡ªç”±è»Ÿé«”åŸºé‡‘æœƒ" target="_blank" rel="noopener">è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼š</a> çš„æˆå‘˜ï¼Œä¸»å¼ åº”è¯¥ä½¿ç”¨å¼€æ”¾æºä»£ç çš„è½¯ä»¶æ¥ä½œä¸º Linux å†…æ ¸çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚<a href="https://zh.wikipedia.org/wiki/æ—çº³æ–¯Â·æ‰˜ç“¦å…¹" target="_blank" rel="noopener">æ—çº³æ–¯Â·æ‰˜ç“¦å…¹</a> æ›¾è€ƒè™‘è¿‡é‡‡ç”¨ç°æˆè½¯ä»¶ä½œä¸ºç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆä¾‹å¦‚<a href="https://zh.wikipedia.org/wiki/Monotone" target="_blank" rel="noopener">Monotone</a>ï¼‰ï¼Œä½†è¿™äº›è½¯ä»¶éƒ½å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯æ€§èƒ½ä¸ä½³ã€‚ç°æˆçš„æ–¹æ¡ˆï¼Œå¦‚ <a href="https://zh.wikipedia.org/wiki/å”ä½œç‰ˆæœ¬ç³»çµ±" target="_blank" rel="noopener">CVS</a> çš„æ¶æ„ï¼Œå—åˆ° <a href="https://zh.wikipedia.org/wiki/æ—çº³æ–¯Â·æ‰˜ç“¦å…¹" target="_blank" rel="noopener">æ—çº³æ–¯Â·æ‰˜ç“¦å…¹</a> çš„æ‰¹è¯„ã€‚</p><p>2005 å¹´ï¼Œ<a href="https://zh.wikipedia.org/wiki/å®‰å¾·é­¯Â·å‚é³©" target="_blank" rel="noopener">å®‰å¾·é²Â·å‚é¸ </a>å†™äº†ä¸€ä¸ªç®€å•ç¨‹åºï¼Œå¯ä»¥è¿æ¥ BitKeeper çš„å­˜å‚¨åº“ï¼ŒBitKeeper è‘—ä½œæƒæ‹¥æœ‰è€…<a href="https://zh.wikipedia.org/wiki/æ‹‰é‡ŒÂ·éº¥æ²ƒä¼Š" target="_blank" rel="noopener">æ‹‰é‡ŒÂ·éº¦æ²ƒä¼Š</a> è®¤ä¸º <a href="https://zh.wikipedia.org/wiki/å®‰å¾·é­¯Â·å‚é³©" target="_blank" rel="noopener">å®‰å¾·é²Â·å‚é¸ </a> å¯¹ BitKeeper å†…éƒ¨ä½¿ç”¨çš„åè®®è¿›è¡Œé€†å‘å·¥ç¨‹ï¼Œå†³å®šæ”¶å›æ— å¿ä½¿ç”¨ BitKeeper çš„è®¸å¯ã€‚Linux å†…æ ¸å¼€å‘å›¢é˜Ÿä¸ BitMover å…¬å¸è¿›è¡Œç£‹å•†ï¼Œä½†æ— æ³•è§£å†³ä»–ä»¬ä¹‹é—´çš„æ­§è§ã€‚<a href="https://zh.wikipedia.org/wiki/æ—çº³æ–¯Â·æ‰˜ç“¦å…¹" target="_blank" rel="noopener">æ—çº³æ–¯Â·æ‰˜ç“¦å…¹</a> å†³å®šè‡ªè¡Œå¼€å‘ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ›¿ä»£ BitKeeper ï¼Œä»¥ <code>åå¤©</code> çš„æ—¶é—´ç¼–å†™å‡º Git ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚</p><h4 id="Git-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Git-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Git æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Git æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>Git æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆã€é«˜é€Ÿåœ°å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚Git æä¾›ä»£ç è¿½è¸ªï¼Œç‰ˆæœ¬å›æº¯ç­‰ç­‰åŠŸèƒ½ï¼Œå…¶å®ç®€å•ä¸€å¥è¯æ¥è¯´ï¼ŒGit å°±æ˜¯é¡¹ç›®ç‰ˆæœ¬ç®¡ç†çš„å·¥å…·ï¼</p><h4 id="Git-ä¸-Github-ä»€ä¹ˆå…³ç³»ï¼Ÿ"><a href="#Git-ä¸-Github-ä»€ä¹ˆå…³ç³»ï¼Ÿ" class="headerlink" title="Git ä¸ Github ä»€ä¹ˆå…³ç³»ï¼Ÿ"></a>Git ä¸ Github ä»€ä¹ˆå…³ç³»ï¼Ÿ</h4><p>Git åªæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œè€Œ Github æ˜¯ä¸€ä¸ªä»£ç æ‰˜ç®¡çš„ä»“åº“ã€‚è€Œ Git å¯ä»¥å»æ“ä½œä»“åº“ï¼ŒäºŒè€…éƒ½æ˜¯é…åˆç€ä½¿ç”¨ã€‚å½“ç„¶ Github æ˜¯å›½å¤–å…è´¹çš„ä»“åº“ï¼Œå›½å†…çš„å…è´¹ä»“åº“æˆ‘ä»¬ç”¨çš„æœ€å¤šçš„æ˜¯ç äº‘ã€‚Git è¦æ¯” Github å…ˆé—®ä¸–ã€‚</p><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><h4 id="1ã€è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±å¸å·"><a href="#1ã€è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±å¸å·" class="headerlink" title="1ã€è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±å¸å·"></a>1ã€è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±å¸å·</h4><pre><code>git config --global user.name  &quot;your user name&quot;git config --global user.email &quot;your email&quot;</code></pre><h4 id="2ã€å…‹éš†é¡¹ç›®"><a href="#2ã€å…‹éš†é¡¹ç›®" class="headerlink" title="2ã€å…‹éš†é¡¹ç›®"></a>2ã€å…‹éš†é¡¹ç›®</h4><pre><code># å…‹éš†é¡¹ç›®ï¼Œå¯ä»¥é€‰æ‹© HTTPS å’Œ SSH git clone é¡¹ç›®åœ°å€git clone -b [åˆ†æ”¯] é¡¹ç›®åœ°å€SSH   ä¸€æ¬¡æ“ä½œæ°¸ä¹…ç”Ÿæ•ˆ,éœ€é…ç½®å¯†é’¥HTTPS æ¯æ¬¡éƒ½éœ€è¦è¾“å…¥è´¦å·ä¸å¯†ç </code></pre><h4 id="3ã€ç”Ÿæˆå¯†é’¥å¯†é’¥"><a href="#3ã€ç”Ÿæˆå¯†é’¥å¯†é’¥" class="headerlink" title="3ã€ç”Ÿæˆå¯†é’¥å¯†é’¥"></a>3ã€ç”Ÿæˆå¯†é’¥å¯†é’¥</h4><pre><code># ç”Ÿæˆå¯†é’¥ï¼Œè¿ç»­ä¸‰ä¸‹ç©ºæ ¼ssh-keygen -t rsa -b 4096 -C &quot;your email&quot;# è¯»å–å…¬é’¥cat ~/.ssh/id_rsa.pub## ä¹‹ååœ¨è‡ªå·±ä»“åº“è®¾ç½®é‡Œé¢,SSH Key å½“ä¸­å¡«å†™å…¬é’¥</code></pre><h4 id="4ã€ä¿®æ”¹-Git-è¿æ¥æ–¹å¼"><a href="#4ã€ä¿®æ”¹-Git-è¿æ¥æ–¹å¼" class="headerlink" title="4ã€ä¿®æ”¹ Git è¿æ¥æ–¹å¼"></a>4ã€ä¿®æ”¹ Git è¿æ¥æ–¹å¼</h4><pre><code># å¦‚æœå¼€å§‹é€‰æ‹©çš„ HTTPS è¿æ¥æ–¹å¼ï¼Œé‚£ä¹ˆé…ç½®å¯†é’¥åå¯ä»¥é€‰æ‹© SSH è¿æ¥ï¼Œè¿™æ ·å°±å¯ä»¥å…å¯†æ“ä½œvim .git/config## ä¿®æ”¹å‰[remote &quot;origin&quot;]    url = https://gitee.com/xx/xxx.git    fetch = +refs/heads/*:refs/remotes/origin/*## ä¿®æ”¹å[remote &quot;origin&quot;]    url = git@gitee.com:xx/xx.git    fetch = +refs/heads/*:refs/remotes/origin/*</code></pre><h3 id="Git-çŸ¥è¯†ç‚¹"><a href="#Git-çŸ¥è¯†ç‚¹" class="headerlink" title="Git çŸ¥è¯†ç‚¹"></a>Git çŸ¥è¯†ç‚¹</h3><p>å·¥ä½œåŒºï¼šæ·»åŠ ã€ç¼–è¾‘ã€ä¿®æ”¹ï¼Œåˆ é™¤ç­‰æ“ä½œ</p><p>æš‚å­˜åŒºï¼šæš‚å­˜å·²ä¿®æ”¹çš„æ–‡ä»¶ã€æœ€åä¸€èµ·å…¥ç‰ˆæœ¬åº“</p><p>ç‰ˆæœ¬åº“ï¼šä¹Ÿå«æœ¬åœ°ç‰ˆæœ¬åº“ï¼Œå› ä¸º Git æ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¤§éƒ¨åˆ†æäº¤éƒ½æ˜¯å¯¹æœ¬åœ°ä»“åº“è€Œè¨€çš„ï¼Œä¸ä¾èµ–ç½‘ç»œï¼Œæœ€åä¸€æ¬¡ä¼šæ¨é€çš„åˆ°è¿œç¨‹ä»“åº“ã€‚æ­¤æ—¶å¯¹å¤–ä¸å¯è§</p><p>æœ€ç»ˆå…¥åº“ï¼šç¡®å®šéƒ½æ²¡é—®é¢˜ä¿å­˜åˆ°ä»“åº“ã€æˆä¸ºä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”å¤–å¯è§</p><p>ä¸ªäººæ„Ÿè§‰çŸ¥é“è¿™å››ç‚¹å°±å¯ä»¥äº†ï¼Œåœ¨æ·±å…¥é‚£ä¹ˆå°±æ˜¯ Git ä¸“å®¶äº†ï¼Œæˆ‘ä»¬å¹³å¸¸ä½¿ç”¨ä¸ä¼šæœ‰å¤ªæ·±å±‚çš„ä¸œè¥¿ï¼</p><h3 id="ç®€å•æµç¨‹"><a href="#ç®€å•æµç¨‹" class="headerlink" title="ç®€å•æµç¨‹"></a>ç®€å•æµç¨‹</h3><pre><code># æŸ¥çœ‹çŠ¶æ€ï¼Œå·¥ä½œåŒºgit status# æäº¤åˆ°æš‚å­˜åŒºgit add . æˆ– æ–‡ä»¶åœ°å€ // . ä»£è¡¨æ‰€æœ‰# æäº¤ç‰ˆæœ¬åº“ï¼Œå¯¹å¤–ä¸å¯è§ï¼Œæœ¬åœ°ä»“åº“git commit -m &#39;æ“ä½œå¤‡æ³¨&#39; // æ“ä½œå¤‡æ³¨æ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œä¸€å®šè¦æ³¨é‡Šè¯¦ç»†# æ‹‰å–æ›´æ–°ï¼Œä»¥é˜²å†²çªgit pull origin [åˆ†æ”¯]# æœ€ç»ˆå…¥åº“ï¼Œè¿™ä¸€æ­¥ä¸€å®šè¦ç¡®è®¤æ­£ç¡®æ— è¯¯ï¼å¯¹å¤–å¯è§git push origin [åˆ†æ”¯]## åƒä¸‡ä¸è¦çº ç»“å‰é¢çš„ origin å®ƒæ²¡å•¥æ„ä¹‰</code></pre><p><img src="https://i.loli.net/2020/04/07/Z4BECwmIMVpyuUH.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407212112.png"></p><p><img src="https://i.loli.net/2020/04/07/tXJMUNuCwcayBlk.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407212241.png"></p><h3 id="ç®€å•æµç¨‹è¯¦è§£"><a href="#ç®€å•æµç¨‹è¯¦è§£" class="headerlink" title="ç®€å•æµç¨‹è¯¦è§£"></a>ç®€å•æµç¨‹è¯¦è§£</h3><h4 id="1ã€æŸ¥çœ‹çŠ¶æ€ï¼Œå¯ä»¥çœ‹è§å·¥ä½œåŒºçš„ï¼šå¢ã€åˆ ã€æ”¹"><a href="#1ã€æŸ¥çœ‹çŠ¶æ€ï¼Œå¯ä»¥çœ‹è§å·¥ä½œåŒºçš„ï¼šå¢ã€åˆ ã€æ”¹" class="headerlink" title="1ã€æŸ¥çœ‹çŠ¶æ€ï¼Œå¯ä»¥çœ‹è§å·¥ä½œåŒºçš„ï¼šå¢ã€åˆ ã€æ”¹"></a>1ã€æŸ¥çœ‹çŠ¶æ€ï¼Œå¯ä»¥çœ‹è§å·¥ä½œåŒºçš„ï¼šå¢ã€åˆ ã€æ”¹</h4><pre><code>git status</code></pre><p><img src="https://i.loli.net/2020/04/07/uWZcGX9gKsOlJfp.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407212838.png"></p><h4 id="2ã€æŠ›å¼ƒå·¥ä½œåŒºï¼šæ”¹ã€åˆ "><a href="#2ã€æŠ›å¼ƒå·¥ä½œåŒºï¼šæ”¹ã€åˆ " class="headerlink" title="2ã€æŠ›å¼ƒå·¥ä½œåŒºï¼šæ”¹ã€åˆ "></a>2ã€æŠ›å¼ƒå·¥ä½œåŒºï¼šæ”¹ã€åˆ </h4><pre><code># æ–¹æ³•ä¸€ æ— æ³•æŠ›å¼ƒå¢åŠ git checkout . æˆ– æ–‡ä»¶åœ°å€ // . ä»£è¡¨æ‰€æœ‰# æ–¹æ³•äºŒ æ— æ³•æŠ›å¼ƒå¢åŠ git restore . æˆ– æ–‡ä»¶åœ°å€ // . ä»£è¡¨æ‰€æœ‰</code></pre><p><img src="https://i.loli.net/2020/04/07/TXml5xJ37CPcukY.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407213221.png"></p><p><img src="https://i.loli.net/2020/04/07/Li5SYygn7hRdW4F.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407213402.png"></p><h4 id="3ã€æ·»åŠ åˆ°æš‚å­˜åŒº"><a href="#3ã€æ·»åŠ åˆ°æš‚å­˜åŒº" class="headerlink" title="3ã€æ·»åŠ åˆ°æš‚å­˜åŒº"></a>3ã€æ·»åŠ åˆ°æš‚å­˜åŒº</h4><pre><code>git add . æˆ– æ–‡ä»¶åœ°å€ // . ä»£è¡¨æ‰€æœ‰</code></pre><p><img src="https://i.loli.net/2020/04/07/8ISEzARQpelxdO7.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407221459.png"></p><h4 id="4ã€å–æ¶ˆæš‚å­˜"><a href="#4ã€å–æ¶ˆæš‚å­˜" class="headerlink" title="4ã€å–æ¶ˆæš‚å­˜"></a>4ã€å–æ¶ˆæš‚å­˜</h4><pre><code>git restore --staged . æˆ– æ–‡ä»¶åœ°å€ // . ä»£è¡¨æ‰€æœ‰</code></pre><p><img src="https://i.loli.net/2020/04/07/wWl1yMtPHVkF5aD.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407221936.png"></p><h4 id="5ã€æäº¤ç‰ˆæœ¬åº“ï¼Œå¯¹å¤–ä¸å¯è§"><a href="#5ã€æäº¤ç‰ˆæœ¬åº“ï¼Œå¯¹å¤–ä¸å¯è§" class="headerlink" title="5ã€æäº¤ç‰ˆæœ¬åº“ï¼Œå¯¹å¤–ä¸å¯è§"></a>5ã€æäº¤ç‰ˆæœ¬åº“ï¼Œå¯¹å¤–ä¸å¯è§</h4><pre><code>git commit -m &#39;æ“ä½œå¤‡æ³¨&#39; // æ“ä½œå¤‡æ³¨æ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œä¸€å®šè¦æ³¨é‡Šè¯¦ç»†</code></pre><p><img src="https://i.loli.net/2020/04/07/iJqodIUkE6CA7hZ.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407222339.png"></p><h4 id="6ã€å›æ»šæœ¬åœ°ä»“åº“"><a href="#6ã€å›æ»šæœ¬åœ°ä»“åº“" class="headerlink" title="6ã€å›æ»šæœ¬åœ°ä»“åº“"></a>6ã€å›æ»šæœ¬åœ°ä»“åº“</h4><pre><code># æŸ¥çœ‹æ—¥å¿—ï¼ŒæŸ¥çœ‹æ—¥å¿—åæŒ‰ q æ‰èƒ½é€€å‡ºæ—¥å¿—git log     # å¸¸ç”¨å‘½ä»¤ä¸€ï¼Œæ¯”è¾ƒæš´åŠ›:é‡ç½® HEADã€ç´¢å¼•å’Œå·¥ä½œåŒºgit reset --herd CommitID           // å›æ»šåˆ°æŒ‡å®šçš„ç‰ˆæœ¬git reset --hard HEAD^             // å›é€€åˆ°ä¸Šä¸ªç‰ˆæœ¬git reset --hard HEAD~3           // å›é€€åˆ°å‰ 3 æ¬¡æäº¤ä¹‹å‰ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå›é€€åˆ° n æ¬¡æäº¤ä¹‹å‰# å¸¸ç”¨å‘½ä»¤äºŒï¼Œç¨å¾®æ¸©æŸ”:é‡ç½® HEADgit reset --soft CommitID# å…¶ä»–å‘½ä»¤    --mixed               é‡ç½® HEAD å’Œç´¢å¼•    --merge               é‡ç½® HEAD ç´¢å¼•å’Œå·¥ä½œåŒº    --keep                é‡ç½® HEAD ä½†ä¿å­˜æœ¬åœ°å˜æ›´## HEAD å°±æ˜¯å½“å‰åˆ†æ”¯çš„æ„æ€    ## ç´¢å¼•æ˜¯å·¥ä½œç›®å½•å’Œä»“åº“ä¹‹é—´çš„ä¸´æ—¶åŒºåŸŸã€‚ ä½ å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥æ„å»ºä¸€ç»„ä½ æƒ³è¦ä¸€èµ·æäº¤çš„æ›´æ”¹ã€‚ åˆ›å»ºæäº¤æ—¶ï¼Œæäº¤çš„å†…å®¹æ˜¯å½“å‰ç´¢å¼•ä¸­çš„å†…å®¹ï¼Œè€Œä¸æ˜¯å·¥ä½œç›®å½•ä¸­çš„å†…å®¹</code></pre><p><img src="https://i.loli.net/2020/04/07/VPiJlgUMyfXD547.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407223542.png"></p><p><img src="https://i.loli.net/2020/04/07/oNrseyhKltidmOa.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407224056.png"></p><h4 id="7ã€ç¡®è®¤æ— è¯¯ï¼Œæ‹‰å–æ›´æ–°ï¼Œæœ€ç»ˆå…¥åº“ï¼Œå¯¹å¤–å¯è§"><a href="#7ã€ç¡®è®¤æ— è¯¯ï¼Œæ‹‰å–æ›´æ–°ï¼Œæœ€ç»ˆå…¥åº“ï¼Œå¯¹å¤–å¯è§" class="headerlink" title="7ã€ç¡®è®¤æ— è¯¯ï¼Œæ‹‰å–æ›´æ–°ï¼Œæœ€ç»ˆå…¥åº“ï¼Œå¯¹å¤–å¯è§"></a>7ã€ç¡®è®¤æ— è¯¯ï¼Œæ‹‰å–æ›´æ–°ï¼Œæœ€ç»ˆå…¥åº“ï¼Œå¯¹å¤–å¯è§</h4><pre><code># æ‹‰å–æ›´æ–°ï¼Œç¡®è®¤æ— å†²çªgit pull origin [åˆ†æ”¯]# ç¡®è®¤æ— è¯¯ï¼Œæœ€ç»ˆå…¥åº“ï¼Œå¯¹å¤–å¯è§git push origin [åˆ†æ”¯]</code></pre><p><img src="https://i.loli.net/2020/04/07/Uwuli13d26QhWKY.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407225246.png"></p><p><img src="https://i.loli.net/2020/04/07/jR7NOp6vUtmzK4d.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200407225437.png"></p><h3 id="åˆ†æ”¯æ“ä½œ"><a href="#åˆ†æ”¯æ“ä½œ" class="headerlink" title="åˆ†æ”¯æ“ä½œ"></a>åˆ†æ”¯æ“ä½œ</h3><h4 id="1ã€æŸ¥çœ‹åˆ†æ”¯"><a href="#1ã€æŸ¥çœ‹åˆ†æ”¯" class="headerlink" title="1ã€æŸ¥çœ‹åˆ†æ”¯"></a>1ã€æŸ¥çœ‹åˆ†æ”¯</h4><pre><code># æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯git branch -a# æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯git branch -r# æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯git branch</code></pre><p><img src="https://i.loli.net/2020/04/08/zBbaVGur6SEvKIX.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200408214000.png"></p><h4 id="2ã€åˆ›å»ºæœ¬åœ°åˆ†æ”¯"><a href="#2ã€åˆ›å»ºæœ¬åœ°åˆ†æ”¯" class="headerlink" title="2ã€åˆ›å»ºæœ¬åœ°åˆ†æ”¯"></a>2ã€åˆ›å»ºæœ¬åœ°åˆ†æ”¯</h4><pre><code>git branch [åˆ†æ”¯]</code></pre><p><img src="https://i.loli.net/2020/04/08/msFoXIx2a6CB53u.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200408214154.png"></p><h4 id="3ã€åˆ‡æ¢æœ¬åœ°åˆ†æ”¯"><a href="#3ã€åˆ‡æ¢æœ¬åœ°åˆ†æ”¯" class="headerlink" title="3ã€åˆ‡æ¢æœ¬åœ°åˆ†æ”¯"></a>3ã€åˆ‡æ¢æœ¬åœ°åˆ†æ”¯</h4><pre><code>git checkout [åˆ†æ”¯]</code></pre><p><img src="https://i.loli.net/2020/04/09/Jd7uxagTpG6Km3y.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200409150934.png"></p><h4 id="4ã€åˆ›å»ºè¿œç¨‹åˆ†æ”¯"><a href="#4ã€åˆ›å»ºè¿œç¨‹åˆ†æ”¯" class="headerlink" title="4ã€åˆ›å»ºè¿œç¨‹åˆ†æ”¯"></a>4ã€åˆ›å»ºè¿œç¨‹åˆ†æ”¯</h4><pre><code># æ„æ€å°±æ˜¯æœ¬åœ°åˆ›å»ºäº†åˆ†æ”¯ï¼Œç„¶å push åˆ°ä»“åº“å»git push origin [åˆ†æ”¯]</code></pre><p><img src="https://i.loli.net/2020/04/08/OSuFDzJUl7MTi5Z.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200408215535.png"></p><h4 id="5ã€æ”¹å˜ä¸Šæ¸¸ä¿¡æ¯-è¿½è¸ª"><a href="#5ã€æ”¹å˜ä¸Šæ¸¸ä¿¡æ¯-è¿½è¸ª" class="headerlink" title="5ã€æ”¹å˜ä¸Šæ¸¸ä¿¡æ¯(è¿½è¸ª)"></a>5ã€æ”¹å˜ä¸Šæ¸¸ä¿¡æ¯(è¿½è¸ª)</h4><pre><code>git branch -u origin [åˆ†æ”¯]## å½“æˆ‘ä»¬åˆ›å»ºäº†åˆ†æ”¯å¹¶ä¸”åˆ‡æ¢åˆ°äº†è¿™ä¸ªåˆ†æ”¯ï¼Œæˆ‘ä»¬ push å’Œ pull æ²¡æœ‰ä¸Šæ¸¸é»˜è®¤çš„åˆ†æ”¯ï¼Œéœ€ push origin åˆ†æ”¯ å’Œ push origin åˆ†æ”¯## å½“æˆ‘ä»¬é»˜è®¤ä¸Šæ¸¸åˆ†æ”¯åå³å¯ç›´æ¥ push æˆ– pull</code></pre><p><img src="https://i.loli.net/2020/04/08/GBDLzjUKkrnt2bS.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200408220852.png"></p><h4 id="6ã€åˆ é™¤åˆ†æ”¯"><a href="#6ã€åˆ é™¤åˆ†æ”¯" class="headerlink" title="6ã€åˆ é™¤åˆ†æ”¯"></a>6ã€åˆ é™¤åˆ†æ”¯</h4><pre><code># åˆ é™¤æœ¬åœ°åˆ†æ”¯git branch -d [åˆ†æ”¯]# åˆ é™¤è¿œç¨‹åˆ†æ”¯ï¼Œè°¨æ…ä½¿ç”¨git push --delete origin [åˆ†æ”¯]</code></pre><p><img src="https://i.loli.net/2020/04/08/fUQSyoD1h8XMGV6.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200408222113.png"></p><h4 id="7ã€åˆå¹¶åˆ†æ”¯"><a href="#7ã€åˆå¹¶åˆ†æ”¯" class="headerlink" title="7ã€åˆå¹¶åˆ†æ”¯"></a>7ã€åˆå¹¶åˆ†æ”¯</h4><pre><code># åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯git checkout [åˆ†æ”¯]# åˆå¹¶åˆ†æ”¯git merge orgin/[åˆ†æ”¯]git pullgit push</code></pre><p><img src="https://i.loli.net/2020/04/08/oWNAg21pnlEhFXw.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200408222736.png"></p><h4 id="8ã€è¿œç¨‹åˆ†æ”¯"><a href="#8ã€è¿œç¨‹åˆ†æ”¯" class="headerlink" title="8ã€è¿œç¨‹åˆ†æ”¯"></a>8ã€è¿œç¨‹åˆ†æ”¯</h4><p>å½“æˆ‘ä»¬ Git ä¸å­˜åœ¨è¿œç¨‹åˆ†æ”¯æ—¶ï¼Œæˆ‘ä»¬æ“ä½œå°±ä¼šå—é˜»ï¼Œæ­¤æ—¶å°±éœ€è¦ remote å‘½ä»¤æ¥å¸®æˆ‘ä»¬è§£å†³!</p><p><img src="https://i.loli.net/2020/04/09/OocNkM26qmIxaXQ.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200409221753.png"></p><pre><code># æŸ¥çœ‹è¿™ä¸ªä»“åº“git remote # æŸ¥çœ‹è¯¦æƒ…git remote -v</code></pre><p><img src="https://i.loli.net/2020/04/09/p2ZNYbvDUGiOJtg.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200409222132.png"></p><pre><code># æ·»åŠ è¿œç¨‹åˆ†æ”¯git remote add [åˆ†æ”¯] [åœ°å€]# æ›´æ–°è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯git fetch [åˆ†æ”¯]# æ”¹å˜ä¸Šæ¸¸git branch -u [åˆ†æ”¯]</code></pre><p><img src="https://i.loli.net/2020/04/09/RNgS4EicVfyjtaZ.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200409223333.png"></p><pre><code># é‡å‘½åè¿œç¨‹è¿½è¸ªåˆ†æ”¯git remote rename [åŸå§‹åˆ†æ”¯] [æ–°åˆ†æ”¯]</code></pre><p><img src="https://i.loli.net/2020/04/09/7L8DQzHY1jduJ5A.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200409223659.png"></p><pre><code># åˆ é™¤è¿œç¨‹è¿½è¸ªåˆ†æ”¯ï¼Œåˆ é™¤ä¹‹åè¿½è¸ªæ— æ•ˆgit remote remove [åˆ†æ”¯]</code></pre><p><img src="https://i.loli.net/2020/04/09/BbQAXdD6LGrsSjl.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200409223855.png"></p><h3 id="ä»“åº“æ“ä½œ"><a href="#ä»“åº“æ“ä½œ" class="headerlink" title="ä»“åº“æ“ä½œ"></a>ä»“åº“æ“ä½œ</h3><h4 id="1ã€å¿½ç•¥æ–‡ä»¶"><a href="#1ã€å¿½ç•¥æ–‡ä»¶" class="headerlink" title="1ã€å¿½ç•¥æ–‡ä»¶"></a>1ã€å¿½ç•¥æ–‡ä»¶</h4><pre><code># åœ¨æœ¬åœ°é¡¹ç›®é‡Œé¢å½“ä¸­æ·»åŠ  .gitignore æ–‡ä»¶touch .gitignore</code></pre><p><img src="https://i.loli.net/2020/04/09/kHQ7v4sVx2BizIg.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200409224803.png"></p><pre><code># æŠŠè¦å¿½ç•¥çš„æ–‡ä»¶æˆ–ç›®å½•å†™åˆ° .gitignore é‡Œé¢vim .gitignore.gitignore</code></pre><p><code>å½“ç„¶è¿™é‡Œåªæ˜¯æ•ˆæœæ¼”ç¤ºï¼Œ.gitignore è‚¯å®šæ˜¯éœ€è¦ä¸Šä¼ ä»“åº“ï¼Œè¿™æ ·æ‰èƒ½åŒæ­¥ï¼Œä¸ç„¶å›¢é˜Ÿå¼€å‘å½“ä¸­ï¼Œä½ å¿½ç•¥äº†è¿™ä¸ªæ–‡ä»¶ï¼ŒåŒæ—¶æ²¡æœ‰ï¼Œé‚£ä¹ˆè¿™å°±å°´å°¬äº†ï¼</code></p><p><img src="https://i.loli.net/2020/04/09/Z4oRxNSOUkKVHpu.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200409225037.png"></p><h4 id="2ã€åˆ é™¤è¿œç¨‹ä»“åº“æ–‡ä»¶"><a href="#2ã€åˆ é™¤è¿œç¨‹ä»“åº“æ–‡ä»¶" class="headerlink" title="2ã€åˆ é™¤è¿œç¨‹ä»“åº“æ–‡ä»¶"></a>2ã€åˆ é™¤è¿œç¨‹ä»“åº“æ–‡ä»¶</h4><pre><code># æ¯”å¦‚é¡¹ç›® vendor ç›®å½•ä¼ äº†ä¸Šå»ï¼ˆæˆ‘åŒäº‹å°±ç»å¸¸è¿™æ ·ï¼‰git rm -r --cached [æ–‡ä»¶æˆ–ç›®å½•]git commit -m &#39;å¤‡æ³¨&#39;git push# ä¿®æ”¹ .gitignore å¿½ç•¥æ–‡ä»¶/vendor/*.*git add . git commit -m &#39;å¤‡æ³¨&#39;git push</code></pre><p><img src="https://i.loli.net/2020/04/09/DO6XNdfMwPy4Rkv.png" alt="æ·±åº¦æˆªå›¾_é€‰æ‹©åŒºåŸŸ_20200409231340.png"></p><p>Git æ—¥å¸¸ä½¿ç”¨è¿™äº›å‘½ä»¤ï¼Œä¸ªäººæ„Ÿè§‰å®Œå…¨å¤Ÿäº†ã€‚å½“ç„¶ Git è‚¯å®šä¸æ­¢è¿™ä¹ˆä¸€ç‚¹ç‚¹æ“ä½œå‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ä¹Ÿå°±ç®—åˆšåˆšå…¥é—¨ Gitï¼ŒGit æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§éå¸¸ç‰›é€¼çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œæƒ³æ·±å…¥ Git å¯ä»¥ç»§ç»­æŸ¥è¯¢èµ„æ–™å­¦ä¹ ï¼æ—¥å¸¸ä½¿ç”¨è¿˜æœ‰ä»€ä¹ˆä¸è¶³çš„åœ°æ–¹ï¼Œæ¬¢è¿ç•™è¨€è¡¥å……ï¼</p><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="https://zh.wikipedia.org/wiki/Git" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/Git</a></p><p><a href="https://kb.kutu66.com/git/post_486783" target="_blank" rel="noopener">https://kb.kutu66.com/git/post_486783</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql-è¯»å†™åˆ†ç¦»</title>
      <link href="/2020/02/18/Mysql-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/"/>
      <url>/2020/02/18/Mysql-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>binlog æ˜¯ Mysql Sever å±‚ç»´æŠ¤çš„ä¸€ç§äºŒè¿›åˆ¶æ—¥å¿—ï¼Œä¸ innodb å¼•æ“ä¸­çš„ redo/undo log æ˜¯å®Œå…¨ä¸åŒçš„æ—¥å¿—ï¼›å…¶ä¸»è¦æ˜¯ç”¨æ¥è®°å½•å¯¹ Mysql æ•°æ®æ›´æ–°æˆ–æ½œåœ¨å‘ç”Ÿæ›´æ–°çš„ SQL è¯­å¥ï¼Œè®°å½•äº†æ‰€æœ‰çš„ DDL å’Œ DML (é™¤äº†æ•°æ®æŸ¥è¯¢è¯­å¥)è¯­å¥ï¼Œå¹¶ä»¥<code>äº‹åŠ¡</code>çš„å½¢å¼ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œè¿˜åŒ…å«è¯­å¥æ‰€æ‰§è¡Œçš„æ¶ˆè€—çš„æ—¶é—´ï¼ŒMysql çš„äºŒè¿›åˆ¶æ—¥å¿—æ˜¯äº‹åŠ¡å®‰å…¨å‹çš„ã€‚</p><p>ä¸€èˆ¬æ¥è¯´å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—å¤§æ¦‚ä¼šæœ‰ 1% çš„æ€§èƒ½æŸè€—(å‚è§ MySQL å®˜æ–¹ä¸­æ–‡æ‰‹å†Œ 5.1.24 ç‰ˆ)ã€‚</p><p>ä½œç”¨ä¸»è¦æœ‰ï¼š</p><ul><li>å¤åˆ¶ï¼šMySQL Replicationåœ¨ Maste rç«¯å¼€å¯ binlogï¼ŒMaster æŠŠå®ƒçš„äºŒè¿›åˆ¶æ—¥å¿—ä¼ é€’ç»™ slaves å¹¶å›æ”¾æ¥è¾¾åˆ° master-slave æ•°æ®ä¸€è‡´çš„ç›®çš„ </li><li>æ•°æ®æ¢å¤ï¼šé€šè¿‡ mysqlbinlog å·¥å…·æ¢å¤æ•°æ®</li><li>å¢é‡å¤‡ä»½</li></ul><p>äºŒè¿›åˆ¶æ—¥å¿—åŒ…æ‹¬ä¸¤ç±»æ–‡ä»¶ï¼šäºŒè¿›åˆ¶æ—¥å¿—ç´¢å¼•æ–‡ä»¶ï¼ˆæ–‡ä»¶ååç¼€ä¸º.indexï¼‰ç”¨äºè®°å½•æ‰€æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒäºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶ï¼ˆæ–‡ä»¶ååç¼€ä¸º.00000*ï¼‰è®°å½•æ•°æ®åº“æ‰€æœ‰çš„ DDL å’Œ DML (é™¤äº†æ•°æ®æŸ¥è¯¢è¯­å¥)è¯­å¥äº‹ä»¶ã€‚</p><h3 id="ä¸»æ•°æ®åº“"><a href="#ä¸»æ•°æ®åº“" class="headerlink" title="ä¸»æ•°æ®åº“"></a>ä¸»æ•°æ®åº“</h3><pre><code>1ã€ä¿®æ”¹ Mysql é…ç½®æ–‡ä»¶  æ³¨ï¼šMysql 5.7.2 ä»¥åæ²¡æœ‰é»˜è®¤é…ç½®äº†ï¼Œä¸€åˆ‡é…ç½®éœ€è¦è‡ªè¡Œé…ç½®vim /etc/mysql/my.cnfserver-id=1           # æœåŠ¡å™¨å”¯ä¸€IDlog-bin=mysql-bin     # mysql-binæ—¥å¿—å‰ç¼€ï¼Œå¯è‡ªå®šä¹‰binlog-do-db=db1,db2  # éœ€è¦åŒæ­¥çš„åº“binlog-ignore-db=db1,db2 # å¿½ç•¥ä¸åŒæ­¥çš„åº“binlog ä¸¤å‚æ•°2é€‰1 éƒ½ä¸å†™å…¨éƒ¨åŒæ­¥2ã€æŸ¥è¯¢ bin-log æ˜¯å¦å¼€å¯show variables like &#39;%log_bin%&#39;;+---------------------------------+--------------------------------+| Variable_name                   | Value                          |+---------------------------------+--------------------------------+| log_bin                         | ON                             || log_bin_basename                | /var/lib/mysql/mysql-bin       || log_bin_index                   | /var/lib/mysql/mysql-bin.index || log_bin_trust_function_creators | OFF                            || log_bin_use_v1_row_events       | OFF                            || sql_log_bin                     | ON                             |+---------------------------------+--------------------------------+6 rows in set (0.01 sec)3ã€åœ¨ä¸»æœåŠ¡å™¨ä¸Šå»ºç«‹å¸æˆ·å¹¶æˆæƒ# ä»¥ä¸‹ä¸º 5.x ç‰ˆæœ¬ åˆ›å»ºç”¨æˆ·å¹¶ä¸”æˆæƒgrant  replication slave  on *.*  to &#39;daofaziran&#39;@&#39;%&#39; identified by &#39;654321&#39;;# ä»¥ä¸‹ä¸º 8 ç‰ˆæœ¬ åˆ›å»ºç”¨æˆ·å¹¶ä¸”æˆæƒcreate user â€˜daofaziranâ€™@â€˜%â€™ identified by â€˜123456â€™;grant all privileges on *.* to â€˜daofaziranâ€™@â€™%â€™ with grant option; flush privileges;4ã€æŸ¥çœ‹çŠ¶æ€show master status;# File å’Œ Position è¦è®°å½•å¥½+------------------+----------+--------------+------------------+-------------------+| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |+------------------+----------+--------------+------------------+-------------------+| mysql-bin.000001 |      155 | wangzhuan    |                  |                   |+------------------+----------+--------------+------------------+-------------------+1 row in set (0.00 sec)</code></pre><h3 id="ä»æ•°æ®åº“"><a href="#ä»æ•°æ®åº“" class="headerlink" title="ä»æ•°æ®åº“"></a>ä»æ•°æ®åº“</h3><pre><code>1ã€ä¿®æ”¹ Mysql é…ç½®æ–‡ä»¶ vim /etc/mysql/my.cnfserver-id=2           # æœåŠ¡å™¨å”¯ä¸€IDlog-bin=mysql-bin     # mysql-binæ—¥å¿—å‰ç¼€ä»¥ä¸‹å¯é€‰å‚æ•°ï¼šreplicate-do-db=db1,db2replicate-ignore-db=db1,db22ã€è¿›å…¥mysqlstop slave; CHANGE MASTER TO  # ä¸»æœåŠ¡å™¨åœ°å€  MASTER_HOST=&#39;192.168.1.6&#39;,  # ä¸»æœåŠ¡å™¨è´¦å·  MASTER_USER=&#39;daofaziran&#39;,  # ä¸»æœåŠ¡å™¨å¯†ç   MASTER_PASSWORD=&#39;123456&#39;,  # ä¸»æœåŠ¡å™¨ç«¯å£  MASTER_PORT=3306,  # ä¸»æœåŠ¡å™¨ binlog æ—¥å¿—æ–‡ä»¶å,å¯¹åº”çš„ show master status çš„ File  MASTER_LOG_FILE=&#39;mysql-bin.000002&#39;,  # ä¸»æœåŠ¡å™¨æ—¥å¿—è®°å½•èµ·ç‚¹ä½ç½®ï¼Œå¯¹åº”çš„  show master status çš„ Position  MASTER_LOG_POS=155,  # è¿æ¥é‡è¯•æ¬¡æ•°  MASTER_CONNECT_RETRY=10;start slave;# æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸshow slave status;Slave_IO_Running:Yes æ­¤è¿›ç¨‹è´Ÿè´£ä»æœåŠ¡å™¨ä»ä¸»æœåŠ¡å™¨ä¸Šè¯»å–binlog æ—¥å¿—ï¼Œå¹¶å†™å…¥ä»æœåŠ¡å™¨ä¸Šçš„ä¸­ç»§æ—¥å¿—ã€‚ Slave_SQL_Running:Yes æ­¤è¿›ç¨‹è´Ÿè´£è¯»å–å¹¶ä¸”æ‰§è¡Œä¸­ç»§æ—¥å¿—ä¸­çš„binlogæ—¥å¿—ï¼Œ æ³¨ï¼šä»¥ä¸Šä¸¤ä¸ªéƒ½ä¸ºyesåˆ™è¡¨æ˜æˆåŠŸ</code></pre><p>binlog æ—¥å¿—æ“ä½œçš„å¸¸ç”¨å‘½ä»¤</p><pre><code># æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ log-bin æ—¥å¿—flush logs;# æ¸…ç©ºæ‰€æœ‰çš„log-binæ—¥å¿—ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæ–°çš„ log-bin æ—¥å¿—reset master;#æŸ¥çœ‹æœ€åï¼ˆæ–°ï¼‰çš„ä¸€ä¸ª log-bin æ—¥å¿—show master status;</code></pre><h3 id="Laravel-è¯»å†™åˆ†ç¦»"><a href="#Laravel-è¯»å†™åˆ†ç¦»" class="headerlink" title="Laravel è¯»å†™åˆ†ç¦»"></a>Laravel è¯»å†™åˆ†ç¦»</h3><pre><code>        &#39;mysql&#39; =&gt; [            &#39;driver&#39; =&gt; &#39;mysql&#39;,            &#39;read&#39; =&gt; [                &#39;host&#39; =&gt; &#39;192.168.1.6&#39;,                &#39;port&#39; =&gt; &#39;3307&#39;,                &#39;password&#39; =&gt; &#39;root&#39;            ],            &#39;write&#39; =&gt; [                &#39;host&#39; =&gt; &#39;192.168.1.6&#39;,                &#39;port&#39; =&gt; &#39;3306&#39;,                &#39;password&#39; =&gt; &#39;root&#39;            ],            &#39;url&#39; =&gt; env(&#39;DATABASE_URL&#39;),//            &#39;host&#39; =&gt; env(&#39;DB_HOST&#39;, &#39;127.0.0.1&#39;),//            &#39;port&#39; =&gt; env(&#39;DB_PORT&#39;, &#39;3306&#39;),            &#39;database&#39; =&gt; env(&#39;DB_DATABASE&#39;, &#39;forge&#39;),            &#39;username&#39; =&gt; env(&#39;DB_USERNAME&#39;, &#39;forge&#39;),//            &#39;password&#39; =&gt; env(&#39;DB_PASSWORD&#39;, &#39;&#39;),            &#39;unix_socket&#39; =&gt; env(&#39;DB_SOCKET&#39;, &#39;&#39;),            &#39;charset&#39; =&gt; &#39;utf8mb4&#39;,            &#39;collation&#39; =&gt; &#39;utf8mb4_unicode_ci&#39;,            &#39;prefix&#39; =&gt; &#39;&#39;,            &#39;prefix_indexes&#39; =&gt; true,            &#39;strict&#39; =&gt; true,            &#39;engine&#39; =&gt; null,            &#39;options&#39; =&gt; extension_loaded(&#39;pdo_mysql&#39;) ? array_filter([                PDO::MYSQL_ATTR_SSL_CA =&gt; env(&#39;MYSQL_ATTR_SSL_CA&#39;),            ]) : [],        ],</code></pre><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="https://blog.51cto.com/zhongliang/2152917" target="_blank" rel="noopener">https://blog.51cto.com/zhongliang/2152917</a></p><p><a href="https://www.cnblogs.com/chenhaoyu/p/10773988.html" target="_blank" rel="noopener">https://www.cnblogs.com/chenhaoyu/p/10773988.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-OSS</title>
      <link href="/2020/01/16/Laravel-OSS/"/>
      <url>/2020/01/16/Laravel-OSS/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>åœ¨é¡¹ç›®å½“ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šé€‰æ‹©æœ¬åœ°æœåŠ¡å™¨å­˜å‚¨è®¿é—®èµ„æºï¼Œè¿™æ ·å¯¹äºæœåŠ¡å™¨æ¥è¯´çš„è¯ä¹Ÿæ¯”è¾ƒæ¶ˆè€—èµ„æºã€‚è€Œç¬¬ä¸‰æ–¹çš„å­˜å‚¨æœåŠ¡å™¨å°±å¯ä»¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œç®€ç§° OSSï¼Œæ˜¯ä¸€ç§é¢å‘æµ·é‡æ•°æ®è§„æ¨¡çš„åˆ†å¸ƒå¼å­˜å‚¨æœåŠ¡ï¼Œå…·æœ‰ç¨³å®šã€å¯é ã€å®‰å…¨ã€ä½æˆæœ¬çš„ç‰¹ç‚¹ï¼Œèƒ½å¤Ÿæä¾›åä¸€ä¸ªä¹çš„æ•°æ®å¯é æ€§ã€‚ OSS æä¾›ä¸å¹³å°æ— å…³çš„ RESTful API æ¥å£ï¼Œæ‚¨å¯ä»¥åœ¨äº’è”ç½‘ä»»ä½•ä½ç½®å­˜å‚¨å’Œè®¿é—®ã€‚ OSS çš„å®¹é‡å’Œå¤„ç†èƒ½åŠ›å¼¹æ€§æ‰©å±•ï¼Œå¹¶æä¾›å¤šç§å­˜å‚¨ç±»å‹ä¾›æ‚¨é€‰æ‹©ï¼Œå…¨é¢ä¼˜åŒ–å­˜å‚¨æˆæœ¬ã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p> aliyuncs/<a href="https://packagist.org/packages/aliyuncs/oss-sdk-php" target="_blank" rel="noopener">oss-sdk-php</a></p><pre><code>$ composer require aliyuncs/oss-sdk-php</code></pre><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>ä¸Šä¼ æ–‡ä»¶</p><pre><code>use OSS\OssClient;use OSS\Core\OssException;ry{     $oss = new OssClient(id,key,endpoint)    $result = $oss-&gt;uploadFile(bucket, ä¿å­˜åˆ° oss çš„è·¯å¾„,ä¸Šä¼ æ–‡ä»¶çš„è·¯å¾„);} catch(OssException $e) {    ApiExceptionError(&#39;ä¸Šä¼ å¤±è´¥,è¯·é‡æ–°ä¸Šä¼ &#39;);}</code></pre><blockquote><p>æœªå®Œä»£ç»­</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-é˜¿é‡Œäº‘çŸ­ä¿¡</title>
      <link href="/2020/01/16/Laravel-%E9%98%BF%E9%87%8C%E4%BA%91%E7%9F%AD%E4%BF%A1/"/>
      <url>/2020/01/16/Laravel-%E9%98%BF%E9%87%8C%E4%BA%91%E7%9F%AD%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>åœ¨æˆ‘ä»¬å¤§å¤šæ•°é¡¹ç›®å½“ä¸­ï¼ŒçŸ­ä¿¡æœåŠ¡å±äºå¿…ä¸å¯å°‘çš„ä¸€ç§åŠŸèƒ½ã€‚æ¥å£å¹³å°ä¹Ÿæ˜¯å¤šå¦‚ç‰›æ¯›ã€‚ä»Šå¤©è¦ä»‹ç»çš„è¿™ä¸ªåŒ…ï¼ŒåŒ…å«äº†å¤§å¤šçŸ¥åå¹³å°çš„çŸ­ä¿¡æœåŠ¡æ¥å…¥ï¼Œä¹Ÿæ˜¯æˆ‘ç›®å‰ä½¿ç”¨è¿‡æœ€å¥½çš„ä¸€ä¸ªçŸ­ä¿¡æœåŠ¡æ‰©å±•åŒ…ã€‚å¼€å‘è€…ä¹Ÿæ˜¯ Learnku çŸ¥åäººç‰© â€œè¶…å“¥â€å¼€å‘ï¼Œåœ¨è¿™é‡Œä¹Ÿå®‰åˆ©ä¸€ä¸‹è¶…å“¥çš„ PHP æ‰©å±•åŒ…å¼€å‘å®æˆ˜æ•™ç¨‹ï¼š<a href="https://learnku.com/courses/creating-package" target="_blank" rel="noopener">ç‚¹æˆ‘è·³è½¬</a></p><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ol><li>æ”¯æŒç›®å‰å¸‚é¢å¤šå®¶æœåŠ¡å•†</li><li>ä¸€å¥—å†™æ³•å…¼å®¹æ‰€æœ‰å¹³å°</li><li>ç®€å•é…ç½®å³å¯çµæ´»å¢å‡æœåŠ¡å•†</li><li>å†…ç½®å¤šç§æœåŠ¡å•†è½®è¯¢ç­–ç•¥ã€æ”¯æŒè‡ªå®šä¹‰è½®è¯¢ç­–ç•¥</li><li>ç»Ÿä¸€çš„è¿”å›å€¼æ ¼å¼ï¼Œä¾¿äºæ—¥å¿—ä¸ç›‘æ§</li><li>è‡ªåŠ¨è½®è¯¢é€‰æ‹©å¯ç”¨çš„æœåŠ¡å•†</li><li>æ›´å¤šç­‰ä½ å»å‘ç°ä¸æ”¹è¿›â€¦</li></ol><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p><a href="https://packagist.org/packages/overtrue/easy-sms" target="_blank" rel="noopener">EasySms</a> </p><pre><code>$ composer require overtrue/easy-sms</code></pre><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>ä»¥ä¸‹ä»¥é˜¿é‡Œäº‘ä¸ºä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ config ç›®å½•å½“ä¸­æ–°å»ºä¸€ä¸ª aliyun.php é…ç½®æ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><pre><code>return [    &#39;aliyun&#39; =&gt; [        // HTTP è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰        &#39;timeout&#39; =&gt; 5.0,        // é»˜è®¤å‘é€é…ç½®        &#39;default&#39; =&gt; [            // ç½‘å…³è°ƒç”¨ç­–ç•¥ï¼Œé»˜è®¤ï¼šé¡ºåºè°ƒç”¨            &#39;strategy&#39; =&gt; \Overtrue\EasySms\Strategies\OrderStrategy::class,            // é»˜è®¤å¯ç”¨çš„å‘é€ç½‘å…³            &#39;gateways&#39; =&gt; [                &#39;aliyun&#39;,            ],        ],        // å¯ç”¨çš„ç½‘å…³é…ç½®        &#39;gateways&#39; =&gt; [            &#39;errorlog&#39; =&gt; [                &#39;file&#39; =&gt; &#39;/tmp/easy-sms.log&#39;,            ],            &#39;aliyun&#39; =&gt; [                &#39;access_key_id&#39; =&gt; env(&#39;ACCESS_KEY_ID&#39;),                &#39;access_key_secret&#39; =&gt; env(&#39;ACCESS_KEY_SECRET&#39;),                &#39;sign_name&#39; =&gt; env(&#39;SIGN_NAME&#39;),// é˜¿é‡Œäº‘çš„ç­¾å            ],        ],    ],    &#39;template&#39; =&gt; env(&#39;ALIYUN_TEMPLATE&#39;),// é˜¿é‡Œäº‘çš„æ¨¡æ¿ ID];</code></pre><pre><code>use Overtrue\EasySms\EasySms;$easySms = new EasySms(config(&#39;aliyun.aliyun&#39;));$code = str_pad(random_int(1, 999999), 6, 0, STR_PAD_LEFT);try{    $result = $easySms-&gt;send(â€˜æ‰‹æœºå·ç â€™, [        &#39;template&#39; =&gt; config(&#39;aliyun.template&#39;), // æ¨¡æ¿ ID        &#39;data&#39; =&gt; [            &#39;number&#39; =&gt; $code // data é‡Œé¢ä¼ é€’çš„å°±æ˜¯ä½ çš„æ¨¡æ¿å˜é‡ï¼Œ        ],    ],[&#39;aliyun&#39;]);     }catch (\GuzzleHttp\Exception\ClientException $exception){         $response = $exception-&gt;getResponse();         $result = json_decode($response-&gt;getBody()-&gt;getContents(), true);         return $this-&gt;response-&gt;errorInternal($result[&#39;msg&#39;]??&#39;çŸ­ä¿¡å‘é€å¼‚å¸¸&#39;);     }</code></pre><p>æ­£å¸¸çš„æµç¨‹æƒ…å†µä¸‹å¦‚æœå‡ºç°å‘é€å¤±è´¥æˆ–è€…åˆ«çš„é”™è¯¯ï¼Œå¯ä»¥æ‰¾åˆ°åŒ… overtrue/easy-sms/src/Gateways  ä¸‹é¢ï¼Œå› ä¸ºæˆ‘ç›®å‰ä½¿ç”¨çš„ é˜¿é‡Œäº‘é‚£ä¹ˆæˆ‘çš„å°±æ˜¯ AliyunGateway.php æ‰¾åˆ° send åœ¨ result è¿”å›ä¹‹å‰æ‰“å°ä¸€ä¸‹å°±å¯ä»¥çœ‹åˆ°é”™è¯¯ã€‚è¿™é‡Œçš„é”™è¯¯ä¹Ÿæ˜¯é˜¿é‡Œäº‘æœåŠ¡é”™è¯¯ï¼Œè€Œä¸æ˜¯ç¨‹åºçš„é”™è¯¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019å¹´å¹´åº¦æ€»ç»“</title>
      <link href="/2020/01/14/2019%E5%B9%B4%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"/>
      <url>/2020/01/14/2019%E5%B9%B4%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>å›é¡¾ 2019 å±•æœ› 2020ï¼Œæ—¶é—´æ€»æ˜¯åœ¨è½¬çœ¼å³é€ï¼å½“æˆ‘ä»¬ç«™åœ¨æ—¶é—´çº¿å‰é¢çš„æ—¶å€™ï¼Œæ€»æ˜¯å¯¹æ—¶é—´çº¿åé¢çš„æ‰€æœ‰äº‹æƒ…æŠ±æœ‰å¾ˆå¤§çš„æœŸæœ›ä¸è§„åˆ’ï¼Œæˆ–è€…è¿™çš„ â€˜æˆ‘ä»¬â€™ åº”è¯¥ç”¨ â€˜æˆ‘â€™ æ¯”è¾ƒåˆé€‚ï¼æˆ‘ç‰¹åˆ«å–œæ¬¢ä¸€å¥è¯ï¼Œåšè¿‡åˆ«åæ‚”ï¼Œé”™è¿‡åˆ«å›å¤´ï¼ç„¶è€ŒçœŸå®çš„æˆ‘æ€»æ˜¯å®åœ¨è·Ÿåˆ«äººè¿°è¯´æˆ‘çš„ â€œåæ‚”çš„äº‹æƒ…â€ï¼Œä¹Ÿè®¸æ˜¯å¿ƒæ™ºæœªæˆç†Ÿå§ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å–œæ¬¢æœ‰ä»€ä¹ˆå°±è¯´å‡ºæ¥æ†‹ç€éš¾å—ï¼æ¯è¿‡ä¸€æ®µæ—¶é—´ï¼Œæˆ‘æ€»æ˜¯å–œæ¬¢åœä¸‹æ¥æ•´ç†ä¸€ä¸‹æ‰€æœ‰å‰é¢çš„äº‹æƒ…ï¼Œå†™é¡¹ç›®ä¹Ÿæ˜¯å¦‚æ­¤æ€»æ˜¯å¸Œæœ›è‡ªå·±çš„ä»£ç èƒ½å¤Ÿè¾¾åˆ°å¿ƒä¸­ç†æƒ³çš„æ ·å­ï¼Œä½†æ˜¯äº‹ä¸æ„¿è¿æ¯”è¾ƒå¤šé‚£ä¹ˆä¸€äº›ï¼Œæ€»ä½“ä¸Šæ¥è¯´è¿˜ç®—åŠæ ¼ã€‚æˆ‘ä¹Ÿå–œæ¬¢æ€»æ˜¯æƒ³æŠŠè‡ªå·±çŸ¥è¯†æ•´ç†å®Œå–„ï¼Œä½†æ€»æ˜¯å‘ç°æ—¶é—´ä¸å¤Ÿç”¨ï¼ˆå½“ç„¶è¿™ä¹Ÿæ˜¯è‡ªå·±è¯´ç»™è‡ªå·±çš„å€Ÿå£ï¼Œæ—¶é—´æŒ¤æŒ¤è¿˜æ˜¯æœ‰çš„ ï¼‰å¸Œæœ› 2020 èƒ½è‡ªæˆ‘æ”¹å˜ä¸€å“ˆå§ï¼Œå®ç°è‡ªæˆ‘çš„è¿›åŒ–ï¼</p><p><img src="https://i.loli.net/2020/01/15/QwPnoZreAbYaV7K.jpg" alt="timg.jpeg"></p><h3 id="å®æ³¢ç¯‡"><a href="#å®æ³¢ç¯‡" class="headerlink" title="å®æ³¢ç¯‡"></a>å®æ³¢ç¯‡</h3><p>19 å¹´ç¦»å¼€å®æ³¢å…¬å¸å›åˆ°æˆéƒ½ï¼Œæœ€å¼€å§‹æˆ‘è€æ±‰å’Œæˆ‘å¦ˆç‰¹åˆ«ä¸æ„¿æ„ã€‚é¦–å…ˆè¯´ä¸€å“ˆï¼Œæˆ‘ä¸æ˜¯å¦ˆå®ç”·ï¼Œåªæ˜¯æˆ‘ä»å°å°±å»çš„å®æ³¢è¯»ä¹¦ç”Ÿæ´»ï¼Œæœ‹å‹äº²æˆšåŸºæœ¬éƒ½åœ¨å®æ³¢ï¼Œä¸€ç›´è·Ÿç€ä»–ä»¬é‡æ¥æ²¡æœ‰ç¦»å¼€è¿‡ä»–ä»¬ï¼Œæ‰€ä»¥å¯¹äºæˆ‘ä¸åœ¨å»å®æ³¢è·Ÿä»–ä»¬ä¸€èµ·ç‰¹åˆ«ä¸æ”¾å¿ƒã€‚æœ€åæˆ‘æ”¾å‡ºäº†ç»ˆæå¤§æ‹›ä»–ä»¬æ‰æ„¿æ„æˆ‘å›æ¥ï¼Œæˆ‘è¯´å›æ¥åä¸€å®šæ‰¾åˆ°ä¸ªå¥³æœ‹å‹ï¼Œä»–ä»¬æ‰æ„¿æ„ã€‚ï¼ˆç„¶è€Œäº‹å®ç¡®æ˜¯è¿ä¸ªå¥³çš„å¾®ä¿¡éƒ½æ²¡ï¼Œåœ¨æ­¤æˆ‘è¦å¼ºè¡Œç”©ä¸€ä¸‹é”…ï¼Œä¸æ˜¯ä¸æƒ³æ‰¾æ˜¯åœˆå­å¤ªå°æ²¡åŠæ³•å‘€ï¼ï¼‰</p><p>å¸ŒéŸµä¸€ä¸ªåšé’¢ç´æ•™è‚²ç±» App è½¯ä»¶å¼€å‘çš„å›¢é˜Ÿï¼Œä¸€ä¸ªéå¸¸ä¸é”™çš„ä¸€ä¸ªå›¢é˜Ÿï¼Œå…¬å¸çš„ç»„ç»‡æ¶æ„å®Œæ•´ï¼Œå›¢é˜Ÿæ°”æ°›ä¹Ÿæ˜¯éå¸¸çš„å¥½ã€‚ä»¥ä¸‹æ˜¯ 2019 å¹´å¹´åº¦å›¢é˜ŸåŠ¨æ¼«è‡ªç”»åƒã€‚</p><p><img src="https://i.loli.net/2020/01/16/f45yHsDKAhJzRia.jpg" alt="img.jpeg"></p><p>æˆ‘è¿˜ä¾ç¨€è®°å¾—åˆšå»é¢è¯•ï¼Œä¸»ç®¡å¤§å“¥å¾ˆçœ‹å¥½æˆ‘ï¼Œåœ¨é¢è¯•å®Œæˆåé€æˆ‘ç¦»å¼€æ—¶è·Ÿæˆ‘ä¹Ÿåˆ†äº«äº†ä¸€äº›ä»–çš„ç»å†ï¼ˆå¯èƒ½å…¬å¸åŸºæœ¬éƒ½æ˜¯å®æ³¢æœ¬åœ°äººï¼Œè€Œä»–æ˜¯è´µå·äººè€Œæˆ‘æ˜¯å››å·äººçš„åŸå› å§ï¼‰ï¼Œå¯æƒœæœ€åè®©ä»–å¤±æœ›äº†ã€‚å¹´è½»å˜›ï¼Œæ€»æ˜¯æœ‰äº›æ—¶å€™çŠ¯æ··ã€‚ä¹Ÿæ„Ÿè°¢å½“åˆè¾‰å“¥å’Œä¸»ç®¡å¤§å“¥é€‰æ‹©äº†æˆ‘ï¼Œå·¥ä½œä¹‹åæˆ‘é—®è¿‡è¾‰å“¥ä¸ºå•¥é€‰æˆ‘ï¼Œæˆ‘å·²ç»è®°ä¸æ¸…ä»–å½“æ—¶æ€ä¹ˆè¯´çš„äº†ï¼Œæˆ‘æƒ³ä¼°è®¡æ˜¯æˆ‘çš„è¯šå®å§ã€‚æˆ‘å…¥å¸ŒéŸµæ—¶ç®€å†å®Œå…¨çœŸå®ï¼Œæ²¡æœ‰ä»»ä½•å‚å‡ï¼Œæ²¡å·¥ä½œç»éªŒï¼Œæ²¡é¡¹ç›®ç»éªŒï¼Œå”¯ä¸€æœ‰çš„æ˜¯æˆ‘ç¦»å¼€å­¦æ ¡é‚£å¤©èµ·å°±ä¸€ç›´ä»äº‹è®¡ç®—æœºè¿™å—ï¼Œè½¬å¼€å‘å‰å°±ä»äº‹è¿ç»´è¿™å—ï¼ˆå½“ç„¶æ˜¯æœ€ä½çº§çš„è¿ç»´æˆ–è€…ç®€å•è¯´ä¿®ç”µè„‘çš„åªæ˜¯è´Ÿè´£å‚åŒºï¼‰åœ¨ç°ä»Šçš„å¤§ç¯å¢ƒä¸‹æ•¢å†™çœŸå®çš„ç®€å†ä¹Ÿæ˜¯éœ€è¦ä¸€å®šçš„å‹‡æ°”çš„ï¼Œåˆæ²¡å­¦å†åˆæ²¡é¡¹ç›®ç»éªŒã€‚</p><p>äººç”Ÿæ€»æ˜¯è¿™æ ·ï¼Œç”Ÿå‘½å½“ä¸­æ€»æ˜¯ä¼šæœ‰é‚£ä¹ˆå‡ ä¸ªç«™ï¼Œä½ ä¼šåœ¨å“ªé‡Œåœç•™ï¼Œä½†æ˜¯æœ€ç»ˆè¿˜æ˜¯ä¼šé‡æ–°æ‰¬å¸†å¯èˆªï¼</p><p>å‘Šåˆ«äº†æˆé•¿çš„ç¬¬ä¸€ç«™ï¼Œæˆ‘é©¶å‘äº†æˆ‘çš„ç¬¬äºŒç«™ï¼Œæˆéƒ½ï¼Œæˆéƒ½ç¯‡å¯èˆªï¼</p><p><img src="https://i.loli.net/2019/09/03/RWBTwtkD2MjPavh.jpg" alt></p><h3 id="æˆéƒ½ç¯‡-ä¸€"><a href="#æˆéƒ½ç¯‡-ä¸€" class="headerlink" title="æˆéƒ½ç¯‡ ä¸€"></a>æˆéƒ½ç¯‡ ä¸€</h3><p>å››å·ç„é€šç§‘æŠ€æœ‰é™å…¬å¸ï¼Œé¢è¯•æˆ‘çš„æ˜¯ç½—å“¥ï¼Œåº”è¯¥ç®—ä¸ä¸Šé¢è¯•è€Œæ˜¯ç®—è®²è§£çŸ¥è¯†ã€‚æ²¡è®°é”™çš„è¯å¤§æ¦‚é¢è¯•äº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œå¾ˆå¤šé—®é¢˜ä¸çŸ¥é“ï¼Œç½—å“¥è·Ÿå¤§å¤šæ•°é¢è¯•ç®¡ä¸ä¸€æ ·ï¼Œä¸ä¼šå› ä¸ºä½ ä¸ä¼šè€Œæœ‰ç‚¹åˆ«çš„æ ·å­(å…·ä½“å•¥æ ·å­æ„Ÿè§‰å°±æ˜¯æœ‰ç‚¹çœ‹ä¸èµ·å§)ï¼Œä¸çŸ¥é“æˆ–è€…è®¤çŸ¥é”™è¯¯çš„ä»–éƒ½ä¼šä¸€ä¸€çš„ç»™ä½ è®²è§£ã€‚é€šè¿‡é‚£ä¸€æ¬¡é¢è¯•æˆ‘è¿˜å­¦åˆ°äº†ä¸å°‘ä¸œè¥¿ï¼Œå½±åƒæœ€æ·±çš„æ˜¯ä»–æŠŠ MySQL ç´¢å¼•è¿™ä¸ªä¸œè¥¿ç»™æˆ‘è®²è§£çš„å¤§æ¦‚æ˜ç™½äº†ï¼Œä»¥å‰åŸºæœ¬éƒ½æ˜¯æ¨¡ç³Šçš„è®¤çŸ¥ã€‚è¿™æ ·çš„é¢è¯•æ‰æœ‰æ„ä¹‰ï¼Œæœ‰æ”¶è·ï¼ä¸åƒä¸€äº›çœ¼ç›åœ¨å¤©ä¸Šçš„äººä¸Šæ¥å°±é—®ï¼ˆå¤„ç†è¿‡åƒä¸‡çº§æ•°æ®æ²¡æœ‰å•Šï¼Œé«˜å¹¶å‘å¤„ç†è¿‡å—ï¼‰ä¸æ€•æ‚¨ç¬‘ï¼Œç°åœ¨åšè¿‡ä¸‰ä¸ªé¡¹ç›®åˆ«è¯´åƒä¸‡çº§åˆ«äº† 10 Wéƒ½æ²¡å¤„ç†è¿‡ã€‚è¿™æ ·é—®çš„å¾€å¾€æ˜¯é‚£ç§å‡ ä¸ªäººçš„å…¬å¸ï¼Œæœ‰æ—¶å€™çœŸå¿ä¸ä½æƒ³é—®è´µå…¬å¸éƒ½è¿™æ ·ç‰›é€¼äº†ï¼Œå›¢é˜Ÿå’‹è¿™ç‚¹äººå‘¢ï¼Ÿæ²¡åŠæ³•å‘€ï¼Œæœ¬äººçœ¼ç•ŒçŸ¥è¯†é¢å¤ªä½ï¼Œè§ç¬‘è§ç¬‘ã€‚</p><p>é¢è¯•ç»“æŸåï¼Œå°±è¯´ç­‰å¾…é€šçŸ¥ï¼Œæˆ‘ä¸€æƒ³è‚¯å®šæ²¡æˆå•Šã€‚å›ç­”çš„ä¹Ÿä¸å¥½ï¼ŒåŸºæœ¬æ²¡äº†ï¼Œå°±å»ä¸‹ä¸€å®¶å…¬å¸é¢è¯•äº†ã€‚ç»“æœä¸‹ä¸€å®¶å…¬å¸ç»™æˆ‘æ°”çš„å‘€ï¼Œæ˜¯ä¸ªåŸ¹è®­ç»“æ„ï¼Œä¸ºäº†çº¦å¥½çš„æ—¶é—´ä¸è¿Ÿåˆ°æˆ‘è¿˜ä¸“é—¨ æ‰“è½¦è¿‡å»çš„ï¼Œç»“æœæ˜¯ä¸ªåŸ¹è®­æœºæ„ã€‚æœ€åæƒ³äº†æƒ³å‹æ ¹æ²¡æŠ•é€’ä»–ä»¬å…¬å¸ç®€å†ï¼Œæˆ‘æ˜¯æ‰‹æœºæ”¶åˆ°çŸ­ä¿¡å°±å»äº†ä¹Ÿæ²¡å¤ªæ³¨æ„ï¼Œæˆ‘å¥½å¥‡çš„æ˜¯æ‰‹æœºå·ç æ˜¯å¦‚ä½•è¢«ä»–ä»¬çŸ¥é“çš„ï¼Œéƒ½æ˜¯å¥—è·¯å‘€ã€‚</p><p>è¿‡äº†äºŒå¤©è¿˜æ˜¯ä¸‰å¤©ï¼Œæ”¶åˆ°äº†è¡Œæ”¿çš„é€šçŸ¥å¯ä»¥å…¥èŒç„é€šäº†ã€‚å½“æ—¶å¾ˆé«˜å…´ï¼Œå› ä¸ºè¿™å“ˆæœ‰å¤§ä½¬å¸¦äº†ï¼Œç‰¹åˆ«é«˜å…´ã€‚</p><p>ç„é€šå‘¢ï¼Œåšçš„é¡¹ç›®å°±æ˜¯åŒºå—é“¾çš„ä¸œè¥¿ï¼Œè¯´æ˜¯åŒºå—é“¾å…·ä½“æœ‰æ²¡æœ‰ä¸Šé“¾æˆ‘ä¹Ÿæ²¡ææ¸…æ¥šï¼Œç”¨çš„ä¹Ÿå°±æ˜¯ç«å¸çš„æ¥å£ã€‚ä»å…¥èŒå¼€å§‹ï¼Œæœ‰å•¥ä¸æ‡‚çš„å°±é—®ç½—å“¥ï¼Œåæ­£ä»–ä¹Ÿä¸ä¼šçƒ¦ä½ ä¸æ‡‚é—®ä»–ï¼Œç›¸åç½—å“¥æ˜¯ä¸€ä¸ªç‰¹åˆ«å–œæ¬¢å¸®åŠ©äººçš„äººï¼Œåªè¦ä¸æ‡‚çš„é—®ä»–éƒ½ä¼šè€å¿ƒçš„è§£ç­”ã€‚ä»ä»£ç çš„è¯­æ³•ï¼Œåˆ°ä¸€äº›ä¸œè¥¿ä½¿ç”¨å’ŒåŸç†éƒ½ä¼šä¸€ä¸€è®²è§£ï¼Œåæ­£æˆ‘éå¸¸å–œæ¬¢è·Ÿç€ç½—å“¥ï¼Œæˆé•¿å¿«å‘€ï¼</p><p>åœ¨ç„é€šçš„æ—¥å­æ¯å¤©å°±è¿™æ ·å·¥ä½œç€ï¼Œå­¦ä¹ ç€ï¼Œæ²¡äº‹æƒ…çš„æ—¶å€™å¤§å®¶å°±ä¸€èµ·å¹å¹å£³å­ï¼Œå¼€å¼€è½¦ã€‚å¥½ä¸æ¬¢ä¹ï¼</p><p>å¯æƒœå¥½æ™¯ä¸é•¿ï¼Œåœ¨é¡¹ç›®ç¬¬äºŒä¸ªç‰ˆæœ¬å¼€å§‹çš„æ—¶å€™ï¼Œ8 æœˆä»½çš„æŸä¸€å¤©æ¸…æ™¨ã€‚è€æ¿å…ˆæ˜¯æŠŠè¡Œæ”¿ï¼Œç½—å“¥å’Œå‰ç«¯å«è¿›åŠå…¬å®¤ï¼Œæˆ‘ä¸€å“ˆå°±è§‰å¾—ä¸å¯¹äº†ã€‚å› ä¸ºé‚£æ®µæ—¶é—´ç½—å“¥ä¸€ç›´æŒ‚å˜´è¾¹çš„å°±æ˜¯å…¬å¸å¿«å€’é—­äº†ï¼Œç»“æœçœŸçš„å€’é—­äº†ï¼ï¼ï¼ä»–ä»¬å…ˆå•ç‹¬èŠäº†åï¼Œè€æ¿å«æ‰€æœ‰äººè¿›å»äº†ï¼Œå…¬å¸æ­£å¼å®£å¸ƒå€’é—­ï¼å¯æ°”çš„æ˜¯åˆ°ç°åœ¨è¿˜æœ‰ä¸€ç‚¹å·¥é’±æ²¡ç»™ï¼Œæå¾—æˆ‘æ²¡äº‹ç»™è€æ¿å‘å‡ æœµèŠ±ã€‚ä¸èˆç„é€šï¼Œæ— å¥ˆå‘Šåˆ«ï¼å¼€å¯ç¬¬äºŒç¯‡ç« ï¼</p><p><img src="https://i.loli.net/2020/01/16/s2EHUQRVcNAgMx1.jpg" alt="96c6035bd38a43c3bc532447a7292ee2.jpeg"></p><h3 id="æˆéƒ½ç¯‡-äºŒ"><a href="#æˆéƒ½ç¯‡-äºŒ" class="headerlink" title="æˆéƒ½ç¯‡ äºŒ"></a>æˆéƒ½ç¯‡ äºŒ</h3><p>æˆ‘æ˜“ç½‘ç»œç§‘æŠ€æœ‰é™å…¬å¸ï¼Œé¢è¯•æˆ‘çš„æ˜¯å…¬å¸è´Ÿè´£é¡¹ç›®çš„äººã€‚é¢è¯•ä¸ç®—å¤ªä¹…å§ï¼Œå¥½åƒ 10 åˆ†é’Ÿçš„æ ·å­ï¼Œä¹Ÿæ˜¯ç­‰å¾…é€šçŸ¥ã€‚å¿ƒæƒ³è‚¯å®šæ²¡äº†ï¼Œæ‰é‚£ä¹ˆå‡ åˆ†é’Ÿã€‚ç»“æœåœ¨æˆ‘ç¬¬äºŒå¤©å»é“‚æ¶›é¢è¯•çš„è·¯ä¸Šæ”¶åˆ°äº†å…¥èŒé€šçŸ¥ï¼Œé¢è¯•é“‚æ¶›æ˜¯äºŒä¸ªäººä¸€èµ·é¢è¯•ï¼Œé‚£æ¬¡é¢è¯•æŠŠæˆ‘æå¾—ç´§å¼ æ­»äº†ã€‚å¤§æ¦‚é¢è¯•äº† 30 å¤šåˆ†é’Ÿå§ï¼Œä¹Ÿæ˜¯ç­‰å¾…é€šçŸ¥ã€‚é¢è¯•å®Œæˆåï¼Œå°±å›å®¶å‡†å¤‡ç¬¬äºŒå¤©å…¥èŒæˆ‘æ˜“äº†ã€‚</p><p>å…¥èŒæˆ‘æ˜“å½“å¤©ä¹Ÿæ”¶åˆ°äº†é“‚æ¶›çš„å…¥èŒé‚€è¯·ï¼Œå‡ºäºå·²ç»å…¥èŒæˆ‘æ˜“å’Œä¸ä¼š YII è°¢ç»äº†é“‚æ¶›æ­£å¼å¼€å§‹äº†ï¼Œæˆ‘æ˜“çš„æ—…é€”ã€‚</p><p>æˆ‘æ˜“è·Ÿç„é€šåŸºæœ¬ä¸€æ ·ï¼Œä¹Ÿæ˜¯åšè™šæ‹Ÿå¸äº¤æ˜“çš„å…¬å¸ï¼Œä¹Ÿæ˜¯æ²¡æœ‰ä¸Šé“¾éƒ½æ˜¯è‡ªæˆ‘æ•°æ®å¤„ç†ï¼ˆä¸è¿‡ç›®å‰çš„æ˜¯ç‰ˆæœ¬ä¸€ï¼ŒåæœŸä¼°è®¡æ˜¯ä¼šä¸Šé“¾æ“ä½œï¼‰ã€‚åˆšå¼€å§‹éƒ½æ˜¯è€å¥—è·¯ï¼Œç†Ÿæ‚‰å…¬å¸å…ˆç›®å‰çš„é¡¹ç›®ä»£ç ã€‚å‰é¢åŸºæœ¬ä¹Ÿæ²¡ä»€ä¹ˆäº‹æƒ…ï¼ŒåŸºæœ¬ä¸Šéƒ½åœ¨åŸå…ˆçš„é¡¹ç›®ä¸Šé¢å„ç§ä¿®æ”¹ã€‚å…¶å®æˆ‘æ˜¯æ‹’ç»äºŒå¼€çš„ï¼Œæ¯”è¾ƒæ¯ä¸ªäººçš„é£æ ¼ä¸ä¸€ï¼Œè€Œä¸”è¿˜éœ€è¦å»è¯»æ‡‚åŸæœ‰çš„ä»£ç å°±æ›´éš¾å—äº†ã€‚åœ¨ä¿®æ”¹è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿç»å¸¸å–·æ–¹ç»´å†™çš„ä»£ç åƒåœ¾ï¼ˆç»“æœè‡ªå·±å†™åå‘ç°è‡ªå·±çš„æ ¹æœ¬æ²¡æ³•è·Ÿæ–¹ç»´çš„æ¯”ï¼‰ï¼Œç»ˆäºåœ¨ 11 æœˆä»½ï¼Œé¡¹ç›®å¼€å§‹äº†é‡æ„ã€‚æˆ‘ä»¬æ•´ä¸ªå›¢é˜Ÿå¼€å¯äº†å¥‹æˆ˜æ¨¡å¼ï¼Œå‡ ä¹è¿™å‡ ä¸ªæœˆæ¥æ¯ä¸€å¤©éƒ½åœ¨åŠ ç­å¥‹æˆ˜èµ¶é¡¹ç›®ã€‚1æœˆ10å·åœ¨è¿ç»­å¥‹æˆ˜30å¤šä¸ªå°æ—¶åï¼Œç¬¬ä¸€ä¸ªç‰ˆæœ¬æ­£å¼ä¸Šçº¿ã€‚è™½ç„¶å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œä½†ä¹Ÿæ­£å¼ä¸Šçº¿äº†ã€‚åˆ°æ­¤ä¸‰ç¯‡ç»“æŸï¼Œ2019 å¹´çš„ä¹Ÿå³å°†ç»“æŸã€‚</p><p><img src="https://i.loli.net/2020/01/16/4dSzbiC5YmOa7jg.jpg" alt="center.jpeg"></p><h3 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h3><p>1ã€PHP æ·±å…¥å­¦ä¹ </p><p>2ã€ç ”ç©¶ Larave æ¡†æ¶</p><p>3ã€å­¦ä¹  Go</p><p>4ã€å­¦ä¹  Flutter</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>1ã€æ‹–å»¶ç—‡æ¯”è¾ƒä¸¥é‡</p><p>2ã€æ‰§è¡Œèƒ½åŠ›ï¼Œæœ‰å¾…æé«˜</p><p>3ã€å¿ƒæ€§æœ‰å¾…æé«˜</p><blockquote><p>ç¥æ„¿ 2020 æ›´å¥½ï¼Œé“åˆ« 2019 ã€‚2020 åŠ æ²¹å§ï¼</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 2019å¹´å¹´åº¦æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2019å¹´å¹´åº¦æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-XSS æ”»å‡»è¿‡æ»¤</title>
      <link href="/2019/12/16/Laravel-Xss-%E6%94%BB%E5%87%BB%E8%BF%87%E6%BB%A4/"/>
      <url>/2019/12/16/Laravel-Xss-%E6%94%BB%E5%87%BB%E8%BF%87%E6%BB%A4/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>XSS æ”»å‡»ï¼ŒXSS æ˜¯è·¨ç«™è„šæœ¬æ”»å‡»(Cross Site Scripting)ï¼Œä¸ºä¸å’Œå±‚å æ ·å¼è¡¨(Cascading Style Sheets, CSS)çš„ç¼©å†™æ··æ·†ï¼Œæ•…å°†è·¨ç«™è„šæœ¬æ”»å‡»ç¼©å†™ä¸ºXSSã€‚æ¶æ„æ”»å‡»è€…å¾€ Web é¡µé¢é‡Œæ’å…¥æ¶æ„ Script ä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­ Web é‡Œé¢çš„ Script ä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„æ”»å‡»ç”¨æˆ·çš„ç›®çš„ã€‚å®ƒæ€»æ˜¯è®©æˆ‘ä»¬å¤´ç—›ï¼Œç›®å‰è¿˜ä¸æ˜¯å¾ˆäº†è§£ï¼Œæ¯•ç«Ÿå‰ç«¯çš„çŸ¥è¯†æ¬ ç¼ºï¼Œçœ‹è¿‡ä¸€ç¯‡æ–‡ç« è¯´â€œè¶Šäº†è§£ XSS è¶Šä¸çŸ¥é“è¯¥å¦‚ä½•å»é˜²èŒƒâ€ã€‚ç›®å‰æ¥è¯´æ‰€è®¤çŸ¥çš„ XSS å°±æ˜¯å‰ç«¯çš„ JS æäº‹æƒ…ï¼Œé‚£ä¹ˆå¥½åœ¨æ•°æ®å¤„ç†æ—¶å€™æˆ‘ä»¬è¿‡æ»¤æ‰é»‘åå•çš„å‰ç«¯æ ‡è®°ã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p><a href="https://packagist.org/packages/mews/purifier" target="_blank" rel="noopener">mews/purifier</a></p><pre><code>composer require mews/purifier</code></pre><p>å†æ¬¡æç¤ºä¸€æ¬¡ï¼Œåœ¨ Laravel 5.5 ç‰ˆæœ¬ä¹‹åä¸éœ€è¦åœ¨æ·»åŠ æœåŠ¡æä¾›è€…ï¼Œéƒ½æ˜¯è‡ªåŠ¨å‘ç°ã€‚</p><h3 id="å‘å¸ƒé…ç½®"><a href="#å‘å¸ƒé…ç½®" class="headerlink" title="å‘å¸ƒé…ç½®"></a>å‘å¸ƒé…ç½®</h3><pre><code>$ php artisan vendor:publish --provider=&quot;Mews\Purifier\PurifierServiceProvider&quot;</code></pre><p>æ­¤æ—¶ <code>config/purifier.php</code> å°±ä¼šå‡ºç°åœ¨ä½ çš„ config ç›®å½•å½“ä¸­ã€‚</p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>ä½¿ç”¨ purifier éå¸¸çš„ç®€å•</p><pre><code>clean(request()-&gt;input(&#39;content&#39;))</code></pre><p>æ³¨æ„ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„æ ‡è®°åœ¨ <code>config/purifier.php</code> HTML.Allowed é…ç½®å½“ä¸­</p><pre><code># ä»¥ä¸‹æ˜¯é»˜è®¤çš„å…è®¸çš„æ ‡è®°&#39;HTML.Allowed&#39;             =&gt; &#39;div,b,strong,i,em,u,a[href|title],ul,ol,li,p[style],br,span[style],img[width|height|alt|src]&#39;,</code></pre><p>åœ¨æˆ‘ä»¬ä½¿ç”¨ clean è¿‡æ»¤æˆ‘ä»¬çš„å‚æ•°ä¹‹åï¼Œé»˜è®¤è‡ªåŠ¨æ®µè½çš„ä¹Ÿå°±æ˜¯è¯´æ•°æ®ä¼šè‡ªåŠ¨åŠ ä¸Š â€œ P â€œ  æ ‡è®°</p><p><img src="https://i.loli.net/2019/12/16/S1ZVk3yHJfFig9E.png" alt></p><p>å¦‚æœä¸éœ€è¦åŠ ä¸Š â€œ P â€œ  æ ‡è®°ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æŠŠé…ç½®æ–‡ä»¶å½“ä¸­çš„ AutoFormat.AutoParagraph æ”¹ä¸º false</p><pre><code>&#39;AutoFormat.AutoParagraph&#39; =&gt; false,</code></pre><p><img src="https://i.loli.net/2019/12/16/bGkTYjigILOsC4d.png" alt></p><p>å›åˆ°æœ€å¼€å§‹ï¼Œæˆ‘ä»¬åœ¨ HTML.Allowed å…è®¸çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ HTML æ ‡è®°å°±ä¸ä¼šè¢«è¿‡æ»¤æ‰</p><p><img src="https://i.loli.net/2019/12/16/oK68RCm3THeYdAS.png" alt></p><h3 id="ä½¿ç”¨ä¸­é—´ä»¶å…¨å±€è¿‡æ»¤"><a href="#ä½¿ç”¨ä¸­é—´ä»¶å…¨å±€è¿‡æ»¤" class="headerlink" title="ä½¿ç”¨ä¸­é—´ä»¶å…¨å±€è¿‡æ»¤"></a>ä½¿ç”¨ä¸­é—´ä»¶å…¨å±€è¿‡æ»¤</h3><pre><code># åˆ›å»ºä¸­é—´ä»¶php artisan make:middleware ApiXssCleanpublic function handle($request, Closure $next){    $input = $request-&gt;all();    array_walk_recursive($input,function(&amp;$input) {        $input = is_string($input) ? trim(clean($input)) : $input;    });    $request-&gt;merge($input);    return $next($request);}</code></pre><p><img src="https://i.loli.net/2019/12/16/QXW8ULvFlen7MOx.png" alt></p><h3 id="ä½¿ç”¨-PHP-å‡½æ•°-æš´åŠ›è¿‡æ»¤"><a href="#ä½¿ç”¨-PHP-å‡½æ•°-æš´åŠ›è¿‡æ»¤" class="headerlink" title="ä½¿ç”¨ PHP å‡½æ•° æš´åŠ›è¿‡æ»¤"></a>ä½¿ç”¨ PHP å‡½æ•° æš´åŠ›è¿‡æ»¤</h3><p>strip_tags â€” ä»å­—ç¬¦ä¸²ä¸­å»é™¤ HTML å’Œ PHP æ ‡è®°</p><pre><code># æ•ˆæœä¸ä¸Šé¢ä¸€è‡´$input = $request-&gt;all();array_walk_recursive($input,function(&amp;$input) {    $input = strip_tags($input);});$request-&gt;merge($input);</code></pre>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-Google éªŒè¯</title>
      <link href="/2019/11/18/Laravel-Goog%E9%AA%8C%E8%AF%81/"/>
      <url>/2019/11/18/Laravel-Goog%E9%AA%8C%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>å¯¹äºä¸€äº›é¡¹ç›®æ•æ„Ÿæ“ä½œæ¥è¯´éªŒè¯ç”¨æˆ·éƒ½æ˜¯å±äºå¿…å¤‡çš„ä¸€ä¸ªç¯èŠ‚ï¼Œå½“ç„¶éªŒè¯çš„æ–¹å¼å¾ˆå¤šï¼Œç¡®å®å¾ˆå¤šï¼Google éªŒè¯ï¼Œåœ¨æˆ‘çœ‹æ¥æ˜¯éªŒè¯å½“ä¸­çš„ä¸€ç§ä¸é”™çš„é€‰æ‹©ï¼Œæ¯•ç«Ÿä¸€æ¬¡æ“ä½œç»ˆèº«å¯è¡Œï¼Œè€Œä¸” Google è‡ªèº«å°±å¸®æˆ‘ä»¬å¤„ç†å¥½äº†éªŒè¯ç æœ‰æ•ˆæœŸã€‚ï¼ˆæ¯30ç§’åˆ·æ–°ä¸€æ¬¡ï¼‰ï¼Œç­¾åç®—æ³•å®‰å…¨å¯é ï¼Laravel åšä¸º PHP ç›®å‰ä½¿ç”¨ç‡æœ€é«˜çš„æ¡†æ¶ï¼Œå½“ç„¶ä¹Ÿæœ‰ä»–çš„ Google éªŒè¯æ‰©å±•åŒ…ã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p><a href="https://packagist.org/packages/pragmarx/" target="_blank" rel="noopener">pragmarx/</a>google2fa-laravel</p><pre><code># æ‰©å±• Imagick å¼€å¯composer require pragmarx/google2fa-laravel</code></pre><p><a href="https://packagist.org/packages/bacon/" target="_blank" rel="noopener">bacon/</a>bacon-qr-code</p><pre><code># æ‰©å±• iconv å¼€å¯# dasprid/enumcomposer require bacon/bacon-qr-code</code></pre><h4 id="å®‰è£…-Imagick-æ‰©å±•"><a href="#å®‰è£…-Imagick-æ‰©å±•" class="headerlink" title="å®‰è£… Imagick æ‰©å±•"></a>å®‰è£… Imagick æ‰©å±•</h4><pre><code>apt-get install imagemagickconvert -version ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¦‚æœæˆåŠŸçš„è¯ä¼šæœ‰imagemagickç‰ˆæœ¬å·ã€‚apt-get install libmagickwand-dev</code></pre><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>ç”Ÿæˆ Google2FA é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶å­˜åœ¨ä½ç½® config/google2fa.phpï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>php artisan vendor:publish --provider=&quot;PragmaRX\Google2FALaravel\ServiceProvider&quot;</code></pre><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>ç”Ÿæˆ Secret Key</p><pre><code>use PragmaRX\Google2FA\Google2FA;$google2fa = new Google2FA();$secretKey = $google2fa-&gt;generateSecretKey(64);# è¿™é‡Œçš„ Key å°±æ˜¯æˆ‘ä»¬éœ€è¦éªŒè¯çš„ Key</code></pre><p>è·å–äºŒç»´ç åœ°å€</p><pre><code>$company = &#39;&#39;; // å…¬å¸åç§°$holder = &#39;&#39;; // ç”¨æˆ·æ ‡ç¤ºï¼Œå¯ä»¥æ˜¯é‚®ç®±æˆ–è€…åç§°ç­‰$qrcodeUrl = $google2fa-&gt;getQRCodeUrl($company, $holder, $secretKey);</code></pre><p>ç”ŸæˆäºŒç»´ç å›¾ç‰‡</p><pre><code>// å›¾ç‰‡è·¯å¾„$filePath = sha1($secretKey) .&#39;.png&#39;;// ç”Ÿæˆå›¾ç‰‡$renderer = new ImageRenderer(   new RendererStyle(200),   new ImagickImageBackEnd());$writer = new Writer($renderer);$writer-&gt;writeFile($qrcodeUrl, $filePath);</code></pre><p><img src="https://i.loli.net/2019/11/18/hTlsNIDrVp5qmFz.png" alt></p><p>æœ€åï¼Œé€šè¿‡ä½¿ç”¨ Google Authenticator åº”ç”¨ç¨‹åºæ¥æ‰«æäºŒç»´ç ï¼Œæ‰«æå®Œæ¯•ä¹‹åï¼Œå°±ä¼šç”Ÿæˆä¸€ç»„ 6 ä½çš„æ•°å­—å¯†ç ã€‚</p><h3 id="èº«ä»½éªŒè¯"><a href="#èº«ä»½éªŒè¯" class="headerlink" title="èº«ä»½éªŒè¯"></a>èº«ä»½éªŒè¯</h3><pre><code>$google2fa = new Google2FA();$verify = $google2fa-&gt;verifyKey($secretKey, $request-&gt;input(&#39;code&#39;));if ($verify) {    return true;  // éªŒè¯æˆåŠŸ}return false;</code></pre><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="https://www.raymondwu.net/2018/05/14/Laravel-åˆ©ç”¨Google2FAå®ç°åŒå› å­è®¤è¯/" target="_blank" rel="noopener">https://www.raymondwu.net/2018/05/14/Laravel-%E5%88%A9%E7%94%A8Google2FA%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%9B%A0%E5%AD%90%E8%AE%A4%E8%AF%81/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP-RSAåŠ å¯†è§£å¯†</title>
      <link href="/2019/11/14/PHP-RSA%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/"/>
      <url>/2019/11/14/PHP-RSA%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>RSA åŠ å¯†æ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ã€‚å¯ä»¥åœ¨ä¸ç›´æ¥ä¼ é€’å¯†é’¥çš„æƒ…å†µä¸‹ï¼Œå®Œæˆè§£å¯†ã€‚è¿™èƒ½å¤Ÿç¡®ä¿ä¿¡æ¯çš„å®‰å…¨æ€§ï¼Œé¿å…äº†ç›´æ¥ä¼ é€’å¯†é’¥æ‰€é€ æˆçš„è¢«ç ´è§£çš„é£é™©ã€‚æ˜¯ç”±ä¸€å¯¹å¯†é’¥æ¥è¿›è¡ŒåŠ è§£å¯†çš„è¿‡ç¨‹ï¼Œåˆ†åˆ«ç§°ä¸ºå…¬é’¥å’Œç§é’¥ã€‚ä¸¤è€…ä¹‹é—´æœ‰æ•°å­¦ç›¸å…³ï¼Œè¯¥åŠ å¯†ç®—æ³•çš„åŸç†å°±æ˜¯å¯¹ä¸€æå¤§æ•´æ•°åšå› æ•°åˆ†è§£çš„å›°éš¾æ€§æ¥ä¿è¯å®‰å…¨æ€§ã€‚é€šå¸¸ä¸ªäººä¿å­˜ç§é’¥ï¼Œå…¬é’¥æ˜¯å…¬å¼€çš„ï¼ˆå¯èƒ½åŒæ—¶å¤šäººæŒæœ‰ï¼‰ã€‚</p><h3 id="ç”Ÿæˆå…¬é’¥ç§é’¥"><a href="#ç”Ÿæˆå…¬é’¥ç§é’¥" class="headerlink" title="ç”Ÿæˆå…¬é’¥ç§é’¥"></a>ç”Ÿæˆå…¬é’¥ç§é’¥</h3><p>Linux ç³»ç»Ÿéƒ½è‡ªå¸¦äº†opensslï¼Œwindows å¯èƒ½éœ€è¦å®‰è£… openssl ç”Ÿæˆå·¥å…·</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆç§é’¥ï¼Œè¿™é‡Œæˆ‘ä»¬æŒ‡å®šç§é’¥çš„é•¿åº¦ä¸º1024, é•¿åº¦è¶Šé•¿ï¼ŒåŠ è§£å¯†æ¶ˆè€—çš„æ—¶é—´è¶Šé•¿</span>openssl genrsa -out rsa_private_key.pem 1024<span class="token comment" spellcheck="true"># ç¬¬äºŒæ­¥ï¼šæ ¹æ®ç§é’¥ç”Ÿæˆå¯¹åº”çš„å…¬é’¥</span>openssl rsa -in rsa_private_key.pem -pubout -out rsa_public_key.pub<span class="token comment" spellcheck="true"># ç¬¬ä¸‰æ­¥ï¼šç§é’¥è½¬åŒ–æˆpkcs8æ ¼å¼ï¼Œã€è¿™ä¸€æ­¥éå¿…é¡»ï¼Œåªæ˜¯ç¨‹åºè§£æèµ·æ¥æ–¹ä¾¿ã€‘</span>openssl pkcs8 -topk8 -inform PEM -in rsa_private_key.pem -outform PEM -nocrypt -out rsa_private_key_pkcs8.pem<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>RSA åªèƒ½åŠ å¯†æœ€é•¿ 117 ä½çš„æ•°æ®ã€‚</p><pre class="line-numbers language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Services</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">SignService</span><span class="token punctuation">{</span>    <span class="token keyword">protected</span> <span class="token variable">$publicKey</span><span class="token punctuation">;</span>    <span class="token keyword">protected</span> <span class="token variable">$privateKey</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**     * åˆå§‹åŒ–     * */</span>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">publicKey</span>  <span class="token operator">=</span> <span class="token function">openssl_get_publickey</span><span class="token punctuation">(</span><span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token string">'../rsa_public_key.pub'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">privateKey</span> <span class="token operator">=</span> <span class="token function">openssl_get_privatekey</span><span class="token punctuation">(</span><span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token string">'../rsa_private_key_pkcs8.pem'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å…¬é’¥åŠ å¯†     * @param mixed $data     *     * @return string     */</span>    <span class="token keyword">function</span> <span class="token function">encrypt</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$encrypt</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token function">str_split</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$item</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>            <span class="token function">openssl_public_encrypt</span><span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">,</span> <span class="token variable">$encrypt</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">publicKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token variable">$encrypt</span> <span class="token punctuation">.</span><span class="token operator">=</span> <span class="token variable">$temp</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">openssl_free_key</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">publicKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">base64_encode</span><span class="token punctuation">(</span><span class="token variable">$encrypt</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ç§é’¥è§£å¯†     * @param mixed $data     *     * @return string     */</span>    <span class="token keyword">function</span> <span class="token function">decrypt</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$data</span>    <span class="token operator">=</span> <span class="token function">base64_decode</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token variable">$decrypt</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token function">str_split</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$item</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token variable">$temp</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>            <span class="token function">openssl_private_decrypt</span><span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">,</span> <span class="token variable">$temp</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">privateKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token variable">$decrypt</span> <span class="token punctuation">.</span><span class="token operator">=</span> <span class="token variable">$temp</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">openssl_free_key</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">privateKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token variable">$decrypt</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ç§é’¥ç”Ÿæˆç­¾å     * @param mixed $data     *     * @return string     */</span>    <span class="token keyword">function</span> <span class="token function">sign</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$signature</span> <span class="token operator">=</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token string">'app.signature'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">openssl_sign</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$signature</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">privateKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">openssl_free_key</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">privateKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">base64_encode</span><span class="token punctuation">(</span><span class="token variable">$signature</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * å…¬é’¥éªŒè¯     * @param mixed $data     * @param mixed $sign     *     * @return bool     */</span>    <span class="token keyword">function</span> <span class="token function">veritySign</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span><span class="token variable">$sign</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">openssl_verify</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token function">base64_decode</span><span class="token punctuation">(</span><span class="token variable">$sign</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">publicKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">openssl_free_key</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">publicKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>bool<span class="token punctuation">)</span><span class="token variable">$result</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> PHP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PHP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-å®šæ—¶ä»»åŠ¡</title>
      <link href="/2019/10/24/Laravel-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"/>
      <url>/2019/10/24/Laravel-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>åœ¨æˆ‘ä»¬é¡¹ç›®å½“ä¸­ï¼Œæœ‰æ—¶å€™éœ€è¦å®šæ—¶å»å¤„ç†ä¸€äº›ç‰¹å®šçš„ä¸šåŠ¡ã€‚è¿‡å»ï¼Œä½ å¯èƒ½éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šä¸ºæ¯ä¸€ä¸ªè°ƒåº¦ä»»åŠ¡å»åˆ›å»º Cron å…¥å£ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å¾ˆå¿«ä¼šå˜å¾—ä¸å‹å¥½ï¼Œå› ä¸ºè¿™äº›ä»»åŠ¡è°ƒåº¦ä¸åœ¨æºä»£ç ä¸­ï¼Œå¹¶ä¸”ä½ æ¯æ¬¡éƒ½éœ€è¦é€šè¿‡ SSH é“¾æ¥ç™»å½•åˆ°æœåŠ¡å™¨ä¸­æ‰èƒ½å¢åŠ  Cron å…¥å£ã€‚</p><p>Laravel å‘½ä»¤è¡Œè°ƒåº¦å™¨å…è®¸ä½ åœ¨ Laravel ä¸­å¯¹å‘½ä»¤è°ƒåº¦è¿›è¡Œæ¸…æ™°æµç•…çš„å®šä¹‰ã€‚ä¸”ä½¿ç”¨è¿™ä¸ªä»»åŠ¡è°ƒåº¦å™¨æ—¶ï¼Œä½ åªéœ€è¦åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šåˆ›å»ºå•ä¸ª Cron å…¥å£ã€‚ä½ çš„ä»»åŠ¡è°ƒåº¦åœ¨ <code>app/Console/Kernel.php</code> çš„ <code>schedule</code> æ–¹æ³•ä¸­è¿›è¡Œå®šä¹‰ã€‚</p><h3 id="Kernel-php"><a href="#Kernel-php" class="headerlink" title="Kernel.php"></a>Kernel.php</h3><p>ä¸ç®¡æˆ‘ä»¬æ˜¯ä½¿ç”¨å®šæ—¶ä»»åŠ¡æˆ–è€…å…¶ä»–éœ€è¦ç»ˆç«¯æ‰§è¡Œçš„ç¨‹åºï¼Œåœ¨ Laravel å½“ä¸­éƒ½è¦åœ¨ <code>app\console\kernel.php</code>å½“ä¸­çš„ commands å¼•å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„ artisan å‘½ä»¤ç±»ï¼Œschedule æ‰§è¡Œæˆ‘ä»¬çš„å®šæ—¶ä»»åŠ¡ã€‚</p><pre><code># åŠ è½½ artisan è‡ªå®šä¹‰å‘½ä»¤ç±»protected $commands = [        // å¼•å…¥è‡ªå®šä¹‰çš„ç»ˆç«¯å‘½ä»¤ç±»    ];    # æ‰§è¡Œ å®šæ—¶ä»»åŠ¡    protected function schedule(Schedule $schedule){    # ç®€å•ä½¿ç”¨    $schedule-&gt;call(function(){        Log::info(&#39;è®°å½•çš„æ—¥å¿—&#39;,[&#39;ip&#39; =&gt; request()-&gt;path()]);    })-&gt;daily();    $schedule-&gt;call(&#39;App\Services\xxxService@index&#39;)-&gt;everyMinute();    # æ‰§è¡Œ command    $schedule-&gt;command(&#39;order:start&#39;)              -&gt;hourly();}# æ³¨å†Œ artisan æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯¹åº”çš„ä¹Ÿå°±æ˜¯æˆ‘ä»¬ routes ä¸‹é¢çš„ console.phpprotected function commands(){    $this-&gt;load(__DIR__.&#39;/Commands&#39;);    require base_path(&#39;routes/console.php&#39;);}</code></pre><blockquote><p>åœ¨ Laravel 5.5 ç‰ˆæœ¬ä»¥åï¼Œæ— éœ€åœ¨ commands å¼•å…¥ã€‚</p></blockquote><h3 id="åˆ›å»º-Command"><a href="#åˆ›å»º-Command" class="headerlink" title="åˆ›å»º Command"></a>åˆ›å»º Command</h3><pre><code>php artisan make:command AddOrderCount</code></pre><p>å½“åˆ›å»ºå®Œæˆ command ä¹‹åï¼ŒæŒ‰è‡ªå·±éœ€æ±‚ä¿®æ”¹ command</p><pre><code>class OrderCount extends Command{    // æ‰§è¡Œçš„ artisan å‘½ä»¤    protected $signature = &#39;order:start&#39;;    // artisan å‘½ä»¤çš„æè¿°    protected $description = &#39;day order count data&#39;;    public function __construct()    {        parent::__construct();    }    // è¿™é‡Œå³å¯æ‰§è¡Œ ä¸šåŠ¡é€»è¾‘çš„å¤„ç†    public function handle()    {        // è¦æ‰§è¡Œçš„ å¤„ç†ä¸šåŠ¡é€»è¾‘    }}</code></pre><h3 id="æ‰§è¡Œ-Crontab"><a href="#æ‰§è¡Œ-Crontab" class="headerlink" title="æ‰§è¡Œ Crontab"></a>æ‰§è¡Œ Crontab</h3><pre><code>1ã€åˆ›å»º crontab æ‰§è¡Œçš„æ–‡ä»¶echo &quot;* * * * * /usr/local/bin/php /var/www/html/vpay/artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1&quot; &gt; order.txt2ã€æ·»åŠ åˆ° crontab å½“ä¸­crontab order.txt3ã€å¼€å¯ crontabcrontabl -l 4ã€å…³é—­ crontab å…¨éƒ¨æ¸…é™¤crontabl -r</code></pre><blockquote><p>åœ¨ Linux åˆ›å»ºä¸€ä¸ª Crontab æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œæ‰€æœ‰çš„æ‰§è¡Œå‘½ä»¤åŠ ä¸Šç»å¯¹è·¯å¾„ï¼</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-æœ¬åœ°è¯­è¨€åŒ…</title>
      <link href="/2019/10/11/Laravel-%E6%9C%AC%E5%9C%B0%E8%AF%AD%E8%A8%80%E5%8C%85/"/>
      <url>/2019/10/11/Laravel-%E6%9C%AC%E5%9C%B0%E8%AF%AD%E8%A8%80%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>Laravel è‡ªèº«çš„è¯­è¨€åŒ…ä¸ºè‹±æ–‡ï¼Œæˆ‘ä»¬æœ¬åœ°åŒ–å¼€å‘éƒ½å¸Œæœ›ä¸ºä¸­æ–‡ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸éœ€è¦ä¸­æ–‡çš„è¿™ä¸ªçœ‹è‡ªå·±é¡¹ç›®çš„é€‰æ‹©è¡Œæ¥è¯´ï¼Œæˆ‘åšçš„é¡¹ç›®ä¸€èˆ¬éƒ½æ˜¯æœ¬åœ°åŒ–ã€‚æ‰€ä»¥æœ¬åœ°åŒ–æ˜¯ä¸å¯ç¼ºå°‘çš„ä¸€å—ã€‚ä»Šå¤©çš„ä¸»è§’å°±æ˜¯ [<a href="https://packagist.org/packages/caouecs/" target="_blank" rel="noopener">caouecs/</a><a href="https://packagist.org/packages/caouecs/laravel-lang#dev-master" target="_blank" rel="noopener">laravel-lang</a>] ,æ”¯æŒ N å¤šå›½å®¶è¯­è¨€åŒ…ã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><pre><code>$ composer require caouecs/laravel-lang</code></pre><blockquote><p>è¯·æ ¹æ®è‡ªå·±é¡¹ç›®ä½¿ç”¨çš„ Laravel ç‰ˆæœ¬é€‰æ‹©åˆ†æ”¯ï¼Œä¸åŒçš„åˆ†æ”¯å¯¹åº” Laravel ä¸åŒçš„ç‰ˆæœ¬ã€‚</p></blockquote><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>laravel-lang ä½¿ç”¨éå¸¸ç®€å•ï¼Œåœ¨æˆ‘ä»¬ Composer å®‰è£…å¥½è¿™ä¸ªæ‰©å±•åŒ…ä»¥åï¼Œåœ¨ verdor ä¾èµ–åŒ…ç›®å½•å½“ä¸­æ‰¾åˆ° <code>caouecs/laravel-lang</code>æŠŠé‡Œé¢çš„ zh-CN å¤åˆ¶åˆ° <code>resources/lang</code>ä¸‹é¢ã€‚ä¿®æ”¹ <code>config/app.php</code></p><pre><code>&#39;locale&#39; =&gt; &#39;zh-CN&#39;,</code></pre><p>åˆ°æ­¤å®Œæˆäº† Laravel è¯­è¨€åŒ…çš„æ›¿æ¢ï¼Œç°åœ¨ä½¿ç”¨å°±æ˜¯æœ¬åœ°åŒ–äº†ï¼ˆå¦‚ï¼šè¡¨å•éªŒè¯ï¼‰ï¼Œå½“ç„¶æœ‰æ— æ³•æ›¿æ¢çš„åœ°æ–¹å¯ä»¥è‡ªè¡Œå»ä¿®æ”¹è¯­è¨€åŒ…ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-Fractal</title>
      <link href="/2019/09/26/Laravel-Fractal/"/>
      <url>/2019/09/26/Laravel-Fractal/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>æˆ‘ä»¬æƒ³è¿”å›çš„æ•°æ®åšæ ¼å¼åŒ–ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å°±åœ¨é€»è¾‘å±‚å½“ä¸­æ“ä½œï¼Œè¿™æ ·å¤ç”¨æ€§å¾ˆå·®åŸºæœ¬å°±æ˜¯å¤åˆ¶ç²˜è´´ã€‚ä½¿ç”¨äº†  Fractal ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ç»Ÿä¸€ä¸€äº›æ•°æ®è¿”å›çš„è§„èŒƒï¼Œå¤ç”¨æ€§éå¸¸é«˜ã€‚</p><p><img src="https://i.loli.net/2019/09/26/Dy7bAWSHLeExzot.png" alt></p><p><strong>PHP é¢†åŸŸå¹¿å—æ¬¢è¿çš„ API æ•°æ®è¾“å‡ºæ ¼å¼è½¬æ¢å™¨</strong></p><ul><li>æ”¯æŒ <code>å•ä¸ªå¯¹è±¡</code> æˆ–è€… <code>é›†åˆå¯¹è±¡</code> çš„æ ¼å¼åŒ–</li><li>é€šè¿‡ Fractal Transformer æ˜¾å¼ä¿®é¥°å¯¹è±¡çš„æ•°æ®è¾“å‡ºï¼Œå°†å¤æ‚æ•°æ®è½¬ä¸º ajax/restful</li><li>é¢å¤–ç‰¹æ€§<ul><li>å…³è”æ•°æ®çš„<code>Include</code>åŠ¨æ€åŠ è½½</li><li>æ•°æ®è½½è·è½¬æ¢åˆ°å„ç§åè®®æ ¼å¼ï¼š<code>JSON</code>ã€<code>DataArray</code>ã€<code>HAL</code>ç­‰ç­‰</li></ul></li><li>å‹å¥½çš„å’Œ<code>DingoApi</code>æ— ç¼ç»“åˆ</li></ul><p><strong>å¯¹äº WEB ç«™æ¥è¯´</strong></p><ul><li>ä¸å»ºè®®è¿‡å¤šè¿›è¡Œæ•°æ®æ ¼å¼åŒ–ï¼Œç›´æ¥è¾“å‡ºå®Œæ•´å¯¹è±¡ï¼Œå°½é‡ç”¨å¯¹è±¡æ¥æ›¿ä»£æ•°ç»„</li><li>ç‰¹åˆ«çš„å­—æ®µå€¼è®¡ç®—å¯ä»¥å°è£…ä¸ºå¯¹è±¡çš„æ–¹æ³•</li></ul><h3 id="åŸç”Ÿä½¿ç”¨"><a href="#åŸç”Ÿä½¿ç”¨" class="headerlink" title="åŸç”Ÿä½¿ç”¨"></a><strong>åŸç”Ÿä½¿ç”¨</strong></h3><pre><code>class MyTransformer extends League\Fractal\TransformerAbstract{    # normalizeä¸»é€»è¾‘    public function transform($object){        return [            &#39;id&#39; =&gt; $object-&gt;id,            &#39;name&#39; =&gt; $object-&gt;name,        ];    }    ## includeç‰¹æ€§ ##    ## ä½¿ç”¨å‰éœ€è¦æ£€æµ‹includeå‚æ•°ï¼š$manager-&gt;parseIncludes($_GET[&#39;include&#39;]);    protected $defaultIncludes = []; #å£°æ˜éœ€è¦é»˜è®¤includeçš„èµ„æº    protected $availableIncludes = [tag]; #å£°æ˜å¯é€‰includeèµ„æº    public function includeTag($object){        $tag = $object-&gt;tag;        return $this-&gt;item($tag, new TagTransformer);  #åŒ…å«å•å¯¹è±¡        #return $this-&gt;collection($tags, new TagTransformer); #åŒ…å«é›†åˆå¯¹è±¡    }}$itemResource = new \Fractal\Resource\Item(    $object,    League\Fractal\TransformerAbstract $myTransformer);$collectionResource = new \Fractal\Resource\Collection(    $objects,    League\Fractal\TransformerAbstract $myTransformer);$manager = new League\Fractal\Manager();$manager = $manager-&gt;createData($itemResource|$collectionResource)-&gt;toArray|toJson(); #transformerè½¬æ¢æ•°æ®# å¯ä»¥è¿›ä¸€æ­¥ä½¿ç”¨serializeråœ¨toArray()è¾“å‡ºå‰è°ƒæ•´æ•°æ®ç»“æ„</code></pre><h3 id="Laravel-ä¸‹-Fractal-ä½¿ç”¨"><a href="#Laravel-ä¸‹-Fractal-ä½¿ç”¨" class="headerlink" title="Laravel ä¸‹ Fractal ä½¿ç”¨"></a>Laravel ä¸‹ Fractal ä½¿ç”¨</h3><p>1ã€Composer å¼•å…¥</p><pre><code>composer require league/fractal</code></pre><p>2ã€åˆ›å»ºè‡ªå®šä¹‰æ•°æ®å¤„ç†æ–‡ä»¶</p><pre><code>&lt;?phpnamespace App\Http\DataResponse;use App\Http\Model\User;use League\Fractal\TransformerAbstract;class UserDataResponse extends TransformerAbstract{   public function transform(User $user)   {       return [           &#39;id&#39; =&gt; $user-&gt;id,           &#39;mobile&#39; =&gt; $user-&gt;mobile,           &#39;nickname&#39; =&gt; $user-&gt;nickname,           &#39;avatar&#39; =&gt; $user-&gt;avatar,           &#39;updated_at&#39; =&gt; (string)$user-&gt;updated_at,           &#39;created_at&#39; =&gt; (string)$user-&gt;created_at,       ];   }}</code></pre><p>3ã€é›†åˆå¯¹è±¡åºåˆ—åŒ–</p><pre><code> # éœ€è¦ use  use App\Http\DataResponse\UserDataResponse; use League\Fractal\Manager; use League\Fractal\Resource\Collection; # æ­£å¸¸ä½¿ç”¨ $fractal = new Manager(); $users = new collection(User::all(), new UserDataResponse()); $users = $fractal-&gt;createData($users)-&gt;toArray(); return $users;</code></pre><p>4ã€å•ä¸ªå¯¹è±¡åºåˆ—åŒ–</p><pre><code> # éœ€è¦ use  use App\Http\DataResponse\UserDataResponse; use League\Fractal\Manager; use League\Fractal\Resource\Item; # æ­£å¸¸ä½¿ç”¨ $fractal = new Manager(); $users = new Item(auth()-&gt;user(), new UserDataResponse()); $users = $fractal-&gt;createData($users)-&gt;toArray(); return $users;</code></pre><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="https://my.oschina.net/u/2400083/blog/988715" target="_blank" rel="noopener">https://my.oschina.net/u/2400083/blog/988715</a></p><p><a href="https://zhuanlan.zhihu.com/p/25554084" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/25554084</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-JWT</title>
      <link href="/2019/09/18/Laravel-JWT/"/>
      <url>/2019/09/18/Laravel-JWT/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><blockquote><p><a href="https://jwt.io/" target="_blank" rel="noopener">JWT</a> æ˜¯ JSON Web Token çš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªéå¸¸è½»å·§çš„è§„èŒƒï¼Œè¿™ä¸ªè§„èŒƒå…è®¸æˆ‘ä»¬ä½¿ç”¨ JWT åœ¨ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’å®‰å…¨å¯é çš„ä¿¡æ¯ã€‚</p></blockquote><p>JWT ç”±å¤´éƒ¨ï¼ˆheaderï¼‰ã€è½½è·ï¼ˆpayloadï¼‰ä¸ç­¾åï¼ˆsignatureï¼‰ç»„æˆï¼Œä¸€ä¸ª JWT ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š</p><pre class="line-numbers language-â€˜"><code class="language-â€˜">{    "typ":"JWT",    "alg":"HS256"}{    "iss":"http://larabbs.test",ç­¾å‘äºº    "iat":1515733500,ç­¾å‘æ—¶é—´    "exp":1515737100,è¿‡æœŸæ—¶é—´    "nbf":1515733500,ç”Ÿæ•ˆæ—¶é—´ï¼Œåœ¨æ­¤ä¹‹å‰æ˜¯æ— æ•ˆçš„    "jti":"c3U4VevxG2ZA1qhT",ç¼–å·    "sub":1,ä¸»é¢˜    "prv":"23bd5c8949f600adb39e701c400872db7a5976f7"}signature<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¤´éƒ¨ç”³æ˜äº†åŠ å¯†ç®—æ³•ï¼›</li><li>è½½è·ä¸­æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„æ•°æ®ï¼Œ<code>exp</code> æ˜¯è¿‡æœŸæ—¶é—´ï¼Œ<code>sub</code> æ˜¯ JWT çš„ä¸»ä½“ï¼Œ<strong>è¿™é‡Œå°±æ˜¯ç”¨æˆ·çš„ id</strong>ï¼›</li><li>æœ€åçš„ signature æ˜¯ç”±æœåŠ¡å™¨è¿›è¡Œçš„ç­¾åï¼Œä¿è¯äº† token ä¸è¢«ç¯¡æ”¹ã€‚</li></ul><p>ç”¨æˆ· idï¼Œè¿‡æœŸæ—¶é—´ç­‰æ•°æ®éƒ½ä¿å­˜åœ¨ Token ä¸­äº†ï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦å°† Token ä¿å­˜åœ¨æœåŠ¡å™¨ä¸­ï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„æ—¶å€™åœ¨ Header ä¸­æºå¸¦ Tokenï¼ŒæœåŠ¡å™¨è·å– Token åï¼Œè¿›è¡Œ <code>base64_decode</code> å³å¯è·å–æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œç”±äºå·²ç»æœ‰äº†ç­¾åï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒæ•°æ®è¢«ç¯¡æ”¹ã€‚</p><p><strong>åŠ å¯† Token è§£å¯†</strong></p><p><img src="https://i.loli.net/2019/11/17/jXCUve2W8xqMGpO.png" alt></p><blockquote><p>JWT æœ€åæ˜¯é€šè¿‡ Base64 ç¼–ç çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥è¢«ç¿»è¯‘å›åŸæ¥çš„æ ·å­æ¥çš„ã€‚æ‰€ä»¥ä¸è¦åœ¨ JWT ä¸­å­˜æ”¾ä¸€äº›æ•æ„Ÿä¿¡æ¯ã€‚</p></blockquote><h3 id="å®‰è£…-jwt-auth"><a href="#å®‰è£…-jwt-auth" class="headerlink" title="å®‰è£… jwt-auth"></a>å®‰è£… jwt-auth</h3><pre><code>$ composer require tymon/jwt-auth</code></pre><p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸‹ JWT çš„ secretï¼Œè¿™ä¸ª secret å¾ˆé‡è¦ï¼Œç”¨äºæœ€åçš„ç­¾åï¼Œæ›´æ¢è¿™ä¸ª secret ä¼šå¯¼è‡´ä¹‹å‰ç”Ÿæˆçš„æ‰€æœ‰ token æ— æ•ˆã€‚</p><pre><code>$ php artisan jwt:secret</code></pre><p>å¯ä»¥çœ‹åˆ°åœ¨ .env æ–‡ä»¶ä¸­ï¼Œå¢åŠ äº†ä¸€è¡Œ <code>JWT_SECRET</code>ã€‚</p><p><strong>Laravel 5.5 ç‰ˆæœ¬ä»¥ä¸Šä¸éœ€è¦åœ¨æ·»åŠ æœåŠ¡æä¾›è€…ã€‚</strong></p><h3 id="å‘å¸ƒé…ç½®"><a href="#å‘å¸ƒé…ç½®" class="headerlink" title="å‘å¸ƒé…ç½®"></a>å‘å¸ƒé…ç½®</h3><pre><code>php artisan vendor:publish --provider=&quot;Tymon\JWTAuth\Providers\LaravelServiceProvider&quot;</code></pre><p>æ‚¨ç°åœ¨åº”è¯¥æœ‰ä¸€ä¸ª<code>config/jwt.php</code>æ–‡ä»¶ï¼Œå…è®¸æ‚¨é…ç½®æ­¤ç¨‹åºåŒ…çš„åŸºç¡€çŸ¥è¯†ã€‚</p><p>ä¿®æ”¹ <code>config/auth.php</code>ï¼Œå°† <code>api guard</code> çš„ <code>driver</code> æ”¹ä¸º <code>jwt</code>ã€‚</p><p><em>config/auth.php</em></p><pre><code>&#39;guards&#39; =&gt; [    &#39;web&#39; =&gt; [        &#39;driver&#39; =&gt; &#39;session&#39;,        &#39;provider&#39; =&gt; &#39;users&#39;,    ],    &#39;api&#39; =&gt; [        &#39;driver&#39; =&gt; &#39;jwt&#39;,        &#39;provider&#39; =&gt; &#39;users&#39;,    ],],# æ³¨æ„ä¸€ä¸‹æ¨¡å‹çš„æœåŠ¡æä¾›è€…ï¼Œé»˜è®¤ä½¿ç”¨çš„ app\user &#39;providers&#39; =&gt; [    &#39;users&#39; =&gt; [        &#39;driver&#39; =&gt; &#39;eloquent&#39;,        &#39;model&#39; =&gt; App\Http\Model\User::class,    ],</code></pre><p>å¦‚æœä½¿ç”¨äº† Dingo API ä¿®æ”¹ <code>config/api.php</code>ï¼Œauth ä¸­å¢åŠ  JWT ç›¸å…³çš„é…ç½®</p><p><em>config/api.php</em></p><pre><code>&#39;auth&#39; =&gt; [    &#39;jwt&#39; =&gt; &#39;Dingo\Api\Auth\Provider\JWT&#39;,],</code></pre><p>user æ¨¡å‹éœ€è¦ç»§æ‰¿ <code>Tymon\JWTAuth\Contracts\JWTSubject</code> æ¥å£ï¼Œå¹¶å®ç°æ¥å£çš„ä¸¤ä¸ªæ–¹æ³• getJWTIdentifier () å’Œ getJWTCustomClaims ()ã€‚</p><p><em>app\Models\User.php</em></p><pre><code>&lt;?phpnamespace App\Models;use Tymon\JWTAuth\Contracts\JWTSubject;use Illuminate\Notifications\Notifiable;use Illuminate\Foundation\Auth\User as Authenticatable;class User extends Authenticatable implements JWTSubject{    use Notifiable;    public function getJWTIdentifier()    {        return $this-&gt;getKey();    }    public function getJWTCustomClaims()    {        return [];    }}</code></pre><p>getJWTIdentifier è¿”å›äº† User çš„ idï¼ŒgetJWTCustomClaims æ˜¯æˆ‘ä»¬éœ€è¦é¢å¤–å† JWT è½½è·ä¸­å¢åŠ çš„è‡ªå®šä¹‰å†…å®¹ï¼Œè¿™é‡Œè¿”å›ç©ºæ•°ç»„ã€‚</p><p><code>jwt-auth</code> æœ‰ä¸¤ä¸ªé‡è¦çš„å‚æ•°ï¼Œå¯ä»¥åœ¨ <code>config/jwt.php</code> ä¸­è¿›è¡Œè®¾ç½®</p><ul><li>JWT_TTL ç”Ÿæˆçš„ token åœ¨å¤šå°‘åˆ†é’Ÿåè¿‡æœŸï¼Œé»˜è®¤ 60 åˆ†é’Ÿ</li><li>JWT_REFRESH_TTL ç”Ÿæˆçš„ tokenï¼Œåœ¨å¤šå°‘åˆ†é’Ÿå†…ï¼Œå¯ä»¥åˆ·æ–°è·å–ä¸€ä¸ªæ–° tokenï¼Œé»˜è®¤ 20160 åˆ†é’Ÿï¼Œ14 å¤©ã€‚</li></ul><p>è¿™é‡Œéœ€è¦ç†è§£ä¸€ä¸‹ JWT çš„è¿‡æœŸå’Œåˆ·æ–°æœºåˆ¶ï¼Œè¿‡æœŸå¾ˆå¥½ç†è§£ï¼Œè¶…è¿‡äº†è¿™ä¸ªæ—¶é—´ï¼Œtoken å°±æ— æ•ˆäº†ã€‚åˆ·æ–°æ—¶é—´ä¸€èˆ¬æ¯”è¿‡æœŸæ—¶é—´é•¿ï¼Œåªè¦åœ¨è¿™ä¸ªåˆ·æ–°æ—¶é—´å†…ï¼Œå³ä½¿ token è¿‡æœŸäº†ï¼Œ ä¾ç„¶å¯ä»¥æ¢å–ä¸€ä¸ªæ–°çš„ tokenï¼Œä»¥è¾¾åˆ°åº”ç”¨é•¿æœŸå¯ç”¨ï¼Œä¸éœ€è¦é‡æ–°ç™»å½•çš„ç›®çš„ã€‚</p><h3 id="åŠ©æ‰‹å‡½æ•°"><a href="#åŠ©æ‰‹å‡½æ•°" class="headerlink" title="åŠ©æ‰‹å‡½æ•°"></a>åŠ©æ‰‹å‡½æ•°</h3><pre><code>// å°è¯•é€šè¿‡æŸäº›å‡­æ®å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯$token = auth()-&gt;attempt($request);// è·å–å½“å‰ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·ã€‚$result = auth()-&gt;user();// æ³¨é”€ç”¨æˆ·-è¿™å°†ä½¿å½“å‰ä»¤ç‰Œæ— æ•ˆå¹¶å–æ¶ˆéªŒè¯ç”¨æˆ·çš„èº«ä»½auth()-&gt;logout(); Token å¯ä»¥ç»§ç»­ä½¿ç”¨ç›´åˆ° exp è¿‡æœŸauth()-&gt;logout(true);  é©¬ä¸ŠæŠŠå½“å‰çš„ Token æ°¸ä¹…æ€§çš„åŠ å…¥é»‘åå•// åˆ·æ–°ä»¤ç‰Œï¼Œè¿™ä¼šä½¿å½“å‰ä»¤ç‰Œæ— æ•ˆauth()-&gt;resfresh();auth()-&gt;resfresh(true,true); å°† true ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ï¼Œä»¥å¼ºåˆ¶å°†ä»¤ç‰Œæ°¸ä¹…æ€§åˆ—å…¥é»‘åå•ã€‚ç¬¬äºŒä¸ªå‚æ•°å°†é‡ç½®æ–°ä»¤ç‰Œçš„å£°æ˜// ä½¿ä»¤ç‰Œæ— æ•ˆï¼ˆå°†å…¶æ·»åŠ åˆ°é»‘åå•ï¼‰auth()-&gt;invalidate();auth()-&gt;invalidate(true); é©¬ä¸ŠæŠŠå½“å‰çš„ Token æ°¸ä¹…æ€§çš„åŠ å…¥é»‘åå•// åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦ç™»å½•auth()-&gt;check();</code></pre><h3 id="å¤šç”¨æˆ·éªŒè¯"><a href="#å¤šç”¨æˆ·éªŒè¯" class="headerlink" title="å¤šç”¨æˆ·éªŒè¯"></a>å¤šç”¨æˆ·éªŒè¯</h3><p>1ã€åˆ›å»º Admin æ¨¡å‹ï¼Œå…¶ä»–æ“ä½œä¸ User ä¸€è‡´</p><pre><code>php artisan make:model Admin</code></pre><p>2ã€ä¿®æ”¹<code>config\auth.php</code>é…ç½®</p><pre><code> &#39;guards&#39; =&gt; [        &#39;admin&#39; =&gt; [            &#39;driver&#39; =&gt; &#39;jwt&#39;,            &#39;provider&#39; =&gt; &#39;admins&#39;,        ],        &#39;api&#39; =&gt; [            &#39;driver&#39; =&gt; &#39;jwt&#39;,            &#39;provider&#39; =&gt; &#39;users&#39;,            &#39;hash&#39; =&gt; false,        ],    ], &#39;providers&#39; =&gt; [        &#39;users&#39; =&gt; [            &#39;driver&#39; =&gt; &#39;eloquent&#39;,            &#39;model&#39; =&gt; App\Http\Model\User::class,        ],        &#39;admins&#39; =&gt; [            &#39;driver&#39; =&gt; &#39;eloquent&#39;,            &#39;model&#39; =&gt; App\Http\Model\Admin::class,        ],    ],    </code></pre><blockquote><p>JWT è¶…çº§è¯¦ç»†çš„è®²è§£åšæ–‡ï¼š<a href="https://learnku.com/articles/10885/full-use-of-jwt#d08bfb" target="_blank" rel="noopener">https://learnku.com/articles/10885/full-use-of-jwt#d08bfb</a></p><p>JWT å®˜æ–¹ä½¿ç”¨æ‰‹å†Œï¼š<a href="https://jwt-auth.readthedocs.io/en/develop/" target="_blank" rel="noopener">https://jwt-auth.readthedocs.io/en/develop/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-ç¬¬ä¸‰æ–¹ç™»å½•</title>
      <link href="/2019/09/09/Laravel-%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95/"/>
      <url>/2019/09/09/Laravel-%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>æ‰€è°“çš„ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œå°±æ˜¯åˆ©ç”¨ç”¨æˆ·åœ¨ç¬¬ä¸‰æ–¹å¹³å°ä¸Šå·²æœ‰çš„è´¦å·æ¥å¿«é€Ÿå®Œæˆè‡ªå·±åº”ç”¨çš„ç™»å½•æˆ–è€…æ³¨å†Œçš„åŠŸèƒ½ï¼Œå¸¸ç”¨çš„åè®®ä¸º OAuth 2.0ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ª APPï¼Œéƒ½ä¼šé›†æˆå¾®ä¿¡ï¼Œå¾®åšç­‰ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œæ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿçš„ç™»å½•å¹¶å¼€å§‹ä½¿ç”¨ã€‚å½“ç„¶éœ€è¦çœ‹ä¸€ä¸‹ <a href>Socialite ç¤¾ä¼šåŒ–ç™»å½•</a>èƒ½æ›´å¥½çš„ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…ã€‚</p><h3 id="å¾®ä¿¡ç™»å½•"><a href="#å¾®ä¿¡ç™»å½•" class="headerlink" title="å¾®ä¿¡ç™»å½•"></a>å¾®ä¿¡ç™»å½•</h3><p>ç™»å½•ç™»å½•çš„æµç¨‹å›¾ï¼š</p><p><img src="https://i.loli.net/2019/09/12/DkGyJ3gdxB8r7vC.png" alt></p><h4 id="1ã€è·å–ä¸´æ—¶ç¥¨æ®-CODE"><a href="#1ã€è·å–ä¸´æ—¶ç¥¨æ®-CODE" class="headerlink" title="1ã€è·å–ä¸´æ—¶ç¥¨æ® CODE"></a>1ã€è·å–ä¸´æ—¶ç¥¨æ® CODE</h4><pre><code>https://open.weixin.qq.com/connect/oauth2/authorize?appid=è‡ªå·±çš„APPID&amp;redirect_uri=è‡ªå·±çš„ç½‘å€&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=STATE#wechat_redirect</code></pre><p><img src="https://i.loli.net/2019/09/12/coS8U54QW6FBkn7.png" alt></p><h4 id="2ã€è·å–-access-token-ä¸-open-id"><a href="#2ã€è·å–-access-token-ä¸-open-id" class="headerlink" title="2ã€è·å– access_token ä¸ open_id"></a>2ã€è·å– access_token ä¸ open_id</h4><pre><code>https://api.weixin.qq.com/sns/oauth2/access_token?appid=è‡ªå·±çš„APPID&amp;secret=è‡ªå·±çš„AppSecret&amp;code=è·å–çš„CODE&amp;grant_type=authorization_code</code></pre><p><img src="https://i.loli.net/2019/09/12/vMzCp2Nq5BDiX6k.png" alt></p><h4 id="3ã€è·å–ä¸ªäººä¿¡æ¯"><a href="#3ã€è·å–ä¸ªäººä¿¡æ¯" class="headerlink" title="3ã€è·å–ä¸ªäººä¿¡æ¯"></a>3ã€è·å–ä¸ªäººä¿¡æ¯</h4><pre><code>https://api.weixin.qq.com/sns/userinfo?access_token=è‡ªå·±çš„access_token&amp;openid=OPENID&amp;lang=zh_CN</code></pre><pre><code>{    &quot;openid&quot;: &quot;xxxxxxxxxxx&quot;,    &quot;nickname&quot;: &quot;å“ªå’å¤§æˆ˜å‡è€ç»ƒ&quot;,    &quot;sex&quot;: 1,    &quot;language&quot;: &quot;zh_CN&quot;,    &quot;city&quot;: &quot;èµ„é˜³&quot;,    &quot;province&quot;: &quot;å››å·&quot;,    &quot;country&quot;: &quot;ä¸­å›½&quot;,    &quot;headimgurl&quot;: &quot;&quot;,    &quot;privilege&quot;: []}</code></pre><h3 id="æ‰©å±•åŒ…"><a href="#æ‰©å±•åŒ…" class="headerlink" title="æ‰©å±•åŒ…"></a>æ‰©å±•åŒ…</h3><p><a href="https://socialiteproviders.netlify.com/" target="_blank" rel="noopener">Socialite Providers</a> è¶…çº§å¤šçš„ç¬¬ä¸‰æ–¹å¼€ç®±å°±ç”¨åŒ…ã€‚åªè¦ä½¿ç”¨çš„ OAuth 2.0 åè®®çš„ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•å»å®ç°ç™»å½•ã€‚</p><h4 id="1ã€install"><a href="#1ã€install" class="headerlink" title="1ã€install"></a>1ã€install</h4><pre><code>$ composer require socialiteproviders/weixin</code></pre><p>Laravel 5.5 ç‰ˆæœ¬ä»¥ä¸Šä¸éœ€è¦åœ¨<code>confi/app.php</code>æ·»åŠ æœåŠ¡æä¾›è€…ï¼ŒLaravel ä¼šè‡ªåŠ¨å‘ç°åŒ…</p><h4 id="2ã€äº‹ä»¶ç›‘å¬å™¨"><a href="#2ã€äº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="2ã€äº‹ä»¶ç›‘å¬å™¨"></a>2ã€äº‹ä»¶ç›‘å¬å™¨</h4><p>åœ¨<code>app/Providers/EventServiceProvider</code>å½“ä¸­çš„ <code>listen[]</code>æ·»åŠ </p><pre><code>/** * The event handler mappings for the application. * * @var array */protected $listen = [    \SocialiteProviders\Manager\SocialiteWasCalled::class =&gt; [        // add your listeners (aka providers) here        &#39;SocialiteProviders\\Weixin\\WeixinExtendSocialite@handle&#39;,    ],];</code></pre><h4 id="3ã€é…ç½®è®¾ç½®"><a href="#3ã€é…ç½®è®¾ç½®" class="headerlink" title="3ã€é…ç½®è®¾ç½®"></a>3ã€é…ç½®è®¾ç½®</h4><p>æ·»åŠ åˆ°<code>config/services.php</code></p><pre><code>&#39;weixin&#39; =&gt; [    &#39;client_id&#39; =&gt; env(&#39;WEIXIN_KEY&#39;),    &#39;client_secret&#39; =&gt; env(&#39;WEIXIN_SECRET&#39;),    &#39;redirect&#39; =&gt; env(&#39;WEIXIN_REDIRECT_URI&#39;)],</code></pre><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><pre><code>$user = Socialite::driver(&#39;Weixin&#39;)-&gt;user();$accessTokenResponseBody = $user-&gt;accessTokenResponseBody;</code></pre><p>ç®€å•çš„ä½¿ç”¨</p><pre><code>        # åŠ è½½é©±åŠ¨        $driver = Socialite::driver($type);        if ($request-&gt;code)        {            # è·å¾— access_token å’Œ open_id            $token = $driver-&gt;getAccessTokenResponse($request-&gt;code)[&#39;access_token&#39;];        }else{            $token = $request-&gt;access_token;            # è®¾ç½® open_id            $driver-&gt;setOpenId($request-&gt;open_id);        }        # è·å–ç”¨æˆ·ä¿¡æ¯        $result = $driver-&gt;userFromToken($token);        # è·å– unionid åªæœ‰åœ¨ç”¨æˆ·å°†å…¬ä¼—å·ç»‘å®šåˆ°å¾®ä¿¡å¼€æ”¾å¹³å°å¸å·åï¼Œæ‰ä¼šå‡ºç° unionid å­—æ®µ        $unionid = $result-&gt;offsetExists(&#39;unionid&#39;) ? $result-&gt;offsetGet(&#39;unionid&#39;) : null;</code></pre><p>æ ¸å¿ƒæºç åœ¨äº<code>vendor/socialiteproviders/weixin/Provider.php</code></p>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-DingoApi</title>
      <link href="/2019/09/08/Laravel-DingoApi/"/>
      <url>/2019/09/08/Laravel-DingoApi/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p><a href="https://github.com/dingo/api/" target="_blank" rel="noopener">dingo/api</a> æ˜¯ä¸€ä¸ª Lumen å’Œ Laravel éƒ½å¯ç”¨çš„ RestFul å·¥å…·åŒ…ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„å¼€å§‹æ„å»º RestFul Apiã€‚æˆ‘ä»¬çš„ç›®çš„æ˜¯æ•™ä¼šå¤§å®¶å¦‚ä½•å¿«é€Ÿçš„æ­å»ºå¹¶ä½¿ç”¨è¿™ä¸ªåŒ…ï¼Œæ›´å¤šçš„åŠŸèƒ½ï¼Œè¿˜éœ€è¦ä½ ä»”ç»†é˜…è¯» DingoApi çš„ <a href="https://github.com/dingo/api/wiki" target="_blank" rel="noopener">æ–‡æ¡£</a> æ¥æ·±å…¥çš„å­¦ä¹ å’Œç†è§£ï¼Œ<a href="https://github.com/liyu001989/dingo-api-wiki-zh" target="_blank" rel="noopener">è¿™é‡Œ</a>æœ‰ä¸€ä»½ä¸­è‹±å¯¹ç…§çš„ç¿»è¯‘ï¼Œæˆ–è®¸èƒ½å¸®åˆ°ä½ ã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><pre><code>$ composer require dingo/api</code></pre><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>å…ˆå°† dingo çš„é…ç½®æ–‡ä»¶å‘å¸ƒå‡ºæ¥</p><pre><code>$ php artisan vendor:publish --provider=&quot;Dingo\Api\Provider\LaravelServiceProvider&quot;</code></pre><p>æ‰§è¡ŒæˆåŠŸåï¼Œæˆ‘ä»¬ä¼šåœ¨ <code>config</code> ç›®å½•å…ˆçœ‹åˆ° <code>api.php</code> æ–‡ä»¶ï¼Œæ‰“å¼€æ–‡ä»¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„é…ç½®éƒ½æ˜¯å¯ä»¥åœ¨ <code>.env</code> ä¸­ä¿®æ”¹ï¼Œä¸‹é¢æˆ‘ä»¬ä¸»è¦è®²è§£ä¸€ä¸‹æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„é…ç½®ã€‚</p><p>1ã€API_STANDARDS_TREE æœ‰æ˜¯ä¸‰ä¸ªå€¼å¯é€‰</p><ul><li><code>x</code> æœ¬åœ°å¼€å‘çš„æˆ–ç§æœ‰ç¯å¢ƒçš„</li><li><code>prs</code> æœªå¯¹å¤–å‘å¸ƒçš„ï¼Œæä¾›ç»™å…¬å¸ appï¼Œå•é¡µåº”ç”¨ï¼Œæ¡Œé¢åº”ç”¨ç­‰</li><li><code>vnd</code> å¯¹å¤–å‘å¸ƒçš„ï¼Œå¼€æ”¾ç»™æ‰€æœ‰ç”¨æˆ·</li></ul><pre><code>API_STANDARDS_TREE=prs</code></pre><p>2ã€API_SUBTYPE ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æˆ‘ä»¬é¡¹ç›®çš„ç®€ç§°</p><pre><code>API_SUBTYPE=make</code></pre><p>3ã€API_PREFIX å’Œ API_DOMAIN<br>å¯¹äºä¸€ä¸ªé¡¹ç›®ï¼Œé€šè¿‡å‰ç¼€æˆ–è€…å­åŸŸåçš„æ–¹å¼æ¥åŒºåˆ†å¼€ API ä¸ Web ç­‰é¡µé¢è®¿é—®åœ°å€æ˜¯ååˆ†æœ‰å¿…è¦çš„ã€‚å‡å¦‚æ­£å¼ä¸Šçº¿çš„é¡¹ç›®åœ°å€ä¸º <code>www.make.com</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º API æ·»åŠ ä¸€ä¸ªå‰ç¼€</p><pre><code>API_PREFIX=api</code></pre><p>é€šè¿‡ <code>www.make.com/api</code> æ¥è®¿é—® APIã€‚<br>æˆ–è€…æœ‰å¯èƒ½å•ç‹¬é…ç½®ä¸€ä¸ªå­åŸŸå <code>api.make.com</code></p><pre><code>API_DOMAIN=api.make.com</code></pre><p>é€šè¿‡ api.make.com æ¥è®¿é—® APIã€‚</p><p>ç‰¹åˆ«è¦æ³¨æ„çš„æ˜¯ï¼š<strong>å‰ç¼€å’Œå­åŸŸåï¼Œä¸¤è€…æœ‰ä¸”åªæœ‰ä¸€ä¸ª</strong></p><p>4ã€API_VERSION<br>é»˜è®¤çš„ API ç‰ˆæœ¬ï¼Œå½“æˆ‘ä»¬æ²¡æœ‰ä¼  <code>Accept</code> å¤´çš„æ—¶å€™ï¼Œé»˜è®¤è®¿é—®è¯¥ç‰ˆæœ¬çš„ APIã€‚ä¸€èˆ¬æƒ…å†µä¸‹é…ç½® v1 å³å¯ã€‚</p><pre><code>API_VERSION=v1# è¯·æ±‚å¤´å½“ä¸­æ·»åŠ ï¼Œé€‰æ‹©ç‰ˆæœ¬Accept Accept: application/prs.make.v1+jsonAccept Accept: application/prs.make.v2+json</code></pre><p>5ã€API_STRICT<br>æ˜¯å¦å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œå¦‚æœå¼€å¯ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ <code>Accept</code> å¤´æ‰å¯ä»¥è®¿é—® APIï¼Œä¹Ÿå°±æ˜¯è¯´ç›´æ¥é€šè¿‡æµè§ˆå™¨ï¼Œè®¿é—®æŸä¸ª GET è°ƒç”¨çš„æ¥å£ï¼Œå¦‚ <code>https://api.larabbs.com/users</code>ï¼Œå°†ä¼šæŠ¥é”™ã€‚å¿…é¡»ä½¿ç”¨ Postman ä¹‹ç±»çš„è°ƒè¯•å·¥å…·ï¼Œè®¾ç½® <code>Accept</code> åæ‰å¯è®¿é—®ã€‚å¯ä»¥æ ¹æ®éœ€æ±‚å¼€å¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸º falseã€‚</p><p>6ã€API_DEBUG<br>æµ‹è¯•ç¯å¢ƒï¼Œæ‰“å¼€ debugï¼Œæ–¹ä¾¿æˆ‘ä»¬çœ‹åˆ°é”™è¯¯ä¿¡æ¯ï¼Œå®šä½é”™è¯¯ã€‚<br>æœ€åæˆ‘ä»¬çš„é…ç½®å¦‚ä¸‹</p><pre><code>API_DEBUG=true</code></pre><p>7ã€é…ç½® <code>.env</code></p><pre><code>API_STANDARDS_TREE=prsAPI_SUBTYPE=makeAPI_DOMAIN=api.make.comAPI_VERSION=v1API_DEBUG=true</code></pre><p>8ã€ä½¿ç”¨ dingo</p><pre><code># ä¾ç„¶æ˜¯åœ¨ route/api.php å½“ä¸­ä½¿ç”¨$api = app(&#39;Dingo\Api\Routing\Router&#39;);$api-&gt;version(&#39;v1&#39;, function($api) {    $api-&gt;get(&#39;version&#39;, function() {        return view(&#39;welcome&#39;);    });});$api-&gt;version(&#39;v2&#39;, function($api) {    $api-&gt;get(&#39;version&#39;, function() {        return response(&#39;this is version v2&#39;);    });});# åˆ›å»ºä¸€ä¸ª Controller ç±»&lt;?phpnamespace App\Http\Controllers\v1;use Illuminate\Http\Request;use App\Http\Controllers\Controller as BaseController;use Dingo\Api\Routing\Helpers;class Controller extends BaseController{    use Helpers;}</code></pre><blockquote><p>æ³¨æ„å¦‚æœæ˜¯æœ‰ laravel-debugbar é‚£ä¹ˆå°±éœ€è¦åœ¨ config/debugbar.php æŠŠé…ç½®ä¿®æ”¹ä»¥ä¸‹</p></blockquote><pre><code>&#39;enabled&#39; =&gt; env(&#39;APP_DEBUG&#39;, false)# ä¿®æ”¹ä¸º&#39;enabled&#39; =&gt; env(&#39;DEBUGBAR_ENABLE&#39;, false)# å¦‚æœéœ€è¦å°±åœ¨ .env å½“ä¸­å¼€å¯DEBUGBAR_ENABLE=true</code></pre><blockquote><p>æç¤ºï¼šç”±äºè·¯ç”±è¢« DingoApi æ¥ç®¡äº†ï¼Œå¦‚æœå°†æ¥éƒ¨ç½²ä¸Šçº¿åä½ éœ€è¦ç¼“å­˜è·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨ <code>php artisan api:cache</code> ä»£æ›¿ <code>php artisan route:cache</code> ï¼Œæœ¬åœ°æµ‹è¯•è¯·<strong>ä¸è¦æ‰§è¡Œè¿™ä¸ªå‘½ä»¤</strong>ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-æ—¥å¿—æ“ä½œ</title>
      <link href="/2019/09/07/Laravel-%E6%97%A5%E5%BF%97%E6%93%8D%E4%BD%9C/"/>
      <url>/2019/09/07/Laravel-%E6%97%A5%E5%BF%97%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>ä¸ºäº†å¸®åŠ©ä½ æ›´å¤šçš„äº†è§£åº”ç”¨ç¨‹åºä¸­åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼ŒLaravel æä¾›äº†å¼ºå¤§çš„æ—¥å¿—æœåŠ¡ï¼Œå…è®¸ä½ å°†æ—¥å¿—æ¶ˆæ¯ã€ç³»ç»Ÿé”™è¯¯æ—¥å¿—è®°å½•åˆ°æ–‡ä»¶ï¼Œç”šè‡³ä½¿ç”¨ Slack é€šçŸ¥åˆ°ä½ çš„æ•´ä¸ªå›¢é˜Ÿã€‚</p><p>åœ¨ Laravel æ¡†æ¶ä¸­ï¼ŒLaravel ä½¿ç”¨ <a href="https://github.com/Seldaek/monolog" target="_blank" rel="noopener">Monolog</a> åº“ï¼Œå®ƒä¸ºå„ç§å¼ºå¤§çš„æ—¥å¿—å¤„ç†æä¾›æ”¯æŒã€‚Laravel ä½¿é…ç½®è¿™äº›å¤„ç†ç¨‹åºå˜å¾—ç®€å•ï¼Œå…è®¸ä½ æ··åˆå¹¶åŒ¹é…å®ƒä»¬è‡ªå®šä¹‰çš„åº”ç”¨ç¨‹åºæ—¥å¿—å¤„ç†ã€‚</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>æ‰€æœ‰çš„åº”ç”¨ç¨‹åºæ—¥å¿—ç³»ç»Ÿé…ç½®éƒ½ä½äº <code>config/logging.php</code> é…ç½®æ–‡ä»¶ä¸­ã€‚é»˜è®¤ä½¿ç”¨å¤§æ¦‚é…ç½®å¦‚ä¸‹ï¼š</p><pre><code># é»˜è®¤ä½¿ç”¨çš„ stack é€šé“&#39;default&#39; =&gt; env(&#39;LOG_CHANNEL&#39;, &#39;stack&#39;),# æ³¨æ„çœŸæ­£åœ¨ä½¿ç”¨çš„æ˜¯ .env æ–‡ä»¶å½“ä¸­çš„ LOG_CHANNEL=stackï¼Œä¿®æ”¹è¿™é‡Œå³å¯ä¿®æ”¹é»˜è®¤é€šé“&#39;channels&#39; =&gt; [         # é»˜è®¤ä½¿ç”¨çš„é€šé“        &#39;stack&#39; =&gt; [            &#39;driver&#39; =&gt; &#39;stack&#39;,# é©±åŠ¨            &#39;channels&#39; =&gt; [&#39;daily&#39;], # èšåˆï¼Œæ”¯æŒå¤šé€šé“            &#39;ignore_exceptions&#39; =&gt; false, # é»˜è®¤å¿½ç•¥å¼‚å¸¸        ],         # stack åˆèšåˆäº† daily é€šé“ï¼Œå®ƒæ¯å¤©çš„æ—¥å¿—ä¿¡æ¯éƒ½ä¼šè¾“å‡ºåˆ° storage/log æ–‡ä»¶ä¸‹        &#39;daily&#39; =&gt; [            &#39;driver&#39; =&gt; &#39;daily&#39;, # é©±åŠ¨            &#39;path&#39; =&gt; storage_path(&#39;logs/laravel.log&#39;),# æ—¥å¿—æ–‡ä»¶å­˜å‚¨è·¯å¾„            &#39;level&#39; =&gt; &#39;debug&#39;, # å…«å¤§é”™è¯¯çº§åˆ«            &#39;days&#39; =&gt; 14, # æ—¥å¿—åˆ†ç‰‡å‘¨æœŸï¼Œå¤šå°‘å¤©ä¸€ä¸ªæ–‡ä»¶        ],    ]</code></pre><h3 id="é…ç½®-Single-å’Œ-Daily-é€šé“"><a href="#é…ç½®-Single-å’Œ-Daily-é€šé“" class="headerlink" title="é…ç½® Single å’Œ Daily é€šé“"></a>é…ç½® Single å’Œ Daily é€šé“</h3><p><code>single</code> å’Œ <code>daily</code> é€šé“åŒ…å«ä¸‰ä¸ªå¯é€‰é…ç½®é¡¹ï¼š<code>bubble</code> ã€<code>permission</code> å’Œ <code>locking</code></p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>åç§°</td><td>æè¿°</td><td>é»˜è®¤å€¼</td></tr><tr><td><code>bubble</code></td><td>æ¶ˆæ¯å¤„ç†åï¼ŒæŒ‡ç¤ºæ¶ˆæ¯æ˜¯å¦æ¨é€åˆ°å…¶ä»–é€šé“</td><td><code>true</code></td></tr><tr><td><code>permission</code></td><td>æ—¥å¿—æ–‡ä»¶æƒé™</td><td><code>0644</code></td></tr><tr><td><code>locking</code></td><td>å†™å…¥ä¹‹å‰å°è¯•é”å®šæ—¥å¿—æ–‡ä»¶</td><td></td></tr></tbody></table><h3 id="æ—¥å¿—å†™å…¥çš„å…«å¤§çº§åˆ«"><a href="#æ—¥å¿—å†™å…¥çš„å…«å¤§çº§åˆ«" class="headerlink" title="æ—¥å¿—å†™å…¥çš„å…«å¤§çº§åˆ«"></a>æ—¥å¿—å†™å…¥çš„å…«å¤§çº§åˆ«</h3><table><thead><tr><th align="left">é”™è¯¯ç­‰çº§</th><th align="left">æè¿°</th><th align="left">æ•´å‹å€¼</th><th align="left">åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left">debug</td><td align="left">ä»£ç å¼•ç”¨ä¸º â€œMonologLogger::DEBUGâ€</td><td align="left">100</td><td align="left">ç´§æ€¥ï¼Œå¦‚ç³»ç»ŸæŒ‚æ‰</td></tr><tr><td align="left">info</td><td align="left">ä»£ç å¼•ç”¨ä¸º â€œMonologLogger::INFOâ€</td><td align="left">200</td><td align="left">éœ€è¦ç«‹å³é‡‡å–è¡ŒåŠ¨ï¼Œå¦‚æ•°æ®åº“å¼‚å¸¸ç­‰</td></tr><tr><td align="left">notice</td><td align="left">ä»£ç å¼•ç”¨ä¸º â€œMonologLogger::NOTICEâ€</td><td align="left">250</td><td align="left">ä¸¥é‡é—®é¢˜ï¼Œå¦‚å¼‚å¸¸</td></tr><tr><td align="left">warning</td><td align="left">ä»£ç å¼•ç”¨ä¸º â€œMonologLogger::WARNINGâ€</td><td align="left">300</td><td align="left">è¿è¡Œæ—¶é”™è¯¯ï¼Œä¸éœ€è¦ç«‹å³å¤„ç†ä½†éœ€è¦è¢«è®°å½•å’Œç›‘æ§</td></tr><tr><td align="left">error</td><td align="left">ä»£ç å¼•ç”¨ä¸º â€œMonologLogger::ERRORâ€</td><td align="left">400</td><td align="left">è­¦å‘Šä½†ä¸æ˜¯é”™è¯¯ï¼Œæ¯”å¦‚ä½¿ç”¨äº†è¢«åºŸå¼ƒçš„API</td></tr><tr><td align="left">critical</td><td align="left">ä»£ç å¼•ç”¨ä¸º â€œMonologLogger::CRITICALâ€</td><td align="left">500</td><td align="left">æ™®é€šä½†å€¼å¾—æ³¨æ„çš„äº‹ä»¶</td></tr><tr><td align="left">alert</td><td align="left">ä»£ç å¼•ç”¨ä¸º â€œMonologLogger::ALERTâ€</td><td align="left">550</td><td align="left">æ„Ÿå…´è¶£çš„äº‹ä»¶ï¼Œæ¯”å¦‚ç™»å½•ã€é€€å‡º</td></tr><tr><td align="left">emergency</td><td align="left">ä»£ç å¼•ç”¨ä¸º â€œMonologLogger::EMERGENCYâ€</td><td align="left">600</td><td align="left">è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯</td></tr></tbody></table><h3 id="ç®€å•çš„ä½¿ç”¨"><a href="#ç®€å•çš„ä½¿ç”¨" class="headerlink" title="ç®€å•çš„ä½¿ç”¨"></a>ç®€å•çš„ä½¿ç”¨</h3><pre><code>&lt;?phpnamespace App\Http\Controllers;use Illuminate\Http\Request;# å¼•å…¥ Loguse Illuminate\Support\Facades\Log;class UsersController extends Controller{    public function get()    {        # å†™å…¥æ—¥å¿—ï¼Œç¬¬äºŒæ¬¡å‚æ•°ä¸ºæ•°ç»„åœ¨æ—¥å¿—æ–‡ä»¶å½“ä¸­è½¬æ¢ä¸º JSON é»˜è®¤ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­é»˜è®¤çš„é€šé“        Log::info(&#39;è®°å½•çš„æ—¥å¿—&#39;,[&#39;ip&#39; =&gt; \request()-&gt;ip()]);        # ä»¥ä¸Šæ˜¯å†™å…¥é»˜è®¤é…ç½®æ–‡ä»¶å½“ä¸­çš„é€šé“ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥æŒ‡å®šå†™å…¥çš„é€šé“        Log::channel(&#39;single&#39;)-&gt;info(&#39;è®°å½•çš„æ—¥å¿—&#39;,[&#39;ip&#39; =&gt; \request()-&gt;ip()]);        # å¦‚æœæƒ³è¦åˆ›å»ºä¸€ä¸ªç”±å¤šé€šé“æ„æˆçš„æŒ‰éœ€è®°å½•çš„å †æ ˆï¼Œå¯ä»¥ä½¿ç”¨ stack æ–¹æ³•ï¼š        Log::stack([&#39;single&#39;, &#39;slack&#39;])-&gt;info(&#39;Something happened!&#39;);    }}</code></pre><p>æ—¥å¿—æ–‡ä»¶çš„ç»“æœï¼š</p><pre><code># æ³¨æ„è™½ç„¶ä»–ä»¬åœ¨æ—¥å¿—æ–‡ä»¶é‡Œé¢çš„ç»“æœéƒ½æ˜¯ä¸€æ ·ï¼Œä½†æ˜¯ä»–ä»¬å­˜å‚¨çš„æ—¥å¿—æ–‡ä»¶æ˜¯ä¸ä¸€æ ·çš„ä¸€ä¸ªå•ä¸€ã€ä¸€ä¸ªæ—¥å¸¸[2019-09-07 13:58:05] local.INFO: è®°å½•çš„æ—¥å¿— {&quot;ip&quot;:&quot;xxxxxxxxxxx&quot;} </code></pre><h3 id="è‡ªå®šä¹‰-Monolog-é€šé“"><a href="#è‡ªå®šä¹‰-Monolog-é€šé“" class="headerlink" title="è‡ªå®šä¹‰ Monolog é€šé“"></a>è‡ªå®šä¹‰ Monolog é€šé“</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨<code>config/logging.php</code>ä¸­æ·»åŠ ä¸€ä¸ª tap æ•°ç»„ã€‚</p><pre><code># è‡ªå®šä¹‰ monolog é€šé“&#39;monolog&#39; =&gt; [    &#39;driver&#39; =&gt; &#39;daily&#39;, # ä½¿ç”¨çš„ daily æ¯æ—¥è®°å½•    &#39;tap&#39; =&gt; [App\Logging\CustomizeFormatter::class],# æ¥å£    &#39;permission&#39;=&gt; 0777, # æƒé™    &#39;path&#39; =&gt; storage_path(&#39;logs/laravel.log&#39;), # å­˜å‚¨çš„è·¯å¾„    &#39;level&#39; =&gt; &#39;debug&#39;, # å…«å¤§é”™è¯¯çº§åˆ«    &#39;days&#39; =&gt; 1, # æ—¥å¿—åˆ†ç‰‡],</code></pre><p>åˆ›å»º CustomizeFormatter.php</p><pre><code>&lt;?phpnamespace App\Logging;# å¼•å…¥è‡ªå®šä¹‰çš„ Formatteruse App\Logging\JsonFormatter;class CustomizeFormatter{    /**     * è‡ªå®šä¹‰ç»™å®šçš„æ—¥å¿—å®ä¾‹ã€‚     *     * @param  \Illuminate\Log\Logger  $logger     * @return void     */    public function __invoke($logger)    {        foreach ($logger-&gt;getHandlers() as $handler) {            $handler-&gt;setFormatter(new JsonFormatter());        }    }}</code></pre><p>åˆ›å»º JsonFormatter.php</p><pre><code>&lt;?phpnamespace App\Logging;use Monolog\Formatter\JsonFormatter as BaseJsonFormatter;class JsonFormatter extends BaseJsonFormatter{    public function format(array $record) ï¼šstringã€€    {        // è¿™ä¸ªå°±æ˜¯æœ€ç»ˆè¦è®°å½•çš„æ•°ç»„ï¼Œæœ€åè½¬æˆJsonå¹¶è®°å½•è¿›æ—¥å¿—        $newRecord = [            &#39;time&#39; =&gt; $record[&#39;datetime&#39;]-&gt;format(&#39;Y-m-d H:i:s&#39;),            &#39;message&#39; =&gt; $record[&#39;message&#39;],        ];        if (!empty($record[&#39;context&#39;])) {            $newRecord = array_merge($newRecord, $record[&#39;context&#39;]);        }        //$json = &#39;aaa,bbb,ccc&#39;;  // è¿™æ˜¯æœ€ç»ˆè¿”å›çš„è®°å½•ä¸²ï¼Œå¯ä»¥æŒ‰è‡ªå·±çš„éœ€æ±‚æ”¹        $json = $this-&gt;toJson($this-&gt;normalize($newRecord), true) . ($this-&gt;appendNewline ? &quot;\n&quot; : &#39;&#39;);        return $json;    }}</code></pre><p>ä½¿ç”¨è‡ªå®šä¹‰çš„é€šé“</p><pre><code>Log::channel(&#39;monolog&#39;)-&gt;info(&#39;è®°å½•çš„æ—¥å¿—&#39;,[&#39;ip&#39; =&gt; \request()-&gt;ip()]);# ç»“æœ{&quot;time&quot;:&quot;2019-09-07 16:37:52&quot;,&quot;message&quot;:&quot;è®°å½•çš„æ—¥å¿—&quot;,&quot;ip&quot;:&quot;xxxxxx&quot;}</code></pre><blockquote><p>é‡å†™çˆ¶ç±»çš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„ï¼Œå¦‚æœçˆ¶ç±»æœ‰è¿”å›å€¼é™åˆ¶çš„è¯ï¼Œé‚£ä¹ˆä¹Ÿå¿…é¡»è·Ÿçˆ¶ç±»ä¸€ä¸ªç±»å‹ä¸ç„¶å°±ä¼šæŠ¥é”™ã€‚è¿™çš„ format åœ¨çˆ¶ç±»çš„æ—¶å€™é™åˆ¶è¿”å›çš„ string ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨è¿”å›å€¼é™å®šé‚£ string</p></blockquote><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="https://www.jianshu.com/p/b8e0ef4ef249" target="_blank" rel="noopener">https://www.jianshu.com/p/b8e0ef4ef249</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Composer</title>
      <link href="/2019/09/06/Composer/"/>
      <url>/2019/09/06/Composer/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>å…ˆäº†è§£ä¸€ä¸‹å†å²ï¼Œä»æ‹·è´ç¬¬ä¸‰æ–¹ä»£ç åˆ°é¡¹ç›®ä¸­(1994)ï¼Œåˆ° PEAR å®‰è£…ä¾èµ–åŒ…(1999)ï¼Œå†åˆ° Composer å…´èµ·(2012)ï¼ŒPHP ç¤¾åŒºç»å†äº†å°†è¿‘ 20 å¹´çš„æ¢ç´¢ã€‚PHP è¿™é—¨å¤è€çš„è¯­è¨€ï¼Œä¹Ÿåœ¨ä¸æ–­çš„å‘å±•æ›´æ–°ï¼Œåœ¨ Web é¢†åŸŸä¸€ç›´å‘å…‰å‘çƒ­ã€‚ Composer ä½œä¸ºç›®å‰ PHP åŒ…ä¾èµ–ç®¡ç†çš„æœ€ä½³å·¥å…·ï¼Œå€¼å¾—æ¯ä¸€ä½ PHP å¼€å‘äººå‘˜æŒæ¡ã€‚</p><h3 id="ä¸­æ–‡å®˜ç½‘"><a href="#ä¸­æ–‡å®˜ç½‘" class="headerlink" title="ä¸­æ–‡å®˜ç½‘"></a>ä¸­æ–‡å®˜ç½‘</h3><p><a href="https://www.phpcomposer.com/" target="_blank" rel="noopener">https://www.phpcomposer.com/</a></p><h3 id="ä»€ä¹ˆæ˜¯-Composer-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Composer-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Composer ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Composer ï¼Ÿ</h3><p>æ˜¯ PHP ç”¨æ¥ç®¡ç†ä¾èµ–ï¼ˆdependencyï¼‰å…³ç³»çš„å·¥å…·ã€‚ä½ å¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å£°æ˜æ‰€ä¾èµ–çš„å¤–éƒ¨å·¥å…·åº“ï¼ˆlibrariesï¼‰ï¼ŒComposer ä¼šè‡ªåŠ¨å¸®ä½ å®‰è£…è¿™äº›ä¾èµ–çš„åº“æ–‡ä»¶ã€‚</p><h3 id="æ‰©å±•å’ŒåŒ…"><a href="#æ‰©å±•å’ŒåŒ…" class="headerlink" title="æ‰©å±•å’ŒåŒ…"></a>æ‰©å±•å’ŒåŒ…</h3><p>æ‹“å±•å’ŒåŒ…æ˜¯ä¸¤ä¸ªéå¸¸ç›¸è¿‘çš„æ¦‚å¿µã€‚åœ¨ PHP ä¸–ç•Œé‡Œï¼Œä¸€èˆ¬å¯ä»¥è¿™æ ·ç†è§£å’ŒåŒºåˆ†ä¸¤è€…ï¼šæ‹“å±•ï¼ˆextensionï¼‰å’Œæ¨¡å—ï¼ˆmoduleï¼‰ç­‰ä»·ï¼Œæ˜¯ç”¨ C è¯­è¨€å†™çš„åŠŸèƒ½åˆé›†ã€‚</p><p>åŒ…ï¼ˆpackageï¼‰å’Œåº“ï¼ˆlibraryï¼‰ç­‰ä»·ï¼Œä¸»è¦æ˜¯ç”¨ PHP å®ç°çš„åŠŸèƒ½åˆé›†ï¼›æ‹“å±•ä»¥åŠ¨æ€é“¾æ¥åº“ï¼ˆ.dllæˆ–.soï¼‰çš„å½¢å¼åŠ è½½ï¼ŒåŒ…åˆ™æ˜¯é€šè¿‡ require/include æ–¹å¼åŠ è½½ã€‚ç»å¤§éƒ¨åˆ†æ—¶å€™ï¼Œä¸¤è€…æ··ç”¨ä¸ä¼šé€ æˆç†è§£ä¸Šçš„å›°éš¾ã€‚</p><p>å¸¸è§çš„æ‹“å±•ï¼šGDã€ZIP ã€Memcached ã€MySQLi ã€ Redis ç­‰ </p><p>å¸¸è§çš„åŒ…ï¼šPHPMailer ã€PHPOffice ã€HTMLPurifier ç­‰</p><h3 id="PEAR-ä¸-PECL"><a href="#PEAR-ä¸-PECL" class="headerlink" title="PEAR ä¸ PECL"></a>PEAR ä¸ PECL</h3><p>åœ¨ Composer æµè¡Œä¹‹å‰ï¼ŒPEAR å’Œ PECL æ˜¯æ›´ä¸º PHP å¼€å‘è€…æ‰€çŸ¥çš„ä¸¤ä¸ªå·¥å…·ï¼ˆç¤¾åŒºï¼‰ã€‚PEAR æ˜¯ PHP æ‹“å±•å’Œåº”ç”¨ä»“åº“ï¼ˆPHP Extension and Application Repositoryï¼‰çš„ç¼©å†™ï¼Œå®˜ç½‘<a href="http://pear.php.net/" target="_blank" rel="noopener">http://pear.php.net</a>ï¼›PECL æ˜¯ PHP æ‹“å±•ç¤¾åŒºåº“ï¼ˆPHP Extension Community Libraryï¼‰çš„ç¼©å†™ï¼Œå®˜ç½‘<a href="http://pecl.php.net/" target="_blank" rel="noopener">http://pecl.php.net</a>ã€‚</p><p>ä¸¤è€…çš„åŒºåˆ«å¯ç”¨æ‹“å±•å’ŒåŒ…æ¥åŒºåˆ†ï¼šPECL æ‰˜ç®¡æ‹“å±•ï¼Œæºä»£ç å¤šä¸º C æ–‡ä»¶ï¼Œä¾‹å¦‚ APCã€AMPQ ç­‰ï¼›PEAR æ‰˜ç®¡åŒ…ï¼ŒåŠŸèƒ½ç”¨ PHP å®ç°ï¼Œå¦‚ PHP CodeSnifferã€HTTP Request ç­‰ï¼›PEAR å¯¹åº” pear å‘½ä»¤ï¼Œ PECL å¯¹åº” pecl å‘½ä»¤ï¼Œå¯ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤å®‰è£…å’Œç®¡ç†æ‹“å±•å’ŒåŒ…ï¼ˆ pear çš„ build/pickle å­å‘½ä»¤ä¹Ÿå¯ä»¥ç¼–è¯‘ PECL ä¸­çš„æ‹“å±•ï¼‰ã€‚ä¸¤è€…äº’ä¸ºè¡¥å……ï¼Œå®˜ç½‘ä»¥å§å¦¹ï¼ˆsistersï¼‰å½¢å®¹ä¸¤è€…çš„å…³ç³»ã€‚</p><p>PECL æ˜¯å®˜æ–¹æ‹“å±•çš„è¡¥å……ï¼Œç›®å‰ä»å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œä¸€äº›ä¼˜ç§€çš„æ‹“å±•æœ‰æˆä¸ºå®˜æ–¹æ‹“å±•çš„æ½œè´¨ã€‚éŸ©å¤©å³°å¤§ç¥çš„ swoole æ‹“å±•ä¹Ÿæ‰˜ç®¡åœ¨ PECL ä¸­ï¼Œå›½å†…åæ°”éå¸¸é«˜ã€‚ç›¸æ¯”ä¹‹ä¸‹ PEAR å·²æ˜¯æ˜æ—¥é»„èŠ±ã€‚PEAR2 å’Œ Pyrusï¼ˆä¸‹ä¸€ä»£çš„PEAR åŒ…å®‰è£…å·¥å…·ï¼ŒåŸºäº PHP5.3+ æ„å»ºï¼Œå®˜ç½‘<a href="http://pear2.php.net/" target="_blank" rel="noopener">http://pear2.php.net</a>ï¼‰çš„å‡ºç°ä¹Ÿæœªèƒ½æŒ½æ•‘ PEAR ã€‚PEAR æ²¡è½ä¼´éšç€æœ¬æ–‡ä¸»è§’ Composer çš„å…´èµ·ã€‚</p><p>PEAR çš„å®šä½æ˜¯â€œæä¾›å¯å¤ç”¨çš„ PHP ç»„ä»¶â€ï¼Œä»¥ä¸­å¿ƒåŒ–çš„æ–¹å¼ä¸ºå¼€å‘è€…æä¾›åŠŸèƒ½åŒ…ã€‚ä¸­å¿ƒåŒ–å‘å¸ƒçš„æ–¹å¼ä¿è¯äº†ä»£ç çš„è´¨é‡ï¼ŒåŒæ—¶å¸¦æ¥ç»´æŠ¤ä¸Šçš„ä¸ä¾¿ï¼šé€šè¿‡è¯„å®¡çš„åŒ…æ‰èƒ½å‘å¸ƒï¼ŒåŒ…è¿‡æ—¶ç°è±¡ä¸¥é‡ã€‚PEAR å®‰è£…çš„åŒ…æ˜¯å…¨å±€çš„ï¼Œä¸èƒ½ä¸ºå•ç‹¬é¡¹ç›®å®‰è£…ä¾èµ–åŒ…ï¼Œéç‰¹æƒç”¨æˆ·ä¸èƒ½è‡ªè¡Œå®‰è£…ä¾èµ–åŒ…ã€‚å…¶ä»–ç¼ºç‚¹è¿˜åŒ…æ‹¬ç³Ÿç³•çš„ä¾èµ–ç®¡ç†ã€‚éšç€ Github çš„æµè¡Œå’Œ Composer çš„å‡ºç°ï¼ŒåŒ…ç®¡ç†è¿›å…¥ Composer æ—¶ä»£ã€‚PEAR å·²ç»å®Œæˆå…¶å†å²ä½¿å‘½ï¼Œå¯ä»¥å®‰å¿ƒçš„å»äº†ã€‚</p><h3 id="Composer"><a href="#Composer" class="headerlink" title="Composer"></a>Composer</h3><p>ä¸¥æ ¼æ¥è¯´ï¼ŒComposer çš„å®šä½æ˜¯ä¾èµ–ç®¡ç†å·¥å…·è€ŒéåŒ…ç®¡ç†å™¨ã€‚Composer ä¸­æ–‡ç½‘å¯¹ Composer å·¥ä½œä»‹ç»å¦‚ä¸‹ã€‚Composer å°†è¿™æ ·ä¸ºä½ è§£å†³é—®é¢˜ï¼š</p><p>a) ä½ æœ‰ä¸€ä¸ªé¡¹ç›®ä¾èµ–äºè‹¥å¹²ä¸ªåº“ã€‚</p><p>b) å…¶ä¸­ä¸€äº›åº“ä¾èµ–äºå…¶ä»–åº“ã€‚</p><p>c) ä½ å£°æ˜ä½ æ‰€ä¾èµ–çš„ä¸œè¥¿ã€‚</p><p>d) Composer ä¼šæ‰¾å‡ºå“ªä¸ªç‰ˆæœ¬çš„åŒ…éœ€è¦å®‰è£…ï¼Œå¹¶å®‰è£…å®ƒä»¬ï¼ˆå°†å®ƒä»¬ä¸‹è½½åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼‰ã€‚</p><p>PEAR èƒ½åšçš„äº‹æƒ…ï¼ŒComposer éƒ½èƒ½åšï¼ˆåŒ…æ‹¬å®‰è£… PECL æ‹“å±•ï¼‰ï¼Œéƒ¨åˆ†è¿˜èƒ½åšå¾—æ›´å¥½ã€‚Composer é»˜è®¤æŠŠåŒ…å®‰è£…åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ™®é€šç”¨æˆ·å°±èƒ½æ­£å¸¸ä½¿ç”¨ï¼ˆ Composer å®˜æ–¹å»ºè®®ä¸è¦ä»¥ root èº«ä»½æ‰§è¡Œ Composer å‘½ä»¤ï¼‰ï¼›é¼“åŠ±éµå¾ªæœ€ä½³å®è·µï¼ˆå³å¤§åé¼é¼çš„ PSR è§„èŒƒï¼Œè¯¦æƒ…è§ PHP-FIG å®˜ç½‘<a href="https://www.php-fig.org/" target="_blank" rel="noopener">https://www.php-fig.org</a>ï¼‰ï¼Œæå¤§çš„æ¨åŠ¨ PHP ç¤¾åŒºç¼–ç é£æ ¼çš„è§„èŒƒåŒ–ï¼›Composer æ˜¯å»ä¸­å¿ƒåŒ–çš„å¹³å°ï¼Œä»»ä½•äººå‡å¯å‘å¸ƒä»£ç åŒ…ï¼›å‘å¸ƒåŒ…æ— éœ€è¯„å®¡ï¼ŒåŒ…çš„è´¨é‡ç”±ç”¨æˆ·æŠ•ç¥¨å†³å®šâ€¦ä½œä¸º PEAR çš„ç»§ä»»è€…ï¼ŒComposer çš„è¡¨ç°ç»å—ä½äº†ç¤¾åŒºçš„è€ƒéªŒï¼Œå¹¶æˆä¸ºäº‹å®ä¸Šçš„ä¾èµ–ç®¡ç†æ ‡å‡†å·¥å…·ã€‚</p><p>Composer ç›®å‰å·²ç»å½¢æˆåºå¤§çš„ç”Ÿæ€ï¼Œåœ¨æ•°é‡ä¸Šï¼ŒComposer çš„åŒ…è¿œè¶… PEAR ã€‚ç”±äºä»»ä½•äººå‡å¯è‡ªç”±å‘å¸ƒåŒ…ä¸”æ— éœ€è¯„å®¡ï¼ŒComposer ç”Ÿæ€ä¸­çš„åŒ…å¯èƒ½å­˜åœ¨ä»£ç è´¨é‡å‚å·®ä¸é½ã€ä»£ç é£æ ¼å„å¼‚ã€åé—¨æ¼æ´ç­‰éšå¿§ã€‚å¦å¤– Composer çš„ä¾èµ–ç®¡ç†ä»¥é¡¹ç›®ä¸ºå•ä½ï¼Œä¸€å°æœºå™¨ä¸Šå¯èƒ½å¤šæ¬¡å®‰è£…åŒä¸€ä¸ªåŒ…ã€‚ä½†ç‘•ä¸æ©ç‘œï¼Œæ€»ä½“è€Œè¨€ï¼ŒComposer æå¤§çš„æ”¹å˜äº† PHP çš„å¼€å‘ç”Ÿæ€ï¼Œä¿ƒè¿›äº†ä»£ç äº¤æµå’Œç¤¾åŒºå‘å±•ã€‚</p><h3 id="Composer-ç”¨æ³•"><a href="#Composer-ç”¨æ³•" class="headerlink" title="Composer ç”¨æ³•"></a>Composer ç”¨æ³•</h3><p>Composer ä¸ºç®¡ç†çš„é¡¹ç›®çš„ä¾èµ–è€Œç”Ÿï¼Œé¡¹ç›®ä¸­çš„ composer.json æ–‡ä»¶æ˜¯å…¶å·¥ä½œçš„ä¾æ®ã€‚è¯¥æ–‡ä»¶ä¸­æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯ require éƒ¨åˆ†ï¼Œè¯¥éƒ¨åˆ†å‘Šè¯‰ Composer æœŸæœ›å®‰è£…çš„<strong>åŒ…åŠå…¶ç‰ˆæœ¬</strong>ï¼Œä¾‹å¦‚ï¼š</p><pre><code>{    &quot;name&quot;: &quot;tinywan/easy-live&quot;,    &quot;description&quot;: &quot;nginx live module&quot;,    &quot;type&quot;: &quot;library&quot;,    &quot;license&quot;: &quot;MIT&quot;,    &quot;authors&quot;: [        {            &quot;name&quot;: &quot;Tinywan&quot;,            &quot;email&quot;: &quot;756684177@qq.com&quot;        }    ],    &quot;require&quot;: {        &quot;php&quot;: &quot;&gt;=7.0&quot;    },    &quot;autoload&quot;: {        &quot;psr-4&quot;: {            &quot;live\\&quot;: &quot;src&quot;        }    }}</code></pre><p>ç”¨ Lravel çš„ composer.json  æ¼”ç¤ºï¼š</p><p><img src="https://i.loli.net/2020/02/16/7aY8NL5EqGxQ3yh.png" alt="2020-02-16_13-43.png"></p><p> ç„¶åè¿è¡Œ composer install å‘½ä»¤ï¼ŒComposer ä¼šè‡ªåŠ¨åˆ†æä¾èµ–ï¼Œå®‰è£…æœ€åˆé€‚çš„åŒ…åˆ° vendor ç›®å½•ä¸‹ã€‚åŠ  -v (-vv, -vvv)é€‰é¡¹ä¼šæ‰“å°å‘½ä»¤æ‰§è¡Œè¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ã€‚å®‰è£…å®Œæ¯•åï¼Œvendor ç›®å½•ä¸‹ä¼šç”Ÿæˆ autoload.php æ–‡ä»¶ã€‚åœ¨é¡¹ç›®çš„å…¥å£æ–‡ä»¶ä¸­åŒ…å«æ­¤æ–‡ä»¶ï¼š <strong>require DIR . â€œ/vendor/autoload.phpâ€</strong>;ï¼Œæ¥ä¸‹æ¥ä¾¿å¯åœ¨é¡¹ç›®çš„ä»»ä½•åœ°æ–¹å¼•ç”¨ä¾èµ–åŒ…ä¸­çš„æ¥å£å’Œç±»ã€‚</p><p>é™¤ install å‘½ä»¤ï¼ŒComposer æä¾›äº†è®¸å¤šå…¶ä»–å‘½ä»¤ç®¡ç†ä¾èµ–ã€‚å¸¸ç”¨çš„å‘½ä»¤åœºæ™¯åŒ…æ‹¬ï¼šæŸ¥æ‰¾ä¾èµ–ã€å¼•å…¥ä¾èµ–ã€å®‰è£…ä¾èµ–ã€æ›´æ–°ä¾èµ–ã€‚åˆ†åˆ«å¯¹åº”çš„å‘½ä»¤æ˜¯ï¼š</p><table><thead><tr><th align="center">å‘½ä»¤</th><th align="center">è§£é‡Š</th></tr></thead><tbody><tr><td align="center">composer search</td><td align="center">æ ¹æ®å…³é”®å­—æŸ¥æ‰¾ä¾èµ–åŒ…</td></tr><tr><td align="center">composer request</td><td align="center">å¼•å…¥ä¾èµ–ï¼Œå£°æ˜é¡¹ç›®æˆ–è€…å…¨å±€( globalï¼Œç”¨æˆ·åå…¨å±€ï¼Œéç³»ç»Ÿå…¨å±€)ä¾èµ–æŸä¸ªåŒ…</td></tr><tr><td align="center">composer install</td><td align="center">å®‰è£… composer.json å£°æ˜çš„ä¾èµ–åŒ…ï¼Œæœ€ç»ˆå®‰è£…çš„ä¾èµ–åŒ…ç‰ˆæœ¬å¯èƒ½å–å†³äºæœ‰æ—  composer.lock æ–‡ä»¶</td></tr><tr><td align="center">composer update</td><td align="center">æ›´æ–°ä¾èµ–åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œç›¸å½“äºåˆ é™¤ composer.lock æ–‡ä»¶åæ‰§è¡Œ composer install</td></tr><tr><td align="center">composer info</td><td align="center">æŸ¥çœ‹å®‰è£…çš„ä¾èµ–åŒ…ä¿¡æ¯ï¼Œä¸ composer show ç­‰ä»·</td></tr><tr><td align="center">composer dumpautoload</td><td align="center">åŠ  -o é€‰é¡¹å¯å¯¼å‡ºä¼˜åŒ–çš„åŠ è½½å™¨</td></tr><tr><td align="center">composer why(-not)</td><td align="center">æŸ¥çœ‹ï¼ˆä¸ï¼‰å®‰è£…æŸä¸ªåŒ…çš„åŸå› </td></tr></tbody></table><h3 id="Composer-åŠ é€Ÿ"><a href="#Composer-åŠ é€Ÿ" class="headerlink" title="Composer åŠ é€Ÿ"></a>Composer åŠ é€Ÿ</h3><p>æœ‰çš„æ—¶å€™ä¼šå› ä¸ºå„ç§åŸå› ï¼Œæˆ‘ä»¬ä½¿ç”¨ Composer çš„æ—¶å€™å›æ„Ÿè§‰å®‰è£…çš„ç‰¹åˆ«æ…¢ï¼Œç½‘ç»œé—®é¢˜æ˜¯ä¸€ä¸ªæ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›å›½å†…çš„é•œåƒæ¥è§£å†³ç½‘ç»œçš„é—®é¢˜ï¼Œä½†æ˜¯ä¾ç„¶æœ‰äº›æ…¢ï¼Œå› ä¸º Composer æ˜¯å•è¿›ç¨‹æ–¹å¼ä¸‹è½½çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ Composer å®‰è£…å®Œä¸€ä¸ªä¾èµ–ï¼Œæ‰å›å»ä¸‹è½½å¹¶å®‰è£…å¦ä¸€ä¸ªä¾èµ–ï¼Œä»»ä½•ç½‘ç»œé—®é¢˜éƒ½ä¼šè®©è¿™ä¸ªè¿›ç¨‹å¡ä¸»ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•è®© Composer å¹¶å‘ä¸‹è½½æ‰€æœ‰ä¾èµ–å‘¢ï¼Œè¿™æ ·æ•´ä½“å®‰è£…é€Ÿåº¦ä¸å°±ä¼šå¿«å¾ˆå¤šå—ï¼Ÿ</p><p><a href="https://github.com/hirak/prestissimo" target="_blank" rel="noopener">hirak/prestissimo</a> å°±æ˜¯åˆ©ç”¨è¿™ä¸ªæ€è·¯æ¥åŠ é€Ÿ Composer çš„ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªåŒ…çš„æè¿° â€”â€”composer parallel install plugin ï¼ˆComposer å¹¶è¡Œå®‰è£…æ’ä»¶ï¼‰ã€‚</p><pre><code>composer global require hirak/prestissimo</code></pre><p>åˆ‡æ¢å›½å†…é˜¿é‡Œäº‘é•œåƒ</p><p><a href="https://developer.aliyun.com/composer" target="_blank" rel="noopener">https://developer.aliyun.com/composer</a></p><pre><code>composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/</code></pre><h3 id="Composer-åŠ è½½æœºåˆ¶"><a href="#Composer-åŠ è½½æœºåˆ¶" class="headerlink" title="Composer åŠ è½½æœºåˆ¶"></a>Composer åŠ è½½æœºåˆ¶</h3><p>ä½¿ç”¨ Composer æœ€å¤§çš„å¥½å¤„æ˜¯åªéœ€æœ€å¼€å§‹ require ä¸€ä¸ª autoload.php æ–‡ä»¶ï¼Œå°±å¯ä»¥ new ä½ æ‰€éœ€è¦çš„ç±»äº†ï¼Œä¸å†éœ€è¦ä¼ ç»Ÿçš„æ–¹å¼ A æ–‡ä»¶å†…å„ç§ include è·³åˆ° B æ–‡ä»¶åˆå„ç§ includeï¼Œéå¸¸å¤´ç–¼ã€‚</p><p>Composer çš„æ ¸å¿ƒå°±æ˜¯äºŒä¸ªå‡½æ•°ï¼šspl_autoload_register ä¸ require_once</p><p>spl_autoload_register â€” æ³¨å†Œç»™å®šçš„å‡½æ•°ä½œä¸º __autoload çš„å®ç°</p><p><strong>è¯´æ˜</strong></p><pre><code>spl_autoload_register ([ callable $autoload_function [, bool $throw = true [, bool $prepend = false ]]] ) : bool</code></pre><p>å°†å‡½æ•°æ³¨å†Œåˆ° SPL __autoload å‡½æ•°é˜Ÿåˆ—ä¸­ã€‚å¦‚æœè¯¥é˜Ÿåˆ—ä¸­çš„å‡½æ•°å°šæœªæ¿€æ´»ï¼Œåˆ™æ¿€æ´»å®ƒä»¬ã€‚</p><p>å¦‚æœåœ¨ä½ çš„ç¨‹åºä¸­å·²ç»å®ç°äº†<a href="https://www.php.net/manual/zh/function.autoload.php" target="_blank" rel="noopener">__autoload()</a> å‡½æ•°ï¼Œå®ƒå¿…é¡»æ˜¾å¼æ³¨å†Œåˆ°<a href="https://www.php.net/manual/zh/function.autoload.php" target="_blank" rel="noopener">__autoload()</a> é˜Ÿåˆ—ä¸­ã€‚å› ä¸º  <strong>spl_autoload_register()</strong> å‡½æ•°ä¼šå°† Zend Engine ä¸­çš„<a href="https://www.php.net/manual/zh/function.autoload.php" target="_blank" rel="noopener">__autoload()</a> å‡½æ•°å–ä»£ä¸º <a href="https://www.php.net/manual/zh/function.spl-autoload.php" target="_blank" rel="noopener">spl_autoload()</a> æˆ–<a href="https://www.php.net/manual/zh/function.spl-autoload-call.php" target="_blank" rel="noopener">spl_autoload_call()</a>ã€‚</p><p>å¦‚æœéœ€è¦å¤šæ¡ autoload å‡½æ•°ï¼Œ<strong>spl_autoload_register()</strong> æ»¡è¶³äº†æ­¤ç±»éœ€æ±‚ã€‚ å®ƒå®é™…ä¸Šåˆ›å»ºäº† autoload å‡½æ•°çš„é˜Ÿåˆ—ï¼ŒæŒ‰å®šä¹‰æ—¶çš„é¡ºåºé€ä¸ªæ‰§è¡Œã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ <a href="https://www.php.net/manual/zh/function.autoload.php" target="_blank" rel="noopener">__autoload()</a> åªå¯ä»¥å®šä¹‰ä¸€æ¬¡ã€‚</p><p>æ³¨æ„ï¼š__autoload() å‡½æ•°åœ¨ PHP7.2 ä»¥åå°±ä¸æ”¯æŒäº†ã€‚ç»¼åˆèµ·æ¥è¯¥ç”¨é‚£ä¸ªæ˜ç™½æ¥å§ã€‚</p><p>ä¸€ä¸ªç®€å•çš„è‡ªåŠ¨åŠ è½½ï¼š</p><pre><code>// loadclasså‡½æ•°ä¸å…·å¤‡è‡ªåŠ¨åŠ è½½ç±»çš„åŠŸèƒ½function loadclass($classname){    $filename = &quot;./class/&quot;.$classname.&quot;.class.php&quot;;    if(is_file($filename)){        include $filename;    }}// spl_autoload_register()å‡½æ•°è®©è¿™ä¸ª loadclass å…·å¤‡äº†è‡ªåŠ¨åŠ è½½ç±»çš„åŠŸèƒ½spl_autoload_register(&quot;loadclass&quot;);</code></pre><p>ä¸ä½¿ç”¨ Composer çš„ä»£ç æ‰§è¡Œä¼šæ¯”ä½¿ç”¨ Composer çš„ä»£ç æ‰§è¡Œæ›´å¿«ï¼ŒComposer æ˜¯è‡ªåŠ¨åŠ è½½ï¼Œå°½ç®¡æ˜¯ä¸ç”¨çš„åº“ã€‚è¿™ä¸ªæ•ˆç‡æ¯•ç«Ÿå¤§æ¦‚æ˜¯åœ¨å‡ åmsçš„å·®è·ã€‚æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–è‡ªåŠ¨åŠ è½½ï¼Œåšä¸€ä¸ªé¡¹ç›® Composer ä¼˜åŒ–æé€Ÿã€‚</p><pre class="line-numbers language-php"><code class="language-php">composer dumpautoload <span class="token operator">-</span>o<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ­¤å‘½ä»¤ä¸æ­¢é’ˆå¯¹äº Laravel ç¨‹åºï¼Œé€‚ç”¨äºæ‰€æœ‰ä½¿ç”¨ <code>composer</code> æ¥æ„å»ºçš„ç¨‹åºã€‚æ­¤å‘½ä»¤ä¼šæŠŠ <code>PSR-0</code> å’Œ <code>PSR-4</code> è½¬æ¢ä¸ºä¸€ä¸ªç±»æ˜ å°„è¡¨ï¼Œæ¥æé«˜ç±»çš„åŠ è½½é€Ÿåº¦ã€‚</p><p>å½“ç„¶ä½œä¸º è‰ºæœ¯å®¶çš„æ¡†æ¶ï¼ŒLaravel ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº† Composer çš„ä¼˜åŒ–å¤„ç†</p><pre class="line-numbers language-php"><code class="language-php"><span class="token shell-comment comment"># å®˜æ–¹è§£é‡Šï¼šç¼“å­˜æ¡†æ¶å¼•å¯¼æ–‡ä»¶</span>php artisan optimize<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>å‚è€ƒåœ°å€</p><p><a href="https://www.cnblogs.com/tinywan/p/8855236.html" target="_blank" rel="noopener">https://www.cnblogs.com/tinywan/p/8855236.html</a></p><p><a href="https://learnku.com/courses/laravel-package/2019/hirakprestissimo/1695" target="_blank" rel="noopener">https://learnku.com/courses/laravel-package/2019/hirakprestissimo/1695</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Composer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Composer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL-å­˜å‚¨å¼•æ“</title>
      <link href="/2019/08/21/MySQL-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/"/>
      <url>/2019/08/21/MySQL-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><blockquote><p>MySQL å½“ä¸­æœ€æœ€å¸¸ç”¨çš„å­˜å‚¨å¼•æ“- Myisam å’Œ Innodbï¼Œä»–ä»¬äºŒå…„å¼Ÿæ˜¯ MySQL å½“ä¸­æœ€æœ€å¸¸ç”¨çš„äºŒä¸ªå­˜å‚¨å¼•æ“äº†ã€‚å½“ç„¶ MySQL çš„å­˜å‚¨å¼•æ“ä¸æ­¢ä»–ä»¬äºŒå…„å¼Ÿè¿˜æœ‰åˆ«çš„ä¸€äº›å­˜å‚¨å¼•æ“ï¼Œæœ¬ç€<strong>æ—¢å­˜åœ¨å³åˆç†çš„åŸåˆ™</strong>ï¼Œæˆ‘ä»¬ä¸èƒ½å•æ–¹é¢çš„å»è¯„ä»·è°å¥½è°ä¸å¥½ï¼Œåªèƒ½è¯´ä»–ä»¬åœ¨ä¸åŒçš„åœºæ™¯å½“ä¸­å‘æŒ¥çš„åŠŸåŠ›ä¸åŒã€‚é‚£ä»€ä¹ˆæ˜¯å­˜å‚¨å¼•æ“å‘¢ï¼Ÿ</p></blockquote><p>é¦–å…ˆæˆ‘ä»¬è¦æ™“å¾— MySQL çš„æ•°æ®å±äºæŒä¹…åŒ–å­˜å‚¨çš„ï¼Œè¡¨é‡Œé¢çš„æ•°æ®æœ€ç»ˆéƒ½æ˜¯å­˜å‚¨åœ¨ç£ç›˜å½“ä¸­çš„ï¼Œå…·ä½“å¦‚ä½•å­˜å‚¨çš„ï¼Œè¿™ä¸ªæ— éœ€æˆ‘ä»¬å…³å¿ƒï¼Œä½†æ˜¯è¦æ¸…æ¥šå­˜å‚¨çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼›å¥½æ¯”ä¸€éƒ¨ç”µå½±ï¼Œåœ¨ç¡¬ç›˜ä¸Šå¯ä»¥æœ‰ä¸åŒçš„å­˜å‚¨æ ¼å¼ï¼ˆæ¯”å¦‚ï¼šMP4ã€wmvã€aviã€rmvbã€flvï¼‰ï¼Œå®ƒä»¬æ‰€å çš„ç©ºé—´ä¸æ¸…æ™°ç¨‹åº¦éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>å­˜å‚¨å¼•æ“è¯´ç™½äº†å°±æ˜¯å¦‚ä½•å­˜å‚¨æ•°æ®ã€å¦‚ä½•ä¸ºå­˜å‚¨çš„æ•°æ®å»ºç«‹ç´¢å¼•ã€å¦‚ä½•æ›´æ–°æŸ¥è¯¢æ•°æ®ã€å¦‚ä½•åˆ é™¤æ•°æ®ç­‰ç­‰æŠ€æœ¯çš„å®ç°æ–¹æ³•ã€‚å¼•æ“ä¸åŒï¼Œç»„ç»‡å¤„ç†æ•°æ®çš„æ–¹å¼å°±ä¸åŒï¼Œåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­æ•°æ®çš„å­˜å‚¨æ˜¯ä»¥è¡¨çš„å½¢å¼å­˜å‚¨çš„ï¼Œæ‰€ä»¥å­˜å‚¨å¼•æ“ä¹Ÿå¯ä»¥ç§°ä¸ºè¡¨ç±»å‹ï¼ˆå³å­˜å‚¨å’Œæ“ä½œæ­¤è¡¨çš„ç±»å‹ï¼‰æ³¨æ„ï¼šè¡¨æœ‰å¼•æ“ï¼Œè€Œåº“æ˜¯æ²¡æœ‰å¼•æ“ã€‚</p><blockquote><p>åœ¨ Oracle å’Œ SQL Server ç­‰æ•°æ®åº“ä¸­åªæœ‰ä¸€ç§å­˜å‚¨å¼•æ“ï¼Œæ‰€æœ‰æ•°æ®å­˜å‚¨ç®¡ç†æœºåˆ¶éƒ½æ˜¯ä¸€æ ·çš„è€Œ MySQL æ•°æ®åº“æä¾›äº†å¤šç§å­˜å‚¨å¼•æ“ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚ä¸ºæ•°æ®è¡¨é€‰æ‹©ä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ç¼–å†™è‡ªå·±çš„å­˜å‚¨å¼•æ“ã€‚</p></blockquote><p><img src="http://ww1.sinaimg.cn/large/e73160eegy1g6ay8oo1rdj21fo0u0gsd.jpg" alt></p><h2 id="Myisam"><a href="#Myisam" class="headerlink" title="Myisam"></a>Myisam</h2><blockquote><p>5.5ä¹‹å‰çš„ç‰ˆæœ¬é»˜è®¤çš„å­˜å‚¨å¼•æ“å°±æ˜¯ Myisam  ï¼Œ Myisam åº”ç”¨æ˜¯ä»¥è¯»æ“ä½œå’Œæ’å…¥æ“ä½œä¸ºä¸»ï¼Œåªæœ‰å¾ˆå°‘çš„æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œå¹¶ä¸”å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§ã€å¹¶å‘æ€§è¦æ±‚ä¸æ˜¯å¾ˆé«˜ã€‚åªè€ƒè™‘æ€§èƒ½æ–¹é¢ä¸Šæ¥è¯´ Innodb å®Œå…¨æ¯”ä¸ä¸Š Myisam ã€‚</p><p>ç‰¹ç‚¹ï¼šä¸æ”¯æŒäº‹åŠ¡ï¼Œä¸æ”¯æŒå¤–é”®ï¼Œå¹¶éå¤„ç†ç¨å·®ï¼Œæ”¯æŒå‹ç¼©æœºåˆ¶ï¼Œæ”¯æŒè¡¨é”ã€‚</p></blockquote><h3 id="å­˜å‚¨æ–¹å¼"><a href="#å­˜å‚¨æ–¹å¼" class="headerlink" title="å­˜å‚¨æ–¹å¼"></a>å­˜å‚¨æ–¹å¼</h3><p>Myisam è¡¨æ˜¯ç‹¬ç«‹äºæ“ä½œç³»ç»Ÿçš„ï¼Œè¿™è¯´æ˜å¯ä»¥è½»æ¾åœ°å°†å…¶ä» Windows æœåŠ¡å™¨ç§»æ¤åˆ° Linux æœåŠ¡å™¨ï¼›æ¯å½“æˆ‘ä»¬å»ºç«‹ä¸€ä¸ª Myisam å¼•æ“çš„è¡¨æ—¶ï¼Œå°±ä¼šåœ¨æœ¬åœ°ç£ç›˜ä¸Šå»ºç«‹ä¸‰ä¸ªæ–‡ä»¶ï¼Œè¯¦è§</p><ul><li>*.FRMï¼Œå­˜å‚¨è¡¨ç»“æ„ï¼›</li><li>*.MYDï¼Œå­˜å‚¨æ•°æ®ï¼›</li><li>*.MYIï¼Œå­˜å‚¨ç´¢å¼•ã€‚</li></ul><p><img src="http://ww1.sinaimg.cn/large/e73160eegy1g69qbeiumtj20zw0lljw9.jpg" alt></p><p>â‘  é™æ€ MyISAM ï¼š<br>å¦‚æœæ•°æ®è¡¨ä¸­çš„å„æ•°æ®åˆ—çš„é•¿åº¦éƒ½æ˜¯é¢„å…ˆå›ºå®šå¥½çš„ï¼Œå³å®šé•¿å­—æ®µ char int float double ï¼ŒæœåŠ¡å™¨å°†è‡ªåŠ¨é€‰æ‹©è¿™ç§è¡¨ç±»å‹ã€‚å› ä¸ºæ•°æ®è¡¨ä¸­æ¯ä¸€æ¡è®°å½•æ‰€å ç”¨çš„ç©ºé—´éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¿™ç§è¡¨å­˜å–å’Œæ›´æ–°çš„æ•ˆç‡éå¸¸é«˜ï¼Œå¹¶ä¸”å®¹æ˜“ç¼“å­˜ã€‚å½“æ•°æ®å—æŸæ—¶ï¼Œæ¢å¤å·¥ä½œä¹Ÿæ¯”è¾ƒå®¹æ˜“åš</p><p>ç¼ºç‚¹æ˜¯å ç”¨çš„ç©ºé—´é€šå¸¸æ¯”åŠ¨æ€è¡¨å¤šã€‚é™æ€è¡¨åœ¨æ•°æ®å­˜å‚¨æ—¶ä¼šæ ¹æ®åˆ—å®šä¹‰çš„å®½åº¦è¡¥è¶³ç©ºæ ¼ï¼Œä½†åœ¨è®¿é—®çš„æ—¶å€™å¹¶ä¸ä¼šå¾—åˆ°è¿™äº›ç©ºæ ¼ï¼Œè¿™äº›ç©ºæ ¼åœ¨è¿”å›ç»™åº”ç”¨ä¹‹å‰å°±å·²ç»å»æ‰äº†ã€‚å¦‚æœä½ éœ€è¦è¿”å›å­—æ®µåçš„ç©ºæ ¼ï¼Œè¿™ç§è¡¨ç±»å‹å°±ä¸å¯å–</p><p>â‘¡ åŠ¨æ€ MyISAM ï¼š<br>å¦‚æœæ•°æ®è¡¨ä¸­å‡ºç° varcharã€text æˆ– blob decimal  ç­‰å˜é•¿å­—æ®µæ—¶ï¼ŒæœåŠ¡å™¨å°†è‡ªåŠ¨é€‰æ‹©è¿™ç§è¡¨ç±»å‹ã€‚ç›¸å¯¹äºé™æ€ MyISAMï¼Œè¿™ç§è¡¨å­˜å‚¨æ‰€å çš„ç©ºé—´æ¯”è¾ƒå°ï¼Œä½†ç”±äºæ¯æ¡è®°å½•çš„é•¿åº¦ä¸ä¸€ï¼Œæ‰€ä»¥å¤šæ¬¡ä¿®æ”¹æ•°æ®åï¼Œæ•°æ®è¡¨ä¸­çš„æ•°æ®å°±å¯èƒ½ç¦»æ•£çš„å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè¿›è€Œå¯¼è‡´æ‰§è¡Œæ•ˆç‡ä¸‹é™ã€‚åŒæ—¶ï¼Œå†…å­˜ä¸­ä¹Ÿå¯èƒ½ä¼šå‡ºç°å¾ˆå¤šç¢ç‰‡ã€‚å› æ­¤ï¼Œè¿™ç§ç±»å‹çš„è¡¨è¦ç»å¸¸ç”¨ optimize table å‘½ä»¤æˆ–ä¼˜åŒ–å·¥å…·æ¥è¿›è¡Œç¢ç‰‡æ•´ç†ï¼Œå¹¶ä¸”å‡ºç°æ•…éšœçš„æ—¶å€™æ¢å¤ç›¸å¯¹æ¯”è¾ƒå›°éš¾</p><p>â‘¢ å‹ç¼© MyISAM ï¼š<br>ä»¥ä¸Šè¯´åˆ°çš„ä¸¤ç§ç±»å‹çš„è¡¨éƒ½å¯ä»¥ç”¨ myisamchk å·¥å…·å‹ç¼©ã€‚è¿™ç§ç±»å‹çš„è¡¨è¿›ä¸€æ­¥å‡å°äº†å ç”¨çš„å­˜å‚¨ç©ºé—´ï¼Œå› ä¸ºæ¯æ¡è®°å½•éƒ½æ˜¯è¢«å•ç‹¬å‹ç¼©çš„ï¼Œæ‰€ä»¥åªæœ‰éå¸¸å°çš„è®¿é—®å¼€æ”¯ä½†æ˜¯è¿™ç§è¡¨å‹ç¼©ä¹‹åä¸èƒ½å†è¢«ä¿®æ”¹ã€‚å¦å¤–ï¼Œå› ä¸ºæ˜¯å‹ç¼©æ•°æ®ï¼Œæ‰€ä»¥è¿™ç§è¡¨åœ¨è¯»å–çš„æ—¶å€™è¦å…ˆè¿›è¡Œè§£å‹ç¼©</p><h3 id="æ’åˆ—é¡ºåº"><a href="#æ’åˆ—é¡ºåº" class="headerlink" title="æ’åˆ—é¡ºåº"></a>æ’åˆ—é¡ºåº</h3><blockquote><p>Myisam  å­˜å‚¨æ•°æ®æ—¶ä¸ä¼šæŒ‰ç…§ä¸»é”® ID å€¼è¿›è¡Œæ’åºå­˜å‚¨ã€‚è¯¥ç‰¹ç‚¹å¯¼è‡´ Myisam å†™å…¥ç‰¹åˆ«çš„å¿«ã€‚</p></blockquote><h3 id="å¹¶å‘å¤„ç†"><a href="#å¹¶å‘å¤„ç†" class="headerlink" title="å¹¶å‘å¤„ç†"></a>å¹¶å‘å¤„ç†</h3><blockquote><p>Myisam å¦‚æœè¿›è¡Œå¹¶å‘å†™å…¥æ—¶ï¼ŒMySQL ä¼šè‡ªåŠ¨åŠ é”ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œè€Œ Myisam åŠ çš„æ˜¯è¡¨é”ã€‚è¡¨é”ä¼šå½±å“åˆ°æ•´ä¸ªæ•°æ®è¡¨çš„æ“ä½œã€‚å¹¶å‘æ€§ç¨å¾®é€Šè‰²ã€‚</p></blockquote><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><p>MyISAM è¡¨æ— æ³•å¤„ç†äº‹åŠ¡ï¼Œè¿™å°±æ„å‘³ç€æœ‰äº‹åŠ¡å¤„ç†éœ€æ±‚çš„è¡¨ï¼Œä¸èƒ½ä½¿ç”¨ MyISAM å­˜å‚¨å¼•æ“ã€‚<br>MyISAM å­˜å‚¨å¼•æ“ç‰¹åˆ«é€‚åˆåœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä½¿ç”¨ï¼š</p><ul><li>é€‰æ‹©å¯†é›†å‹çš„è¡¨ï¼šMyISAM å­˜å‚¨å¼•æ“åœ¨ç­›é€‰å¤§é‡æ•°æ®æ—¶éå¸¸è¿…é€Ÿï¼Œè¿™æ˜¯å®ƒæœ€çªå‡ºçš„ä¼˜ç‚¹ã€‚</li><li>æ’å…¥å¯†é›†å‹çš„è¡¨ï¼šMyISAM çš„å¹¶å‘æ’å…¥ç‰¹æ€§å…è®¸åŒæ—¶é€‰æ‹©å’Œæ’å…¥æ•°æ®ã€‚ä¾‹å¦‚ï¼šMyISAM å­˜å‚¨å¼•æ“å¾ˆé€‚åˆç®¡ç†é‚®ä»¶æˆ– Web æœåŠ¡å™¨æ—¥å¿—æ•°æ®ã€‚</li><li>å¯¹äº‹åŠ¡å®Œæ•´æ€§æ²¡æœ‰è¦æ±‚æˆ–è€…ä»¥ SELECTã€INSERT ä¸ºä¸»çš„åº”ç”¨åŸºæœ¬éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¼•æ“æ¥åˆ›å»ºè¡¨ã€‚</li></ul><h2 id="Innodb"><a href="#Innodb" class="headerlink" title="Innodb"></a>Innodb</h2><blockquote><p>åœ¨ MySQL 5.5 ä¹‹åå®˜æ–¹é»˜è®¤çš„å­˜å‚¨å¼•æ“å°±æ˜¯ Innodbï¼Œ Innodb æä¾›äº‹åŠ¡å’Œå´©æºƒä¿®å¤èƒ½åŠ›å’Œæ”¯æŒå¤–é”®ã€‚ Innodb æ”¯æŒè¡Œé”è¿˜æ”¯æŒè¡¨é”ã€‚Innodb ä¸ä¿æŒè¡¨çš„å…·ä½“è¡Œæ•°ï¼Œä»–è¦æ‰«æå…¨è¡¨æ¥è®¡ç®—è¡Œæ•°ï¼Œä½†æ˜¯ä½¿ç”¨äº† where ä¹‹åå‘¢å°±è·Ÿ Myisam ä¸€æ ·ã€‚Innodb æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒè·¨å¹³å°ã€‚è¡¨ä¸»é”®å¦‚æœæ²¡æœ‰è®¾å®šä¸»é”®æˆ–è€…éç©ºå”¯ä¸€ç´¢å¼•ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª 6 å­—èŠ‚çš„ä¸»é”®(ç”¨æˆ·ä¸å¯è§)ï¼Œæ•°æ®æ˜¯ä¸»ç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œé™„åŠ ç´¢å¼•ä¿å­˜çš„æ˜¯ä¸»ç´¢å¼•çš„å€¼ã€‚åªè¦ä¸æ˜¯æ‰¹é‡æ’å…¥ä¸æŸ¥è¯¢å…¶å®ä¸ Myisam æ€§èƒ½ä¸Šå·®è·ä¸æ˜¯å¾ˆå¤§ã€‚è€Œä¸” Innodb å®‰å…¨æ€§ä¸Šæ›´ä¼˜æ”¯æŒå¾ˆå¤šé«˜çº§åŠŸèƒ½ã€‚</p><p>ç‰¹ç‚¹ï¼šæ”¯æŒäº‹åŠ¡ï¼Œæ”¯æŒè¡Œé”ï¼Œæ”¯æŒå¤–é”®</p></blockquote><h3 id="å­˜å‚¨æ–¹å¼-1"><a href="#å­˜å‚¨æ–¹å¼-1" class="headerlink" title="å­˜å‚¨æ–¹å¼"></a>å­˜å‚¨æ–¹å¼</h3><p> Innodb åœ¨ 5.6 ç‰ˆæœ¬ä¹‹å‰ä½¿ç”¨çš„å…±äº«å­˜å‚¨ï¼Œæ‰€æœ‰çš„è¡¨çš„æ•°æ®å’Œç´¢å¼•éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶å½“ä¸­ï¼Œæ–‡ä»¶åä¸º Inbdata1 ã€‚è¿™æ ·çš„å…±äº«å­˜å‚¨çš„ç¼ºç‚¹å°±æ˜¯æ‰€æœ‰è¡¨å­˜å‚¨çš„ç´¢å¼•å’Œæ•°æ®éƒ½å­˜æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å½“ä¸­ï¼Œè¡¨åˆ é™¤äº†ï¼Œç©ºé—´è¿˜æ²¡æœ‰åŠæ—¶é‡Šæ”¾æ‰ï¼Œç©ºé—´å°ºå¯¸è¶Šå¤§ï¼Œå¸¦æ¥çš„å½±å“å°±æ˜¯æŸ¥è¯¢å’Œæ·»åŠ é€Ÿåº¦å˜æ…¢ï¼Œå› ä¸ºéƒ½å­˜åœ¨æ”¾ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚å¦å¤–å¦‚æœæ­¤æ–‡ä»¶æœ‰æ‰€æŸåï¼Œåˆ™ MySQL ä¸­çš„æ‰€æœ‰çš„åº“æ•°æ®éƒ½ä¼šä¸å­˜åœ¨äº†ã€‚åœ¨ 5.6 ä¹‹åé‡‡ç”¨çš„ç‹¬ç«‹ç©ºé—´å­˜å‚¨ï¼Œæ¯ä¸ªè¡¨çš„éƒ½æ˜¯ç‹¬ç«‹çš„å­˜åœ¨ã€‚ç‹¬ç«‹å­˜å‚¨çš„å¥½å¤„æ¯ä¸ª Innodb å¼•æ“å­˜å‚¨çš„ç´¢å¼•ä¸æ•°æ®éƒ½å­˜åœ¨æ¯ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œå› ä¸ºæ¯ä¸ªè¡¨éƒ½æ˜¯ç‹¬ç«‹å­˜å‚¨ï¼Œæ’å…¥è¯­æŸ¥è¯¢æ•°æ®çš„å‹åŠ›å°äºå…±äº«å­˜å‚¨ï¼Œä¸”å¦‚æœä¸å°å¿ƒåˆ é™¤äº†å­˜å‚¨æ–‡ä»¶é‚£ä¹ˆé¡¶å¤šä¹Ÿå°±æ˜¯ä¸€ä¸ªè¡¨ä¼šå—åˆ°å½±å“ã€‚æ³¨æ„ï¼š<strong>åœ¨å¤‡ä»½æ•°æ®çš„æ—¶å€™ä¸èƒ½ç›´æ¥å¤åˆ¶å¯èƒ½ä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œå¤‡ä»½æ•°æ®çš„æ—¶å€™åº”å½“ mysqldump æ³¨æ„å¦‚æœæ•°æ®é‡å¾ˆå¤§çš„è¯å¯¼å‡ºçœŸçš„å¤ªè´¹åŠ²äº†</strong></p><p><img src="http://ww1.sinaimg.cn/large/e73160eegy1g6b16cawn8j21fo0u0qf3.jpg" alt></p><h3 id="æ’åºé¡ºåº"><a href="#æ’åºé¡ºåº" class="headerlink" title="æ’åºé¡ºåº"></a>æ’åºé¡ºåº</h3><blockquote><p> Innodb <strong>æ•°æ®çš„å†™å…¥é¡ºåºä¸æ•°æ®å­˜å‚¨é¡ºåºä¸ä¸€è‡´</strong>ï¼ŒInnodb ä¼šæŠŠæ•°æ®æŒ‰<strong>ä¸»é”®é¡ºåºæ’åˆ—</strong>ï¼Œé€Ÿåº¦ä¼šæ¯”Myisam æ…¢ä¸€äº›ã€‚ Myisam æ˜¯æ•°æ®æ€ä¹ˆå†™å…¥é‚£ä¹ˆæ•°æ®å°±æ€ä¹ˆå­˜å‚¨æ’åˆ—ã€‚</p></blockquote><h3 id="å¹¶å‘å¤„ç†-1"><a href="#å¹¶å‘å¤„ç†-1" class="headerlink" title="å¹¶å‘å¤„ç†"></a>å¹¶å‘å¤„ç†</h3><blockquote><p> Innodb æ“…é•¿å¤„ç†å¹¶å‘ï¼Œ<strong>è¡Œçº§é”å®š</strong>ï¼Œå®ç°äº†è¡Œçº§é”å®šï¼Œåœ¨ä¸€å®šæƒ…å†µä¸‹å¯ä»¥é€‰æ‹©è¡Œçº§é”å®šæ¥æå‡å¹¶å‘æ€§ï¼Œä¹Ÿ<strong>æ”¯æŒè¡¨çº§é”å®š</strong>ï¼Œæ ¹æ®æ“ä½œé€‰æ‹©ï¼Œ<strong>åªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼ŒInnoDB æ‰ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ï¼ŒInnoDB å°†ä½¿ç”¨è¡¨é”ï¼</strong></p></blockquote><h3 id="ä½¿ç”¨åœºæ™¯-1"><a href="#ä½¿ç”¨åœºæ™¯-1" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><p>æ›´æ–°å¯†é›†çš„è¡¨ï¼šInnoDB å­˜å‚¨å¼•æ“ç‰¹åˆ«é€‚åˆå¤„ç†å¤šé‡å¹¶å‘çš„æ›´æ–°è¯·æ±‚</p><p>äº‹åŠ¡ï¼šInnoDB å­˜å‚¨å¼•æ“æ˜¯æ”¯æŒäº‹åŠ¡çš„æ ‡å‡† MySQL å­˜å‚¨å¼•æ“</p><p>è‡ªåŠ¨ç¾éš¾æ¢å¤ï¼šä¸å…¶å®ƒå­˜å‚¨å¼•æ“ä¸åŒï¼ŒInnoDB è¡¨èƒ½å¤Ÿè‡ªåŠ¨ä»ç¾éš¾ä¸­æ¢å¤</p><p>å¤–é”®çº¦æŸï¼šMySQL æ”¯æŒå¤–é”®çš„å­˜å‚¨å¼•æ“åªæœ‰ InnoDB</p><h2 id="é”"><a href="#é”" class="headerlink" title="é”"></a>é”</h2><blockquote><p>é”æ˜¯è®¡ç®—æœºåè°ƒå¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹å¹¶å‘è®¿é—®æŸä¸€èµ„æºçš„æœºåˆ¶ã€‚é”ä¿è¯æ•°æ®å¹¶å‘è®¿é—®çš„ä¸€è‡´æ€§ã€æœ‰æ•ˆæ€§ï¼›é”å†²çªä¹Ÿæ˜¯å½±å“æ•°æ®åº“å¹¶å‘è®¿é—®æ€§èƒ½çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚é”æ˜¯ MySQL åœ¨æœåŠ¡å™¨å±‚å’Œå­˜å‚¨å¼•æ“å±‚çš„çš„å¹¶å‘æ§åˆ¶ã€‚</p><p>åŠ é”æ˜¯æ¶ˆè€—èµ„æºçš„ï¼Œé”çš„å„ç§æ“ä½œï¼ŒåŒ…æ‹¬è·å¾—é”ã€æ£€æµ‹é”æ˜¯å¦å·²è§£é™¤ã€é‡Šæ”¾é”ç­‰ã€‚</p></blockquote><p>é”åªæ”¯æŒä¸€ç§ç‰¹æ€§ï¼Œè€Œäº‹åŠ¡æ”¯æŒå››ä¸­ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œäº‹åŠ¡æ˜¯å¿…é¡»æ»¡è¶³4ä¸ªæ¡ä»¶ï¼ˆACIDï¼‰ï¼šï¼šåŸå­æ€§ï¼ˆAtomicityï¼Œæˆ–ç§°ä¸å¯åˆ†å‰²æ€§ï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼Œåˆç§°ç‹¬ç«‹æ€§ï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚</p><pre><code>åŸå­æ€§ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚ä¸€è‡´æ€§ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚éš”ç¦»æ€§ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚æŒä¹…æ€§ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</code></pre><h3 id="å…±äº«é”ä¸æ’ä»–é”"><a href="#å…±äº«é”ä¸æ’ä»–é”" class="headerlink" title="å…±äº«é”ä¸æ’ä»–é”"></a>å…±äº«é”ä¸æ’ä»–é”</h3><p>å…±äº«é”(è¯»é”)ï¼šå…¶ä»–äº‹åŠ¡å¯ä»¥è¯»ï¼Œä½†æ˜¯ä¸èƒ½å†™ã€‚</p><p>æ’ä»–é”(å†™é”)ï¼šå…¶ä»–äº‹åŠ¡ä¸å¯ä»¥è¯»ï¼Œä¹Ÿä¸å¯ä»¥å†™ã€‚</p><h3 id="é¢—ç²’é”"><a href="#é¢—ç²’é”" class="headerlink" title="é¢—ç²’é”"></a>é¢—ç²’é”</h3><p>Mysql ä¸åŒçš„å­˜å‚¨å¼•æ“æ”¯æŒä¸åŒçš„é”æœºåˆ¶ï¼Œæ‰€æœ‰çš„å­˜å‚¨å¼•æ“éƒ½ä»¥è‡ªå·±çš„æ–¹å¼æ˜¾ç¤ºäº†é”æœºåˆ¶ï¼ŒæœåŠ¡å™¨å±‚å®Œå…¨ä¸äº†è§£å­˜å‚¨å¼•æ“ä¸­çš„é”å®ç°ï¼š</p><ul><li>MyISAM å’Œ MEMORY å­˜å‚¨å¼•æ“é‡‡ç”¨çš„æ˜¯è¡¨çº§é”ï¼ˆtable-level lockingï¼‰</li><li>BDB å­˜å‚¨å¼•æ“é‡‡ç”¨çš„æ˜¯é¡µé¢é”ï¼ˆpage-level lockingï¼‰ï¼Œä½†ä¹Ÿæ”¯æŒè¡¨çº§é”</li><li>InnoDB å­˜å‚¨å¼•æ“æ—¢æ”¯æŒè¡Œçº§é”ï¼ˆrow-level lockingï¼‰ï¼Œä¹Ÿæ”¯æŒè¡¨çº§é”ï¼Œä½†é»˜è®¤æƒ…å†µä¸‹æ˜¯é‡‡ç”¨è¡Œçº§é”ã€‚</li></ul><table><thead><tr><th align="center">é”</th><th align="center">åŠ é”æ•ˆç‡</th><th align="center">æ˜¯å¦ä¼šæ­»é”</th><th align="center">é¢—ç²’</th><th align="center">å†²çª</th><th align="center">å¹¶å‘</th></tr></thead><tbody><tr><td align="center">è¡¨çº§é”</td><td align="center">å¼€é”€å°ï¼ŒåŠ é”å¿«</td><td align="center">ä¸ä¼šå‡ºç°æ­»é”</td><td align="center">é”å®šç²’åº¦å¤§</td><td align="center">å‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜</td><td align="center">å¹¶å‘åº¦æœ€ä½</td></tr><tr><td align="center">è¡Œçº§é”</td><td align="center">å¼€é”€å¤§ï¼ŒåŠ é”æ…¢</td><td align="center">ä¼šå‡ºç°æ­»é”</td><td align="center">é”å®šé¢—ç²’æœ€å°</td><td align="center">å‘é€é”å†²çªçš„æ¦‚ç‡æœ€ä½</td><td align="center">å¹¶å‘åº¦æœ€é«˜</td></tr><tr><td align="center">é¡µé¢é”</td><td align="center">å¼€é”€å’ŒåŠ é”æ—¶é—´ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´</td><td align="center">ä¼šå‡ºç°æ­»é”</td><td align="center">é”å®šç²’åº¦ç•Œäºè¡¨é”å’Œè¡Œé”ä¹‹é—´</td><td align="center">å‘é€é”å†²çªçš„æ¦‚ç‡ä¸€èˆ¬</td><td align="center">å¹¶å‘åº¦ä¸€èˆ¬</td></tr></tbody></table><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¡¨é”å’Œè¡Œé”éƒ½æ˜¯è‡ªåŠ¨è·å¾—çš„ï¼Œ ä¸éœ€è¦é¢å¤–çš„å‘½ä»¤ã€‚</p><p>ä½†æ˜¯åœ¨æœ‰çš„æƒ…å†µä¸‹ï¼Œ ç”¨æˆ·éœ€è¦æ˜ç¡®åœ°è¿›è¡Œé”è¡¨æˆ–è€…è¿›è¡Œäº‹åŠ¡çš„æ§åˆ¶ï¼Œ ä»¥ä¾¿ç¡®ä¿æ•´ä¸ªäº‹åŠ¡çš„å®Œæ•´æ€§ï¼Œè¿™æ ·å°±éœ€è¦ä½¿ç”¨äº‹åŠ¡æ§åˆ¶å’Œé”å®šè¯­å¥æ¥å®Œæˆã€‚</p><h3 id="ä¸åŒé¢—ç²’é”çš„æ¯”è¾ƒ"><a href="#ä¸åŒé¢—ç²’é”çš„æ¯”è¾ƒ" class="headerlink" title="ä¸åŒé¢—ç²’é”çš„æ¯”è¾ƒ"></a>ä¸åŒé¢—ç²’é”çš„æ¯”è¾ƒ</h3><ul><li>è¡¨é”<ul><li>è¿™äº›å­˜å‚¨å¼•æ“é€šè¿‡æ€»æ˜¯ä¸€æ¬¡æ€§åŒæ—¶è·å–æ‰€æœ‰éœ€è¦çš„é”ä»¥åŠæ€»æ˜¯æŒ‰ç›¸åŒçš„é¡ºåºè·å–è¡¨é”æ¥é¿å…æ­»é”</li><li>è¡¨çº§é”æ›´é€‚åˆäºä»¥æŸ¥è¯¢ä¸ºä¸»ï¼Œå¹¶å‘ç”¨æˆ·å°‘ï¼Œåªæœ‰å°‘é‡æŒ‰ç´¢å¼•æ¡ä»¶æ›´æ–°æ•°æ®çš„åº”ç”¨ï¼Œå¦‚ Web åº”ç”¨</li></ul></li><li>è¡Œé”<ul><li>æœ€å¤§ç¨‹åº¦çš„æ”¯æŒå¹¶å‘ï¼ŒåŒæ—¶ä¹Ÿå¸¦æ¥äº†æœ€å¤§çš„é”å¼€é”€ã€‚</li><li>åœ¨ InnoDB ä¸­ï¼Œé™¤å•ä¸ª SQL ç»„æˆçš„äº‹åŠ¡å¤–ï¼Œé”æ˜¯é€æ­¥è·å¾—çš„ï¼Œè¿™å°±å†³å®šäº†åœ¨ InnoDB ä¸­å‘ç”Ÿæ­»é”æ˜¯å¯èƒ½çš„ã€‚</li><li>è¡Œçº§é”åªåœ¨å­˜å‚¨å¼•æ“å±‚å®ç°ï¼Œè€Œ MySQL æœåŠ¡å™¨å±‚æ²¡æœ‰å®ç°ã€‚ è¡Œçº§é”æ›´é€‚åˆäºæœ‰å¤§é‡æŒ‰ç´¢å¼•æ¡ä»¶å¹¶å‘æ›´æ–°å°‘é‡ä¸åŒæ•°æ®ï¼ŒåŒæ—¶åˆæœ‰å¹¶å‘æŸ¥è¯¢çš„åº”ç”¨ï¼Œå¦‚ä¸€äº›åœ¨çº¿äº‹åŠ¡å¤„ç†ï¼ˆOLTPï¼‰ç³»ç»Ÿ</li></ul></li></ul><h3 id="Myisam-è¡¨çº§é”æ¨¡å¼"><a href="#Myisam-è¡¨çº§é”æ¨¡å¼" class="headerlink" title="Myisam è¡¨çº§é”æ¨¡å¼"></a>Myisam è¡¨çº§é”æ¨¡å¼</h3><ul><li>è¡¨å…±äº«è¯»é” ï¼ˆTable Read Lockï¼‰ï¼šä¸ä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€è¡¨çš„è¯»è¯·æ±‚ï¼Œä½†ä¼šé˜»å¡å¯¹åŒä¸€è¡¨çš„å†™è¯·æ±‚ï¼›</li><li>è¡¨ç‹¬å å†™é” ï¼ˆTable Write Lockï¼‰ï¼šä¼šé˜»å¡å…¶ä»–ç”¨æˆ·å¯¹åŒä¸€è¡¨çš„è¯»å’Œå†™æ“ä½œï¼›</li></ul><p>Myisam è¡¨çš„è¯»æ“ä½œä¸å†™æ“ä½œä¹‹é—´ï¼Œä»¥åŠå†™æ“ä½œä¹‹é—´æ˜¯ä¸²è”çš„ã€‚<strong>å½“ä¸€ä¸ªçº¿ç¨‹è·å¾—å¯¹ä¸€ä¸ªè¡¨å†™é”åï¼Œåªæœ‰æŒæœ‰é”çš„çº¿ç¨‹å¯ä»¥è¿›è¡Œè¡¨çš„æ›´æ–°æ“ä½œã€‚å…¶ä»–çº¿ç¨‹çš„è¯»ã€å†™éƒ½ä¼šç­‰å¾…ï¼Œç›´åˆ°é”è¢«é‡Šæ”¾ä¸ºæ­¢ã€‚</strong></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå†™é”æ¯”è¯»é”å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚å½“ä¸€ä¸ªé”é‡Šæ”¾çš„æ—¶å€™ï¼Œè¿™ä¸ªé”ä¼šä¼˜å…ˆç»™å†™é”é˜Ÿåˆ—ä¸­ç­‰å€™çš„è·å–é”è¯·æ±‚ï¼Œç„¶åæ‰ä¼šç»™è¯»é”é˜Ÿåˆ—ä¸­ç­‰å€™çš„è·å–é”è¯·æ±‚ã€‚è¿™ä¹Ÿæ­£æ˜¯ Myisam è¡¨ä¸å¤ªé€‚åˆæœ‰å¤§é‡æ›´æ–°æ“ä½œçš„å’ŒæŸ¥è¯¢æ“ä½œåº”ç”¨çš„åŸå› ã€‚å› ä¸ºå¤§é‡çš„æ›´æ–°æ“ä½œä¼šå¯¼è‡´æŸ¥è¯¢æ“ä½œå¾ˆéš¾è·å¾—è¯»é”ï¼Œä»è€Œå¯èƒ½å¯¼è‡´æ°¸è¿œé˜»å¡ã€‚åŒæ—¶ä¸€äº›éœ€è¦é•¿æ—¶é—´è¿è¡Œçš„æŸ¥è¯¢æ“ä½œï¼Œä¹Ÿä¼šä½¿å†™çº¿ç¨‹â€œé¥¿æ­»â€åº”ç”¨å½“ä¸­åº”å½“é¿å…é•¿æ—¶é—´çš„æŸ¥è¯¢æ“ä½œï¼ˆåœ¨å¯èƒ½çš„æƒ…å†µä¸‹å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸­é—´è¡¨ç­‰æªæ–½å¯¹SQL è¯­å¥åšä¸€å®šçš„â€œåˆ†è§£â€ ï¼Œä½¿æ¯ä¸€æ­¥æŸ¥è¯¢éƒ½èƒ½åœ¨è¾ƒçŸ­æ—¶é—´å®Œæˆï¼Œä»è€Œå‡å°‘é”å†²çªã€‚å¦‚æœå¤æ‚æŸ¥è¯¢ä¸å¯é¿å…ï¼Œåº”å°½é‡å®‰æ’åœ¨æ•°æ®åº“ç©ºé—²æ—¶æ®µæ‰§è¡Œï¼Œæ¯”å¦‚ä¸€äº›å®šæœŸç»Ÿè®¡å¯ä»¥å®‰æ’åœ¨å¤œé—´æ‰§è¡Œï¼‰ã€‚</p><p>å¯ä»¥è®¾ç½®æ”¹å˜è¯»é”å’Œå†™é”çš„ä¼˜å…ˆçº§ï¼š</p><ul><li>é€šè¿‡æŒ‡å®šå¯åŠ¨å‚æ•° low-priority-updatesï¼Œä½¿ MyISAM å¼•æ“é»˜è®¤ç»™äºˆè¯»è¯·æ±‚ä»¥ä¼˜å…ˆçš„æƒåˆ©ã€‚</li><li>é€šè¿‡æ‰§è¡Œå‘½ä»¤ SET LOW_PRIORITY_UPDATES=1ï¼Œä½¿è¯¥è¿æ¥å‘å‡ºçš„æ›´æ–°è¯·æ±‚ä¼˜å…ˆçº§é™ä½ã€‚</li><li>é€šè¿‡æŒ‡å®š INSERTã€UPDATE ã€DELETE è¯­å¥çš„ LOW_PRIORITY å±æ€§ï¼Œé™ä½è¯¥è¯­å¥çš„ä¼˜å…ˆçº§ã€‚<br>ç»™ç³»ç»Ÿå‚æ•° max_write_lock_count è®¾ç½®ä¸€ä¸ªåˆé€‚çš„å€¼ï¼Œå½“ä¸€ä¸ªè¡¨çš„è¯»é”è¾¾åˆ°è¿™ä¸ªå€¼åï¼ŒMySQL å°±æš‚æ—¶å°†å†™è¯·æ±‚çš„ä¼˜å…ˆçº§é™ä½ï¼Œç»™è¯»è¿›ç¨‹ä¸€å®šè·å¾—é”çš„æœºä¼šã€‚</li></ul><h3 id="MyisamåŠ è¡¨é”æ–¹æ³•"><a href="#MyisamåŠ è¡¨é”æ–¹æ³•" class="headerlink" title="MyisamåŠ è¡¨é”æ–¹æ³•"></a>MyisamåŠ è¡¨é”æ–¹æ³•</h3><p>Myisam åœ¨æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ select å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ è¯»é”ã€‚</p><p>Myisam åœ¨æ‰§è¡Œæ›´æ–°æ“ä½œ update dalete insert å‰ï¼Œä¼šè‡ªåŠ¨ç»™æ¶‰åŠçš„è¡¨åŠ å†™é”ã€‚</p><blockquote><p>è¿™ä¸ªè¿‡ç¨‹å¹¶ä¸éœ€è¦ç”¨æˆ·å¹²é¢„ï¼Œå› æ­¤ï¼Œç”¨æˆ·ä¸€èˆ¬ä¸éœ€è¦ç›´æ¥ç”¨ LOCK TABLE å‘½ä»¤ç»™ Myisam è¡¨æ˜¾å¼åŠ é”ã€‚</p><p>åœ¨è‡ªåŠ¨åŠ é”çš„æƒ…å†µä¸‹ï¼ŒMyISAM æ€»æ˜¯ä¸€æ¬¡è·å¾— SQL è¯­å¥æ‰€éœ€è¦çš„å…¨éƒ¨é”ï¼Œè¿™ä¹Ÿæ­£æ˜¯ MyISAM è¡¨ä¸ä¼šå‡ºç°æ­»é”ï¼ˆDeadlock Freeï¼‰çš„åŸå› ã€‚</p></blockquote><p>MyISAM å­˜å‚¨å¼•æ“æ”¯æŒå¹¶å‘æ’å…¥ï¼Œä»¥å‡å°‘ç»™å®šè¡¨çš„è¯»å’Œå†™æ“ä½œä¹‹é—´çš„äº‰ç”¨ï¼š</p><p>å¦‚æœ MyISAM è¡¨åœ¨æ•°æ®æ–‡ä»¶ä¸­é—´æ²¡æœ‰ç©ºé—²å—ï¼Œåˆ™è¡Œå§‹ç»ˆæ’å…¥æ•°æ®æ–‡ä»¶çš„æœ«å°¾ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥è‡ªç”±æ··åˆå¹¶å‘ä½¿ç”¨ MyISAM è¡¨çš„ INSERT å’Œ SELECT è¯­å¥è€Œä¸éœ€è¦åŠ é”â€”â€”ä½ å¯ä»¥åœ¨å…¶ä»–çº¿ç¨‹è¿›è¡Œè¯»æ“ä½œçš„æ—¶å€™ï¼ŒåŒæ—¶å°†è¡Œæ’å…¥åˆ° MyISAM è¡¨ä¸­ã€‚ æ–‡ä»¶ä¸­é—´çš„ç©ºé—²å—å¯èƒ½æ˜¯ä»è¡¨æ ¼ä¸­é—´åˆ é™¤æˆ–æ›´æ–°çš„è¡Œè€Œäº§ç”Ÿçš„ã€‚ å¦‚æœæ–‡ä»¶ä¸­é—´æœ‰ç©ºé—²å¿«ï¼Œåˆ™å¹¶å‘æ’å…¥ä¼šè¢«ç¦ç”¨ï¼Œä½†æ˜¯å½“æ‰€æœ‰ç©ºé—²å—éƒ½å¡«å……æœ‰æ–°æ•°æ®æ—¶ï¼Œå®ƒåˆä¼šè‡ªåŠ¨é‡æ–°å¯ç”¨ã€‚ è¦æ§åˆ¶æ­¤è¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨ MySQL çš„ concurrent_insert ç³»ç»Ÿå˜é‡ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨ LOCK TABLES æ˜¾å¼è·å–è¡¨é”ï¼Œåˆ™å¯ä»¥è¯·æ±‚ READ LOCAL é”è€Œä¸æ˜¯ READ é”ï¼Œä»¥ä¾¿åœ¨é”å®šè¡¨æ—¶ï¼Œå…¶ä»–ä¼šè¯å¯ä»¥ä½¿ç”¨å¹¶å‘æ’å…¥ã€‚</p><ul><li>å½“ concurrent_insert è®¾ç½®ä¸º0æ—¶ï¼Œä¸å…è®¸å¹¶å‘æ’å…¥ã€‚</li><li>å½“ concurrent_insert è®¾ç½®ä¸º1æ—¶ï¼Œå¦‚æœMyISAMè¡¨ä¸­æ²¡æœ‰ç©ºæ´ï¼ˆå³è¡¨çš„ä¸­é—´æ²¡æœ‰è¢«åˆ é™¤çš„è¡Œï¼‰ï¼ŒMyISAM å…è®¸åœ¨ä¸€ä¸ªçº¿ç¨‹è¯»è¡¨çš„åŒæ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä»è¡¨å°¾æ’å…¥è®°å½•ã€‚è¿™ä¹Ÿæ˜¯ MySQL çš„é»˜è®¤è®¾ç½®ã€‚</li><li>å½“ concurrent_insert è®¾ç½®ä¸º2æ—¶ï¼Œæ— è®º MyISAM è¡¨ä¸­æœ‰æ²¡æœ‰ç©ºæ´ï¼Œéƒ½å…è®¸åœ¨è¡¨å°¾å¹¶å‘æ’å…¥è®°å½•ã€‚</li></ul><h3 id="æŸ¥è¯¢è¡¨çº§é”äº‰ç”¨æƒ…å†µ"><a href="#æŸ¥è¯¢è¡¨çº§é”äº‰ç”¨æƒ…å†µ" class="headerlink" title="æŸ¥è¯¢è¡¨çº§é”äº‰ç”¨æƒ…å†µ"></a>æŸ¥è¯¢è¡¨çº§é”äº‰ç”¨æƒ…å†µ</h3><p>å¯ä»¥é€šè¿‡æ£€æŸ¥ table_locks_waited å’Œ table_locks_immediate çŠ¶æ€å˜é‡æ¥åˆ†æç³»ç»Ÿä¸Šçš„è¡¨é”çš„äº‰å¤ºï¼Œå¦‚æœ Table_locks_waited çš„å€¼æ¯”è¾ƒé«˜ï¼Œåˆ™è¯´æ˜å­˜åœ¨ç€è¾ƒä¸¥é‡çš„è¡¨çº§é”äº‰ç”¨æƒ…å†µï¼š</p><pre class="line-numbers language-mysql"><code class="language-mysql">mysql> SHOW STATUS LIKE 'Table%';+-----------------------+---------+| Variable_name | Value |+-----------------------+---------+| Table_locks_immediate | 1151552 || Table_locks_waited | 15324 |+-----------------------+---------+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Innodbè¡Œçº§é”å’Œè¡¨çº§é”"><a href="#Innodbè¡Œçº§é”å’Œè¡¨çº§é”" class="headerlink" title="Innodbè¡Œçº§é”å’Œè¡¨çº§é”"></a>Innodbè¡Œçº§é”å’Œè¡¨çº§é”</h3><p>InnoDB å®ç°äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„<strong>è¡Œé”</strong>ï¼š</p><ul><li>å…±äº«é”ï¼ˆSï¼‰ï¼šå…è®¸ä¸€ä¸ªäº‹åŠ¡å»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’ä»–é”ã€‚</li><li>æ’ä»–é”ï¼ˆXï¼‰ï¼šå…è®¸è·å¾—æ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å–å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«è¯»é”å’Œæ’ä»–å†™é”ã€‚</li></ul><blockquote><p>ä¸ºäº†å…è®¸è¡Œé”å’Œè¡¨é”å…±å­˜ï¼Œå®ç°å¤šç²’åº¦é”æœºåˆ¶ï¼ŒInnoDB è¿˜æœ‰ä¸¤ç§å†…éƒ¨ä½¿ç”¨çš„æ„å‘é”ï¼ˆIntention Locksï¼‰ï¼Œè¿™ä¸¤ç§æ„å‘é”éƒ½æ˜¯<strong>è¡¨é”</strong>ï¼š</p></blockquote><ul><li>æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œå…±äº«é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ å…±äº«é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ IS é”ã€‚</li><li>æ„å‘æ’ä»–é”ï¼ˆIXï¼‰ï¼šäº‹åŠ¡æ‰“ç®—ç»™æ•°æ®è¡ŒåŠ è¡Œæ’ä»–é”ï¼Œäº‹åŠ¡åœ¨ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ æ’ä»–é”å‰å¿…é¡»å…ˆå–å¾—è¯¥è¡¨çš„ IX é”ã€‚</li></ul><p><strong>é”æ¨¡å¼çš„å…¼å®¹æƒ…å†µ</strong></p><p><img src="http://ww1.sinaimg.cn/large/e73160eegy1g6dfpsdoulj20k006qwep.jpg" alt></p><blockquote><p>å¦‚æœä¸€ä¸ªäº‹åŠ¡è¯·æ±‚çš„é”æ¨¡å¼ä¸å½“å‰çš„é”å…¼å®¹ï¼Œ InnoDB å°±å°†è¯·æ±‚çš„é”æˆäºˆè¯¥äº‹åŠ¡ï¼› åä¹‹ï¼Œ å¦‚æœä¸¤è€…ä¸å…¼å®¹ï¼Œè¯¥äº‹åŠ¡å°±è¦ç­‰å¾…é”é‡Šæ”¾ã€‚</p></blockquote><h3 id="InnodbåŠ é”æ–¹æ³•"><a href="#InnodbåŠ é”æ–¹æ³•" class="headerlink" title="InnodbåŠ é”æ–¹æ³•"></a>InnodbåŠ é”æ–¹æ³•</h3><ul><li><p>æ„å‘é”æ˜¯ Innodbè‡ª åŠ¨åŠ çš„ï¼Œä¸éœ€è¦ç”¨æˆ·å¹²é¢„ã€‚</p></li><li><p>å¯¹äºå¯¹äº update insert delete è¯­å¥ï¼Œ innodb ä¼šè‡ªåŠ¨ç»™æ¶‰åŠæ•°æ®é›†åŠ æ’ä»–é”ï¼ˆX)ï¼›</p></li><li><p>å¯¹äºæ™®é€š select è¯­å¥ innodb ä¸ä¼šåŠ ä»»ä½•é”ã€‚</p></li><li><p>äº‹åŠ¡å¯ä»¥é€šè¿‡ä»¥ä¸‹è¯­å¥æ˜¾å¼ç»™è®°å½•é›†åŠ å…±äº«é”æˆ–æ’ä»–é”ï¼š</p><ul><li>å…±äº«é”ï¼ˆSï¼‰ï¼šSELECT * FROM table_name WHERE â€¦ LOCK IN SHARE MODEã€‚ å…¶ä»– session ä»ç„¶å¯ä»¥æŸ¥è¯¢è®°å½•ï¼Œå¹¶ä¹Ÿå¯ä»¥å¯¹è¯¥è®°å½•åŠ  share mode çš„å…±äº«é”ã€‚ä½†æ˜¯å¦‚æœå½“å‰äº‹åŠ¡éœ€è¦å¯¹è¯¥è®°å½•è¿›è¡Œæ›´æ–°æ“ä½œï¼Œåˆ™å¾ˆæœ‰å¯èƒ½é€ æˆæ­»é”ã€‚</li><li>æ’ä»–é”ï¼ˆX)ï¼šSELECT * FROM table_name WHERE â€¦ FOR UPDATEã€‚å…¶ä»– session å¯ä»¥æŸ¥è¯¢è¯¥è®°å½•ï¼Œä½†æ˜¯ä¸èƒ½å¯¹è¯¥è®°å½•åŠ å…±äº«é”æˆ–æ’ä»–é”ï¼Œè€Œæ˜¯ç­‰å¾…è·å¾—é”</li></ul></li></ul><h3 id="InnoDB-è¡Œé”å®ç°æ–¹å¼"><a href="#InnoDB-è¡Œé”å®ç°æ–¹å¼" class="headerlink" title="InnoDB è¡Œé”å®ç°æ–¹å¼"></a>InnoDB è¡Œé”å®ç°æ–¹å¼</h3><ul><li>InnoDB è¡Œé”æ˜¯é€šè¿‡ç»™ç´¢å¼•ä¸Šçš„ç´¢å¼•é¡¹åŠ é”æ¥å®ç°çš„ï¼Œè¿™ä¸€ç‚¹ MySQL ä¸ Oracle ä¸åŒï¼Œåè€…æ˜¯é€šè¿‡åœ¨æ•°æ®å—ä¸­å¯¹ç›¸åº”æ•°æ®è¡ŒåŠ é”æ¥å®ç°çš„ã€‚InnoDB è¿™ç§è¡Œé”å®ç°ç‰¹ç‚¹æ„å‘³ç€ï¼šåªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼ŒInnoDB æ‰ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ï¼ŒInnoDB å°†ä½¿ç”¨è¡¨é”ï¼</li><li>ä¸è®ºæ˜¯ä½¿ç”¨ä¸»é”®ç´¢å¼•ã€å”¯ä¸€ç´¢å¼•æˆ–æ™®é€šç´¢å¼•ï¼ŒInnoDB éƒ½ä¼šä½¿ç”¨è¡Œé”æ¥å¯¹æ•°æ®åŠ é”ã€‚</li><li>åªæœ‰æ‰§è¡Œè®¡åˆ’çœŸæ­£ä½¿ç”¨äº†ç´¢å¼•ï¼Œæ‰èƒ½ä½¿ç”¨è¡Œé”ï¼šå³ä¾¿åœ¨æ¡ä»¶ä¸­ä½¿ç”¨äº†ç´¢å¼•å­—æ®µï¼Œä½†æ˜¯å¦ä½¿ç”¨ç´¢å¼•æ¥æ£€ç´¢æ•°æ®æ˜¯ç”± MySQL é€šè¿‡åˆ¤æ–­ä¸åŒæ‰§è¡Œè®¡åˆ’çš„ä»£ä»·æ¥å†³å®šçš„ï¼Œå¦‚æœ MySQL è®¤ä¸ºå…¨è¡¨æ‰«ææ•ˆç‡æ›´é«˜ï¼Œæ¯”å¦‚å¯¹ä¸€äº›å¾ˆå°çš„è¡¨ï¼Œå®ƒå°±ä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œè¿™ç§æƒ…å†µä¸‹ InnoDB å°†ä½¿ç”¨è¡¨é”ï¼Œè€Œä¸æ˜¯è¡Œé”ã€‚å› æ­¤ï¼Œåœ¨åˆ†æé”å†²çªæ—¶ï¼Œ<br>åˆ«å¿˜äº†æ£€æŸ¥ SQL çš„æ‰§è¡Œè®¡åˆ’ï¼ˆå¯ä»¥é€šè¿‡ explain æ£€æŸ¥ SQL çš„æ‰§è¡Œè®¡åˆ’ï¼‰ï¼Œä»¥ç¡®è®¤æ˜¯å¦çœŸæ­£ä½¿ç”¨äº†ç´¢å¼•ã€‚ï¼ˆæ›´å¤šé˜…è¯»ï¼š<a href="https://link.zhihu.com/?target=http%3A//mp.weixin.qq.com/s/h4B84UmzAUJ81iBY_FXNOg" target="_blank" rel="noopener">MySQLç´¢å¼•æ€»ç»“</a>ï¼‰</li><li>ç”±äº MySQL çš„è¡Œé”æ˜¯é’ˆå¯¹ç´¢å¼•åŠ çš„é”ï¼Œä¸æ˜¯é’ˆå¯¹è®°å½•åŠ çš„é”ï¼Œæ‰€ä»¥è™½ç„¶å¤šä¸ª session æ˜¯è®¿é—®ä¸åŒè¡Œçš„è®°å½•ï¼Œ ä½†æ˜¯å¦‚æœæ˜¯ä½¿ç”¨ç›¸åŒçš„ç´¢å¼•é”®ï¼Œ æ˜¯ä¼šå‡ºç°é”å†²çªçš„ï¼ˆåä½¿ç”¨è¿™äº›ç´¢å¼•çš„ session éœ€è¦ç­‰å¾…å…ˆä½¿ç”¨ç´¢å¼•çš„session é‡Šæ”¾é”åï¼Œæ‰èƒ½è·å–é”ï¼‰ã€‚ åº”ç”¨è®¾è®¡çš„æ—¶å€™è¦æ³¨æ„è¿™ä¸€ç‚¹ã€‚</li></ul><h3 id="æ‚²è§‚é”ä¸ä¹è§‚é”"><a href="#æ‚²è§‚é”ä¸ä¹è§‚é”" class="headerlink" title="æ‚²è§‚é”ä¸ä¹è§‚é”"></a>æ‚²è§‚é”ä¸ä¹è§‚é”</h3><ul><li><p><strong>ä¹è§‚é”(Optimistic Lock)</strong>ï¼šå‡è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œåªåœ¨æäº¤æ“ä½œæ—¶æ£€æŸ¥æ˜¯å¦è¿åæ•°æ®å®Œæ•´æ€§ã€‚ ä¹è§‚é”ä¸èƒ½è§£å†³è„è¯»çš„é—®é¢˜ã€‚</p><ul><li>ä¹è§‚é”, é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆä¹è§‚ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ç­‰æœºåˆ¶ã€‚ä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡ï¼Œåƒæ•°æ®åº“å¦‚æœæä¾›ç±»ä¼¼äº write_condition æœºåˆ¶çš„å…¶å®éƒ½æ˜¯æä¾›çš„ä¹è§‚é”ã€‚</li></ul></li><li><p><strong>æ‚²è§‚é”(Pessimistic Lock)</strong>ï¼šå‡å®šä¼šå‘ç”Ÿå¹¶å‘å†²çªï¼Œå±è”½ä¸€åˆ‡å¯èƒ½è¿åæ•°æ®å®Œæ•´æ€§çš„æ“ä½œã€‚</p><ul><li>æ‚²è§‚é”ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆæ‚²è§‚ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼š block ç›´åˆ°å®ƒæ‹¿åˆ°é”ã€‚ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‡Œè¾¹å°±ç”¨åˆ°äº†å¾ˆå¤šè¿™ç§é”æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ï¼Œè¡¨é”ç­‰ï¼Œè¯»é”ï¼Œå†™é”ç­‰ï¼Œéƒ½æ˜¯åœ¨åšæ“ä½œä¹‹å‰å…ˆä¸Šé”ã€‚</li></ul></li></ul><h3 id="ä¸€äº›ä¼˜åŒ–é”æ€§èƒ½çš„å»ºè®®"><a href="#ä¸€äº›ä¼˜åŒ–é”æ€§èƒ½çš„å»ºè®®" class="headerlink" title="ä¸€äº›ä¼˜åŒ–é”æ€§èƒ½çš„å»ºè®®"></a>ä¸€äº›ä¼˜åŒ–é”æ€§èƒ½çš„å»ºè®®</h3><ul><li>å°½é‡ä½¿ç”¨è¾ƒä½çš„éš”ç¦»çº§åˆ«ï¼›</li><li>ç²¾å¿ƒè®¾è®¡ç´¢å¼•ï¼Œ å¹¶å°½é‡ä½¿ç”¨ç´¢å¼•è®¿é—®æ•°æ®ï¼Œ ä½¿åŠ é”æ›´ç²¾ç¡®ï¼Œ ä»è€Œå‡å°‘é”å†²çªçš„æœºä¼š</li><li>é€‰æ‹©åˆç†çš„äº‹åŠ¡å¤§å°ï¼Œå°äº‹åŠ¡å‘ç”Ÿé”å†²çªçš„å‡ ç‡ä¹Ÿæ›´å°</li><li>ç»™è®°å½•é›†æ˜¾ç¤ºåŠ é”æ—¶ï¼Œæœ€å¥½ä¸€æ¬¡æ€§è¯·æ±‚è¶³å¤Ÿçº§åˆ«çš„é”ã€‚æ¯”å¦‚è¦ä¿®æ”¹æ•°æ®çš„è¯ï¼Œæœ€å¥½ç›´æ¥ç”³è¯·æ’ä»–é”ï¼Œè€Œä¸æ˜¯å…ˆç”³è¯·å…±äº«é”ï¼Œä¿®æ”¹æ—¶å†è¯·æ±‚æ’ä»–é”ï¼Œè¿™æ ·å®¹æ˜“äº§ç”Ÿæ­»é”</li><li>ä¸åŒçš„ç¨‹åºè®¿é—®ä¸€ç»„è¡¨æ—¶ï¼Œåº”å°½é‡çº¦å®šä»¥ç›¸åŒçš„é¡ºåºè®¿é—®å„è¡¨ï¼Œå¯¹ä¸€ä¸ªè¡¨è€Œè¨€ï¼Œå°½å¯èƒ½ä»¥å›ºå®šçš„é¡ºåºå­˜å–è¡¨ä¸­çš„è¡Œã€‚è¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘æ­»é”çš„æœºä¼š</li><li>å°½é‡ç”¨ç›¸ç­‰æ¡ä»¶è®¿é—®æ•°æ®ï¼Œè¿™æ ·å¯ä»¥é¿å…é—´éš™é”å¯¹å¹¶å‘æ’å…¥çš„å½±å“</li><li>ä¸è¦ç”³è¯·è¶…è¿‡å®é™…éœ€è¦çš„é”çº§åˆ«</li><li>é™¤éå¿…é¡»ï¼ŒæŸ¥è¯¢æ—¶ä¸è¦æ˜¾ç¤ºåŠ é”ã€‚ MySQL çš„ MVCC å¯ä»¥å®ç°äº‹åŠ¡ä¸­çš„æŸ¥è¯¢ä¸ç”¨åŠ é”ï¼Œä¼˜åŒ–äº‹åŠ¡æ€§èƒ½ï¼› MVCC åªåœ¨ COMMITTED READï¼ˆè¯»æäº¤ï¼‰å’Œ REPEATABLE READï¼ˆå¯é‡å¤è¯»ï¼‰ä¸¤ç§éš”ç¦»çº§åˆ«ä¸‹å·¥ä½œ</li><li>å¯¹äºä¸€äº›ç‰¹å®šçš„äº‹åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨è¡¨é”æ¥æé«˜å¤„ç†é€Ÿåº¦æˆ–å‡å°‘æ­»é”çš„å¯èƒ½</li></ul><h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><blockquote><p>ç´¢å¼•æ˜¯å­˜å‚¨å¼•æ“ç”¨äºå¿«é€Ÿæ‰¾åˆ°è®°å½•çš„ä¸€ç§æ•°æ®ç»“æ„ã€‚å¦‚æœè¯´æ²¡æœ‰ç´¢å¼•çš„è¯ï¼Œæ•°æ®åº“å°±å¿…é¡»é‡ç¬¬ä¸€æ¡è®°å½•å¼€å§‹è¿›è¡Œå…¨è¡¨æ‰«æï¼Œç›´åˆ°æ‰¾å‡ºç›¸å…³çš„è¡Œã€‚æ•°æ®è¶Šå¤šï¼Œæ£€ç´¢çš„ä»£ä»·å°±è¶Šé«˜ï¼Œæ£€ç´¢æ—¶å¦‚æœè¡¨çš„åˆ—å­˜åœ¨ç´¢å¼•ï¼Œé‚£ä¹ˆ MySQL å°±èƒ½å¿«é€Ÿåˆ°è¾¾æŒ‡å®šä½ç½®å»æœç´¢æ•°æ®æ–‡ä»¶ï¼Œè€Œä¸å¿…æŸ¥çœ‹æ‰€æœ‰æ•°æ®ã€‚æ³¨æ„æœ‰äº›æƒ…å†µä¸‹ï¼ŒMySQL å¦‚æœè§‰å¾—å…¨è¡¨æ‰«ææ¥çš„å¥½ï¼Œé‚£ä¹ˆä¹Ÿä¸ä¼šå»èµ°ç´¢å¼•ã€‚</p><p><strong>ç´¢å¼•æ˜¯ä¸€ç§ä»¥ç©ºé—´æ¢å–æ—¶é—´çš„æ–¹å¼ï¼Œç‰ºç‰²äº†å†™çš„é€Ÿåº¦ï¼Œæé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œåˆ›å»ºå®Œæ¯•ç´¢å¼•åï¼Œå†™æ…¢è¯»å¿«</strong></p></blockquote><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><blockquote><p>ç´¢å¼•ä¾æ‰˜äºå­˜å‚¨å¼•æ“çš„å®ç°ï¼Œå› æ­¤ï¼Œæ¯ç§å­˜å‚¨å¼•æ“çš„ç´¢å¼•éƒ½ä¸ä¸€å®šå®Œå…¨çš„ç›¸åŒï¼Œå¹¶ä¸”æ¯ç§å­˜å‚¨å¼•æ“ä¹Ÿä¸ä¸€å®šæ”¯æŒæ‰€æœ‰çš„ç´¢å¼•ç±»å‹ã€‚æ‰€æœ‰å­˜å‚¨å¼•æ“æ”¯æŒæ¯ä¸ªè¡¨è‡³å°‘16ä¸ªç´¢å¼•ï¼Œæ€»ç´¢å¼•é•¿åº¦è‡³å°‘ä¸º256å­—èŠ‚ã€‚å¤§å¤šæ•°å­˜å‚¨å¼•æ“æœ‰æ›´é«˜çš„é¢é™åˆ¶ã€‚</p></blockquote><p>MySQL ä¸­ç´¢å¼•çš„å­˜å‚¨ç±»å‹æœ‰ä¸¤ç§ï¼š BTREE å’Œ HASH ï¼Œå…·ä½“å’Œè¡¨çš„å­˜å‚¨å¼•æ“ç›¸å…³ï¼›</p><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬æ·»åŠ å®Œç´¢å¼•åæŸ¥è¯¢é€Ÿåº¦ä¸ºå˜å¿«ï¼Ÿ</p><p>ä¼ ç»Ÿçš„æŸ¥è¯¢æ–¹æ³•ï¼Œæ˜¯æŒ‰ç…§è¡¨çš„é¡ºåºéå†çš„ï¼Œä¸è®ºæŸ¥è¯¢å‡ æ¡æ•°æ®ï¼ŒMySQL éœ€è¦å°†è¡¨çš„æ•°æ®ä»å¤´åˆ°å°¾éå†ä¸€éï¼Œåœ¨æˆ‘ä»¬æ·»åŠ å®Œç´¢å¼•ä¹‹åï¼Œ MySQL ä¸€èˆ¬é€šè¿‡ BTREE ç®—æ³•ç”Ÿæˆä¸€ä¸ªç´¢å¼•æ–‡ä»¶ï¼Œåœ¨æŸ¥è¯¢æ•°æ®åº“æ—¶ï¼Œæ‰¾åˆ°ç´¢å¼•æ–‡ä»¶è¿›è¡Œéå†(æŠ˜åŠæŸ¥æ‰¾å¤§å¹…æŸ¥è¯¢æ•ˆç‡)ï¼Œæ‰¾åˆ°ç›¸åº”çš„é”®ä»è€Œè·å–æ•°æ®ã€‚</p><h3 id="ç´¢å¼•ç±»å‹"><a href="#ç´¢å¼•ç±»å‹" class="headerlink" title="ç´¢å¼•ç±»å‹"></a>ç´¢å¼•ç±»å‹</h3><p>åœ¨ MySQL ç´¢å¼•é»˜è®¤æœ‰ btree å’Œ hash ä¸¤ç§ç±»å‹ï¼ŒMyisam ,Innodb ä¸­,é»˜è®¤ç”¨ btree ç´¢å¼•ç±»å‹ã€‚</p><p>ä¸¤è€…çš„åŒºåˆ«ï¼š</p><ul><li>hash å‡½æ•°è®¡ç®—åçš„ç»“æœ,æ˜¯éšæœºçš„,å¦‚æœæ˜¯åœ¨ç£ç›˜ä¸Šæ”¾ç½®æ•°æ®,æ·»åŠ çš„æ•°æ®è¡Œåœ¨ç£ç›˜ä¸Šéšæœºæ”¾ç½®,ç‚¹å¯¹ç‚¹çš„æŸ¥è¯¢é€Ÿåº¦æœ€å¿«ã€‚  select name from id=1;</li><li>hash ç±»å‹ä¸èƒ½å¯¹èŒƒå›´æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–</li><li>æ— æ³•åˆ©ç”¨å‰ç¼€ç´¢å¼•ï¼Œæ¯”å¦‚ åœ¨ btree ä¸­, å­—æ®µå€¼ â€œzhangsanâ€ ,æŸ¥è¯¢ å­—æ®µ=â€œzhangâ€,å¯ä»¥åˆ©ç”¨ç´¢å¼•,è€Œ hash ç±»å‹åˆ™ä¸è¡Œ</li><li>æ’åºä¹Ÿæ— æ³•ä¼˜åŒ–</li><li>é€šè¿‡ç´¢å¼•æ‹¿åˆ°æ•°æ®ä½ç½®,å¿…é¡»å›åˆ°è¡¨ä¸­å–æ•°æ®</li></ul><p>ä¼˜ç‚¹ï¼š</p><ul><li>åŠ å¿«æ•°æ®çš„æŸ¥è¯¢é€Ÿåº¦</li><li>å”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥ä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ€§</li><li>åœ¨å®ç°æ•°æ®çš„å‚è€ƒå®Œæ•´æ€§æ–¹é¢ï¼Œå¯ä»¥åŠ é€Ÿè¡¨å’Œè¡¨ä¹‹é—´çš„è¿æ¥</li><li>åœ¨ä½¿ç”¨åˆ†ç»„å’Œæ’åºå­å¥è¿›è¡Œæ•°æ®æŸ¥è¯¢æ—¶ï¼Œä¹Ÿå¯ä»¥æ˜¾è‘—å‡å°‘æŸ¥è¯¢ä¸­åˆ†ç»„å’Œæ’åºçš„æ—¶é—´</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å ç”¨ç£ç›˜ç©ºé—´ï¼Œé™¤äº†æ•°æ®è¡¨å æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ä¸€å®šçš„ç‰©ç†ç©ºé—´ï¼Œå¦‚æœæœ‰å¤§é‡çš„ç´¢å¼•ï¼Œç´¢å¼•æ–‡ä»¶å¯èƒ½æ¯”æ•°æ®æ–‡ä»¶æ›´å¿«è¾¾åˆ°æœ€å¤§æ–‡ä»¶å°ºå¯¸ï¼ˆ<strong>åˆç†è¿ç”¨ï¼Œé—®é¢˜ä¸å¤§</strong>ï¼‰</li><li>æŸè€—æ€§èƒ½ï¼ˆ<strong>æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤</strong>ï¼‰ ç´¢å¼•éœ€è¦åŠ¨æ€åœ°ç»´æŠ¤</li></ul><h3 id="ç´¢å¼•åˆ†ç±»"><a href="#ç´¢å¼•åˆ†ç±»" class="headerlink" title="ç´¢å¼•åˆ†ç±»"></a>ç´¢å¼•åˆ†ç±»</h3><p><strong>æ™®é€šç´¢å¼•ï¼Œç»„åˆç´¢å¼•</strong>ï¼š<strong>å¯¹å…³é”®å­—æ²¡æœ‰è¦æ±‚</strong>ã€‚</p><pre class="line-numbers language-mysql"><code class="language-mysql">alter table è¡¨å add index ç´¢å¼•åç§° (`åˆ›å»ºç´¢å¼•çš„å­—æ®µ`); # æ™®é€šç´¢å¼•alter table è¡¨å add index ç´¢å¼•åç§° (`åˆ›å»ºç´¢å¼•çš„å­—æ®µ`,`åˆ›å»ºç´¢å¼•çš„å­—æ®µ`); # ç»„åˆç´¢å¼•<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>å”¯ä¸€ç´¢å¼•</strong>ï¼š<strong>è¦æ±‚å…³é”®å­—ä¸èƒ½é‡å¤ï¼ŒåŒæ—¶å¢åŠ å”¯ä¸€çº¦æŸ</strong>ã€‚</p><pre class="line-numbers language-mysql"><code class="language-mysql">alter table è¡¨å add unique index ç´¢å¼•åç§° (`åˆ›å»ºç´¢å¼•çš„å­—æ®µ`);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>ä¸»é”®ç´¢å¼•</strong>ï¼š<strong>è¦æ±‚å…³é”®å­—ä¸èƒ½é‡å¤ï¼Œä¹Ÿä¸èƒ½ä¸º NULL ã€‚åŒæ—¶å¢åŠ ä¸»é”®çº¦æŸ</strong>ã€‚</p><pre class="line-numbers language-mysql"><code class="language-mysql">alter table è¡¨å add primary key ç´¢å¼•åç§° (`åˆ›å»ºç´¢å¼•çš„å­—æ®µ`);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>å…¨æ–‡ç´¢å¼•</strong>ï¼š<strong>å…³é”®å­—çš„æ¥æºä¸æ˜¯æ‰€æœ‰å­—æ®µçš„æ•°æ®ï¼Œè€Œæ˜¯ä»å­—æ®µä¸­æå–çš„ç‰¹åˆ«å…³é”®è¯</strong>ã€‚</p><pre class="line-numbers language-mysql"><code class="language-mysql">alter table è¡¨å add fulltext (`åˆ›å»ºç´¢å¼•çš„å†…å®¹`);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æŸ¥çœ‹ç´¢å¼•</strong></p><pre class="line-numbers language-mysql"><code class="language-mysql">show index from è¡¨å;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>åˆ é™¤ç´¢å¼•</strong></p><pre class="line-numbers language-mysql"><code class="language-mysql">alter table è¡¨å drop index ç´¢å¼•å;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" class="headerlink" title="è®¾è®¡åŸåˆ™"></a>è®¾è®¡åŸåˆ™</h3><blockquote><p>ç´¢å¼•è®¾è®¡ä¸åˆç†æˆ–è€…ç¼ºå°‘ç´¢å¼•éƒ½ä¼šå¯¹æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½é€ æˆéšœç¢ï¼Œé«˜æ•ˆçš„ç´¢å¼•å¯¹äºè·å¾—è‰¯å¥½çš„æ€§èƒ½éå¸¸é‡è¦ã€‚</p></blockquote><ol><li><p>ç´¢å¼•å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œä¸€ä¸ªè¡¨å½“ä¸­å¦‚æœæœ‰å¤§é‡çš„ç´¢å¼•ï¼Œé‚£ä¹ˆä»–è¿˜ä¼šå½±å“åˆ°æ›´æ–°æ“ä½œï¼ˆinsertã€updateã€deleteï¼‰çš„æ€§èƒ½ï¼Œå› ä¸ºå½“è¡¨çš„æ•°æ®æ›´æ”¹çš„åŒæ—¶ï¼Œç´¢å¼•ä¹Ÿä¼šè¿›è¡Œè°ƒæ•´å’Œæ›´æ–°ã€‚</p></li><li><p>é¿å…å¯¹<strong>ç»å¸¸æ›´æ–°çš„è¡¨</strong>è®¾è®¡è¿‡å¤šçš„ç´¢å¼•ï¼Œå¹¶ä¸”ç´¢å¼•ä¸­çš„åˆ—å°½å¯èƒ½è¦å°‘ï¼Œè€Œå¯¹ç»å¸¸ç”¨äºæŸ¥è¯¢çš„å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼•ï¼Œä½†è¦é¿å…æ·»åŠ ä¸å¿…è¦çš„å­—æ®µ</p></li><li><p>æ•°æ®é‡å°çš„è¡¨æœ€å¥½ä¸è¦ä½¿ç”¨ç´¢å¼•ï¼Œç”±äºæ•°æ®è¾ƒå°‘ï¼ŒæŸ¥è¯¢èŠ±è´¹çš„æ—¶é—´å¯èƒ½æ¯”éå†ç´¢å¼•æ—¶é—´è¿˜è¦çŸ­ï¼Œç´¢å¼•å¯èƒ½ä¸ä¼šäº§ç”Ÿä¼˜åŒ–æ•ˆæœ</p></li><li><p>åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­ç»å¸¸ç”¨åˆ°çš„ä¸åŒå€¼è¾ƒå¤šçš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œåœ¨ä¸åŒå€¼è¾ƒå°‘çš„åˆ—ä¸Šä¸è¦å»ºç«‹ç´¢å¼•ï¼Œæ¯”å¦‚æ€§åˆ«å­—æ®µåªæœ‰ç”·å’Œå¥³ï¼Œå°±æ²¡å¿…è¦å»ºç«‹ç´¢å¼•ã€‚å¦‚æœå»ºç«‹ç´¢å¼•ä¸ä½†ä¸ä¼šæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œåè€Œä¼šä¸¥é‡é™ä½æ›´æ–°é€Ÿåº¦</p></li><li><p>å½“å”¯ä¸€æ€§æ˜¯æŸç§æ•°æ®æœ¬èº«çš„ç‰¹å¾æ—¶ï¼ŒæŒ‡å®šå”¯ä¸€ç´¢å¼•ã€‚ä½¿ç”¨å”¯ä¸€ç´¢å¼•éœ€èƒ½ç¡®ä¿å®šä¹‰çš„åˆ—çš„æ•°æ®å®Œæ•´æ€§ï¼Œä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦</p></li><li><p>åœ¨é¢‘ç¹æ’åºæˆ–åˆ†ç»„ï¼ˆå³ group by æˆ– order by æ“ä½œï¼‰çš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œå¦‚æœå¾…æ’åºçš„åˆ—æœ‰å¤šä¸ªï¼Œå¯ä»¥åœ¨è¿™äº›åˆ—ä¸Šå»ºç«‹ç»„åˆç´¢å¼• </p></li></ol><p>æ€»ç»“ï¼š<br>    è¾ƒé¢‘ç¹çš„ä½œä¸ºæŸ¥è¯¢æ¡ä»¶å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼•<br>    å”¯ä¸€æ€§å¤ªå·®çš„å­—æ®µä¸é€‚åˆåˆ›å»ºç´¢å¼•ï¼Œå°½ç®¡é¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œä¾‹å¦‚ gender æ€§åˆ«å­—æ®µ<br>    æ›´æ–°éå¸¸é¢‘ç¹çš„å­—æ®µä¸é€‚åˆä½œä¸ºç´¢å¼•<br>    ä¸ä¼šå‡ºç°åœ¨ where å­å¥ä¸­çš„å­—æ®µä¸è¯¥åˆ›å»ºç´¢å¼•</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><strong>1ã€ å­˜å‚¨ç»“æ„</strong></p><p>MyISAMï¼šæ¯ä¸ªMyISAMåœ¨ç£ç›˜ä¸Šå­˜å‚¨æˆä¸‰ä¸ªæ–‡ä»¶ã€‚ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„åå­—ä»¥è¡¨çš„åå­—å¼€å§‹ï¼Œæ‰©å±•åæŒ‡å‡ºæ–‡ä»¶ç±»å‹ã€‚.frmæ–‡ä»¶å­˜å‚¨è¡¨å®šä¹‰ã€‚æ•°æ®æ–‡ä»¶çš„æ‰©å±•åä¸º.MYD (MYData)ã€‚ç´¢å¼•æ–‡ä»¶çš„æ‰©å±•åæ˜¯.MYI (MYIndex)ã€‚<br>InnoDBï¼šæ‰€æœ‰çš„è¡¨éƒ½ä¿å­˜åœ¨åŒä¸€ä¸ªæ•°æ®æ–‡ä»¶ä¸­ï¼ˆä¹Ÿå¯èƒ½æ˜¯å¤šä¸ªæ–‡ä»¶ï¼Œæˆ–è€…æ˜¯ç‹¬ç«‹çš„è¡¨ç©ºé—´æ–‡ä»¶ï¼‰ï¼ŒInnoDBè¡¨çš„å¤§å°åªå—é™äºæ“ä½œç³»ç»Ÿæ–‡ä»¶çš„å¤§å°ï¼Œä¸€èˆ¬ä¸º2GBã€‚</p><p><strong>2ã€ å­˜å‚¨ç©ºé—´</strong></p><p>MyISAMï¼šå¯è¢«å‹ç¼©ï¼Œå­˜å‚¨ç©ºé—´è¾ƒå°ã€‚æ”¯æŒä¸‰ç§ä¸åŒçš„å­˜å‚¨æ ¼å¼ï¼šé™æ€è¡¨(é»˜è®¤ï¼Œä½†æ˜¯æ³¨æ„æ•°æ®æœ«å°¾ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä¼šè¢«å»æ‰)ã€åŠ¨æ€è¡¨ã€å‹ç¼©è¡¨ã€‚<br>InnoDBï¼šéœ€è¦æ›´å¤šçš„å†…å­˜å’Œå­˜å‚¨ï¼Œå®ƒä¼šåœ¨ä¸»å†…å­˜ä¸­å»ºç«‹å…¶ä¸“ç”¨çš„ç¼“å†²æ± ç”¨äºé«˜é€Ÿç¼“å†²æ•°æ®å’Œç´¢å¼•ã€‚</p><p><strong>3ã€ å¯ç§»æ¤æ€§ã€å¤‡ä»½åŠæ¢å¤</strong></p><p>MyISAMï¼šæ•°æ®æ˜¯ä»¥æ–‡ä»¶çš„å½¢å¼å­˜å‚¨ï¼Œæ‰€ä»¥åœ¨è·¨å¹³å°çš„æ•°æ®è½¬ç§»ä¸­ä¼šå¾ˆæ–¹ä¾¿ã€‚åœ¨å¤‡ä»½å’Œæ¢å¤æ—¶å¯å•ç‹¬é’ˆå¯¹æŸä¸ªè¡¨è¿›è¡Œæ“ä½œã€‚<br>InnoDBï¼šå…è´¹çš„æ–¹æ¡ˆå¯ä»¥æ˜¯æ‹·è´æ•°æ®æ–‡ä»¶ã€å¤‡ä»½ binlogï¼Œæˆ–è€…ç”¨ mysqldumpï¼Œåœ¨æ•°æ®é‡è¾¾åˆ°å‡ åGçš„æ—¶å€™å°±ç›¸å¯¹ç—›è‹¦äº†ã€‚</p><p><strong>4ã€ äº‹åŠ¡æ”¯æŒ</strong></p><p>MyISAMï¼šå¼ºè°ƒçš„æ˜¯æ€§èƒ½ï¼Œæ¯æ¬¡æŸ¥è¯¢å…·æœ‰åŸå­æ€§,å…¶æ‰§è¡Œæ•°åº¦æ¯”InnoDBç±»å‹æ›´å¿«ï¼Œä½†æ˜¯ä¸æä¾›äº‹åŠ¡æ”¯æŒã€‚<br>InnoDBï¼šæä¾›äº‹åŠ¡æ”¯æŒäº‹åŠ¡ï¼Œå¤–éƒ¨é”®ç­‰é«˜çº§æ•°æ®åº“åŠŸèƒ½ã€‚ å…·æœ‰äº‹åŠ¡(commit)ã€å›æ»š(rollback)å’Œå´©æºƒä¿®å¤èƒ½åŠ›(crash recovery capabilities)çš„äº‹åŠ¡å®‰å…¨(transaction-safe (ACID compliant))å‹è¡¨ã€‚</p><p><strong>5ã€ AUTO_INCREMENT</strong></p><p>MyISAMï¼šå¯ä»¥å’Œå…¶ä»–å­—æ®µä¸€èµ·å»ºç«‹è”åˆç´¢å¼•ã€‚å¼•æ“çš„è‡ªåŠ¨å¢é•¿åˆ—å¿…é¡»æ˜¯ç´¢å¼•ï¼Œå¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œè‡ªåŠ¨å¢é•¿å¯ä»¥ä¸æ˜¯ç¬¬ä¸€åˆ—ï¼Œä»–å¯ä»¥æ ¹æ®å‰é¢å‡ åˆ—è¿›è¡Œæ’åºåé€’å¢ã€‚<br>InnoDBï¼šInnoDBä¸­å¿…é¡»åŒ…å«åªæœ‰è¯¥å­—æ®µçš„ç´¢å¼•ã€‚å¼•æ“çš„è‡ªåŠ¨å¢é•¿åˆ—å¿…é¡»æ˜¯ç´¢å¼•ï¼Œå¦‚æœæ˜¯ç»„åˆç´¢å¼•ä¹Ÿå¿…é¡»æ˜¯ç»„åˆç´¢å¼•çš„ç¬¬ä¸€åˆ—ã€‚</p><p><strong>6ã€ è¡¨é”å·®å¼‚</strong></p><p>MyISAMï¼šåªæ”¯æŒè¡¨çº§é”ï¼Œç”¨æˆ·åœ¨æ“ä½œmyisamè¡¨æ—¶ï¼Œselectï¼Œupdateï¼Œdeleteï¼Œinsertè¯­å¥éƒ½ä¼šç»™è¡¨è‡ªåŠ¨åŠ é”ï¼Œå¦‚æœåŠ é”ä»¥åçš„è¡¨æ»¡è¶³insertå¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨è¡¨çš„å°¾éƒ¨æ’å…¥æ–°çš„æ•°æ®ã€‚<br>InnoDBï¼šæ”¯æŒäº‹åŠ¡å’Œè¡Œçº§é”ï¼Œæ˜¯innodbçš„æœ€å¤§ç‰¹è‰²ã€‚è¡Œé”å¤§å¹…åº¦æé«˜äº†å¤šç”¨æˆ·å¹¶å‘æ“ä½œçš„æ–°èƒ½ã€‚ä½†æ˜¯InnoDBçš„è¡Œé”ï¼Œåªæ˜¯åœ¨WHEREçš„ä¸»é”®æ˜¯æœ‰æ•ˆçš„ï¼Œéä¸»é”®çš„WHEREéƒ½ä¼šé”å…¨è¡¨çš„ã€‚</p><p><strong>7ã€ è¡¨ä¸»é”®</strong></p><p>MyISAMï¼šå…è®¸æ²¡æœ‰ä»»ä½•ç´¢å¼•å’Œä¸»é”®çš„è¡¨å­˜åœ¨ï¼Œç´¢å¼•éƒ½æ˜¯ä¿å­˜è¡Œçš„åœ°å€ã€‚<br>InnoDBï¼šå¦‚æœæ²¡æœ‰è®¾å®šä¸»é”®æˆ–è€…éç©ºå”¯ä¸€ç´¢å¼•ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª6å­—èŠ‚çš„ä¸»é”®(ç”¨æˆ·ä¸å¯è§)ï¼Œæ•°æ®æ˜¯ä¸»ç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œé™„åŠ ç´¢å¼•ä¿å­˜çš„æ˜¯ä¸»ç´¢å¼•çš„å€¼ã€‚</p><p><strong>8ã€ è¡¨çš„å…·ä½“è¡Œæ•°</strong></p><p>MyISAMï¼šä¿å­˜æœ‰è¡¨çš„æ€»è¡Œæ•°ï¼Œå¦‚æœselect count(<em>) from table;ä¼šç›´æ¥å–å‡ºå‡ºè¯¥å€¼ã€‚<br>InnoDBï¼šæ²¡æœ‰ä¿å­˜è¡¨çš„æ€»è¡Œæ•°ï¼Œå¦‚æœä½¿ç”¨select count(</em>) from tableï¼›å°±ä¼šéå†æ•´ä¸ªè¡¨ï¼Œæ¶ˆè€—ç›¸å½“å¤§ï¼Œä½†æ˜¯åœ¨åŠ äº†wehreæ¡ä»¶åï¼Œmyisamå’Œinnodbå¤„ç†çš„æ–¹å¼éƒ½ä¸€æ ·ã€‚</p><p><strong>9ã€ CURDæ“ä½œ</strong></p><p>MyISAMï¼šå¦‚æœæ‰§è¡Œå¤§é‡çš„SELECTï¼ŒMyISAMæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚<br>InnoDBï¼šå¦‚æœä½ çš„æ•°æ®æ‰§è¡Œå¤§é‡çš„INSERTæˆ–UPDATEï¼Œå‡ºäºæ€§èƒ½æ–¹é¢çš„è€ƒè™‘ï¼Œåº”è¯¥ä½¿ç”¨InnoDBè¡¨ã€‚DELETE ä»æ€§èƒ½ä¸ŠInnoDBæ›´ä¼˜ï¼Œä½†DELETE FROM tableæ—¶ï¼ŒInnoDBä¸ä¼šé‡æ–°å»ºç«‹è¡¨ï¼Œè€Œæ˜¯ä¸€è¡Œä¸€è¡Œçš„åˆ é™¤ï¼Œåœ¨innodbä¸Šå¦‚æœè¦æ¸…ç©ºä¿å­˜æœ‰å¤§é‡æ•°æ®çš„è¡¨ï¼Œæœ€å¥½ä½¿ç”¨truncate tableè¿™ä¸ªå‘½ä»¤ã€‚</p><p><strong>10ã€ å¤–é”®</strong></p><p>MyISAMï¼šä¸æ”¯æŒ<br>InnoDBï¼šæ”¯æŒ<br>é€šè¿‡ä¸Šè¿°çš„åˆ†æï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è€ƒè™‘ä½¿ç”¨InnoDBæ¥æ›¿ä»£MyISAMå¼•æ“äº†ï¼ŒåŸå› æ˜¯InnoDBè‡ªèº«å¾ˆå¤šè‰¯å¥½çš„ç‰¹ç‚¹ï¼Œæ¯”å¦‚äº‹åŠ¡æ”¯æŒã€å­˜å‚¨ è¿‡ç¨‹ã€è§†å›¾ã€è¡Œçº§é”å®šç­‰ç­‰ï¼Œåœ¨å¹¶å‘å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œç›¸ä¿¡InnoDBçš„è¡¨ç°è‚¯å®šè¦æ¯”MyISAMå¼ºå¾ˆå¤šã€‚å¦å¤–ï¼Œä»»ä½•ä¸€ç§è¡¨éƒ½ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œåªç”¨æ°å½“çš„é’ˆå¯¹ä¸šåŠ¡ç±»å‹æ¥é€‰æ‹©åˆé€‚çš„è¡¨ç±»å‹ï¼Œæ‰èƒ½æœ€å¤§çš„å‘æŒ¥MySQLçš„æ€§èƒ½ä¼˜åŠ¿ã€‚å¦‚æœä¸æ˜¯å¾ˆå¤æ‚çš„Webåº”ç”¨ï¼Œéå…³é”®åº”ç”¨ï¼Œè¿˜æ˜¯å¯ä»¥ç»§ç»­è€ƒè™‘MyISAMçš„ï¼Œè¿™ä¸ªå…·ä½“æƒ…å†µå¯ä»¥è‡ªå·±æ–Ÿé…Œã€‚</p><p>è¡¨é”ï¼Œè¡Œé”ï¼Œè¡Œé”å‰¯ä½œç”¨ï¼ˆupdate å¤šæ—¶å€™å˜æ…¢ï¼‰ï¼Œåœ¨ select å’Œ update æ··åˆçš„æƒ…å†µä¸‹ï¼Œè¡Œé”å·§å¦™è§£å†³äº†è¯»å†™äº’æ–¥çš„é—®é¢˜ï¼›</p><p>è€Œ Innodb ç”±äºæ”¯æŒè¡Œé”ï¼Œæ‰€ä»¥åœ¨æ•°æ®ä¿®æ”¹æ–¹é¢æ›´èƒœä¸€ç­¹</p><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/29150809" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/29150809</a></p><p><a href="https://blog.csdn.net/qq_19865749/article/details/79309387" target="_blank" rel="noopener">https://blog.csdn.net/qq_19865749/article/details/79309387</a></p><p><a href="https://juejin.im/entry/5a448726f265da43062b10f1" target="_blank" rel="noopener">https://juejin.im/entry/5a448726f265da43062b10f1</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP+Nginxæ‰§è¡Œè¯·æ±‚çš„åŸç†</title>
      <link href="/2019/08/18/PHP-Nginx%E6%89%A7%E8%A1%8C%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8E%9F%E7%90%86/"/>
      <url>/2019/08/18/PHP-Nginx%E6%89%A7%E8%A1%8C%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><blockquote><p>å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ª Web ç«™ç‚¹ï¼ŒPHP å’Œ Nginx æ˜¯æ€ä¹ˆå»æ‰§è¡Œçš„å‘¢ï¼Ÿ</p><p>æµè§ˆå™¨å‘èµ·è¯·æ±‚ -&gt;  web_server(nginx)  åˆ†å‘å¤„ç†-&gt;  PHP æ‰§è¡Œä»£ç è¿”å›ç»“æœ</p></blockquote><h3 id="CGI"><a href="#CGI" class="headerlink" title="CGI"></a>CGI</h3><ul><li><p>CGI<br>CGI æ˜¯ Web æœåŠ¡å™¨è¿è¡Œå¤–éƒ¨ç¨‹åºçš„è§„èŒƒã€‚æ„æ€å°±æ˜¯é€šè¿‡ CGI å¯ä»¥ä¸ä½ çš„ç¨‹åºé€šä¿¡ï¼Œé€šè¿‡ CGI æ ‡å‡†æ ¼å¼ã€‚ä½ çš„ç¨‹åºå¯ä»¥å’Œæµè§ˆå™¨äº¤äº’ã€‚</p><blockquote><p>ç®€å•ç†è§£ CGI å°±æ˜¯ä¸€ä¸ªåè®®ï¼Œè§„å®šäº†ä¸€äº›ä¸œè¥¿è¯¥æ€ä¹ˆä¼ ï¼Œä½ çš„ç¨‹åºè¿™è¾¹æ€ä¹ˆæ¥å—å¤„ç†ç­‰è§„èŒƒã€‚</p></blockquote></li><li><p>PHP-CGI<br>PHP-CGI å°±æ˜¯ CGI åè®® PHP çš„ä¸€ä¸ªå®ç°ç‰ˆã€‚PHP-CGI ä¼šä¸ºæ¯ä¸ªè¯·æ±‚ fork ä¸€ä¸ªè¿›ç¨‹å¤„ç†ï¼Œå¤„ç†å®Œæˆåé€€å‡ºã€‚(è¿™ä¸ªæ¨¡å¼å«åš fork-and-execute)ã€‚è¿™æ ·çš„æ¨¡å¼ä¸ç¬¦åˆç°åœ¨åŠ¨ä¸åŠ¨å¤§è§„æ¨¡çš„æµé‡ï¼Œæ‰€ä»¥å·²é€€å‡ºå†å²èˆå°ã€‚</p></li><li><p>FastCGI<br>FastCGI æ˜¯ CGI çš„å‡çº§ç‰ˆï¼Œä»–ä¼šé¢„å…ˆå¯åŠ¨ä¸€ä¸ª master è¿›ç¨‹è¯»å–é…ç½®æ–‡ä»¶ï¼Œç„¶å fork å¤šä¸ª work è¿›ç¨‹ç­‰å¾…è¿æ¥ã€‚ç›‘å¬åˆ°è¯·æ±‚ï¼Œåˆ†é…ç»™ work è¿›ç¨‹åšå…·ä½“çš„å¤„ç†ã€‚è¿™æ ·å¤§å¤§æé«˜äº†ç¨‹åºçš„æ€§èƒ½ã€‚</p><blockquote><p>FastCGi ä¼šç®¡ç†è¿›ç¨‹ï¼Œå¤„ç†å®Œæˆåä¸ä¼šè½»æ˜“é”€æ¯ã€‚è€Œ CGI ä¼šä¸ºæ¯ä¸€ä¸ªè¯·æ±‚ï¼Œåˆ›å»ºè¿›ç¨‹ï¼Œé”€æ¯è¿›ç¨‹ã€‚</p></blockquote></li><li><p>PHPFPM<br>ä½œä¸ºä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ï¼Œå½“ç„¶è¦è·Ÿä¸Šæ½®æµã€‚å½“å‘ç° PHP-CGI æ€§èƒ½ä¸ä½³æ—¶ï¼Œåˆæ°å¥½å‡ºç°äº† FastCGI åè®®ã€‚æ‰€ä»¥ PHP å®ç°äº†ä¸€ä¸ª PHP ç‰ˆæœ¬çš„ FastCGIï¼Œåå­—å«åš PHPFPMï¼ˆFastCGI Process Managerï¼‰ã€‚ PHPFPM å¯åŠ¨æ—¶ä¼šå¼€å¯ ä¸€ä¸ª master è¿›ç¨‹å’Œè‹¥å¹²ä¸ª work è¿›ç¨‹ã€‚master è¿›ç¨‹ç›‘å¬è¯·æ±‚ï¼Œå¹¶è½¬å‘ç»™ work è¿›ç¨‹å¤„ç†ï¼Œæ¯ä¸€ä¸ª work è¿›ç¨‹éƒ½æœ‰ä¸€ä¸ª PHP è§£é‡Šå™¨ï¼Œä½ çš„ä»£ç åœ¨æ¯ä¸€ä¸ª work è¿›ç¨‹ä¸­éƒ½æœ‰ä¸€ä»½ï¼Œwork è¿›ç¨‹æ˜¯çœŸæ­£æ‰§è¡Œä»£ç çš„åœ°æ–¹ã€‚</p></li></ul><h3 id="ä¸€æ¬¡å®Œæ•´çš„æµç¨‹"><a href="#ä¸€æ¬¡å®Œæ•´çš„æµç¨‹" class="headerlink" title="ä¸€æ¬¡å®Œæ•´çš„æµç¨‹"></a>ä¸€æ¬¡å®Œæ•´çš„æµç¨‹</h3><p>é¦–å…ˆç”¨æˆ·è®¿é—® Web ç«™ç‚¹</p><p>åŸŸåè¿›è¡Œ DNS è§£æ</p><p>DNS è§£æå®Œæˆä¹‹åï¼Œå‘èµ· TCP åè®®çš„ä¸‰æ¬¡æ‚æ‰‹</p><p>HTTP è¯·æ±‚å¯¹åº” IP æœåŠ¡å™¨å’Œç«¯å£</p><p>Nginx ç›‘å¬åˆ°å¯¹åº”çš„ç«¯å£è¯·æ±‚ä¹‹å</p><p>Nginx ä¼šå¯¹ URL åšä¸€ä¸ª Location çš„æ­£åˆ™åŒ¹é…</p><p>å¦‚æœæ˜¯é™æ€èµ„æºåˆ™è¿”å›æ–‡ä»¶ï¼ŒNginx å“åº” HTTP è¯·æ±‚</p><p>å¦‚æœæ˜¯åŠ¨æ€èµ„æºï¼Œé€šè¿‡æ­£åˆ™åŒ¹é…åˆ°è¯·æ±‚ PHP è„šæœ¬ï¼Œé‚£ä¹ˆä»–ä¼šé€šè¿‡ Nginx çš„æ¨¡å— ngx_http_fastcgi_module æŠŠè¯·æ±‚åˆ†å‘ç»™ PHPFPM å¤„ç†ï¼Œä¹Ÿå°±æ˜¯ Nginx é…ç½®æ–‡ä»¶å½“ä¸­çš„ fastcgi_pass=127.0.0.1:9000 è¿™ç§å±äºç½‘ç»œæ¨¡å¼</p><p>PHPFPM master è¿›ç¨‹ç›‘å¬åˆ°è¯·æ±‚ä¹‹åï¼Œåˆ†é…ç»™ work å¤„ç†ï¼ˆæ¯ä¸€ä¸ª work è¿›ç¨‹ä¸­éƒ½æœ‰ä¸€ä¸ª PHP è§£é‡Šå™¨ï¼‰ï¼ŒPHPFPM åœ¨å¯åŠ¨çš„æ—¶å€™å·²ç» work è¿›ç¨‹å·²ç»åŠ è½½äº†é…ç½®ï¼ŒåŠ è½½äº†ä½ å†™çš„ä»£ç ã€‚æ‰€ä»¥è¯´ work è¿›ç¨‹æ¥æ”¶åˆ°è¯·æ±‚åç«‹é©¬æ‰§è¡Œï¼Œç„¶å work è¿›ç¨‹æ‰§è¡Œè¿”å›çš„ç»“æœç»™ Nginxï¼ŒNginx å“åº” HTTP è¯·æ±‚ã€‚</p><h3 id="ngx-http-fastcgi-module-æ¨¡å—"><a href="#ngx-http-fastcgi-module-æ¨¡å—" class="headerlink" title="ngx_http_fastcgi_module æ¨¡å—"></a>ngx_http_fastcgi_module æ¨¡å—</h3><p>åœ¨æµè§ˆå™¨è¯·æ±‚ web_server æ˜¯ HTTP åè®® æˆ–è€… HTTPS åè®®ï¼Œä½†æ˜¯ PHPFPM ä¸æ‡‚æ€ä¹ˆåŠäº†ï¼Ÿè¿™é‡Œ Nginx æä¾›äº†ä¸€ä¸ª ngx_http_fastcgi_module ï¼Œngx_http_fastcgi_module æŠŠ HTTP æˆ–è€… HTTPS è¯·æ±‚ æ˜ å°„æˆ FastCGI è¯·æ±‚ã€‚è¿™æ · PHP ç¨‹åºå°±èƒ½å’Œç”¨æˆ·äº’åŠ¨äº†ã€‚</p><h3 id="PHP-å¹³æ»‘é‡å¯åŸç†"><a href="#PHP-å¹³æ»‘é‡å¯åŸç†" class="headerlink" title="PHP å¹³æ»‘é‡å¯åŸç†"></a>PHP å¹³æ»‘é‡å¯åŸç†</h3><p>æ¯æ¬¡ä¿®æ”¹å®Œ PHP.ini é…ç½®å¹¶é‡å¯åï¼Œä¼šå¯åŠ¨æ–°çš„ worker è¿›ç¨‹åŠ è½½æ–°çš„é…ç½®ï¼Œè€Œä¹‹å‰å·²ç»å­˜åœ¨çš„è¿›ç¨‹ä¼šåœ¨å·¥ä½œå®Œæˆä¹‹åé”€æ¯ï¼Œå› æ­¤å®ç°å¹³æ»‘é‡å¯</p><h3 id="è¿›ç¨‹ä¸çº¿ç¨‹"><a href="#è¿›ç¨‹ä¸çº¿ç¨‹" class="headerlink" title="è¿›ç¨‹ä¸çº¿ç¨‹"></a>è¿›ç¨‹ä¸çº¿ç¨‹</h3><p>è¿›ç¨‹ï¼šæ˜¯å¹¶å‘æ‰§è¡Œçš„ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åˆ†é…å’Œç®¡ç†èµ„æºçš„åŸºæœ¬å•ä½ï¼Œæ˜¯ä¸€ä¸ªåŠ¨æ€æ¦‚å¿µï¼Œç«äº‰è®¡ç®—æœºç³»ç»Ÿèµ„æºçš„åŸºæœ¬å•ä½ã€‚</p><p>çº¿ç¨‹ï¼šæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œæ˜¯è¿›ç¨‹å†…ç§‘è°ƒåº¦å®ä½“ã€‚æ¯”è¿›ç¨‹æ›´å°çš„ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ã€‚çº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»é‡çº§è¿›ç¨‹ã€‚ä¸€ä¸ªç¨‹åºè‡³å°‘ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ã€‚</p><p><strong>è¿›ç¨‹çº¿ç¨‹çš„åŒºåˆ«ï¼š</strong></p><ul><li>åœ°å€ç©ºé—´ï¼šåŒä¸€è¿›ç¨‹çš„çº¿ç¨‹å…±äº«æœ¬è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œè€Œè¿›ç¨‹ä¹‹é—´åˆ™æ˜¯ç‹¬ç«‹çš„åœ°å€ç©ºé—´ã€‚</li><li>èµ„æºæ‹¥æœ‰ï¼šåŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«æœ¬è¿›ç¨‹çš„èµ„æºå¦‚å†…å­˜ã€I/Oã€cpuç­‰ï¼Œä½†æ˜¯è¿›ç¨‹ä¹‹é—´çš„èµ„æºæ˜¯ç‹¬ç«‹çš„ã€‚</li></ul><p>ã€€ã€€ã€€ã€€ã€€ä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹äº§ç”Ÿå½±å“ï¼Œä½†æ˜¯ä¸€ä¸ªçº¿ç¨‹å´©æºƒæ•´ä¸ªè¿›ç¨‹éƒ½æ­»æ‰ã€‚æ‰€ä»¥å¤šè¿›ç¨‹è¦æ¯”å¤šçº¿ç¨‹å¥å£®ã€‚</p><p>ã€€ã€€ã€€ã€€ã€€è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œæ¶ˆè€—çš„èµ„æºå¤§ï¼Œæ•ˆç‡é«˜ã€‚æ‰€ä»¥æ¶‰åŠåˆ°é¢‘ç¹çš„åˆ‡æ¢æ—¶ï¼Œä½¿ç”¨çº¿ç¨‹è¦å¥½äºè¿›ç¨‹ã€‚åŒæ ·å¦‚æœè¦æ±‚åŒæ—¶è¿›è¡Œå¹¶ä¸”åˆè¦å…±äº«æŸäº›å˜é‡çš„å¹¶å‘æ“ä½œï¼Œåªèƒ½ç”¨çº¿ç¨‹ä¸èƒ½ç”¨è¿›ç¨‹</p><ul><li>æ‰§è¡Œè¿‡ç¨‹ï¼šæ¯ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ç¨‹æœ‰ä¸€ä¸ªç¨‹åºè¿è¡Œçš„å…¥å£ã€é¡ºåºæ‰§è¡Œåºåˆ—å’Œç¨‹åºå…¥å£ã€‚ä½†æ˜¯çº¿ç¨‹ä¸èƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œå¿…é¡»ä¾å­˜åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œç”±åº”ç”¨ç¨‹åºæä¾›å¤šä¸ªçº¿ç¨‹æ‰§è¡Œæ§åˆ¶ã€‚</li><li>çº¿ç¨‹æ˜¯å¤„ç†å™¨è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œä½†æ˜¯è¿›ç¨‹ä¸æ˜¯ã€‚</li><li>ä¸¤è€…å‡å¯å¹¶å‘æ‰§è¡Œã€‚</li></ul><p><strong>ä¼˜ç¼ºç‚¹ï¼š</strong></p><p>ã€€ã€€çº¿ç¨‹æ‰§è¡Œå¼€é”€å°ï¼Œä½†æ˜¯ä¸åˆ©äºèµ„æºçš„ç®¡ç†å’Œä¿æŠ¤ã€‚çº¿ç¨‹é€‚åˆåœ¨SMPæœºå™¨ï¼ˆåŒCPUç³»ç»Ÿï¼‰ä¸Šè¿è¡Œã€‚</p><p>ã€€ã€€è¿›ç¨‹æ‰§è¡Œå¼€é”€å¤§ï¼Œä½†æ˜¯èƒ½å¤Ÿå¾ˆå¥½çš„è¿›è¡Œèµ„æºç®¡ç†å’Œä¿æŠ¤ã€‚è¿›ç¨‹å¯ä»¥è·¨æœºå™¨å‰ç§»ã€‚</p><p>  <strong>ä½•æ—¶ä½¿ç”¨å¤šè¿›ç¨‹ï¼Œä½•æ—¶ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ</strong></p><p>å¯¹èµ„æºçš„ç®¡ç†å’Œä¿æŠ¤è¦æ±‚é«˜ï¼Œä¸é™åˆ¶å¼€é”€å’Œæ•ˆç‡æ—¶ï¼Œä½¿ç”¨å¤šè¿›ç¨‹ã€‚</p><p>è¦æ±‚æ•ˆç‡é«˜ï¼Œé¢‘ç¹åˆ‡æ¢æ—¶ï¼Œèµ„æºçš„ä¿æŠ¤ç®¡ç†è¦æ±‚ä¸æ˜¯å¾ˆé«˜æ—¶ï¼Œä½¿ç”¨å¤šçº¿ç¨‹ã€‚</p><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="https://learnku.com/articles/32318#reply104413" target="_blank" rel="noopener">https://learnku.com/articles/32318#reply104413</a></p><p><a href="https://www.cnblogs.com/zhuzhu2016/p/5804875.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhuzhu2016/p/5804875.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker</title>
      <link href="/2019/08/17/Dokcer/"/>
      <url>/2019/08/17/Dokcer/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>2010 å¹´ï¼Œå‡ ä¸ªæ IT çš„å¹´è½»äººï¼Œåœ¨ç¾å›½æ—§é‡‘å±±æˆç«‹äº†ä¸€å®¶åå« â€œdotCloudâ€ çš„å…¬å¸ã€‚</p><p>è¿™å®¶å…¬å¸ä¸»è¦æä¾›åŸºäº PaaS çš„äº‘è®¡ç®—æŠ€æœ¯æœåŠ¡ã€‚å…·ä½“æ¥è¯´ï¼Œæ˜¯å’Œ LXC æœ‰å…³çš„å®¹å™¨æŠ€æœ¯ã€‚</p><p>LXC ä¹Ÿå°±æ˜¯ Linux å®¹å™¨è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚</p><p>åæ¥ï¼ŒdotCloud å…¬å¸å°†è‡ªå·±çš„å®¹å™¨æŠ€æœ¯è¿›è¡Œäº†ç®€åŒ–å’Œæ ‡å‡†åŒ–ï¼Œå¹¶å‘½åä¸ºâ€”â€”<strong>Docker</strong>ã€‚</p><p>Docker æŠ€æœ¯è¯ç”Ÿä¹‹åï¼Œå¹¶æ²¡æœ‰å¼•èµ·è¡Œä¸šçš„å…³æ³¨ã€‚è€Œ dotCloud å…¬å¸ï¼Œä½œä¸ºä¸€å®¶å°å‹åˆ›ä¸šä¼ä¸šï¼Œåœ¨æ¿€çƒˆçš„ç«äº‰ä¹‹ä¸‹ï¼Œä¹Ÿæ­¥å±¥ç»´è‰°ã€‚</p><p>æ­£å½“ä»–ä»¬å¿«è¦åšæŒä¸ä¸‹å»çš„æ—¶å€™ï¼Œè„‘å­é‡Œè¹¦å‡ºäº† â€œå¼€æºâ€ çš„æƒ³æ³•ã€‚</p><p>ä»€ä¹ˆæ˜¯ â€œå¼€æºâ€ ï¼Ÿå¼€æºï¼Œå°±æ˜¯å¼€æ”¾æºä»£ç ã€‚ä¹Ÿå°±æ˜¯å°†åŸæ¥å†…éƒ¨ä¿å¯†çš„ç¨‹åºæºä»£ç å¼€æ”¾ç»™æ‰€æœ‰äººï¼Œç„¶åè®©å¤§å®¶ä¸€èµ·å‚ä¸è¿›æ¥ï¼Œè´¡çŒ®ä»£ç å’Œæ„è§ã€‚</p><p>æœ‰çš„è½¯ä»¶æ˜¯ä¸€å¼€å§‹å°±å¼€æºçš„ã€‚ä¹Ÿæœ‰çš„è½¯ä»¶ï¼Œæ˜¯æ··ä¸ä¸‹å»ï¼Œåˆ›é€ è€…åˆä¸æƒ³æ”¾å¼ƒï¼Œæ‰€ä»¥é€‰æ‹©å¼€æºã€‚è‡ªå·±å…»ä¸æ´»ï¼Œå°±åƒâ€œç™¾å®¶é¥­â€å˜›ã€‚</p><p>2013 å¹´ 3 æœˆï¼ŒdotCloud å…¬å¸çš„åˆ›å§‹äººä¹‹ä¸€ï¼ŒDocker ä¹‹çˆ¶ï¼Œ28 å²çš„ *<em>Solomonâ€‚Hykes *</em>æ­£å¼å†³å®šï¼Œå°† Docker é¡¹ç›®å¼€æºã€‚</p><p>ä¸å¼€åˆ™å·²ï¼Œä¸€å¼€æƒŠäººã€‚</p><p>è¶Šæ¥è¶Šå¤šçš„ IT å·¥ç¨‹å¸ˆå‘ç°äº† Docker çš„ä¼˜ç‚¹ï¼Œç„¶åèœ‚æ‹¥è€Œè‡³ï¼ŒåŠ å…¥ Docker å¼€æºç¤¾åŒºã€‚</p><p>Docker çš„äººæ°”è¿…é€Ÿæ”€å‡ï¼Œé€Ÿåº¦ä¹‹å¿«ï¼Œä»¤äººç ç›®ç»“èˆŒã€‚</p><p>å¼€æºå½“æœˆï¼ŒDocker 0.1 ç‰ˆæœ¬å‘å¸ƒã€‚æ­¤åçš„æ¯ä¸€ä¸ªæœˆï¼ŒDocker éƒ½ä¼šå‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ã€‚åˆ° 2014 å¹´ 6 æœˆ 9 æ—¥ï¼ŒDocker 1.0 ç‰ˆæœ¬æ­£å¼å‘å¸ƒã€‚</p><p>æ­¤æ—¶çš„ Dockerï¼Œå·²ç»æˆä¸ºè¡Œä¸šé‡Œäººæ°”æœ€ç«çˆ†çš„å¼€æºæŠ€æœ¯ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚ç”šè‡³åƒ Googleã€å¾®è½¯ã€Amazonã€VMware è¿™æ ·çš„å·¨å¤´ï¼Œéƒ½å¯¹å®ƒé’çæœ‰åŠ ï¼Œè¡¨ç¤ºå°†å…¨åŠ›æ”¯æŒã€‚</p><p>Docker ç«äº†ä¹‹åï¼ŒdotCloud å…¬å¸å¹²è„†æŠŠå…¬å¸åå­—ä¹Ÿæ”¹æˆäº† Docker Inc. ã€‚</p><p>Docker å’Œå®¹å™¨æŠ€æœ¯ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆç«çˆ†ï¼Ÿè¯´ç™½äº†ï¼Œå°±æ˜¯å› ä¸ºå®ƒâ€œè½»â€ã€‚</p><p>åœ¨å®¹å™¨æŠ€æœ¯ä¹‹å‰ï¼Œä¸šç•Œçš„ç½‘çº¢æ˜¯<strong>è™šæ‹Ÿæœº</strong>ã€‚è™šæ‹ŸæœºæŠ€æœ¯çš„ä»£è¡¨ï¼Œæ˜¯ VMWare å’Œ OpenStackã€‚</p><p>ç›¸ä¿¡å¾ˆå¤šäººéƒ½ç”¨è¿‡è™šæ‹Ÿæœºã€‚è™šæ‹Ÿæœºï¼Œå°±æ˜¯åœ¨ä½ çš„æ“ä½œç³»ç»Ÿé‡Œé¢ï¼Œè£…ä¸€ä¸ªè½¯ä»¶ï¼Œç„¶åé€šè¿‡è¿™ä¸ªè½¯ä»¶ï¼Œå†æ¨¡æ‹Ÿä¸€å°ç”šè‡³å¤šå°â€œå­ç”µè„‘â€å‡ºæ¥ã€‚</p><p>åœ¨â€œå­ç”µè„‘â€é‡Œï¼Œä½ å¯ä»¥å’Œæ­£å¸¸ç”µè„‘ä¸€æ ·è¿è¡Œç¨‹åºï¼Œä¾‹å¦‚å¼€ QQã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥å˜å‡ºå¥½å‡ ä¸ªâ€œå­ç”µè„‘â€ï¼Œé‡Œé¢éƒ½å¼€ä¸Š QQã€‚â€œå­ç”µè„‘â€å’Œâ€œå­ç”µè„‘â€ä¹‹é—´ï¼Œæ˜¯<strong>ç›¸äº’éš”ç¦»</strong>çš„ï¼Œäº’ä¸å½±å“ã€‚</p><p>è™šæ‹Ÿæœºå±äºè™šæ‹ŸåŒ–æŠ€æœ¯ã€‚è€Œ Docker è¿™æ ·çš„å®¹å™¨æŠ€æœ¯ï¼Œä¹Ÿæ˜¯è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå±äº<strong>è½»é‡çº§çš„è™šæ‹ŸåŒ–</strong>ã€‚</p><p>è™šæ‹Ÿæœºè™½ç„¶å¯ä»¥éš”ç¦»å‡ºå¾ˆå¤šâ€œå­ç”µè„‘â€ï¼Œä½†å ç”¨ç©ºé—´æ›´å¤§ï¼Œå¯åŠ¨æ›´æ…¢ï¼Œè™šæ‹Ÿæœºè½¯ä»¶å¯èƒ½è¿˜è¦èŠ±é’±ï¼ˆä¾‹å¦‚ VMWare ï¼‰ã€‚</p><p>è€Œå®¹å™¨æŠ€æœ¯æ°å¥½æ²¡æœ‰è¿™äº›ç¼ºç‚¹ã€‚å®ƒä¸éœ€è¦è™šæ‹Ÿå‡ºæ•´ä¸ªæ“ä½œç³»ç»Ÿï¼Œåªéœ€è¦è™šæ‹Ÿä¸€ä¸ªå°è§„æ¨¡çš„ç¯å¢ƒï¼ˆç±»ä¼¼â€œæ²™ç®±â€ï¼‰ã€‚</p><p>å®ƒå¯åŠ¨æ—¶é—´å¾ˆå¿«ï¼Œå‡ ç§’é’Ÿå°±èƒ½å®Œæˆã€‚è€Œä¸”ï¼Œå®ƒå¯¹èµ„æºçš„åˆ©ç”¨ç‡å¾ˆé«˜ï¼ˆä¸€å°ä¸»æœºå¯ä»¥åŒæ—¶è¿è¡Œå‡ åƒä¸ª Docker å®¹å™¨ï¼‰ã€‚æ­¤å¤–ï¼Œå®ƒå çš„ç©ºé—´å¾ˆå°ï¼Œè™šæ‹Ÿæœºä¸€èˆ¬è¦å‡  GB åˆ°å‡ å GB çš„ç©ºé—´ï¼Œè€Œå®¹å™¨åªéœ€è¦ MB çº§ç”šè‡³ KB çº§ã€‚</p><p><img src="https://i.loli.net/2020/01/15/cz6OW7Kum9NXCZH.png" alt="2020-01-15_12-03.png"></p><p>æ­£å› ä¸ºå¦‚æ­¤ï¼Œå®¹å™¨æŠ€æœ¯å—åˆ°äº†çƒ­çƒˆçš„æ¬¢è¿å’Œè¿½æ§ï¼Œå‘å±•è¿…é€Ÿã€‚</p><p>Docker æŠ€æœ¯çš„ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li><strong>é•œåƒï¼ˆImageï¼‰</strong></li><li><strong>å®¹å™¨ï¼ˆContainerï¼‰</strong></li><li><strong>ä»“åº“ï¼ˆRepositoryï¼‰</strong></li></ul><p>å…¶å®åœ¨ç®€å•ç‚¹æ¥è¯´ Docker çš„å¥½å¤„ï¼Œâ€œåœ¨æˆ‘çš„æœºå™¨ä¸Šå¯æ­£å¸¸å·¥ä½œâ€çš„é—®é¢˜ã€‚ è¿ç»´äººå‘˜åˆ©ç”¨ Docker å¯ä»¥åœ¨éš”ç¦»å®¹å™¨ä¸­å¹¶è¡Œè¿è¡Œå’Œç®¡ç†åº”ç”¨ï¼Œè·å¾—æ›´å¥½çš„è®¡ç®—å¯†åº¦ã€‚ ä¼ä¸šåˆ©ç”¨ Docker å¯ä»¥æ„å»ºæ•æ·çš„è½¯ä»¶äº¤ä»˜ç®¡é“ï¼Œä»¥æ›´å¿«çš„é€Ÿåº¦ã€æ›´é«˜çš„å®‰å…¨æ€§å’Œå¯é çš„ä¿¡èª‰ä¸º Linux å’Œ Windows Server åº”ç”¨å‘å¸ƒæ–°åŠŸèƒ½ã€‚</p><p>æ€»ç»“ä¸ºä¸€å¥è¯ï¼šç®€å•ï¼Œå¿«æ·ï¼Œæ–¹ä¾¿ï¼Œä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œã€‚è§£å†³äº†æˆ‘ä»¬ç¯å¢ƒçš„é—®é¢˜ï¼ˆæœ¬åœ°å¼€å‘å¥½å¥½çš„ï¼Œä¸Šçº¿åˆä¹±ä¸ƒå…«ç³Ÿçš„äº†ï¼‰</p><p><strong>è½¬æŠ˜ç‚¹</strong>ï¼š</p><p>å°±åœ¨ Docker å®¹å™¨æŠ€æœ¯è¢«ç‚’å¾—çƒ­ç«æœå¤©ä¹‹æ—¶ï¼Œå¤§å®¶å‘ç°ï¼Œå¦‚æœæƒ³è¦å°† Docker åº”ç”¨äºå…·ä½“çš„ä¸šåŠ¡å®ç°ï¼Œæ˜¯å­˜åœ¨å›°éš¾çš„â€”â€”ç¼–æ’ã€ç®¡ç†å’Œè°ƒåº¦ç­‰å„ä¸ªæ–¹é¢ï¼Œéƒ½ä¸å®¹æ˜“ã€‚äºæ˜¯ï¼Œäººä»¬è¿«åˆ‡éœ€è¦ä¸€å¥—ç®¡ç†ç³»ç»Ÿï¼Œå¯¹ Docker åŠå®¹å™¨è¿›è¡Œæ›´é«˜çº§æ›´çµæ´»çš„ç®¡ç†ã€‚K8sï¼Œè¯ç”Ÿäº†ï¼</p><h3 id="ç†Ÿæ‚‰å‡ ä¸ªå‘½ä»¤"><a href="#ç†Ÿæ‚‰å‡ ä¸ªå‘½ä»¤" class="headerlink" title="ç†Ÿæ‚‰å‡ ä¸ªå‘½ä»¤"></a>ç†Ÿæ‚‰å‡ ä¸ªå‘½ä»¤</h3><table><thead><tr><th align="center">å‘½ä»¤</th><th align="center">è§£é‡Š</th></tr></thead><tbody><tr><td align="center">systemctl start docker</td><td align="center">å¯åŠ¨ docker</td></tr><tr><td align="center">systemctl restart docker</td><td align="center">é‡å¯ docker</td></tr><tr><td align="center">docker images</td><td align="center">æŸ¥çœ‹æ‰€æœ‰é•œåƒ</td></tr><tr><td align="center">docker pull é•œåƒ</td><td align="center">åœ¨ dockerhub å½“ä¸­æ‹‰å–é•œåƒ</td></tr><tr><td align="center">docker rmi é•œåƒ</td><td align="center">åˆ é™¤é•œåƒ</td></tr><tr><td align="center">docker ps</td><td align="center">æŸ¥çœ‹æ‰€æœ‰è¿è¡Œå®¹å™¨</td></tr><tr><td align="center">docker ps -a</td><td align="center">æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</td></tr><tr><td align="center">docker exec -it å®¹å™¨ bash</td><td align="center">è¿›å…¥å®¹å™¨</td></tr><tr><td align="center">docker rm å®¹å™¨</td><td align="center">åˆ é™¤å®¹å™¨ï¼Œè¦å…ˆå…³é—­å®¹å™¨æ‰èƒ½åˆ </td></tr><tr><td align="center">docker stop å®¹å™¨</td><td align="center">åœæ­¢å®¹å™¨</td></tr><tr><td align="center">docker start å®¹å™¨</td><td align="center">å¯åŠ¨å®¹å™¨</td></tr><tr><td align="center">docker restart å®¹å™¨</td><td align="center">é‡å¯å®¹å™¨</td></tr><tr><td align="center">docker cp å®¿ä¸»æœºç›®å½• å®¹å™¨åç§°:/å®¹å™¨é‡Œæ–‡ä»¶</td><td align="center">å¤åˆ¶å®¿ä¸»æœºæ–‡ä»¶ï¼Œåˆ°å®¹å™¨</td></tr><tr><td align="center">docker cp å®¹å™¨åç§°:/å®¹å™¨æ–‡ä»¶  å®¿ä¸»æœºç›®å½•</td><td align="center">å¤åˆ¶å®¹å™¨æ–‡ä»¶ï¼Œåˆ°å®¿ä¸»æœº</td></tr><tr><td align="center">docker -v æœ¬åœ°æ–‡ä»¶:/å®¹å™¨æ–‡ä»¶</td><td align="center">æ˜ å°„æ–‡ä»¶ï¼Œå®¿ä¸»æœºå®¹å™¨æ–‡ä»¶åŒæ­¥</td></tr></tbody></table><h3 id="å®‰è£…-Docker-ce"><a href="#å®‰è£…-Docker-ce" class="headerlink" title="å®‰è£… Docker-ce"></a>å®‰è£… Docker-ce</h3><h4 id="1ã€ubuntu"><a href="#1ã€ubuntu" class="headerlink" title="1ã€ubuntu"></a>1ã€ubuntu</h4><pre><code>1ã€è‹¥å®‰è£…è¿‡å…ˆåˆ é™¤ï¼Œè‹¥æ— å¿½ç•¥sudo apt-get remove docker docker-engine docker.io2ã€å®‰è£…æ‰©å±•sudo apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common3ã€ä¸­ç§‘å¤§æº GPG å¯†é’¥curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add -4ã€æ›´æ–°apt update install5ã€å®‰è£…apt install docker-ce</code></pre><h4 id="2ã€centos"><a href="#2ã€centos" class="headerlink" title="2ã€centos"></a>2ã€centos</h4><pre><code>1ã€è‹¥å®‰è£…è¿‡å…ˆåˆ é™¤ï¼Œè‹¥æ— å¿½ç•¥sudo yum remove docker docker-common docker-selinux docker-engine2ã€å®‰è£…æ‰©å±•sudo yum install -y yum-utils device-mapper-persistent-data lvm23ã€ä¸‹è½½ repo æ–‡ä»¶wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.huaweicloud.com/docker-ce/linux/centos/docker-ce.repo4ã€è½¯ä»¶ä»“åº“åœ°å€æ›¿æ¢ä¸ºï¼šsudo sed -i &#39;s+download.docker.com+mirrors.huaweicloud.com/docker-ce+&#39; /etc/yum.repos.d/docker-ce.repo5ã€æ›´æ–°ç´¢å¼•æ–‡ä»¶å¹¶å®‰è£…sudo yum makecache fastsudo yum install docker-ce</code></pre><h4 id="3ã€dockerhub-å›½å†…æº"><a href="#3ã€dockerhub-å›½å†…æº" class="headerlink" title="3ã€dockerhub å›½å†…æº"></a>3ã€dockerhub å›½å†…æº</h4><pre><code>1ã€ç¼–è¾‘é…ç½®æ–‡ä»¶vim /etc/docker/daemon.json2ã€æ·»åŠ ä¸­ç§‘å¤§æº{  &quot;registry-mirrors&quot;: [&quot;https://docker.mirrors.ustc.edu.cn/&quot;]}# å¦‚æœ etc/docker ä¸‹ä¸å­˜åœ¨ daemon.jsonï¼Œæ–°å»ºä¸€ä¸ªå³å¯3ã€é‡å¯ dockersystemctl restart docker</code></pre><h3 id="MySQL-å®‰è£…"><a href="#MySQL-å®‰è£…" class="headerlink" title="MySQL å®‰è£…"></a>MySQL å®‰è£…</h3><h4 id="1ã€ä»-Dockerhub-æ‹‰å–-MySQL-é•œåƒ"><a href="#1ã€ä»-Dockerhub-æ‹‰å–-MySQL-é•œåƒ" class="headerlink" title="1ã€ä» Dockerhub æ‹‰å– MySQL é•œåƒ"></a>1ã€ä» Dockerhub æ‹‰å– MySQL é•œåƒ</h4><pre><code>docker pull mysql</code></pre><h4 id="2ã€åˆ›å»ºå®¹å™¨"><a href="#2ã€åˆ›å»ºå®¹å™¨" class="headerlink" title="2ã€åˆ›å»ºå®¹å™¨"></a>2ã€åˆ›å»ºå®¹å™¨</h4><pre><code>docker run -p 3306:3306 --name mysql -v /xxx:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=root -d --privileged=true mysql</code></pre><table><thead><tr><th align="center">å‘½ä»¤</th><th align="center">å‘½ä»¤è¯¦è§£</th></tr></thead><tbody><tr><td align="center">run</td><td align="center">åˆ›å»ºä¸€ä¸ªå®¹å™¨</td></tr><tr><td align="center">â€“name</td><td align="center">æŒ‡å®šå®¹å™¨åç§°ï¼Œä¸ºç©º docker è‡ªåŠ¨åˆ†é…åç§°</td></tr><tr><td align="center">-v</td><td align="center">æ˜ å°„æ–‡ä»¶ï¼Œå®¿ä¸»æœºå®¹å™¨æ–‡ä»¶åŒæ­¥</td></tr><tr><td align="center">-p</td><td align="center">ç«¯å£æ˜ å°„ï¼Œå°†å®¹å™¨çš„ 3306 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 3306 ç«¯å£</td></tr><tr><td align="center">-e</td><td align="center">è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåˆå§‹åŒ– Mysql å¯†ç </td></tr><tr><td align="center">-d</td><td align="center">åå°è¿è¡Œå®¹å™¨</td></tr><tr><td align="center">â€“privileged=true</td><td align="center">å¯èƒ½ä¼šç¢°åˆ°æƒé™é—®é¢˜ï¼Œéœ€è¦åŠ å‚æ•°</td></tr></tbody></table><h4 id="3ã€åŸºæœ¬é…ç½®"><a href="#3ã€åŸºæœ¬é…ç½®" class="headerlink" title="3ã€åŸºæœ¬é…ç½®"></a>3ã€åŸºæœ¬é…ç½®</h4><pre><code># è¿›å…¥å®¹å™¨docker exec -it mysql bash # æ›´æ¢è½¯ä»¶æºï¼Œä¸­ç§‘å¤§æºsed -i &#39;s/deb.debian.org/mirrors.ustc.edu.cn/g&#39; /etc/apt/sources.listapt update# ä¿®æ”¹å¯†ç è®¤è¯ mysql 8 åŠ å¯†æ–¹å¼æ”¹å˜äº†mysql&gt;ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;root&#39;;mysql&gt;flush privileges;# å¦‚æœéœ€è¦åˆ›å»ºä¸€ä¸ªå¸å·ï¼Œå¹¶ä¸”èµ‹äºˆæƒé™ï¼Œä¸éœ€è¦å¿½ç•¥mysql&gt;create user &#39;ç”¨æˆ·å&#39;@&#39;è®¿é—®ä¸»æœº&#39; identified by &#39;å¯†ç &#39;;mysql&gt;grant æƒé™ on *.* to &#39;å¸å·&#39;@&#39;%&#39; WITH GRANT OPTION;# ä¿®æ”¹ /etc/mysql/conf.d ä¸‹é¢çš„ mysql.cnf æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œæ²¡æœ‰å°±åˆ›å»º mysql.cnf[mysqld]port=3306default_authentication_plugin=mysql_native_password# é€€å‡ºå®¹å™¨ï¼Œé‡å¯å®¹å™¨systemctl restart mysql</code></pre><h3 id="PHP-FPM-å®‰è£…"><a href="#PHP-FPM-å®‰è£…" class="headerlink" title="PHP-FPM å®‰è£…"></a>PHP-FPM å®‰è£…</h3><h4 id="1ã€ä»-Dockerhub-æ‹‰å–-PHP-é•œåƒ"><a href="#1ã€ä»-Dockerhub-æ‹‰å–-PHP-é•œåƒ" class="headerlink" title="1ã€ä» Dockerhub æ‹‰å– PHP é•œåƒ"></a>1ã€ä» Dockerhub æ‹‰å– PHP é•œåƒ</h4><pre><code>docker pull php:fpm</code></pre><h4 id="2ã€åˆ›å»ºå®¹å™¨-1"><a href="#2ã€åˆ›å»ºå®¹å™¨-1" class="headerlink" title="2ã€åˆ›å»ºå®¹å™¨"></a>2ã€åˆ›å»ºå®¹å™¨</h4><pre><code># åˆ›å»ºå®¹å™¨å¹¶ä¸”å…³è” MySQLdocker run --name php-fpm -p 9000:9000 --link mysql -v /å®¿ä¸»æœºå­˜æ”¾ä»£ç çš„ç›®å½•:/var/www/html -it -d php:fpm</code></pre><table><thead><tr><th align="center">å‘½ä»¤</th><th align="center">å‘½ä»¤è¯¦è§£</th></tr></thead><tbody><tr><td align="center">run</td><td align="center">åˆ›å»ºä¸€ä¸ªå®¹å™¨</td></tr><tr><td align="center">â€“name</td><td align="center">æŒ‡å®šå®¹å™¨åç§°ï¼Œä¸ºç©º docker è‡ªåŠ¨åˆ†é…åç§°</td></tr><tr><td align="center">-p</td><td align="center">ç«¯å£æ˜ å°„ï¼Œå°†å®¹å™¨çš„ 9000 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 9000 ç«¯å£</td></tr><tr><td align="center">â€“link</td><td align="center">è¿æ¥ Mysql å®¹å™¨ï¼Œå¯¹åº”æˆ‘ä»¬åˆ›å»ºçš„å®¹å™¨åç§°</td></tr><tr><td align="center">-v</td><td align="center">æ˜ å°„æ–‡ä»¶ï¼Œå®¿ä¸»æœºå®¹å™¨æ–‡ä»¶åŒæ­¥</td></tr><tr><td align="center">-it</td><td align="center">è¡¨ç¤ºè®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥æ‰“å¼€,å¹¶ä¸”åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯</td></tr><tr><td align="center">-d</td><td align="center">åå°è¿è¡Œå®¹å™¨</td></tr></tbody></table><h4 id="3ã€åŸºæœ¬é…ç½®-1"><a href="#3ã€åŸºæœ¬é…ç½®-1" class="headerlink" title="3ã€åŸºæœ¬é…ç½®"></a>3ã€åŸºæœ¬é…ç½®</h4><pre><code># è¿›å…¥å®¹å™¨docker exec -it php-fpm bash# ä¸­ç§‘å¤§æº,ç„¶åä¸‹è½½éœ€è¦çš„è½¯ä»¶sed -i &#39;s/deb.debian.org/mirrors.ustc.edu.cn/g&#39; /etc/apt/sources.listapt update# Composer å®‰è£…1ã€curl -sS https://getcomposer.org/installer | php2ã€mv composer.phar /usr/local/bin/composer3ã€composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/# ä¿®æ”¹ /usr/local/etc/php-fpm.conf include è·¯å¾„include=/usr/local/etc/php-fpm.d/*.conf# å¼€å¯æ‰©å±•å‘½ä»¤/usr/local/bin/docker-php-ext-install mysqli# å¸¸è§çš„ä¸€äº›æ‰©å±•å¯ä»¥è¿™æ ·å®‰è£…äº†ï¼Œæ²¡æœ‰çš„å°±å¾—è‡ªå·±ä¸‹è½½å®‰è£…äº†ã€‚ä¸‹è½½æ‰©å±•åˆ° /usr/src/php/ext ç›®å½•å½“ä¸­,æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰ /usr/src/php/ext åˆ«æ…Œæ‰§è¡Œä¸€ä¸‹ /usr/local/bin/docker-php-ext-install ä¸€ä¸ªæ²¡æœ‰çš„æ‰©å±•ï¼Œç„¶åæ–‡ä»¶å¤¹å°±ä¼šæœ‰äº†ï¼Œæ¯æ¬¡å®‰è£…å¥½æ‰©å±•ä¹‹å php è‡ªåŠ¨åˆ é™¤ï¼# å…³é—­æ‰©å±•å‘½ä»¤docker-php-ext-enable mysqli# php.iniè¿™ä¸ªé•œåƒç»™æˆ‘ä»¬æ‰“åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œåˆ†å¼€å‘å’Œç”Ÿäº§äºŒä¸ªé…ç½®æ–‡ä»¶ï¼Œåœ¨ /usr/local/etc/php å½“ä¸­# é‡å¯ dockersystemctl restart docker</code></pre><h3 id="Nginx-å®‰è£…"><a href="#Nginx-å®‰è£…" class="headerlink" title="Nginx å®‰è£…"></a>Nginx å®‰è£…</h3><h4 id="1ã€ä»-Dockerhub-æ‹‰å–-Nginx-é•œåƒ"><a href="#1ã€ä»-Dockerhub-æ‹‰å–-Nginx-é•œåƒ" class="headerlink" title="1ã€ä» Dockerhub æ‹‰å– Nginx é•œåƒ"></a>1ã€ä» Dockerhub æ‹‰å– Nginx é•œåƒ</h4><pre><code>docker pull nginx</code></pre><h4 id="2ã€åˆ›å»ºå®¹å™¨-2"><a href="#2ã€åˆ›å»ºå®¹å™¨-2" class="headerlink" title="2ã€åˆ›å»ºå®¹å™¨"></a>2ã€åˆ›å»ºå®¹å™¨</h4><pre><code>docker run --name nginx_80 -p 80:80 --link php-fpm -v /å®¿ä¸»æœºå­˜æ”¾ä»£ç çš„ç›®å½•:/usr/share/nginx/html -d nginx</code></pre><table><thead><tr><th align="center">å‘½ä»¤</th><th align="center">å‘½ä»¤è¯¦è§£</th></tr></thead><tbody><tr><td align="center">run</td><td align="center">åˆ›å»ºä¸€ä¸ªå®¹å™¨</td></tr><tr><td align="center">â€“name</td><td align="center">æŒ‡å®šå®¹å™¨åç§°ï¼Œä¸ºç©º docker è‡ªåŠ¨åˆ†é…åç§°</td></tr><tr><td align="center">-p</td><td align="center">ç«¯å£æ˜ å°„ï¼Œå°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 80 ç«¯å£</td></tr><tr><td align="center">â€“link</td><td align="center">è¿æ¥ PHP å®¹å™¨ï¼Œå¯¹åº”æˆ‘ä»¬åˆ›å»ºçš„å®¹å™¨åç§°</td></tr><tr><td align="center">-v</td><td align="center">æ˜ å°„æ–‡ä»¶ï¼Œå®¿ä¸»æœºå®¹å™¨æ–‡ä»¶åŒæ­¥</td></tr><tr><td align="center">-d</td><td align="center">åå°è¿è¡Œå®¹å™¨</td></tr></tbody></table><h4 id="3ã€åŸºæœ¬é…ç½®-2"><a href="#3ã€åŸºæœ¬é…ç½®-2" class="headerlink" title="3ã€åŸºæœ¬é…ç½®"></a>3ã€åŸºæœ¬é…ç½®</h4><pre><code># ä¸­ç§‘å¤§æº,ç„¶åä¸‹è½½éœ€è¦çš„è½¯ä»¶sed -i &#39;s/deb.debian.org/mirrors.ustc.edu.cn/g&#39; /etc/apt/sources.listapt update# è´´ä¸Šæˆ‘çš„é…ç½®ï¼ŒNginx é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½• /etc/nginxserver {    # ç›‘å¬ç«¯å£    listen       80;    # åŸŸå    server_name  dev.test;    # ç¨‹åºç›®å½•    root   /usr/share/nginx/html/dao/public;    # é»˜è®¤è®¿é—®    index  index.php;    # å­—ç¬¦é›†ç¼–ç     charset utf-8;    # é”™è¯¯æ—¥å¿—    access_log  /var/log/nginx/app.access.log  main;    # é»˜è®¤è¯·æ±‚ æ­£åˆ™åŒ¹é…    location / {        try_files $uri $uri/ /index.php?$query_string;    }    # è‡ªå®šä¹‰é”™è¯¯é¡µé¢    #error_page  404              /404.html;    # redirect server error pages to the static page /50x.html    #    #error_page   500 502 503 504  /50x.html;    #location = /50x.html {    #    root   /usr/share/nginx/html;    #}    # proxy the PHP scripts to Apache listening on 127.0.0.1:80    #    #location ~ \.php$ {    #    proxy_pass   http://127.0.0.1;    #}    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000    # æ­£åˆ™åŒ¹é…åˆ° PHP æ–‡ä»¶è¯·æ±‚ ï¼Œæ‰”ç»™ FastCGI     location ~ \.php$ {        root           /var/www/html/dao/public;        fastcgi_pass   php-fpm:9000;        fastcgi_index  index.php;        include        fastcgi_params;        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;    }    # deny access to .htaccess files, if Apache&#39;s document root    # concurs with nginx&#39;s one    #    #location ~ /\.ht {    #    deny  all;    #}}# é‡å¯ nginxdocker restart nginx_80</code></pre><h3 id="memcached"><a href="#memcached" class="headerlink" title="memcached"></a>memcached</h3><pre><code>docker pull memcached#å®ä¾‹å®¹å™¨,å¯åŠ¨memcachedï¼šdocker run --name memcached -p 11211:11211 -m 64m -d memcached# ä¸­ç§‘å¤§æº,ç„¶åä¸‹è½½éœ€è¦çš„è½¯ä»¶sed -i &#39;s/deb.debian.org/mirrors.ustc.edu.cn/g&#39; /etc/apt/sources.listapt update#å®‰è£… memcached çš„æ—¶å€™ä¼šå»å°‘ä¾èµ–ï¼Œæ ¹æ®ä¸‹é¢è¯„è®ºå®‰è£…å³å¯æå®š</code></pre><h3 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h3><pre><code>docker pull redis#å®ä¾‹å®¹å™¨,å¯åŠ¨redisdocker run --name redis -p 6379:6379  -d redis redis-server --appendonly yes# ä¸­ç§‘å¤§æº,ç„¶åä¸‹è½½éœ€è¦çš„è½¯ä»¶sed -i &#39;s/deb.debian.org/mirrors.ustc.edu.cn/g&#39; /etc/apt/sources.listapt update# redis5ä»¥å æ²¡æœ‰é…ç½®æ–‡ä»¶ï¼Œéœ€è¦è‡ªå·±å» redis å®˜æ–¹ä¸‹è½½ä¸€ä¸ªæƒ³å¯¹åº”çš„ç‰ˆæœ¬æŠŠé‡Œé¢çš„é…ç½®æ–‡ä»¶å¤åˆ¶å‡ºæ¥</code></pre><p><img src="https://i.loli.net/2019/09/26/16iHMtqA8BYZEeQ.png" alt></p><p><img src="https://i.loli.net/2019/09/26/JLyaowZkuSvNzmX.png" alt></p><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/53260098" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/53260098</a></p></blockquote><h3 id="è¸©å‘çš„è·¯"><a href="#è¸©å‘çš„è·¯" class="headerlink" title="è¸©å‘çš„è·¯"></a>è¸©å‘çš„è·¯</h3><p>ç»†å¿ƒæˆå°±ç‹è€…ï¼Œè¿™å¥è¯ä¸æ˜¯æ²¡æœ‰é“ç†çš„å‘€ï¼</p><h4 id="é—®é¢˜ä¸€"><a href="#é—®é¢˜ä¸€" class="headerlink" title="é—®é¢˜ä¸€"></a>é—®é¢˜ä¸€</h4><p>åœ¨ä¹‹å‰ä¹Ÿä¸€ç›´æ²¡æœ‰å»æ‰§è¡Œè¿‡ Laravel çš„ migrate å‘½ä»¤ã€‚ä»Šå¤©åœ¨æƒ³è¦å†™ä¸€ä¸ªæœ‹å‹ç»™çš„é¡¹ç›®çš„æ—¶å€™ï¼Œéœ€è¦åˆ›å»ºè¡¨ï¼Œå¤¸å¤¸ä¸€é¡¿æ“ä½œã€‚ç»“æœå°±æ˜¯ï¼š<code>could not find driver</code></p><p>æ‰¾ä¸åˆ°é©±åŠ¨ï¼Œä¸‹æ„è¯†çš„å°±å»çœ‹ <code>config/database.php</code>é…ç½®æ–‡ä»¶å»äº†ï¼Œè®¤çœŸçš„æ£€æŸ¥äº†ä¸€éæ²¡æœ‰é—®é¢˜å•Šï¼ç„¶ååˆå»<code>.env</code>çœ‹è¿æ¥çš„ä¿¡æ¯æ˜¯å¦å“ªé‡Œæœ‰é—®é¢˜ï¼Œæ²¡é—®é¢˜å•Šï¼ï¼ï¼å¿ƒé‡Œåˆåœ¨æƒ³æ˜¯ä¸æ˜¯æ‰©å±•æ²¡æ‰“å¼€ï¼Œé©¬ä¸Š exec åˆ° Dokcer çš„å®¹å™¨å½“ä¸­ PHP -m æŸ¥çœ‹ PDO ç›¸å…³çš„æ‰©å±•æ˜¯ä¸æ˜¯æ²¡æœ‰ã€‚ï¼ˆå…¶å®é—®é¢˜å·²ç»å‡ºç°äº†ï¼‰</p><p>æ£€æŸ¥äº†ä¸€é Dokcer å®¹å™¨é‡Œé¢çš„æ‰©å±•å‘ç°è¿˜æ˜¯æ²¡æœ‰é—®é¢˜ï¼Œå›è¿‡å¤´æ¥åˆå»æ‰§è¡Œ migrate è¿˜æ˜¯ä¸è¡Œã€‚è°·æ­Œã€ç™¾åº¦äº†å¾ˆä¹…ä¹Ÿæ²¡æœ‰æ‰¾åˆ°è§£å†³çš„åŠæ³•ã€‚å®åœ¨æ²¡æœ‰åŠæ³•äº†ï¼Œå°±å»æ•‘åŠ©æˆ‘ä¸€ä¸ªå¤§å“¥äº†ï¼Œæäº†ä¸€äº›ä¸œè¥¿é—®é¢˜ä¹Ÿæ²¡æœ‰è§£å†³ã€‚</p><p>â€™ä½ å» Docker é‡Œé¢è¿è¡Œä¸€ä¸‹  php artisan migrate â€˜ï¼Œæç„¶å¤§æ‚Ÿï¼ï¼ï¼èµ¶å¿« exec åˆ°å®¹å™¨å½“ä¸­ï¼Œæ‰§è¡Œäº†ä¸€ä¸‹å‘½ä»¤ã€‚ã€‚ã€‚æˆåŠŸäº†æˆ‘é æåŠå¤©åŸæ¥æ˜¯è¿™æ ·ï¼ï¼ï¼å› ä¸ºå®¿ä¸»æœºæ²¡æœ‰è¿™ä¸ªç¯å¢ƒï¼Œä½¿ç”¨çš„éƒ½æ˜¯ Docker é‡Œé¢çš„ç¯å¢ƒï¼Œè¿˜åœ¨æåŠå¤©æå‡ºä¸€æœµèŠ±æ¥ä¹Ÿè¿è¡Œä¸äº†ï¼å½“ç„¶ä½ è¦æ˜¯åŒæ­¥ Docker çš„ç¯å¢ƒå°±å®Œå…¨æ²¡æœ‰é—®é¢˜äº†ã€‚</p><h4 id="é—®é¢˜äºŒ"><a href="#é—®é¢˜äºŒ" class="headerlink" title="é—®é¢˜äºŒ"></a>é—®é¢˜äºŒ</h4><p>ä»Šå¤©åˆè·³å‘é‡Œé¢äº†ï¼Œè‡ªå·±æƒ³ç­”ä¸€ä¸ª MySQL çš„è¯»å†™åˆ†ç¦»ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå®¹å™¨ï¼Œç»‘å®šäº†ç«¯å£ 3307 ç»“æœç¬¬ä¸‰æ–¹è½¯ä»¶ä¸€ç›´è¿æ¥ä¸ä¸Šã€‚</p><p>å®¿ä¸»æœºç»‘å®šäº† 3307 ç«¯å£ï¼Œä½†æ˜¯ MySQL å¿˜è®°ä¿®æ”¹ç«¯å£äº†ï¼ŒMySQL é»˜è®¤ä½¿ç”¨çš„ 3306ã€‚</p><h3 id="é—®é¢˜ä¸‰"><a href="#é—®é¢˜ä¸‰" class="headerlink" title="é—®é¢˜ä¸‰"></a>é—®é¢˜ä¸‰</h3><p>ä»Šå¤©åœ¨çº¿ä¸Šæ­å»ºäº† Dcoker çš„ç¯å¢ƒï¼Œå…¨éƒ¨æ­å¥½åï¼ŒGit æ‹‰äº†ä»£ç ï¼Œå› ä¸ºæ˜¯å¿½ç•¥ Composer çš„æ‰€ä»¥éœ€è¦è‡ªå·±å®‰è£…ï¼Œåœ¨æˆ‘æœ¬åœ°å®¹å™¨é‡Œé¢å®‰è£… Composer å¼‚å¸¸ç®€å•ï¼Œç›´æ¥æ‰§è¡Œä¸Šé¢çš„ä¸‰ä¸ªå‘½ä»¤å³å¯ï¼Œå¯çº¿ä¸Šçš„å®¹å™¨é‡Œé¢ Curl æ­»æ´»ä¸è¡Œï¼Œæœ€ç»ˆæ²¡åŠæ³•åªèƒ½ä¸‹è½½åŒ…å®‰è£…äº†ã€‚</p><pre><code>1ã€åˆ° composer å®˜æ–¹ä¸‹è½½ä¸€ä¸ªç‰ˆæœ¬çš„åŒ…ï¼Œé€šè¿‡ git ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šé¢å»2ã€è¿›å…¥å®¹å™¨ï¼Œæ‰¾åˆ°åˆšä¸Šä¼ çš„åŒ… mv composer.phar /usr/local/bin/composer3ã€ä¿®æ”¹æƒé™chmod 777 /usr/local/bin/composer4ã€å®‰è£…ï¼Œä¼šå‡ºç° git token é—®é¢˜ï¼Œå¤åˆ¶è¿æ¥ï¼Œåˆ° github è®¾ç½® token5ã€å®‰è£… git ï¼Œè§£å†³é—®é¢˜</code></pre>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¼šè¯æŠ€æœ¯</title>
      <link href="/2019/08/12/%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF/"/>
      <url>/2019/08/12/%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>WEB åº”ç”¨ç¨‹åºæ˜¯ä½¿ç”¨ HTTP åè®®ä¼ è¾“æ•°æ®ï¼Œæ—©æœŸå¤„äºåˆšå¼€å§‹å‘å±•é˜¶æ®µæ—¶ï¼Œå±äºæ–‡æ¡£æµè§ˆé˜¶æ®µï¼ˆ HTTP/0.9 çš„æ—¶å€™åªæœ‰æ–‡æœ¬ä¼ è¾“ï¼Œ1.0 å¼€å§‹æ‰æ”¯æŒå›¾ç‰‡ã€è§†é¢‘ã€äºŒè¿›åˆ¶æ–‡ä»¶ä¼ è¾“ï¼‰ï¼Œä¸éœ€è¦åšäº¤äº’ï¼ŒæœåŠ¡ç«¯ä¸éœ€è¦å»è®°å½•å…ˆå‰çš„äº‹åŠ¡ï¼Œè¿™æ ·æœåŠ¡ç«¯ç­”å¤ä¹Ÿå¾ˆå¿«ï¼ˆè¿™å°±æ˜¯ HTTP æ— çŠ¶æ€ç‰¹æ€§ï¼‰ã€‚ä½†éšç€ WEB çš„å‘å±•ï¼Œè¿›å…¥äº¤äº’æ—¶ä»£ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦è·ŸæœåŠ¡ç«¯åšäº¤äº’äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦ä¿æŒç”¨æˆ·çš„ç™»å½•çŠ¶æ€è€Œæˆ‘ä»¬ HTTP åè®®å´åŠä¸åˆ°ï¼Œå› ä¸º  HTTP åè®®å±äºæ— çŠ¶æ€ä»–å¯¹å…ˆå‰äº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†çš„åŠŸèƒ½ï¼Œä¸€æ¬¡è¯·æ±‚å®Œæˆå°±ç«‹é©¬æ–­å¼€ã€‚é€šä¿—çš„æ¥è®²å°±æ˜¯ï¼šè™½ç„¶ä½ åˆšæ‰æ¥è¿‡æˆ‘è¿™é‡Œäº†ï¼Œä½†æ˜¯æŠ±æ­‰æˆ‘ä¸è®°å¾—ä½ æ¥è¿‡äº†ï¼Œè€Œä½ è¿˜æ²¡åŠæ³•è¯æ˜è‡ªå·±æ¥è¿‡ï¼è¿™å°±æ˜¯å¾ˆå°´å°¬äº†ï¼Œæ²¡åŠæ³•å•Šæˆ‘ä»¬ç°åœ¨éšç€å‘å±•éœ€è¦è®°å½•äº‹åŠ¡äº†å‘€ï¼Œè¿™æ—¶æˆ‘ä»¬ä¼šè¯æŠ€æœ¯å°±è¯ç”Ÿäº†ï¼ä¼šè¯çš„æ€»ä½“æ€æƒ³ï¼šä»¤ç‰Œï¼Œæ—¢ç„¶ä½ æ¯æ¬¡éƒ½ä¸è®°å¾—æˆ‘ï¼Œé‚£å¥½æˆ‘ä»¬æ‰“é€ ä¸€ä¸ªä»¤ç‰Œåˆ†æˆä¸¤åŠï¼Œä½ ä¸€åŠæˆ‘ä¸€åŠåˆçš„èµ·æ¥é‚£å°±æ˜¯å¯¹çš„äººï¼ä¸è¿‡å‘è¿™åŠå—ä»¤ç‰Œç»™ä½ çš„äººï¼Œè¿˜æ˜¯æœåŠ¡ç«¯å“¦ï¼</p><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><blockquote><p>Cookie æ˜¯å®¢æˆ·ç«¯ä½¿ç”¨çš„ä¸€ç§è®°å½•å®¢æˆ·ç«¯çŠ¶æ€çš„æœºåˆ¶ï¼Œæ˜¯<strong>ç”± W3C ç»„ç»‡æå‡º</strong>ï¼Œæœ€æ—©ç”± Netscape(ç½‘æ™¯) ç¤¾åŒºå‘å±•çš„ä¸€ç§æœºåˆ¶ã€‚ç›®å‰ Cookie å·²ç»æˆä¸ºæ ‡å‡†ï¼Œæ‰€æœ‰çš„ä¸»æµæµè§ˆå™¨åŸºæœ¬éƒ½æ”¯æŒ Cookie ã€‚Cookieï¼ˆä¹Ÿå« Web Cookie æˆ–æµè§ˆå™¨ Cookieï¼‰æ˜¯æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®ï¼Œå®ƒä¼šåœ¨æµè§ˆå™¨ä¸‹æ¬¡å‘åŒä¸€æœåŠ¡å™¨å†å‘èµ·è¯·æ±‚æ—¶è¢«æºå¸¦å¹¶å‘é€åˆ°æœåŠ¡å™¨ä¸Šã€‚é€šå¸¸ï¼Œå®ƒç”¨äºå‘ŠçŸ¥æœåŠ¡ç«¯ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€æµè§ˆå™¨ï¼Œå¦‚ä¿æŒç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚Cookie ä½¿åŸºäº<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview#HTTP_is_stateless_but_not_sessionless" target="_blank" rel="noopener">æ— çŠ¶æ€</a>çš„ HTTP åè®®è®°å½•ç¨³å®šçš„çŠ¶æ€ä¿¡æ¯æˆä¸ºäº†å¯èƒ½ã€‚<strong>Cookie å®é™…ä¸Šå°±æ˜¯ä¸€å°æ®µæ–‡æœ¬ä¿¡æ¯</strong>ã€‚</p></blockquote><p>å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯ä¼šåœ¨ HTTP å“åº”æ¶ˆæ¯æŠ¥å¤´å½“ä¸­æ’å…¥ Set-cookie ï¼Œå­˜å‚¨çš„å°±æ˜¯ Cookie çš„å€¼ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/e73160eegy1g68v87xx0pj216n0pitbs.jpg" alt></p><p>å®¢æˆ·ç«¯å°±ä¼šæŠŠ Cookie ä¿å­˜èµ·æ¥ï¼Œå¦‚æœ Cookie è®¾ç½®äº†è¿‡æœŸæ—¶é—´é‚£ä¹ˆå°±å±äºæŒä¹…å­˜å‚¨ç›´åˆ°è¿‡æœŸï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´æµè§ˆå™¨å…³é—­å³ä¸ºé”€æ¯ï¼ŒæŒä¹…å­˜å‚¨ä¼šå­˜å‚¨åœ¨ç£ç›˜å½“ä¸­ï¼ŒéæŒä¹…å­˜å‚¨ä¼šå­˜å‚¨åœ¨å†…å­˜å½“ä¸­ï¼</p><p>å®¢æˆ·ç«¯ä¸‹æ¬¡åœ¨è¯·æ±‚æœåŠ¡å™¨ç«¯çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥å¤´å½“ä¸­æ’å…¥ Cookie ã€‚æœåŠ¡å™¨ç«¯æ£€æµ‹è¯¥ Cookieï¼Œä»¥æ­¤æ¥è¯†åˆ«ç”¨æˆ·çŠ¶æ€ã€‚</p><p><img src="https://i.loli.net/2019/08/22/jPSrYbs8qJAUtlW.png" alt></p><p><img src="https://i.loli.net/2020/02/16/OcCHqx9ki12f5Lj.png" alt="123456.png"></p><h3 id="Cookie-ç»†èŠ‚"><a href="#Cookie-ç»†èŠ‚" class="headerlink" title="Cookie ç»†èŠ‚"></a>Cookie ç»†èŠ‚</h3><p>Cookie åŸºäºæµè§ˆå™¨æœ¬åœ°å­˜å‚¨æ•°æ®ï¼Œå› æ­¤ï¼Œåªæœ‰åœ¨ä¿å­˜äº† Cookie çš„é‚£ä¸ªæµè§ˆå™¨ä¸Šèƒ½å¤Ÿä½¿ç”¨è¯¥ Cookieã€‚<strong>åŒä¸€è®¾å¤‡ä¸åŒæµè§ˆå™¨ä¹‹é—´ï¼ŒCookie ä¸é€šç”¨ã€‚</strong></p><p>Cookie çš„å­˜å‚¨å¤§å°æœ‰é™åˆ¶ï¼š4KB å·¦å³ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½è¦è¿›è¡Œç½‘ç»œä¼ è¾“ï¼Œå ç”¨å¸¦å®½ã€‚ä¸€ä¸ªæµè§ˆå™¨æœ€å¤šå…è®¸ 300 ä¸ª Cookie ä¸€ä¸ªç½‘ç«™æœ€å¤šå‚¨å­˜ 20 ä¸ª Cookieï¼Œç”±äº Cookie æ˜¯å­˜åœ¨å®¢æˆ·ç«¯ä¸Šçš„ï¼Œæ‰€ä»¥æµè§ˆå™¨åŠ å…¥äº†ä¸€äº›é™åˆ¶ç¡®ä¿ Cookie ä¸ä¼šè¢«æ¶æ„ä½¿ç”¨ã€‚</p><p>Cookie çš„åŒæºç­–ç•¥ï¼šCookie åŒæ ·ä¹Ÿæœ‰åŒæºç­–ç•¥ï¼Œä¸è¿‡ä¸ AJAX ç•¥å¾®ä¸ç”¨ã€‚AJAX éœ€è¦å®Œå…¨åŒæºï¼Œè€Œ Cookie åªéœ€è¦åŒä¸€çˆ¶çº§åŸŸåå³å¯ã€‚ æ¯”å¦‚ï¼š è¯·æ±‚ qq.com ä¸‹çš„èµ„æºæ—¶ï¼Œä¼šå¸¦ä¸Š qq.com å¯¹åº”çš„ Cookieï¼Œä¸ä¼šå¸¦ä¸Š baidu.com çš„ Cookieï¼› è¯·æ±‚ v.qq.com ä¸‹çš„èµ„æºæ—¶ï¼Œæµè§ˆå™¨ä¸ä»…ä¼šå¸¦ä¸Š v.qq.com çš„ Cookieï¼Œè¿˜ä¼šå¸¦ä¸Š qq.com çš„ Cookie ã€‚åœ¨è¿™é‡Œï¼Œqq.com å°±æ˜¯ v.qq.com çš„çˆ¶çº§åŸŸå</p><p>Cookieä¸»è¦ç”¨äºä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p><ul><li>ä¼šè¯çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ã€æ¸¸æˆåˆ†æ•°æˆ–å…¶å®ƒéœ€è¦è®°å½•çš„ä¿¡æ¯ï¼‰</li><li>ä¸ªæ€§åŒ–è®¾ç½®ï¼ˆå¦‚ç”¨æˆ·è‡ªå®šä¹‰è®¾ç½®ã€ä¸»é¢˜ç­‰ï¼‰</li><li>æµè§ˆå™¨è¡Œä¸ºè·Ÿè¸ªï¼ˆå¦‚è·Ÿè¸ªåˆ†æç”¨æˆ·è¡Œä¸ºç­‰ï¼‰</li></ul><p>Cookie æ›¾ä¸€åº¦ç”¨äºå®¢æˆ·ç«¯æ•°æ®çš„å­˜å‚¨ï¼Œå› å½“æ—¶å¹¶æ²¡æœ‰å…¶å®ƒåˆé€‚çš„å­˜å‚¨åŠæ³•è€Œä½œä¸ºå”¯ä¸€çš„å­˜å‚¨æ‰‹æ®µï¼Œä½†ç°åœ¨éšç€ç°ä»£æµè§ˆå™¨å¼€å§‹æ”¯æŒå„ç§å„æ ·çš„å­˜å‚¨æ–¹å¼ï¼ŒCookie æ¸æ¸è¢«æ·˜æ±°ã€‚ç”±äºæœåŠ¡å™¨æŒ‡å®š Cookie åï¼Œæµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦ Cookie æ•°æ®ï¼Œä¼šå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ï¼ˆå°¤å…¶æ˜¯åœ¨ç§»åŠ¨ç¯å¢ƒä¸‹ï¼‰ã€‚æ–°çš„æµè§ˆå™¨ API å·²ç»å…è®¸å¼€å‘è€…ç›´æ¥å°†æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°ï¼Œå¦‚ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API" target="_blank" rel="noopener">Web storage API</a> ï¼ˆæœ¬åœ°å­˜å‚¨å’Œä¼šè¯å­˜å‚¨ï¼‰æˆ– <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API" target="_blank" rel="noopener">IndexedDB</a> ã€‚</p><p>å› ä¸º Cookie å­˜å‚¨åœ¨å®¢æˆ·ç«¯è€Œå®¢æˆ·ç«¯ï¼Œå³å¯è§å³ä¸å®‰å…¨çš„åŸåˆ™ï¼ŒCookie å®¹æ˜“è¢«åˆ«æœ‰ç”¨å¿ƒçš„äººåˆ©ç”¨å¯¹è‡ªå·±çš„ç«™ç‚¹å‘èµ·æ”»å‡»ï¼Œå¦‚ï¼šXSSï¼ŒCSRFï¼Œéƒ½æ˜¯åˆ©ç”¨çš„ Cookie å‘èµ·çš„æ”»å‡»ã€‚</p><h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><blockquote><p>Session æ˜¯æœåŠ¡å™¨ç«¯ä½¿ç”¨çš„ä¸€ç§è®°å½•å®¢æˆ·ç«¯çŠ¶æ€çš„æœºåˆ¶ï¼Œä½¿ç”¨ä¸Šæ¯” Cookie ç®€å•ä¸€äº›ï¼Œç›¸åº”çš„ä¹Ÿå¢åŠ äº†æœåŠ¡å™¨çš„å­˜å‚¨å‹åŠ›ã€‚ä¸åŒäº Cookie çš„æ˜¯ï¼Œ Session æ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„ã€‚å…¶å® Session çš„å®ç°æœ€ç»ˆè¿˜æ˜¯ Cookie ã€‚å½“æˆ‘ä»¬ç”¨ Session æ—¶ï¼ŒæœåŠ¡å™¨ç«¯è¿”å›å´æ˜¯ä¸€æ®µ Cookie ã€‚ä»è€Œå¯ä»¥è¯´ Session çš„å®ç°ä¾èµ– Cookieã€‚</p></blockquote><p>å®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨ç«¯ï¼Œå¦‚æœä¼šä½¿ç”¨åˆ° Sessionï¼Œé‚£ä¹ˆæœåŠ¡å™¨ç«¯åœ¨ HTTP å“åº”æŠ¥å¤´å½“ä¸­ä¼šæ’å…¥ Set-Cookie ,è€Œè¿™æ®µ Cookie è®°å½•ç€ä»€ä¹ˆå‘¢ï¼Ÿè®°å½•ç€ SeesionID ã€‚</p><p><img src="https://i.loli.net/2019/08/22/VDNZKPlfM5mu7bw.png" alt></p><p>å®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚æœåŠ¡å™¨ç«¯çš„æ—¶å€™ï¼Œåœ¨ HTTP è¯·æ±‚æŠ¥å¤´å½“ä¸­è‡ªåŠ¨æ’å…¥ Cookie(Cookie çš„å€¼ä¹Ÿå°±æ˜¯ SeesionID)ï¼ŒæœåŠ¡å™¨ç«¯æ‹¿åˆ° Cookie ä¹‹åï¼Œè¯»å–å½“ä¸­çš„ SeesionIDï¼Œä¼šè‡ªåŠ¨å»å¯»æ‰¾åˆ°è¿™ä¸ª Session æ–‡ä»¶æ‰€å­˜æ”¾çš„ä½ç½®ï¼ˆ PHP å½“ä¸­ Session å±äºæŒä¹…å­˜å‚¨åœ¨ç£ç›˜å½“ä¸­ï¼Œé»˜è®¤ 24 åˆ†é’Ÿä¹‹ååˆ é™¤æ•°æ®ï¼Œåˆ é™¤çš„æ˜¯æ•°æ®è€Œä¸æ˜¯åˆ é™¤è¿™ä¸ª Session æ–‡ä»¶ï¼‰è¯»å–æ•°æ®ã€‚åœ¨ PHP å½“ä¸­é»˜è®¤çš„å°±æ˜¯æµè§ˆå™¨å…³é—­ï¼Œ SessionID é”€æ¯ã€‚</p><p><img src="https://i.loli.net/2019/08/22/dVJRSygoAp6ksu2.png" alt></p><p><img src="https://i.loli.net/2020/02/16/NvZuei68fsP9IBh.png" alt="æ˜¯æ‰“ç®—æ‰“ç®—çš„.png"></p><p>ä»¥ä¸‹æ˜¯ PHP Seesion çš„é…ç½®</p><pre><code>session.save_path = &quot;/home/jialaolian/Desktop/Session&quot;#è¿™ä¸ªå°±æ˜¯ä½ sessionå­˜æ”¾çš„åœ°å€session.use_cookies=1#æŠŠè¿™ä¸ªçš„å€¼è®¾ç½®ä¸º1ï¼Œåˆ©ç”¨cookieæ¥ä¼ é€’sessionidsession.cookie_lifetime=0#è¿™ä¸ªä»£è¡¨SessionIDåœ¨å®¢æˆ·ç«¯Cookieå‚¨å­˜çš„æ—¶é—´ï¼Œé»˜è®¤æ˜¯0ï¼Œä»£è¡¨æµè§ˆå™¨ä¸€å…³é—­SessionIDå°±é”€æ¯session.gc_maxlifetime=1440#è¿™ä¸ªæ˜¯Sessionæ•°æ®åœ¨æœåŠ¡å™¨ç«¯å‚¨å­˜çš„æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œé‚£ä¹ˆSessionæ•°æ®å°±è‡ªåŠ¨åˆ é™¤ï¼</code></pre><h3 id="Session-ç»†èŠ‚"><a href="#Session-ç»†èŠ‚" class="headerlink" title="Session ç»†èŠ‚"></a>Session ç»†èŠ‚</h3><p>é¢è¯•é¢˜å½“ä¸­ç»å¸¸ä¼šå‡ºç°ç¦ç”¨äº† Cookie ä¹‹å Session è¿˜å¯ä»¥ç”¨å˜›ï¼Ÿ</p><p>ç­”æ¡ˆï¼šå¯ä»¥ï¼</p><p>session å®ç°å…³é”®æ˜¯ sessionIDï¼Œåªéœ€è¦å°† sessionID ä¼ é€’ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚çš„æ—¶å€™å†å°† sessionID ä¼ é€’ç»™æœåŠ¡å™¨ï¼Œå°±å¯ä»¥å®ç° sessionã€‚æ‰€ä»¥ï¼Œå¯ä»¥ä½¿ç”¨åœ¨ URL ä¸­æ’å…¥æŸ¥è¯¢å‚æ•°çš„æ–¹å¼æ¥å®ç° sessionID çš„ä¼ é€’ã€‚</p><p>å‡å¦‚ä½ ä½¿ç”¨äº† Nginx æœåŠ¡å™¨è½¯ä»¶åšäº†è´Ÿè½½å‡è¡¡ï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°ä¸¢å¤± Session çš„é—®é¢˜ã€‚å‡ºç°ä¸¢å¤± Session é—®é¢˜å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç”¨ Nginx ip_hash ç®—æ³•è§£å†³ã€‚</p><h3 id="Session-å’Œ-Cookie-çš„åŒºåˆ«"><a href="#Session-å’Œ-Cookie-çš„åŒºåˆ«" class="headerlink" title="Session å’Œ Cookie çš„åŒºåˆ«"></a>Session å’Œ Cookie çš„åŒºåˆ«</h3><ul><li>session åœ¨æœåŠ¡å™¨ç«¯ï¼Œcookie åœ¨å®¢æˆ·ç«¯ã€‚</li><li>session ç”¨æˆ·æ— æ³•æŸ¥çœ‹å’Œä¿®æ”¹ï¼Œcookie ç”¨æˆ·å¯ä»¥æŸ¥çœ‹ä¿®æ”¹ã€‚</li><li>session å’Œ cookie çš„å­˜å‚¨å®¹é‡ä¸åŒã€‚</li><li>session çš„å®ç°ä¾èµ–äº sessionIDï¼Œè€Œ sessionID åˆå­˜å‚¨åœ¨ cookie ä¸Šï¼Œæ‰€ä»¥ï¼Œå¯ä»¥è¿™ä¹ˆè¯´ï¼šsession æ˜¯åŸºäº cookie å®ç°çš„ä¸€ç§æ•°æ®å­˜å‚¨æ–¹å¼ã€‚</li><li>ä»–ä»¬å…±åŒç‚¹ï¼Œå› ä¸º Session éœ€è¦ä¾èµ– Cookie æ‰€ä»¥ XSS ä¸ CSRF å¯¹ä»–ä»¬éƒ½æœ‰æ•ˆã€‚ </li><li>Cookie åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè€Œä¸” Session ä¸é™åˆ¶ã€‚</li></ul><h3 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h3><blockquote><p>Token æˆ‘ä»¬çš„ä¸­æ–‡ç¿»è¯‘â€˜ä»¤ç‰Œâ€™</p></blockquote><h6 id="Token-çš„å¼•å…¥ï¼š"><a href="#Token-çš„å¼•å…¥ï¼š" class="headerlink" title="Token çš„å¼•å…¥ï¼š"></a>Token çš„å¼•å…¥ï¼š</h6><p>Token æ˜¯åœ¨å®¢æˆ·ç«¯é¢‘ç¹å‘æœåŠ¡ç«¯è¯·æ±‚æ•°æ®ï¼ŒæœåŠ¡ç«¯é¢‘ç¹çš„å»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·åå’Œå¯†ç å¹¶è¿›è¡Œå¯¹æ¯”ï¼Œåˆ¤æ–­ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®ä¸å¦ï¼Œå¹¶ä½œå‡ºç›¸åº”æç¤ºï¼Œåœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼ŒToken ä¾¿åº”è¿è€Œç”Ÿã€‚</p><h6 id="Token-çš„å®šä¹‰ï¼š"><a href="#Token-çš„å®šä¹‰ï¼š" class="headerlink" title="Token çš„å®šä¹‰ï¼š"></a>Token çš„å®šä¹‰ï¼š</h6><p>Token æ˜¯æœåŠ¡ç«¯ç”Ÿæˆçš„ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œä»¥ä½œå®¢æˆ·ç«¯è¿›è¡Œè¯·æ±‚çš„ä¸€ä¸ªä»¤ç‰Œï¼Œå½“ç¬¬ä¸€æ¬¡ç™»å½•åï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ª Token ä¾¿å°†æ­¤ Token è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä»¥åå®¢æˆ·ç«¯åªéœ€å¸¦ä¸Šè¿™ä¸ª Token å‰æ¥è¯·æ±‚æ•°æ®å³å¯ï¼Œæ— éœ€å†æ¬¡å¸¦ä¸Šç”¨æˆ·åå’Œå¯†ç ã€‚</p><h6 id="ä½¿ç”¨-Token-çš„ç›®çš„ï¼š"><a href="#ä½¿ç”¨-Token-çš„ç›®çš„ï¼š" class="headerlink" title="ä½¿ç”¨ Token çš„ç›®çš„ï¼š"></a>ä½¿ç”¨ Token çš„ç›®çš„ï¼š</h6><p>Token çš„ç›®çš„æ˜¯ä¸ºäº†å‡è½»æœåŠ¡å™¨çš„å‹åŠ›ï¼Œå‡å°‘é¢‘ç¹çš„æŸ¥è¯¢æ•°æ®åº“ï¼Œä½¿æœåŠ¡å™¨æ›´åŠ å¥å£®ã€‚</p><h6 id="Token-çš„ä¼˜ç‚¹ï¼š"><a href="#Token-çš„ä¼˜ç‚¹ï¼š" class="headerlink" title="Token çš„ä¼˜ç‚¹ï¼š"></a>Token çš„ä¼˜ç‚¹ï¼š</h6><p>æ‰©å±•æ€§æ›´å¼ºï¼Œä¹Ÿæ›´å®‰å…¨ç‚¹ï¼Œéå¸¸é€‚åˆç”¨åœ¨ Web åº”ç”¨æˆ–è€…ç§»åŠ¨åº”ç”¨ä¸Šã€‚Token çš„ä¸­æ–‡æœ‰äººç¿»è¯‘æˆ â€œä»¤ç‰Œâ€ï¼Œæˆ‘è§‰å¾—æŒºå¥½ï¼Œæ„æ€å°±æ˜¯ï¼Œä½ æ‹¿ç€è¿™ä¸ªä»¤ç‰Œï¼Œæ‰èƒ½è¿‡ä¸€äº›å…³å¡ã€‚</p><h6 id="Token-ä¸€èˆ¬ç”¨åœ¨ä¸‰ä¸ªåœ°æ–¹"><a href="#Token-ä¸€èˆ¬ç”¨åœ¨ä¸‰ä¸ªåœ°æ–¹" class="headerlink" title="Token ä¸€èˆ¬ç”¨åœ¨ä¸‰ä¸ªåœ°æ–¹:"></a>Token ä¸€èˆ¬ç”¨åœ¨ä¸‰ä¸ªåœ°æ–¹:</h6><p>â‘ é˜²æ­¢è¡¨å•é‡å¤æäº¤<br>â‘¡anti csrf æ”»å‡»ï¼ˆè·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ï¼‰<br>â‘¢èº«ä»½éªŒè¯ï¼ˆå•ç‚¹ç™»å½•ï¼‰</p><p>Token ç±»ä¼¼ä¸ HTTP åè®®å½“ä¸­çš„<strong>æ— çŠ¶æ€</strong>ç‰¹æ€§ï¼Œä»–ä¸éœ€è¦åœ¨æœåŠ¡å™¨ç«¯ä¿ç•™ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯æˆ–è€…ä¼šè¯ä¿¡æ¯ã€‚è¿™å°±æ„å‘³ç€åŸºäº Token è®¤è¯æœºåˆ¶çš„åº”ç”¨ä¸éœ€è¦å»è€ƒè™‘ç”¨æˆ·åœ¨å“ªä¸€å°æœåŠ¡å™¨ç™»å½•äº†ï¼Œè¿™å°±ä¸ºåº”ç”¨çš„æ‰©å±•æä¾›äº†ä¾¿åˆ©ã€‚</p><p>æµç¨‹ä¸Šæ˜¯è¿™æ ·çš„ï¼š</p><ul><li>ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·åå¯†ç æ¥è¯·æ±‚æœåŠ¡å™¨</li><li>æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ç”¨æˆ·çš„ä¿¡æ¯</li><li>æœåŠ¡å™¨é€šè¿‡éªŒè¯å‘é€ç»™ç”¨æˆ·ä¸€ä¸ª token</li><li>å®¢æˆ·ç«¯å­˜å‚¨ tokenï¼Œå¹¶åœ¨æ¯æ¬¡è¯·æ±‚æ—¶é™„é€ä¸Šè¿™ä¸ª token å€¼</li><li>æœåŠ¡ç«¯éªŒè¯ token å€¼ï¼Œå¹¶è¿”å›æ•°æ®</li></ul><blockquote><p>åŸæ–‡åœ°å€ï¼š</p><p><a href="https://blog.csdn.net/cmj6706/article/details/79032703" target="_blank" rel="noopener">https://blog.csdn.net/cmj6706/article/details/79032703</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ä¼šè¯æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¼šè¯æŠ€æœ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPåè®®ç®€å•ç†è§£</title>
      <link href="/2019/08/11/HTTP%E5%8D%8F%E8%AE%AE%E7%90%86%E8%A7%A3/"/>
      <url>/2019/08/11/HTTP%E5%8D%8F%E8%AE%AE%E7%90%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€è¿°å†å²"><a href="#ç®€è¿°å†å²" class="headerlink" title="ç®€è¿°å†å²"></a>ç®€è¿°å†å²</h2><blockquote><p>HTTP åè®®(è¶…æ–‡æœ¬ä¼ è¾“åè®® HyperText Transfer Protocol )ï¼Œå®ƒæ˜¯åŸºäº TCP/IP åè®®çš„åº”ç”¨å±‚ä¼ è¾“åè®®ï¼Œç®€å•æ¥è¯´å°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿›è¡Œæ•°æ®ä¼ è¾“çš„ä¸€ç§è§„åˆ™ã€‚é»˜è®¤ä½¿ç”¨ 80 ç«¯å£ã€‚</p><p>HTTP åè®®å·¥ä½œäºå®¢æˆ·ç«¯-æœåŠ¡ç«¯æ¶æ„ä¹‹ä¸Šã€‚æµè§ˆå™¨ä½œä¸º HTTP å®¢æˆ·ç«¯é€šè¿‡ URL å‘ HTTP æœåŠ¡ç«¯å³ WEB æœåŠ¡å™¨å‘é€æ‰€æœ‰è¯·æ±‚ã€‚ WEB æœåŠ¡å™¨æ ¹æ®æ¥æ”¶åˆ°çš„è¯·æ±‚åï¼Œå‘å®¢æˆ·ç«¯å‘é€å“åº”ä¿¡æ¯ã€‚</p><blockquote><p><img src="http://ww1.sinaimg.cn/large/e73160eegy1g654ktgyvbj20fb051dfr.jpg" alt></p></blockquote><p>1991å¹´å‘å¸ƒçš„ HTTP/0.9 ç‰ˆæœ¬å‘å¸ƒï¼Œè¯¥ç‰ˆæœ¬åŠå…¶çš„ç®€å•ï¼Œåªæœ‰ä¸€ä¸ªå‘½ä»¤ GET ã€‚</p><p>1996å¹´5æœˆä»½ï¼Œ HTTP/1.0 ç‰ˆæœ¬å‘å¸ƒï¼Œå†…å®¹å¤§å¤§çš„å¢åŠ ã€‚é¦–å…ˆå¯ä»¥å‘é€ä»»ä½•æ ¼å¼çš„å†…å®¹ï¼Œé™¤äº†ä¼ è¾“æ–‡å­—ï¼Œè¿˜å¯ä»¥ä¼ é€å›¾ç‰‡ã€è§†é¢‘ã€äºŒè¿›åˆ¶æ–‡ä»¶ã€‚å…¶æ¬¡é™¤äº†GET å‘½ä»¤ï¼Œè¿˜å¼•å…¥äº† POST å’Œ HEAD å‘½ä»¤ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ç®€å•è¯·æ±‚æ–¹å¼ã€‚1.0 ç‰ˆæœ¬ç¼ºç‚¹æ— æ³•åšåˆ°æŒä¹…è¿æ¥ï¼Œé€ æˆå¤§é‡çš„é€šä¿¡å¼€é”€ã€‚</p><p>1997å¹´1æœˆï¼ŒHTTP/1.1 ç‰ˆæœ¬å‘å¸ƒï¼Œä»–è¿›ä¸€æ­¥çš„å®Œå–„äº† HTTP åè®®ï¼Œç›®å‰æ¥è¯´æˆ‘ä»¬ç”¨çš„æœ€å¤šçš„è¿˜æ˜¯ HTTP/1.1 ç‰ˆæœ¬ã€‚1.1 ç‰ˆæœ¬æœ€å¤§çš„å˜åŒ–å°±æ˜¯å¼•å…¥äº†æŒä¹…è¿æ¥ï¼Œåªè¦ TCP é“¾æ¥é»˜è®¤ä¸å…³é—­ï¼Œé‚£ä¹ˆä»–å°±å¯ä»¥ä¸€ç›´å¤ç”¨ã€‚ä¸ç”¨å£°æ˜ Connection: keep-aliveï¼Œç›®å‰ï¼Œå¯¹äºåŒä¸€ä¸ªåŸŸåï¼Œå¤§å¤šæ•°æµè§ˆå™¨å…è®¸åŒæ—¶å»ºç«‹ 6 ä¸ªæŒä¹…è¿æ¥ã€‚</p><p>2015å¹´ï¼ŒHTTP/2 å‘å¸ƒã€‚å®ƒä¸å« HTTP/2.0ï¼Œæ˜¯å› ä¸ºæ ‡å‡†å§”å‘˜ä¼šä¸æ‰“ç®—å†å‘å¸ƒå­ç‰ˆæœ¬äº†ï¼Œä¸‹ä¸€ä¸ªæ–°ç‰ˆæœ¬å°†æ˜¯ HTTP/3 ã€‚3 ç‰ˆæœ¬çš„æœ€å¤§çš„æ”¹å˜ï¼Œå¯èƒ½ä¼šæŠ›å¼ƒæ‰ TCP åè®®ä½¿ç”¨ UDP åè®®ã€‚</p></blockquote><h2 id="TCP-åè®®ç®€è¿°"><a href="#TCP-åè®®ç®€è¿°" class="headerlink" title="TCP åè®®ç®€è¿°"></a>TCP åè®®ç®€è¿°</h2><p><img src="http://ww1.sinaimg.cn/large/e73160eegy1g5w31tlidzj20o10hbgpo.gif" alt></p><blockquote><p>å»ºç«‹ TCP éœ€è¦ä¸‰æ¬¡æ‚æ‰‹å»ºç«‹è¿æ¥ï¼Œä¸å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥ã€‚æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p></blockquote><p><img src="http://ww1.sinaimg.cn/large/e73160eegy1g658ctyl3jj20f60lct9v.jpg" alt></p><h3 id="TCP-ä¸‰æ¬¡æ‚æ‰‹"><a href="#TCP-ä¸‰æ¬¡æ‚æ‰‹" class="headerlink" title="TCP ä¸‰æ¬¡æ‚æ‰‹"></a>TCP ä¸‰æ¬¡æ‚æ‰‹</h3><p>é¦–å…ˆå®¢æˆ·ç«¯å‘é€è¿æ¥è¯·æ±‚æŠ¥æ–‡ï¼ŒæœåŠ¡ç«¯æ¥æ”¶è¿æ¥åå›å¤ ACK æŠ¥æ–‡ï¼Œå¹¶ä¸ºè¿™æ¬¡è¿æ¥åˆ†é…èµ„æºã€‚å®¢æˆ·ç«¯æ¥æ”¶åˆ° ACK æŠ¥æ–‡åä¹Ÿå‘æœåŠ¡ç«¯å‘é€ ACK æŠ¥æ–‡ï¼Œå¹¶åˆ†é…èµ„æºï¼Œè¿™æ · TCP è¿æ¥å°±å»ºç«‹äº†ã€‚å…¶å®æ‰€è°“çš„ä¸‰æ¬¡æ‚æ‰‹å…¶å®å°±æ˜¯å»ºç«‹ä¸€ä¸ª TCP è¿æ¥æ—¶ï¼Œéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ€»å…±å‘é€ä¸‰ä¸ªåŒ…ï¼Œä¸‰æ¬¡æ‚æ‰‹çš„ç›®çš„æ˜¯ä¸ªè¿æ¥æœåŠ¡å™¨æŒ‡å®šçš„ç«¯å£ï¼Œå»ºç«‹ TCP è¿æ¥ï¼Œå¹¶åŒæ­¥è¿æ¥åŒæ–¹çš„åºåˆ—å·å’Œç¡®è®¤å¹¶äº¤æ¢ TCP çª—å£å¤§å°ä¿¡æ¯ï¼Œåœ¨ SOCKET ç¼–ç¨‹å½“ä¸­ï¼Œå®¢æˆ·ç«¯æ‰§è¡Œ connect() æ—¶ï¼Œå°†ä¼šè§¦å‘ä¸‰æ¬¡æ‚æ‰‹ï¼š</p><p><img src="http://ww1.sinaimg.cn/large/e73160eegy1g658o2qh0ij20f109374f.jpg" alt></p><h3 id="TCP-å››æ¬¡æŒ¥æ‰‹"><a href="#TCP-å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="TCP å››æ¬¡æŒ¥æ‰‹"></a>TCP å››æ¬¡æŒ¥æ‰‹</h3><p>TCP è¿æ¥çš„æ‹†é™¤éœ€è¦å‘é€å››ä¸ªåŒ…ï¼Œå®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨ç«¯å‡å¯ä¸»åŠ¨å‘èµ·æŒ¥æ‰‹åŠ¨ä½œï¼Œåœ¨ SOCKET ç¼–ç¨‹ä¸­ï¼Œä»»ä½•ä¸€æ–¹æ‰§è¡Œ close() å³å¯äº§ç”ŸæŒ¥æ‰‹æ“ä½œã€‚å‡è®¾å®¢æˆ·ç«¯å‘èµ·ä¸­æ–­è¿æ¥è¯·æ±‚ï¼Œå°±å…ˆå‘é€ FIN æŠ¥æ–‡ã€‚æœåŠ¡ç«¯æ¥åˆ° FIN æŠ¥æ–‡åï¼Œä½†æ˜¯å¦‚æœè¿˜æœ‰æ•°æ®æ²¡æœ‰å‘é€å®Œæˆï¼Œåˆ™ä¸å¿…æ€¥ç€å…³é—­ Socket ï¼Œå¯ä»¥ç»§ç»­å‘é€æ•°æ®ã€‚æ‰€ä»¥æœåŠ¡å™¨ç«¯å…ˆå‘é€ ACK ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ï¼šè¯·æ±‚å·²ç»æ”¶åˆ°äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡å‡†å¤‡å¥½ï¼Œè¯·ç»§ç»­ç­‰å¾…åœæ­¢çš„æ¶ˆæ¯ã€‚è¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯å°±è¿›å…¥ FIN_WAIT çŠ¶æ€ï¼Œç»§ç»­ç­‰å¾…æœåŠ¡ç«¯çš„ FIN æŠ¥æ–‡ã€‚å½“æœåŠ¡ç«¯ç¡®å®šæ•°æ®å·²å‘é€å®Œæˆï¼Œåˆ™å‘å®¢æˆ·ç«¯å‘é€ FIN æŠ¥æ–‡ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ï¼šæœåŠ¡å™¨è¿™è¾¹æ•°æ®å‘å®Œäº†ï¼Œå‡†å¤‡å¥½å…³é—­è¿æ¥äº†ã€‚å®¢æˆ·ç«¯æ”¶åˆ° FIN æŠ¥æ–‡åï¼Œå°±çŸ¥é“å¯ä»¥å…³é—­è¿æ¥äº†ï¼Œä½†æ˜¯ä»–è¿˜æ˜¯ä¸ç›¸ä¿¡ç½‘ç»œï¼Œæ‰€ä»¥å‘é€ ACK åè¿›å…¥ TIME_WAIT çŠ¶æ€ï¼Œ æœåŠ¡ç«¯æ”¶åˆ° ACK åï¼Œå°±çŸ¥é“å¯ä»¥æ–­å¼€è¿æ¥äº†ã€‚å®¢æˆ·ç«¯ç­‰å¾…äº† 2MSL åä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™è¯æ˜æœåŠ¡ç«¯å·²æ­£å¸¸å…³é—­ï¼Œæœ€åï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥å…³é—­è¿æ¥äº†è‡³æ­¤ï¼Œ TCP è¿æ¥å°±å·²ç»å®Œå…¨å…³é—­äº†ï¼å…³é—­è¿æ¥çš„è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="http://ww1.sinaimg.cn/large/e73160eegy1g658xy3fgrj20by085dfx.jpg" alt></p><h2 id="HTTP-å·¥ä½œæµç¨‹"><a href="#HTTP-å·¥ä½œæµç¨‹" class="headerlink" title="HTTP å·¥ä½œæµç¨‹"></a>HTTP å·¥ä½œæµç¨‹</h2><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5w3bsgdqmj20fy06o75n.jpg" alt></p><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5w3f1g673j20kh09cdiv.jpg" alt></p><h2 id="HTTP-åè®®çš„ç‰¹ç‚¹"><a href="#HTTP-åè®®çš„ç‰¹ç‚¹" class="headerlink" title="HTTP åè®®çš„ç‰¹ç‚¹"></a>HTTP åè®®çš„ç‰¹ç‚¹</h2><ul><li>æ”¯æŒå®¢æˆ·/æœåŠ¡å™¨æ¨¡å¼ï¼šè¯·æ±‚ å“åº”</li><li>ç®€å•å¿«é€Ÿï¼šå®¢æˆ·å‘æœåŠ¡å™¨è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„ã€‚è¯·æ±‚æ–¹æ³•å¸¸ç”¨çš„æœ‰ GETã€HEADã€POSTã€‚æ¯ç§ æ–¹æ³•è§„å®šäº†å®¢æˆ·ä¸æœåŠ¡å™¨è”ç³»çš„ç±»å‹ä¸åŒã€‚ç”±äº HTTP åè®®ç®€å•ï¼Œä½¿å¾— HTTP æœåŠ¡å™¨çš„ç¨‹åºè§„æ¨¡å°ï¼Œå› è€Œé€šä¿¡é€Ÿåº¦å¾ˆå¿«ã€‚</li><li>çµæ´»ï¼šHTTP å…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡ã€‚æ­£åœ¨ä¼ è¾“çš„ç±»å‹ç”± Content-Type åŠ ä»¥æ ‡è®°ã€‚</li><li>æ— è¿æ¥ï¼šæ— è¿æ¥çš„å«ä¹‰æ˜¯é™åˆ¶æ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·çš„åº”ç­”åï¼Œå³æ–­å¼€è¿æ¥ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚æ—©æœŸè¿™ä¹ˆåšçš„åŸå› æ˜¯è¯·æ±‚èµ„æºå°‘ï¼Œè¿½æ±‚å¿«ã€‚åæ¥é€šè¿‡ Connection: Keep-Alive å®ç°é•¿è¿æ¥</li><li>æ— çŠ¶æ€ï¼šHTTP åè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚ç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æœåç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯ï¼Œåˆ™å®ƒå¿…é¡»é‡ä¼ ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´æ¯æ¬¡è¿æ¥ä¼ é€çš„æ•°æ®é‡å¢å¤§ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨æœåŠ¡å™¨ä¸éœ€è¦å…ˆå‰ä¿¡æ¯æ—¶å®ƒçš„åº”ç­”å°±è¾ƒå¿«ã€‚</li></ul><p>HTTP æ˜¯ä¸€ç§æ— çŠ¶æ€åè®®ï¼ŒHTTP åè®®æœ¬èº«ä¸ä¼šå¯¹å‘é€è¿‡æ¥çš„è¯·æ±‚å’Œå“åº”çš„é€šä¿¡çŠ¶æ€åšä¸€ä¸ªæŒä¹…åŒ–å¤„ç†ã€‚è¿™æ ·åšçš„ç›®çš„å°±æ˜¯ä¸ºäº†ä¿è¯ HTTP åè®®çš„ç®€å•æ€§ï¼Œä»è€Œèƒ½å¤Ÿå¿«é€Ÿçš„å¤„ç†å¤§é‡çš„äº‹åŠ¡ï¼Œæé«˜æ•ˆç‡ã€‚</p><p>ç„¶è€Œåœ¨å¾ˆå¤šçš„åœºæ™¯å½“ä¸­ï¼Œæ— çŠ¶æ€çš„ç‰¹æ€§å°±è®©æˆ‘ä»¬éå¸¸å°´å°¬ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬éœ€è¦ä¿æŒä¸€ä¸ªç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œç”±äºæˆ‘ä»¬ HTTP åè®®æ— çŠ¶æ€çš„ç‰¹ç‚¹ï¼Œæ— æ³•å‘æœåŠ¡å™¨è¯æ˜æˆ‘ä»¬â€™è®¤è¯†â€™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼•å…¥åˆ«çš„æŠ€æœ¯æ¥åšå¤„ç†ã€‚æ¯”å¦‚ï¼šcookie</p><h2 id="HTTP-URL"><a href="#HTTP-URL" class="headerlink" title="HTTP URL"></a>HTTP URL</h2><pre class="line-numbers language-php"><code class="language-php">http<span class="token punctuation">:</span><span class="token comment" spellcheck="true">//host[":"port][abs_path]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>host: ä»£è¡¨ä¸»æœºåŸŸåæˆ–IPåœ°å€</li><li>port: ç«¯å£å·ï¼Œç¼ºçœç«¯å£80</li><li>abs_path : è¯·æ±‚èµ„æºçš„URLï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¡« â€œ/â€œï¼Œé€šå¸¸æµè§ˆå™¨ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å®Œæˆã€‚<br>EG:</li><li>ä¸¾ä¸ªæ —å­ï¼š<a href="http://www.baidu.com" target="_blank" rel="noopener">http://www.baidu.com</a> </li></ul><h2 id="HTTP-è¯·æ±‚"><a href="#HTTP-è¯·æ±‚" class="headerlink" title="HTTP è¯·æ±‚"></a>HTTP è¯·æ±‚</h2><p>ä¸‹å›¾æ˜¯åœ¨ç½‘ä¸Šæ‰¾çš„ä¸€å¼ å›¾ï¼Œè§‰å¾—èƒ½å¾ˆå¥½çš„è¡¨è¾¾HTTPè¯·æ±‚çš„æ‰€å‘é€çš„æ•°æ®æ ¼å¼ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5w3ngr7gfj20kr06lmx0.jpg" alt></p><p>ç”±ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼ŒHTTP è¯·æ±‚ç”±è¯·æ±‚è¡Œï¼Œæ¶ˆæ¯æŠ¥å¤´ï¼Œè¯·æ±‚æ­£æ–‡ä¸‰éƒ¨åˆ†æ„æˆã€‚</p><h3 id="HTTP-è¯·æ±‚çŠ¶æ€è¡Œ"><a href="#HTTP-è¯·æ±‚çŠ¶æ€è¡Œ" class="headerlink" title="HTTP è¯·æ±‚çŠ¶æ€è¡Œ"></a>HTTP è¯·æ±‚çŠ¶æ€è¡Œ</h3><p>è¯·æ±‚è¡Œç”±è¯·æ±‚ Method ,  URL å­—æ®µå’Œ HTTP Version ä¸‰éƒ¨åˆ†æ„æˆ, æ€»çš„æ¥è¯´è¯·æ±‚è¡Œå°±æ˜¯å®šä¹‰äº†æœ¬æ¬¡è¯·æ±‚çš„è¯·æ±‚æ–¹å¼, è¯·æ±‚çš„åœ°å€, ä»¥åŠæ‰€éµå¾ªçš„ HTTP åè®®ç‰ˆæœ¬ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-php"><code class="language-php"><span class="token constant">GET</span> <span class="token operator">/</span>example<span class="token punctuation">.</span>html <span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">.</span><span class="token function">1</span> <span class="token punctuation">(</span><span class="token constant">CRLF</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>HTTP åè®®çš„æ–¹æ³•æœ‰ï¼š</p><ul><li>GETï¼š è¯·æ±‚*<em>è·å– *</em>Request-URI æ‰€æ ‡è¯†çš„èµ„æº</li><li>POSTï¼š åœ¨ Request-URI æ‰€æ ‡è¯†çš„èµ„æºå<strong>å¢åŠ </strong>æ–°çš„æ•°æ®</li><li>HEADï¼š è¯·æ±‚è·å–ç”± Request-URI æ‰€æ ‡è¯†çš„èµ„æºçš„<strong>å“åº”æ¶ˆæ¯æŠ¥å¤´</strong></li><li>PUTï¼š è¯·æ±‚æœåŠ¡å™¨<strong>å­˜å‚¨æˆ–ä¿®æ”¹</strong>ä¸€ä¸ªèµ„æºï¼Œå¹¶ç”¨ Request-URI ä½œä¸ºå…¶æ ‡è¯†</li><li>DELETEï¼š è¯·æ±‚æœåŠ¡å™¨*<em>åˆ é™¤ *</em>Request-URI æ‰€æ ‡è¯†çš„èµ„æº</li><li>TRACEï¼š è¯·æ±‚æœåŠ¡å™¨å›é€æ”¶åˆ°çš„è¯·æ±‚ä¿¡æ¯ï¼Œä¸»è¦ç”¨äº<strong>æµ‹è¯•æˆ–è¯Šæ–­</strong></li><li>CONNECTï¼š ä¿ç•™å°†æ¥ä½¿ç”¨</li><li>OPTIONSï¼š è¯·æ±‚æŸ¥è¯¢æœåŠ¡å™¨çš„æ€§èƒ½ï¼Œæˆ–è€…æŸ¥è¯¢ä¸èµ„æºç›¸å…³çš„é€‰é¡¹å’Œéœ€æ±‚</li></ul><h3 id="HTTP-è¯·æ±‚å¤´"><a href="#HTTP-è¯·æ±‚å¤´" class="headerlink" title="HTTP è¯·æ±‚å¤´"></a>HTTP è¯·æ±‚å¤´</h3><p>æ¶ˆæ¯æŠ¥å¤´ç”±ä¸€ç³»åˆ—çš„é”®å€¼å¯¹ç»„æˆï¼Œå…è®¸å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€äº›é™„åŠ ä¿¡æ¯æˆ–è€…å®¢æˆ·ç«¯è‡ªèº«çš„ä¿¡æ¯ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><table><thead><tr><th>Header</th><th>è§£é‡Š</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>Accept</td><td>å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯æ”¯æŒçš„æ•°æ®ç±»å‹ã€‚</td><td>Accept: text/plain, text/html</td></tr><tr><td>Accept-Charset</td><td>å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯é‡‡ç”¨çš„ç¼–ç ã€‚</td><td>Accept-Charset: iso-8859-5,utf-8</td></tr><tr><td>Accept-Encoding</td><td>å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®¢æˆ·æœºæ”¯æŒçš„æ•°æ®å‹ç¼©æ ¼å¼ã€‚</td><td>Accept-Encoding: compress, gzip</td></tr><tr><td>Accept-Language</td><td>å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®¢æˆ·æœºçš„è¯­è¨€ç¯å¢ƒã€‚</td><td>Accept-Language: en,zh</td></tr><tr><td>Accept-Ranges</td><td>å¯ä»¥è¯·æ±‚ç½‘é¡µå®ä½“çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­èŒƒå›´å­—æ®µ</td><td>Accept-Ranges: bytes</td></tr><tr><td>Authorization</td><td>HTTPæˆæƒçš„æˆæƒè¯ä¹¦ç±»å‹</td><td>Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==</td></tr><tr><td>Cache-Control</td><td>æŒ‡å®šè¯·æ±‚å’Œå“åº”éµå¾ªçš„ç¼“å­˜æœºåˆ¶</td><td>Cache-Control: no-cache</td></tr><tr><td>Connection</td><td>è¡¨ç¤ºæ˜¯å¦éœ€è¦æŒä¹…è¿æ¥ï¼ˆHTTP 1.1é»˜è®¤è¿›è¡ŒæŒä¹…è¿æ¥ï¼‰</td><td>Keep-Alive</td></tr><tr><td>Cookie</td><td>HTTPè¯·æ±‚å‘é€æ—¶ï¼Œä¼šæŠŠä¿å­˜åœ¨è¯¥è¯·æ±‚åŸŸåä¸‹çš„æ‰€æœ‰cookieå€¼ä¸€èµ·å‘é€ç»™webæœåŠ¡å™¨</td><td>Cookie: $Version=1; Skin=new;</td></tr><tr><td>Content-Length</td><td>è¯·æ±‚çš„å†…å®¹é•¿åº¦</td><td>Content-Length: 348</td></tr><tr><td>Content-Type</td><td>è¯·æ±‚çš„ä¸å®ä½“å¯¹åº”çš„MIMEä¿¡æ¯</td><td>Content-Type: application/x-www-form-urlencoded</td></tr><tr><td>Date</td><td>è¯·æ±‚å‘é€çš„æ—¥æœŸå’Œæ—¶é—´</td><td>Date: Tue, 15 Nov 2010 08:12:31 GMT</td></tr><tr><td>Expect</td><td>è¯·æ±‚çš„ç‰¹å®šçš„æœåŠ¡å™¨è¡Œä¸º</td><td>Expect: 100-continue</td></tr><tr><td>From</td><td>å‘å‡ºè¯·æ±‚çš„ç”¨æˆ·çš„Email</td><td>From: <a href="mailto:xxx@163.com" target="_blank" rel="noopener">xxx@163.com</a></td></tr><tr><td>Host</td><td>æŒ‡å®šè¯·æ±‚çš„æœåŠ¡å™¨çš„åŸŸåå’Œç«¯å£å·</td><td>Host: <a href="https://link.juejin.im/?target=http%3A%2F%2Fwww.zcmhi.com" target="_blank" rel="noopener">www.baidu.com</a></td></tr><tr><td>If-Match</td><td>åªæœ‰è¯·æ±‚å†…å®¹ä¸å®ä½“ç›¸åŒ¹é…æ‰æœ‰æ•ˆ</td><td>If-Match: â€œ737060cd8c284d8af7ad3082f209582dâ€</td></tr><tr><td>If-Modified-Since</td><td>å®¢æˆ·æœºé€šè¿‡è¿™ä¸ªå¤´å‘Šè¯‰æœåŠ¡å™¨ï¼Œèµ„æºçš„ç¼“å­˜æ—¶é—´ã€‚</td><td>If-Modified-Since: Sat, 29 Oct 2010 19:43:31 GMT</td></tr><tr><td>If-None-Match</td><td>å¦‚æœå†…å®¹æœªæ”¹å˜è¿”å›304ä»£ç ï¼Œå‚æ•°ä¸ºæœåŠ¡å™¨å…ˆå‰å‘é€çš„Etagï¼Œä¸æœåŠ¡å™¨å›åº”çš„Etagæ¯”è¾ƒåˆ¤æ–­æ˜¯å¦æ”¹å˜</td><td>If-None-Match: â€œ737060cd8c284d8af7ad3082f209582dâ€</td></tr><tr><td>If-Range</td><td>å¦‚æœå®ä½“æœªæ”¹å˜ï¼ŒæœåŠ¡å™¨å‘é€å®¢æˆ·ç«¯ä¸¢å¤±çš„éƒ¨åˆ†ï¼Œå¦åˆ™å‘é€æ•´ä¸ªå®ä½“ã€‚å‚æ•°ä¹Ÿä¸ºEtag</td><td>If-Range: â€œ737060cd8c284d8af7ad3082f209582dâ€</td></tr><tr><td>If-Unmodified-Since</td><td>åªåœ¨å®ä½“åœ¨æŒ‡å®šæ—¶é—´ä¹‹åæœªè¢«ä¿®æ”¹æ‰è¯·æ±‚æˆåŠŸ</td><td>If-Unmodified-Since: Sat, 29 Oct 2010 19:43:31 GMT</td></tr><tr><td>Max-Forwards</td><td>é™åˆ¶ä¿¡æ¯é€šè¿‡ä»£ç†å’Œç½‘å…³ä¼ é€çš„æ—¶é—´</td><td>Max-Forwards: 10</td></tr><tr><td>Pragma</td><td>ç”¨æ¥åŒ…å«å®ç°ç‰¹å®šçš„æŒ‡ä»¤</td><td>Pragma: no-cache</td></tr><tr><td>Proxy-Authorization</td><td>è¿æ¥åˆ°ä»£ç†çš„æˆæƒè¯ä¹¦</td><td>Proxy-Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==</td></tr><tr><td>Range</td><td>åªè¯·æ±‚å®ä½“çš„ä¸€éƒ¨åˆ†ï¼ŒæŒ‡å®šèŒƒå›´</td><td>Range: bytes=500-999</td></tr><tr><td>Referer</td><td>å®¢æˆ·æœºé€šè¿‡è¿™ä¸ªå¤´å‘Šè¯‰æœåŠ¡å™¨ï¼Œå®ƒæ˜¯ä»å“ªä¸ªèµ„æºæ¥è®¿é—®æœåŠ¡å™¨çš„ã€‚ï¼ˆä¸€èˆ¬ç”¨äºé˜²ç›—é“¾ï¼‰</td><td>Referer: <a href="https://link.juejin.im/?target=http%3A%2F%2Fwww.zcmhi.com%2Farchives%2F71.html" target="_blank" rel="noopener">www.zcmhi.com/archives/71â€¦</a></td></tr><tr><td>TE</td><td>å®¢æˆ·ç«¯æ„¿æ„æ¥å—çš„ä¼ è¾“ç¼–ç ï¼Œå¹¶é€šçŸ¥æœåŠ¡å™¨æ¥å—æ¥å—å°¾åŠ å¤´ä¿¡æ¯</td><td>TE: trailers,deflate;q=0.5</td></tr><tr><td>Upgrade</td><td>å‘æœåŠ¡å™¨æŒ‡å®šæŸç§ä¼ è¾“åè®®ä»¥ä¾¿æœåŠ¡å™¨è¿›è¡Œè½¬æ¢ï¼ˆå¦‚æœæ”¯æŒï¼‰</td><td>Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11</td></tr><tr><td>User-Agent</td><td>æµè§ˆå™¨çš„å…·ä½“ä¿¡æ¯</td><td>User-Agent: Mozilla/5.0 (Linux; X11)</td></tr><tr><td>Via</td><td>é€šçŸ¥ä¸­é—´ç½‘å…³æˆ–ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œé€šä¿¡åè®®</td><td>Via: 1.0 fred, 1.1 <a href="https://link.juejin.im/?target=http%3A%2F%2Fnowhere.com" target="_blank" rel="noopener">nowhere.com</a>(Apache/1.1)</td></tr><tr><td>Warning</td><td>å…³äºæ¶ˆæ¯å®ä½“çš„è­¦å‘Šä¿¡æ¯</td><td>Warn: 199 Miscellaneous warning</td></tr></tbody></table><h3 id="HTTP-è¯·æ±‚æ­£æ–‡"><a href="#HTTP-è¯·æ±‚æ­£æ–‡" class="headerlink" title="HTTP è¯·æ±‚æ­£æ–‡"></a>HTTP è¯·æ±‚æ­£æ–‡</h3><p>åªæœ‰å‘é€ POST æ–¹å¼æ—¶æ‰æœ‰è¯·æ±‚æ­£æ–‡ï¼ŒGET æ–¹å¼æ²¡æœ‰è¯·æ±‚æ­£æ–‡</p><h3 id="HTTP-è¯·æ±‚æŠ¥æ–‡"><a href="#HTTP-è¯·æ±‚æŠ¥æ–‡" class="headerlink" title="HTTP è¯·æ±‚æŠ¥æ–‡"></a>HTTP è¯·æ±‚æŠ¥æ–‡</h3><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5w4vnbdrvj20m80egaan.jpg" alt></p><h2 id="HTTP-å“åº”"><a href="#HTTP-å“åº”" class="headerlink" title="HTTP å“åº”"></a>HTTP å“åº”</h2><p>ä¸ HTTP è¯·æ±‚ç±»ä¼¼ï¼Œå…ˆä¸Šä¸€å¼ å›¾ï¼š</p><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5w4wab05kj20kp06qt8k.jpg" alt></p><p>HTTP å“åº”ä¹Ÿç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼ŒåŒ…æ‹¬çŠ¶æ€è¡Œï¼Œæ¶ˆæ¯æŠ¥å¤´ï¼Œå“åº”æ­£æ–‡ã€‚</p><h3 id="HTTP-å“åº”çŠ¶æ€è¡Œ"><a href="#HTTP-å“åº”çŠ¶æ€è¡Œ" class="headerlink" title="HTTP å“åº”çŠ¶æ€è¡Œ"></a>HTTP å“åº”çŠ¶æ€è¡Œ</h3><p>çŠ¶æ€è¡Œä¹Ÿç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼ŒåŒ…æ‹¬ HTTP åè®®çš„ç‰ˆæœ¬ï¼ŒçŠ¶æ€ç ï¼Œä»¥åŠå¯¹çŠ¶æ€ç çš„æ–‡æœ¬æè¿°ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-php"><code class="language-php"><span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span> <span class="token number">200</span> <span class="token constant">OK</span> ï¼ˆ<span class="token constant">CRLF</span>ï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="HTTP-å“åº”å¤´"><a href="#HTTP-å“åº”å¤´" class="headerlink" title="HTTP å“åº”å¤´"></a>HTTP å“åº”å¤´</h3><table><thead><tr><th align="left">Header</th><th align="left">è§£é‡Š</th><th align="left">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">Accept-Ranges</td><td align="left">è¡¨æ˜æœåŠ¡å™¨æ˜¯å¦æ”¯æŒæŒ‡å®šèŒƒå›´è¯·æ±‚åŠå“ªç§ç±»å‹çš„åˆ†æ®µè¯·æ±‚</td><td align="left">Accept-Ranges: bytes</td></tr><tr><td align="left">Age</td><td align="left">ä»åŸå§‹æœåŠ¡å™¨åˆ°ä»£ç†ç¼“å­˜å½¢æˆçš„ä¼°ç®—æ—¶é—´ï¼ˆä»¥ç§’è®¡ï¼Œéè´Ÿï¼‰</td><td align="left">Age: 12</td></tr><tr><td align="left">Allow</td><td align="left">å¯¹æŸç½‘ç»œèµ„æºçš„æœ‰æ•ˆçš„è¯·æ±‚è¡Œä¸ºï¼Œä¸å…è®¸åˆ™è¿”å›405</td><td align="left">Allow: GET, HEAD</td></tr><tr><td align="left">Cache-Control</td><td align="left">å‘Šè¯‰æ‰€æœ‰çš„ç¼“å­˜æœºåˆ¶æ˜¯å¦å¯ä»¥ç¼“å­˜åŠå“ªç§ç±»å‹</td><td align="left">Cache-Control: no-cache</td></tr><tr><td align="left">Content-Encoding</td><td align="left">webæœåŠ¡å™¨æ”¯æŒçš„è¿”å›å†…å®¹å‹ç¼©ç¼–ç ç±»å‹ã€‚</td><td align="left">Content-Encoding: gzip</td></tr><tr><td align="left">Content-Language</td><td align="left">å“åº”ä½“çš„è¯­è¨€</td><td align="left">Content-Language: en,zh</td></tr><tr><td align="left">Content-Length</td><td align="left">å“åº”ä½“çš„é•¿åº¦</td><td align="left">Content-Length: 348</td></tr><tr><td align="left">Content-Location</td><td align="left">è¯·æ±‚èµ„æºå¯æ›¿ä»£çš„å¤‡ç”¨çš„å¦ä¸€åœ°å€</td><td align="left">Content-Location: /index.htm</td></tr><tr><td align="left">Content-MD5</td><td align="left">è¿”å›èµ„æºçš„MD5æ ¡éªŒå€¼</td><td align="left">Content-MD5: Q2hlY2sgSW50ZWdyaXR5IQ==</td></tr><tr><td align="left">Content-Range</td><td align="left">åœ¨æ•´ä¸ªè¿”å›ä½“ä¸­æœ¬éƒ¨åˆ†çš„å­—èŠ‚ä½ç½®</td><td align="left">Content-Range: bytes 21010-47021/47022</td></tr><tr><td align="left">Content-Type</td><td align="left">å¦‚æœè¿”å›æ˜¯æµå¼çš„æ•°æ®ï¼Œæˆ‘ä»¬å°±å¿…é¡»å‘Šè¯‰æµè§ˆå™¨è¿™ä¸ªå¤´ï¼Œä¸ç„¶æµè§ˆå™¨ä¼šä¸‹è½½è¿™ä¸ªé¡µé¢ï¼ŒåŒæ—¶å‘Šè¯‰æµè§ˆå™¨æ˜¯utf8ç¼–ç ï¼Œå¦åˆ™å¯èƒ½å‡ºç°ä¹±ç </td><td align="left">Content-Type: text/html; charset=utf-8</td></tr><tr><td align="left">Date</td><td align="left">åŸå§‹æœåŠ¡å™¨æ¶ˆæ¯å‘å‡ºçš„æ—¶é—´</td><td align="left">Date: Tue, 15 Nov 2010 08:12:31 GMT</td></tr><tr><td align="left">ETag</td><td align="left">è¯·æ±‚å˜é‡çš„å®ä½“æ ‡ç­¾çš„å½“å‰å€¼</td><td align="left">ETag: â€œ737060cd8c284d8af7ad3082f209582dâ€</td></tr><tr><td align="left">Expires</td><td align="left">å“åº”è¿‡æœŸçš„æ—¥æœŸå’Œæ—¶é—´</td><td align="left">Expires: Thu, 01 Dec 2010 16:00:00 GMT</td></tr><tr><td align="left">Last-Modified</td><td align="left">è¯·æ±‚èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´</td><td align="left">Last-Modified: Tue, 15 Nov 2010 12:45:26 GMT</td></tr><tr><td align="left">Location</td><td align="left">ç”¨æ¥é‡å®šå‘æ¥æ”¶æ–¹åˆ°éè¯·æ±‚URLçš„ä½ç½®æ¥å®Œæˆè¯·æ±‚æˆ–æ ‡è¯†æ–°çš„èµ„æº</td><td align="left">Location: <a href="http://www.zcmhi.com/archives/94.html" target="_blank" rel="noopener">http://www.zcmhi.com/archives/94.html</a></td></tr><tr><td align="left">Pragma</td><td align="left">åŒ…æ‹¬å®ç°ç‰¹å®šçš„æŒ‡ä»¤ï¼Œå®ƒå¯åº”ç”¨åˆ°å“åº”é“¾ä¸Šçš„ä»»ä½•æ¥æ”¶æ–¹</td><td align="left">Pragma: no-cache</td></tr><tr><td align="left">Proxy-Authenticate</td><td align="left">å®ƒæŒ‡å‡ºè®¤è¯æ–¹æ¡ˆå’Œå¯åº”ç”¨åˆ°ä»£ç†çš„è¯¥URLä¸Šçš„å‚æ•°</td><td align="left">Proxy-Authenticate: Basic</td></tr><tr><td align="left">refresh</td><td align="left">åº”ç”¨äºé‡å®šå‘æˆ–ä¸€ä¸ªæ–°çš„èµ„æºè¢«åˆ›é€ ï¼Œåœ¨5ç§’ä¹‹åé‡å®šå‘ï¼ˆç”±ç½‘æ™¯æå‡ºï¼Œè¢«å¤§éƒ¨åˆ†æµè§ˆå™¨æ”¯æŒï¼‰</td><td align="left">Refresh: 5; url=<a href="http://www.zcmhi.com/archives/94.html" target="_blank" rel="noopener">http://www.zcmhi.com/archives/94.html</a></td></tr><tr><td align="left">Retry-After</td><td align="left">å¦‚æœå®ä½“æš‚æ—¶ä¸å¯å–ï¼Œé€šçŸ¥å®¢æˆ·ç«¯åœ¨æŒ‡å®šæ—¶é—´ä¹‹åå†æ¬¡å°è¯•</td><td align="left">Retry-After: 120</td></tr><tr><td align="left">Server</td><td align="left">webæœåŠ¡å™¨è½¯ä»¶åç§°</td><td align="left">Server: Apache/1.3.27 (Unix) (Red-Hat/Linux)</td></tr><tr><td align="left">Set-Cookie</td><td align="left">è®¾ç½®Http Cookie</td><td align="left">Set-Cookie: UserID=JohnDoe; Max-Age=3600; Version=1</td></tr><tr><td align="left">Trailer</td><td align="left">æŒ‡å‡ºå¤´åŸŸåœ¨åˆ†å—ä¼ è¾“ç¼–ç çš„å°¾éƒ¨å­˜åœ¨</td><td align="left">Trailer: Max-Forwards</td></tr><tr><td align="left">Transfer-Encoding</td><td align="left">æ–‡ä»¶ä¼ è¾“ç¼–ç </td><td align="left">Transfer-Encoding:chunked</td></tr><tr><td align="left">Vary</td><td align="left">å‘Šè¯‰ä¸‹æ¸¸ä»£ç†æ˜¯ä½¿ç”¨ç¼“å­˜å“åº”è¿˜æ˜¯ä»åŸå§‹æœåŠ¡å™¨è¯·æ±‚</td><td align="left">Vary: *</td></tr><tr><td align="left">Via</td><td align="left">å‘ŠçŸ¥ä»£ç†å®¢æˆ·ç«¯å“åº”æ˜¯é€šè¿‡å“ªé‡Œå‘é€çš„</td><td align="left">Via: 1.0 fred, 1.1 nowhere.com (Apache/1.1)</td></tr><tr><td align="left">Warning</td><td align="left">è­¦å‘Šå®ä½“å¯èƒ½å­˜åœ¨çš„é—®é¢˜</td><td align="left">Warning: 199 Miscellaneous warning</td></tr><tr><td align="left">WWW-Authenticate</td><td align="left">è¡¨æ˜å®¢æˆ·ç«¯è¯·æ±‚å®ä½“åº”è¯¥ä½¿ç”¨çš„æˆæƒæ–¹æ¡ˆ</td><td align="left">WWW-Authenticate: Basic</td></tr></tbody></table><h3 id="HTTP-å“åº”çŠ¶æ€ç "><a href="#HTTP-å“åº”çŠ¶æ€ç " class="headerlink" title="HTTP å“åº”çŠ¶æ€ç "></a>HTTP å“åº”çŠ¶æ€ç </h3><p>çŠ¶æ€ä»£ç æœ‰ä¸‰ä½æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„<strong>ç±»åˆ«</strong>ï¼Œä¸”æœ‰äº”ç§å¯èƒ½å–å€¼ï¼š</p><ul><li><p>1xxï¼š<strong>æŒ‡ç¤ºä¿¡æ¯</strong> - è¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†</p></li><li><p>100 å®¢æˆ·å¿…é¡»ç»§ç»­å‘å‡ºè¯·æ±‚</p><ul><li>101 å®¢æˆ·è¦æ±‚æœåŠ¡å™¨æ ¹æ®è¯·æ±‚è½¬æ¢ HTTP åè®®ç‰ˆæœ¬</li></ul></li><li><p>2xxï¼š<strong>æˆåŠŸ</strong> - è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ã€ç†è§£ã€æ¥å—</p></li><li><p>200 ï¼ˆæˆåŠŸï¼‰ æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚ã€‚ é€šå¸¸ï¼Œè¿™è¡¨ç¤ºæœåŠ¡å™¨æä¾›äº†è¯·æ±‚çš„ç½‘é¡µã€‚</p><ul><li>201 ï¼ˆå·²åˆ›å»ºï¼‰ è¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æºã€‚</li><li>202 ï¼ˆå·²æ¥å—ï¼‰ æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†ã€‚</li></ul></li><li><p>3xxï¼š<strong>é‡å®šå‘</strong> - è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œ</p></li><li><p>300 ï¼ˆå¤šç§é€‰æ‹©ï¼‰ é’ˆå¯¹è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯æ‰§è¡Œå¤šç§æ“ä½œã€‚ æœåŠ¡å™¨å¯æ ¹æ®è¯·æ±‚è€… (user agent) é€‰æ‹©ä¸€é¡¹æ“ä½œï¼Œæˆ–æä¾›æ“ä½œåˆ—è¡¨ä¾›è¯·æ±‚è€…é€‰æ‹©ã€‚</p></li><li><p>301 ï¼ˆæ°¸ä¹…ç§»åŠ¨ï¼‰ è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ æœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼ˆå¯¹ GET æˆ– HEAD è¯·æ±‚çš„å“åº”ï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°æ–°ä½ç½®ã€‚</p><ul><li>302 ï¼ˆä¸´æ—¶ç§»åŠ¨ï¼‰ æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ã€‚</li></ul></li><li><p>4xxï¼š<strong>å®¢æˆ·ç«¯é”™è¯¯</strong> - è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°</p></li><li><p>400 ï¼ˆé”™è¯¯è¯·æ±‚ï¼‰ æœåŠ¡å™¨ä¸ç†è§£è¯·æ±‚çš„è¯­æ³•ã€‚</p><ul><li>401 ï¼ˆæœªæˆæƒï¼‰ è¯·æ±‚è¦æ±‚èº«ä»½éªŒè¯ã€‚ å¯¹äºéœ€è¦ç™»å½•çš„ç½‘é¡µï¼ŒæœåŠ¡å™¨å¯èƒ½è¿”å›æ­¤å“åº”ã€‚</li><li>403 ï¼ˆç¦æ­¢ï¼‰ æœåŠ¡å™¨æ‹’ç»è¯·æ±‚ã€‚</li></ul></li><li><p>5xxï¼š<strong>æœåŠ¡å™¨ç«¯é”™è¯¯</strong> - æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚</p></li><li><p>500 ï¼ˆæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼‰ æœåŠ¡å™¨é‡åˆ°é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ã€‚</p></li><li><p>501 ï¼ˆå°šæœªå®æ–½ï¼‰ æœåŠ¡å™¨ä¸å…·å¤‡å®Œæˆè¯·æ±‚çš„åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼ŒæœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚æ–¹æ³•æ—¶å¯èƒ½ä¼šè¿”å›æ­¤ä»£ç ã€‚</p></li><li><p>502 ï¼ˆé”™è¯¯ç½‘å…³ï¼‰ æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆå“åº”ã€‚</p></li><li><p>503 ï¼ˆæœåŠ¡ä¸å¯ç”¨ï¼‰ æœåŠ¡å™¨ç›®å‰æ— æ³•ä½¿ç”¨ï¼ˆç”±äºè¶…è½½æˆ–åœæœºç»´æŠ¤ï¼‰ã€‚ é€šå¸¸ï¼Œè¿™åªæ˜¯æš‚æ—¶çŠ¶æ€ã€‚</p></li><li><p>504 ï¼ˆç½‘å…³è¶…æ—¶ï¼‰ æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ã€‚</p></li><li><p>505 ï¼ˆHTTP ç‰ˆæœ¬ä¸å—æ”¯æŒï¼‰ æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚ä¸­æ‰€ç”¨çš„ HTTP åè®®ç‰ˆæœ¬ã€‚</p></li></ul><h3 id="HTTP-å“åº”æŠ¥æ–‡"><a href="#HTTP-å“åº”æŠ¥æ–‡" class="headerlink" title="HTTP å“åº”æŠ¥æ–‡"></a>HTTP å“åº”æŠ¥æ–‡</h3><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5w50fsridj20m80g7jrx.jpg" alt></p><h2 id="éæŒä¹…è¿æ¥å’ŒæŒä¹…è¿æ¥"><a href="#éæŒä¹…è¿æ¥å’ŒæŒä¹…è¿æ¥" class="headerlink" title="éæŒä¹…è¿æ¥å’ŒæŒä¹…è¿æ¥"></a>éæŒä¹…è¿æ¥å’ŒæŒä¹…è¿æ¥</h2><p>åœ¨å®é™…çš„åº”ç”¨å½“ä¸­ï¼Œå®¢æˆ·ç«¯å¾€å¾€ä¼šå‘é€ä¸€ç³»åˆ—çš„è¯·æ±‚ï¼Œæ¥ç€æœåŠ¡å™¨ç«¯ä¸€ä¸€çš„å“åº”ã€‚å¯¹äºè¿™äº›è¯·æ±‚|å“åº”ï¼Œå¦‚æœæ¯æ¬¡éƒ½ç»è¿‡ä¸€ä¸ªå•ç‹¬çš„ TPC è¿æ¥å‘é€ï¼Œç§°ä¸ºéæŒä¹…é“¾æ¥ã€‚åä¹‹ï¼Œå¦‚æœæ¯æ¬¡éƒ½ç»è¿‡ç›¸åŒçš„ TCP è¿æ¥è¿›è¡Œå‘é€ï¼Œç§°ä¸ºæŒä¹…é“¾æ¥</p><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5w5876x3xj20hi0cjglu.jpg" alt></p><p>éæŒä¹…è¿æ¥åœ¨æ¯æ¬¡çš„è¯·æ±‚|å“åº”ä¹‹åå°±ä¼šæ–­å¼€è¿æ¥ï¼Œä¸‹æ¬¡åœ¨é‡æ–°å»ºç«‹æ–°çš„ TCP é“¾æ¥ï¼Œè¿™æ ·å°±ä¼šé€ æˆå¤§é‡çš„é€šä¿¡å¼€é”€ã€‚ä¾‹å¦‚å‰é¢æåˆ°çš„å¾€è¿”æ—¶é—´( RTT ) å°±æ˜¯åœ¨å»ºç«‹ TCP è¿æ¥çš„è¿‡ç¨‹ä¸­çš„ä»£ä»·ã€‚</p><p>éæŒä¹…è¿æ¥ç»™æœåŠ¡å™¨å¸¦æ¥äº†æ²‰é‡çš„è´Ÿæ‹…ï¼Œæ¯å°æœåŠ¡å™¨å¯èƒ½åŒæ—¶é¢å¯¹æ•°ä»¥ç™¾è®¡ç”šè‡³æ›´å¤šçš„è¯·æ±‚ã€‚æŒä¹…è¿æ¥å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå…¶ç‰¹ç‚¹æ˜¯ä¸€ç›´ä¿æŒ TCP è¿æ¥çŠ¶æ€ï¼Œç›´åˆ°é‡åˆ°æ˜ç¡®çš„ä¸­æ–­è¦æ±‚ä¹‹åå†ä¸­æ–­è¿æ¥ã€‚æŒä¹…è¿æ¥å‡å°‘äº†é€šä¿¡å¼€é”€ï¼ŒèŠ‚çœäº†é€šä¿¡é‡ã€‚</p><h2 id="GET-ä¸-POST-è¯·æ±‚ä¹‹é—´çš„åŒºåˆ«"><a href="#GET-ä¸-POST-è¯·æ±‚ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="GET ä¸ POST è¯·æ±‚ä¹‹é—´çš„åŒºåˆ«"></a>GET ä¸ POST è¯·æ±‚ä¹‹é—´çš„åŒºåˆ«</h2><table><thead><tr><th align="center">åŒºåˆ«å†…å®¹</th><th align="center">GET</th><th align="center">POST</th></tr></thead><tbody><tr><td align="center">ç‚¹å‡»è¿”å›/åˆ·æ–°æŒ‰é’®</td><td align="center">æ²¡æœ‰å½±å“</td><td align="center">æ•°æ®ä¼šé‡æ–°å‘é€ï¼ˆæµè§ˆå™¨å°†ä¼šæç¤ºâ€œæ•°æ®è¢«é‡æ–°æäº¤â€ï¼‰</td></tr><tr><td align="center">æ·»åŠ ä¹¦ç­¾</td><td align="center">å¯ä»¥</td><td align="center">ä¸å¯ä»¥</td></tr><tr><td align="center">ç¼“å­˜</td><td align="center">å¯ä»¥</td><td align="center">ä¸å¯ä»¥</td></tr><tr><td align="center">ç¼–ç ç±»å‹ï¼ˆEncoding typeï¼‰</td><td align="center">application/x-www-form-rulencoded</td><td align="center"><code>application/x-www-form-rulencoded</code> or <code>multipart/form-data</code> è¯·ä¸ºäºŒè¿›åˆ¶æ•°æ®ä½¿ç”¨ <code>multipart</code> ç¼–ç </td></tr><tr><td align="center">å†å²è®°å½•</td><td align="center">æœ‰</td><td align="center">æ²¡æœ‰</td></tr><tr><td align="center">é•¿åº¦é™åˆ¶</td><td align="center">æœ‰</td><td align="center">æ²¡æœ‰</td></tr><tr><td align="center">æ•°æ®ç±»å‹é™åˆ¶</td><td align="center">åªå…è®¸ ASCLll å­—ç¬¦ç±»å‹</td><td align="center">æ²¡æœ‰é™åˆ¶ï¼Œå…è®¸äºŒè¿›åˆ¶æ•°æ®</td></tr><tr><td align="center">å®‰å…¨æ€§</td><td align="center">æŸ¥è¯¢å­—ç¬¦ä¸²ä¼šæ˜¾ç¤ºåœ¨åœ°å€æ çš„ URL ä¸Šï¼Œä¸å®‰å…¨ï¼Œ<strong>è¯·ä¸è¦ä½¿ç”¨ GET è¯·æ±‚æäº¤æ•æ„Ÿæ•°æ®</strong></td><td align="center">å› ä¸ºæ•°æ®ä¸ä¼šæ˜¾ç¤ºåœ¨åœ°å€æ ä¸­ï¼Œä¹Ÿä¸ä¼šç¼“å­˜ä¸‹æ¥æˆ–ä¿å­˜åœ¨æµè§ˆè®°å½•ä¸­ï¼Œæ‰€ä»¥ POST è¯·æ±‚æ¯” GET è¯·æ±‚å®‰å…¨ï¼Œä½†ä¹Ÿä¸æ˜¯æœ€å®‰å…¨çš„æ–¹å¼ï¼Œå¦‚éœ€è¦ä¼ é€æ•æ„Ÿæ•°æ®ï¼Œ<strong>è¯·ä½¿ç”¨æ•°æ®åŠ å¯†</strong>ã€‚</td></tr><tr><td align="center">å¯è§æ€§</td><td align="center">æŸ¥è¯¢å­—ç¬¦ä¸²åœ¨åœ°å€æ çš„ URL ä¸­å¯è§</td><td align="center">æŸ¥è¯¢å­—ç¬¦ä¸²åœ¨åœ°å€æ çš„ URL ä¸­ä¸å¯è§</td></tr></tbody></table><h2 id="HTTP-ä¸-HTTPS"><a href="#HTTP-ä¸-HTTPS" class="headerlink" title="HTTP ä¸ HTTPS"></a>HTTP ä¸ HTTPS</h2><h3 id="HTTP-çš„ä¸è¶³"><a href="#HTTP-çš„ä¸è¶³" class="headerlink" title="HTTP çš„ä¸è¶³"></a>HTTP çš„ä¸è¶³</h3><ul><li>é€šä¿¡ä½¿ç”¨æ˜æ–‡(ä¸åŠ å¯†),å†…å®¹å¯èƒ½ä¼šè¢«çªƒå¬</li><li>ä¸éªŒè¯é€šä¿¡æ–¹çš„èº«ä»½,å› æ­¤æœ‰å¯èƒ½é­é‡ä¼ªè£…</li><li>æ— æ³•è¯æ˜æŠ¥æ–‡çš„å®Œæ•´æ€§,æ‰€ä»¥æœ‰å¯èƒ½å·²é­ç¯¡æ”¹</li></ul><h3 id="HTTPS-ä»‹ç»"><a href="#HTTPS-ä»‹ç»" class="headerlink" title="HTTPS ä»‹ç»"></a>HTTPS ä»‹ç»</h3><p>HTTP åè®®ä¸­æ²¡æœ‰åŠ å¯†æœºåˆ¶,ä½†å¯ä»¥é€š è¿‡å’Œ SSL (Secure Socket Layer, <strong>å®‰å…¨å¥—æ¥å±‚</strong> )æˆ– TLS (Transport Layer Security, <strong>å®‰å…¨å±‚ä¼ è¾“åè®®</strong>)çš„ç»„åˆä½¿ç”¨,åŠ å¯† HTTP çš„é€šä¿¡å†…å®¹ã€‚å±äºé€šä¿¡åŠ å¯†ï¼Œå³åœ¨æ•´ä¸ªé€šä¿¡çº¿è·¯ä¸­åŠ å¯†ã€‚</p><pre class="line-numbers language-text"><code class="language-text">HTTP + åŠ å¯† + è®¤è¯ + å®Œæ•´æ€§ä¿æŠ¤ = HTTPSï¼ˆHTTP Secure ï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5w5c2yjgaj20m80anwec.jpg" alt></p><p>HTTPS é‡‡ç”¨<strong>å…±äº«å¯†é’¥åŠ å¯†</strong>ï¼ˆå¯¹ç§°ï¼‰å’Œ<strong>å…¬å¼€å¯†é’¥åŠ å¯†</strong>ï¼ˆéå¯¹ç§°ï¼‰ä¸¤è€…å¹¶ç”¨çš„<strong>æ··åˆ</strong>åŠ å¯†æœºåˆ¶ã€‚è‹¥å¯†é’¥èƒ½å¤Ÿå®ç°å®‰å…¨äº¤æ¢,é‚£ä¹ˆæœ‰å¯èƒ½ä¼šè€ƒè™‘ä»…ä½¿ç”¨å…¬å¼€å¯†é’¥åŠ å¯†æ¥é€šä¿¡ã€‚ä½†æ˜¯å…¬å¼€å¯†é’¥åŠ å¯†ä¸å…±äº«å¯†é’¥åŠ å¯†ç›¸æ¯”,å…¶å¤„ç†é€Ÿåº¦è¦æ…¢ã€‚</p><blockquote><p>æ‰€ä»¥åº”å……åˆ†åˆ©ç”¨ä¸¤è€…å„è‡ªçš„ä¼˜åŠ¿, å°†å¤šç§æ–¹æ³•ç»„åˆèµ·æ¥ç”¨äºé€šä¿¡ã€‚ åœ¨<strong>äº¤æ¢å¯†é’¥</strong>é˜¶æ®µä½¿ç”¨<strong>å…¬å¼€å¯†é’¥åŠ å¯†</strong>æ–¹å¼,ä¹‹åçš„å»ºç«‹é€šä¿¡<strong>äº¤æ¢æŠ¥æ–‡</strong>é˜¶æ®µ åˆ™ä½¿ç”¨<strong>å…±äº«å¯†é’¥åŠ å¯†</strong>æ–¹å¼ã€‚</p></blockquote><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5w5dby1hrj20m80fz0tb.jpg" alt></p><p><code>HTTPS</code>æ¡æ‰‹è¿‡ç¨‹çš„ç®€å•æè¿°å¦‚ä¸‹ï¼š</p><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5w5dv56z8j20m80det9g.jpg" alt></p><ol><li><p>æµè§ˆå™¨å°†è‡ªå·±æ”¯æŒçš„ä¸€å¥—åŠ å¯†è§„åˆ™å‘é€ç»™ç½‘ç«™ã€‚</p><pre><code>æœåŠ¡å™¨è·å¾—æµè§ˆå™¨å…¬é’¥</code></pre></li><li><p>ç½‘ç«™ä»ä¸­é€‰å‡ºä¸€ç»„åŠ å¯†ç®—æ³•ä¸ HASH ç®—æ³•ï¼Œå¹¶å°†è‡ªå·±çš„èº«ä»½ä¿¡æ¯ä»¥è¯ä¹¦çš„å½¢å¼å‘å›ç»™æµè§ˆå™¨ã€‚è¯ä¹¦é‡Œé¢åŒ…å«äº†ç½‘ç«™åœ°å€ï¼ŒåŠ å¯†å…¬é’¥ï¼Œä»¥åŠè¯ä¹¦çš„é¢å‘æœºæ„ç­‰ä¿¡æ¯ã€‚</p><pre><code>æµè§ˆå™¨è·å¾—æœåŠ¡å™¨å…¬é’¥</code></pre></li><li><p>è·å¾—ç½‘ç«™è¯ä¹¦ä¹‹åæµè§ˆå™¨è¦åšä»¥ä¸‹å·¥ä½œï¼š</p><p>(a). éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§ï¼ˆé¢å‘è¯ä¹¦çš„æœºæ„æ˜¯å¦åˆæ³•ï¼Œè¯ä¹¦ä¸­åŒ…å«çš„ç½‘ç«™åœ°å€æ˜¯å¦ä¸æ­£åœ¨è®¿é—®çš„åœ°å€ä¸€è‡´ç­‰ï¼‰ï¼Œå¦‚æœè¯ä¹¦å—ä¿¡ä»»ï¼Œåˆ™æµè§ˆå™¨æ é‡Œé¢ä¼šæ˜¾ç¤ºä¸€ä¸ªå°é”å¤´ï¼Œå¦åˆ™ä¼šç»™å‡ºè¯ä¹¦ä¸å—ä¿¡çš„æç¤ºã€‚</p><p>(b). å¦‚æœè¯ä¹¦å—ä¿¡ä»»ï¼Œæˆ–è€…æ˜¯ç”¨æˆ·æ¥å—äº†ä¸å—ä¿¡çš„è¯ä¹¦ï¼Œæµè§ˆå™¨ä¼šç”Ÿæˆä¸€ä¸²éšæœºæ•°çš„å¯†ç ï¼ˆæ¥ä¸‹æ¥é€šä¿¡çš„å¯†é’¥ï¼‰ï¼Œå¹¶ç”¨è¯ä¹¦ä¸­æä¾›çš„å…¬é’¥åŠ å¯†ï¼ˆå…±äº«å¯†é’¥åŠ å¯†ï¼‰ã€‚</p><p>(c) ä½¿ç”¨çº¦å®šå¥½çš„ HASH è®¡ç®—æ¡æ‰‹æ¶ˆæ¯ï¼Œå¹¶ä½¿ç”¨ç”Ÿæˆçš„éšæœºæ•°å¯¹æ¶ˆæ¯è¿›è¡ŒåŠ å¯†ï¼Œæœ€åå°†ä¹‹å‰ç”Ÿæˆçš„æ‰€æœ‰ä¿¡æ¯å‘é€ç»™ç½‘ç«™ã€‚</p><pre><code>  æµè§ˆå™¨éªŒè¯ -&gt; éšæœºå¯†ç   æœåŠ¡å™¨çš„å…¬é’¥åŠ å¯† -&gt; é€šä¿¡çš„å¯†é’¥  é€šä¿¡çš„å¯†é’¥ -&gt; æœåŠ¡å™¨</code></pre></li><li><p>ç½‘ç«™æ¥æ”¶æµè§ˆå™¨å‘æ¥çš„æ•°æ®ä¹‹åè¦åšä»¥ä¸‹çš„æ“ä½œï¼š</p><p>(a). ä½¿ç”¨è‡ªå·±çš„ç§é’¥å°†ä¿¡æ¯è§£å¯†å–å‡ºå¯†ç ï¼Œä½¿ç”¨å¯†ç è§£å¯†æµè§ˆå™¨å‘æ¥çš„æ¡æ‰‹æ¶ˆæ¯ï¼Œå¹¶éªŒè¯ HASH æ˜¯å¦ä¸æµè§ˆå™¨å‘æ¥çš„ä¸€è‡´ã€‚</p><p>(b). ä½¿ç”¨å¯†ç åŠ å¯†ä¸€æ®µæ¡æ‰‹æ¶ˆæ¯ï¼Œå‘é€ç»™æµè§ˆå™¨ã€‚</p><pre><code>  æœåŠ¡å™¨ç”¨è‡ªå·±çš„ç§é’¥è§£å‡ºéšæœºå¯†ç  -&gt; ç”¨å¯†ç è§£å¯†æ¡æ‰‹æ¶ˆæ¯ï¼ˆå…±äº«å¯†é’¥é€šä¿¡ï¼‰-&gt; éªŒè¯HASHä¸æµè§ˆå™¨æ˜¯å¦ä¸€è‡´ï¼ˆéªŒè¯æµè§ˆå™¨ï¼‰</code></pre></li></ol><h3 id="HTTPS-çš„ä¸è¶³"><a href="#HTTPS-çš„ä¸è¶³" class="headerlink" title="HTTPS çš„ä¸è¶³"></a>HTTPS çš„ä¸è¶³</h3><ul><li>åŠ å¯†è§£å¯†è¿‡ç¨‹å¤æ‚ï¼Œå¯¼è‡´è®¿é—®é€Ÿåº¦æ…¢</li><li>åŠ å¯†éœ€è¦è®¤å‘è¯æœºæ„ä»˜è´¹</li><li>æ•´ä¸ªé¡µé¢çš„è¯·æ±‚éƒ½è¦ä½¿ç”¨ HTTPS</li></ul><blockquote><p>å‚è€ƒåœ°å€ï¼š</p><p><a href="https://www.cnblogs.com/quan-coder/p/9277837.html" target="_blank" rel="noopener">https://www.cnblogs.com/quan-coder/p/9277837.html</a></p><p><a href="https://juejin.im/post/5ba65296f265da0ac8493503" target="_blank" rel="noopener">https://juejin.im/post/5ba65296f265da0ac8493503</a></p><p><a href="https://juejin.im/post/5d0de954e51d4556be5b3a6f" target="_blank" rel="noopener">https://juejin.im/post/5d0de954e51d4556be5b3a6f</a></p><p><a href="http://swiftlet.net/archives/1082" target="_blank" rel="noopener">http://swiftlet.net/archives/1082</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-å¤„ç†è·¨åŸŸè¯·æ±‚</title>
      <link href="/2019/08/07/Laravel-%E5%A4%84%E7%90%86%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82/"/>
      <url>/2019/08/07/Laravel-%E5%A4%84%E7%90%86%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>å‡ºäºå®‰å…¨æ€§çš„åŸå› ï¼Œæµè§ˆå™¨ä¼šé™åˆ¶ Script ä¸­çš„è·¨åŸŸè¯·æ±‚ã€‚ç”±äº XMLHttpRequest éµå¾ªåŒæºç­–ç•¥ï¼Œæ‰€æœ‰ä½¿ç”¨ XMLHttpRequest æ„é€  HTTP è¯·æ±‚çš„åº”ç”¨åªèƒ½è®¿é—®è‡ªå·±çš„åŸŸåï¼Œå¦‚æœéœ€è¦æ„é€ è·¨åŸŸçš„è¯·æ±‚ï¼Œé‚£ä¹ˆå¼€å‘è€…éœ€è¦é…åˆæµè§ˆå™¨åšå‡ºä¸€äº›å…è®¸è·¨åŸŸçš„é…ç½®ã€‚</p><p>åœ¨å‰åç«¯åˆ†ç¦»çš„åº”ç”¨ä¸­ï¼Œéœ€è¦ä½¿ç”¨ CORS å®Œæˆè·¨åŸŸè®¿é—®ã€‚åœ¨ CORSä¸­ å‘é€<strong>éç®€å•è¯·æ±‚</strong>ï¼ˆç®€å•è¯·æ±‚ä¹Ÿå°±æ˜¯ GETã€POSTã€HEADï¼Œéç®€å•è¯·æ±‚ï¼šPUTã€DELETEç­‰ï¼‰æ—¶ï¼Œå‰ç«¯ä¼šå‘ä¸€ä¸ªè¯·æ±‚æ–¹å¼ä¸º OPTIONS çš„é¢„è¯·æ±‚ï¼Œå‰ç«¯åªæœ‰æ”¶åˆ°æœåŠ¡å™¨å¯¹è¿™ä¸ª OPTIONS è¯·æ±‚çš„æ­£ç¡®å“åº”ï¼Œæ‰ä¼šå‘é€æ­£å¸¸çš„è¯·æ±‚ï¼Œå¦åˆ™å°†æŠ›å‡ºè·¨åŸŸç›¸å…³çš„é”™è¯¯ã€‚</p><h3 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h3><p>é¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸‹æµè§ˆå™¨ <a href="https://baike.baidu.com/item/åŒæºç­–ç•¥" target="_blank" rel="noopener">åŒæºç­–ç•¥</a>ï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼ŒåŒæºçš„æ„æ€æ˜¯ï¼ŒåŸŸåï¼Œåè®®ï¼Œç«¯å£éƒ½ç›¸åŒã€‚å¦‚æœä¸¤ä¸ªåœ°å€ä¸åŒæºï¼Œé‚£ä¹ˆï¼š</p><ol><li>Cookieã€LocalStorage å’Œ IndexDB æ— æ³•ç›¸äº’è¯»å–ï¼›</li><li>DOM æ— æ³•ç›¸äº’è·å¾—ï¼›</li><li>AJAX è¯·æ±‚ä¸èƒ½ç›¸äº’å‘é€ã€‚</li></ol><h3 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h3><p>CORS æ˜¯ä¸€ä¸ª W3C æ ‡å‡†ï¼Œå…¨ç§°æ˜¯ â€œè·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰ï¼Œå°±æ˜¯å…¶ä¸­ä¸€ç§ç”¨æ¥è§£å†³æµè§ˆå™¨è·¨åŸŸçš„é—®é¢˜æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•çš„å…³é”®æ˜¯åœ¨äºæœåŠ¡å™¨ï¼Œåªè¦æœåŠ¡å™¨ç«¯è¿”å›äº†åˆé€‚çš„å¤´ä¿¡æ¯ï¼ˆHeaderï¼‰ï¼Œå‰ç«¯ JS å‘é€ AJAX çš„æ—¶å€™å°±èƒ½è®¿é—®è·¨åŸŸçš„èµ„æºï¼Œä»£ç å’ŒåŒæºæ—¶ä¸€è‡´ï¼Œæ— éœ€åšä»»ä½•ä¿®æ”¹ï¼Œç”¨æˆ·ä¹Ÿä¸ä¼šæœ‰æ„ŸçŸ¥ã€‚</p><ul><li>å“åº”çš„å¤´éƒ¨åº”è¯¥è¿½åŠ  Access-Control-Allow-Orignï¼Œç”¨æ¥è¡¨æ˜å“ªäº›è¯·æ±‚æºè¢«å…è®¸è®¿é—®èµ„æºå†…å®¹</li><li>æµè§ˆå™¨ä¼šå¯¹è¯·æ±‚æºå’Œå“åº”ä¸­çš„å€¼è¿›è¡ŒåŒ¹é…éªŒè¯</li><li>å¯¹äºè·¨åŸŸçš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šé¢„å‘é€ä¸€ä¸ªéç®€å•æ–¹å¼çš„è¯·æ±‚ï¼Œæ¥åˆ¤æ–­ç»™å®šèµ„æºæ˜¯å¦å‡†å¤‡æ¥å—è·¨åŸŸèµ„æºè®¿é—®</li><li>æœåŠ¡ç«¯åº”ç”¨é€šè¿‡æ£€æŸ¥è¯·æ±‚å¤´éƒ¨çš„ Orign æ¥åˆ¤å®šè¯·æ±‚æ˜¯å¦è·¨åŸŸã€‚</li></ul><h3 id="ä½¿ç”¨-laravel-æ‰©å±•åŒ…å¤„ç†è·¨åŸŸè¯·æ±‚"><a href="#ä½¿ç”¨-laravel-æ‰©å±•åŒ…å¤„ç†è·¨åŸŸè¯·æ±‚" class="headerlink" title="ä½¿ç”¨ laravel æ‰©å±•åŒ…å¤„ç†è·¨åŸŸè¯·æ±‚"></a>ä½¿ç”¨ laravel æ‰©å±•åŒ…å¤„ç†è·¨åŸŸè¯·æ±‚</h3><blockquote><p>barryvdh/laravel-corsï¼š<a href="https://packagist.org/packages/barryvdh/laravel-cors" target="_blank" rel="noopener">https://packagist.org/packages/barryvdh/laravel-cors</a>  </p><p>ä»–æ˜¯ä¸€ä¸ªå·²ç»å†™å¥½äº†çš„æ‰©å±•åŒ…ï¼Œå”¯ä¸€çš„åŠŸèƒ½å°±æ˜¯å¸®æˆ‘ä»¬è§£å†³è·¨åŸŸè¯·æ±‚é—®é¢˜ï¼Œä½¿ç”¨ä¹Ÿéå¸¸çš„ç®€å•</p></blockquote><h3 id="1ã€composer-å®‰è£…æ‰©å±•åŒ…"><a href="#1ã€composer-å®‰è£…æ‰©å±•åŒ…" class="headerlink" title="1ã€composer å®‰è£…æ‰©å±•åŒ…"></a>1ã€composer å®‰è£…æ‰©å±•åŒ…</h3><pre><code>$ composer require barryvdh/laravel-cors</code></pre><blockquote><p>Laravel 5.5 åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒè‡ªåŠ¨åŒ…å‘ç°ï¼Œæ— éœ€æ³¨å†ŒæœåŠ¡æä¾›è€…ï¼ŒLaravel 5.4 åŠä»¥ä¸‹ç‰ˆæœ¬éœ€è¦æ‰‹åŠ¨åœ¨ config/app.php ä¸­æ³¨å†ŒæœåŠ¡æä¾›è€…</p></blockquote><h3 id="2ã€å‘å¸ƒé…ç½®æ–‡ä»¶"><a href="#2ã€å‘å¸ƒé…ç½®æ–‡ä»¶" class="headerlink" title="2ã€å‘å¸ƒé…ç½®æ–‡ä»¶"></a>2ã€å‘å¸ƒé…ç½®æ–‡ä»¶</h3><pre><code>$ php artisan vendor:publish --provider=&quot;Barryvdh\Cors\ServiceProvider&quot;</code></pre><blockquote><p>åœ¨æˆ‘ä»¬çš„ config ç›®å½•ä¸‹é¢ä¼šç”Ÿæˆä¸€ä¸ª cors.php çš„é…ç½®æ–‡ä»¶</p></blockquote><h3 id="3ã€æ³¨å†Œå…¨å±€ä¸­é—´æˆ–è·¯ç”±ä¸­é—´"><a href="#3ã€æ³¨å†Œå…¨å±€ä¸­é—´æˆ–è·¯ç”±ä¸­é—´" class="headerlink" title="3ã€æ³¨å†Œå…¨å±€ä¸­é—´æˆ–è·¯ç”±ä¸­é—´"></a>3ã€æ³¨å†Œå…¨å±€ä¸­é—´æˆ–è·¯ç”±ä¸­é—´</h3><blockquote><p><em>app/Http/Kernel.php</em> </p><p> ä¸‹é¢æ³¨å†Œå…¨å±€ä¸­é—´ä»¶æˆ–è€…è·¯ç”±ä¸­é—´ä»¶</p></blockquote><pre><code>    protected $middleware = [        \Barryvdh\Cors\HandleCors::class, # cors è·¨åŸŸå¤„ç†å…¨å±€ä¸­é—´ä»¶    ];</code></pre><pre><code>    protected $routeMiddleware = [        &#39;cors&#39; =&gt; \Barryvdh\Cors\HandleCors::class, # cors è·¨åŸŸå¤„ç†è·¯ç”±ä¸­é—´ä»¶    ];</code></pre><h3 id="4ã€è‡ªå®šä¹‰é…ç½®"><a href="#4ã€è‡ªå®šä¹‰é…ç½®" class="headerlink" title="4ã€è‡ªå®šä¹‰é…ç½®"></a>4ã€è‡ªå®šä¹‰é…ç½®</h3><p>å¯ä»¥çœ‹åˆ°åªè¦ä½¿ç”¨äº†ä¸­é—´ä»¶ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½æ˜¯å¯ä»¥é€šè¿‡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œbarryvdh/laravel-cors çš„é»˜è®¤é…ç½®éƒ½æ˜¯å…è®¸æ‰€æœ‰è¯·æ±‚ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™äº›é…ç½®ï¼š</p><p><em>config/cors.php</em></p><pre><code>    &#39;supportsCredentials&#39; =&gt; false,    &#39;allowedOrigins&#39; =&gt; [&#39;*&#39;],    &#39;allowedOriginsPatterns&#39; =&gt; [],    &#39;allowedHeaders&#39; =&gt; [&#39;*&#39;],    &#39;allowedMethods&#39; =&gt; [&#39;*&#39;],    &#39;exposedHeaders&#39; =&gt; [],    &#39;maxAge&#39; =&gt; 0,</code></pre><p>åˆ†åˆ«å¯¹åº”å¦‚ä¸‹é…ç½®ï¼š</p><table><thead><tr><th>é…ç½®</th><th>å¯¹åº”çš„ Header</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>supportsCredentials</td><td>Access-Control-Allow-Credentials</td><td>æ˜¯å¦æºå¸¦ Cookie</td></tr><tr><td>allowedOrigins</td><td>Access-Control-Allow-Origin</td><td>å…è®¸çš„åŸŸå</td></tr><tr><td>allowedOriginsPatterns</td><td>Access-Control-Allow-Origin</td><td>é€šè¿‡æ­£åˆ™åŒ¹é…å…è®¸çš„åŸŸå</td></tr><tr><td>allowedHeaders</td><td>Access-Control-Allow-Headers</td><td>å…è®¸çš„ Header</td></tr><tr><td>allowedMethods</td><td>Access-Control-Allow-Methods</td><td>å…è®¸çš„ HTTP æ–¹æ³•</td></tr><tr><td>exposedHeaders</td><td>Access-Control-Expose-Headers</td><td>é™¤äº† 6 ä¸ªåŸºæœ¬çš„å¤´å­—æ®µï¼Œé¢å¤–å…è®¸çš„å­—æ®µ</td></tr><tr><td>maxAge</td><td>Access-Control-Max-Age</td><td>é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸ</td></tr></tbody></table><blockquote><p>åŸæ–‡åœ°å€ï¼š</p><p><a href="https://learnku.com/courses/laravel-package/solving-cross-domain-problems-cors-barryvdhlaravel-cors/2026" target="_blank" rel="noopener">https://learnku.com/courses/laravel-package/solving-cross-domain-problems-cors-barryvdhlaravel-cors/2026</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel-æ‰©å±•åŒ… </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-Artisan è‡ªå®šä¹‰å‘½ä»¤</title>
      <link href="/2019/08/04/Laravel-%E8%87%AA%E5%AE%9A%E4%B9%89Artisan%E5%91%BD%E4%BB%A4/"/>
      <url>/2019/08/04/Laravel-%E8%87%AA%E5%AE%9A%E4%B9%89Artisan%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>å¯¹äºæ¯ä¸€ä¸ªå¼€å‘äººå‘˜æ¥è¯´ï¼Œéƒ½æœ‰è‡ªå·±çš„ä¸€å¥—ä¹ æƒ¯ï¼Œè€Œæˆ‘å°±æ¯”è¾ƒå–œæ¬¢æŠŠä¸€ä¸ªé¡¹ç›®åˆ†å±‚å¼€æ¥ã€‚å„å¸å…¶èŒï¼Œè‡ªå·±æ˜¯ä»€ä¹ˆå®šä½å°±åšå±äºè‡ªå·±å®šä½çš„äº‹æƒ…ã€‚å½“ç„¶ä¸€ä¸ªä¸€ä¸ªæ–‡ä»¶åˆ›å»ºï¼Œé‚£ä¹ˆå¤ªè´¹äº‹æƒ…ä¹Ÿä¸å¤ªæ–¹ä¾¿ã€‚Laravel ä¸ºæˆ‘ä»¬æä¾›äº†è‡ªå®šä¹‰ Artisan å‘½ä»¤çš„æ–¹æ¡ˆï¼Œ ç»™æˆ‘æä¾›äº†å¾ˆå¤§çš„ä¾¿æ·ä»¥è‡ªå®šä¹‰çš„çµæ´»ï¼</p><h3 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h3><pre class="line-numbers language-bash"><code class="language-bash">php artisan make:command AddService<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œå°†ä¼šåœ¨ <code>app\Console</code> ç›®å½•ä¸‹ç”Ÿæˆ Commands ç›®å½•ï¼ŒåŒæ—¶åœ¨ <code>app\Console\Commands</code> ç›®å½•ä¸‹ç”Ÿæˆ AddService.php æ–‡ä»¶</p><h3 id="åˆ›å»ºå­˜æ ¹ç›®å½•åŠæ¨¡æ¿æ–‡ä»¶"><a href="#åˆ›å»ºå­˜æ ¹ç›®å½•åŠæ¨¡æ¿æ–‡ä»¶" class="headerlink" title="åˆ›å»ºå­˜æ ¹ç›®å½•åŠæ¨¡æ¿æ–‡ä»¶"></a>åˆ›å»ºå­˜æ ¹ç›®å½•åŠæ¨¡æ¿æ–‡ä»¶</h3><p>åœ¨ <code>app\Console\Commands</code> ç›®å½•ä¸‹åˆ›å»º Stubs ç›®å½•ï¼Œç„¶ååœ¨åœ¨ Stubs ç›®å½•ä¸‹åˆ›å»º services.stub </p><h3 id="ç¼–è¾‘-services-stub"><a href="#ç¼–è¾‘-services-stub" class="headerlink" title="ç¼–è¾‘ services.stub"></a>ç¼–è¾‘ services.stub</h3><pre><code>&lt;?php# å‘½åç©ºé—´ è‡ªåŠ¨è·å–ç­‰ä¸‹æ·»åŠ çš„ Artisan å‘½ä»¤æ–‡ä»¶é‡Œé¢èµ‹äºˆçš„å‘½åç©ºé—´namespace DummyNamespace;[å¯ä»¥ use å‘½åç©ºé—´]class DummyClass [å¯ä»¥ç¼–è¾‘ç»§æ‰¿çš„çˆ¶ç±»]{    [å¯ä»¥å®šä¹‰å„ç§æ–¹æ³•ï¼Œçœ‹è‡ªå·±éœ€è¦]}</code></pre><h3 id="ç¼–è¾‘-AddServices-php"><a href="#ç¼–è¾‘-AddServices-php" class="headerlink" title="ç¼–è¾‘ AddServices.php"></a>ç¼–è¾‘ AddServices.php</h3><pre><code>&lt;?phpnamespace App\Console\Commands;use Illuminate\Console\GeneratorCommand;class AddServices extends GeneratorCommand{    /**     * æ§åˆ¶å°å‘½ä»¤åç§°     *     * @var string     */    protected $name = &#39;make:service&#39;;    /**     * æ§åˆ¶å°å‘½ä»¤æè¿°     *     * @var string     */    protected $description = &#39;Create a new service  class&#39;;    /**     * ç”Ÿæˆç±»çš„ç±»å‹     *     * @var string     */    protected $type = &#39;Services&#39;;    /**     * è·å–ç”Ÿæˆå™¨çš„å­˜æ ¹æ–‡ä»¶     *     * @return string     */    protected function getStub()    {        return __DIR__.&#39;/Stubs/services.stub&#39;;    }    /**     * è·å–ç±»çš„é»˜è®¤å‘½åç©ºé—´     *     * @param  string  $rootNamespace     * @return string     */    protected function getDefaultNamespace($rootNamespace)    {        # è¿™é‡Œæ˜¯åˆ›å»ºçš„å‘½åç©ºé—´ï¼Œä¹Ÿæ˜¯æ–‡ä»¶åˆ›å»ºçš„ç›®å½•åœ°å€ï¼Œé»˜è®¤æ˜¯ APP ä¸‹é¢        return $rootNamespace.&#39;\Http\Services&#39;;    }}</code></pre><h3 id="æ³¨å†Œå‘½ä»¤"><a href="#æ³¨å†Œå‘½ä»¤" class="headerlink" title="æ³¨å†Œå‘½ä»¤"></a>æ³¨å†Œå‘½ä»¤</h3><p>å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° Kernel.php æ–‡ä»¶çš„ protected $commands = [] å±æ€§æ•°ç»„ä¸­ï¼Œä½¿å‘½ä»¤ç”Ÿæ•ˆ</p><pre><code>    protected $commands = [        //        \App\Console\Commands\AddServices::class    ];</code></pre><h3 id="æµ‹è¯•å‘½ä»¤"><a href="#æµ‹è¯•å‘½ä»¤" class="headerlink" title="æµ‹è¯•å‘½ä»¤"></a>æµ‹è¯•å‘½ä»¤</h3><pre><code>php artisan make:service TeachersService</code></pre><p><img src="https://i.loli.net/2019/09/09/MP8jLTvmNefycrt.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Laravel-ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/2019/08/03/Laravel%E4%B9%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>/2019/08/03/Laravel%E4%B9%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>åœ¨ã€Œæ—¥å¸¸ç”Ÿæ´»ã€ä¸­ ä½¿ç”¨ä»»ä½•å·¥å…·æ—¶ï¼Œå¦‚æœç†è§£äº†è¯¥å·¥å…·çš„å·¥ä½œåŸç†ã€‚é‚£ä¹ˆç”¨èµ·æ¥å°±ä¼šæ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚åº”ç”¨å¼€å‘ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå½“ä½ èƒ½çœŸæ­£æ‡‚å¾—ä¸€ä¸ªåŠŸèƒ½èƒŒåå®ç°åŸç†æ—¶ï¼Œç”¨èµ·æ¥ä¼šæ›´åŠ é¡ºæ‰‹ï¼Œæ–¹ä¾¿ã€‚</p><p>æ–‡æ¡£å­˜åœ¨ç›®çš„æ˜¯ä¸ºäº†è®©ä½ æ›´åŠ æ¸…æ™°åœ°äº†è§£ Laravel æ¡†æ¶æ˜¯å¦‚ä½•å·¥ä½œã€‚é€šè¿‡æ¡†æ¶è¿›è¡Œå…¨é¢äº†è§£ï¼Œè®©ä¸€åˆ‡éƒ½ä¸å†æ„Ÿè§‰å¾ˆã€Œç¥å¥‡ã€ã€‚ç›¸ä¿¡æˆ‘ï¼Œè¿™æœ‰åŠ©äºä½ æ›´åŠ æ¸…æ¥šè‡ªå·±åœ¨åšä»€ä¹ˆï¼Œå¯¹è‡ªå·±æƒ³åšçš„äº‹æƒ…æ›´åŠ èƒ¸æœ‰æˆç«¹ã€‚å°±ç®—ä½ ä¸æ˜ç™½æ‰€æœ‰çš„æœ¯è¯­ï¼Œä¹Ÿä¸ç”¨å› æ­¤å¤±å»ä¿¡å¿ƒï¼åªè¦å¤šä¸€ç‚¹å°è¯•ã€å­¦ç€å¦‚ä½•è¿ç”¨ï¼Œéšç€ä½ æµè§ˆæ–‡æ¡£çš„å…¶ä»–éƒ¨åˆ†ï¼Œä½ çš„çŸ¥è¯†ä¸€å®šä¼šå› æ­¤å¢é•¿ã€‚</p><h3 id="PHP-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#PHP-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="PHP çš„ç”Ÿå‘½å‘¨æœŸ"></a>PHP çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>PHP çš„è¿è¡Œæ¨¡å¼åˆ†äºŒä¸­ï¼šCLI å‘½ä»¤è¡Œæ¨¡å¼ï¼ŒWEB æœåŠ¡æ¨¡å¼</p><h3 id="1ã€æ¨¡å—åˆå§‹åŒ–é˜¶æ®µï¼ˆMINITï¼‰"><a href="#1ã€æ¨¡å—åˆå§‹åŒ–é˜¶æ®µï¼ˆMINITï¼‰" class="headerlink" title="1ã€æ¨¡å—åˆå§‹åŒ–é˜¶æ®µï¼ˆMINITï¼‰"></a>1ã€æ¨¡å—åˆå§‹åŒ–é˜¶æ®µï¼ˆMINITï¼‰</h3><p>åœ¨è¿™ä¸ªé˜¶æ®µ PHP é¦–å…ˆæ£€æµ‹ php.ini æ–‡ä»¶ç§å®šä¹‰çš„æ‰©å±•æ¨¡å—å¹¶å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–å’ŒåŠ è½½çš„å·¥ä½œï¼Œå¦‚ï¼špdoã€mysqldã€redis ç­‰ç­‰æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æ¨¡å—éƒ½è¦åœ¨è¿™ä¸ªé˜¶æ®µå®Œæˆ</p><h3 id="2ã€è¯·æ±‚åˆå§‹åŒ–é˜¶æ®µï¼ˆRINITï¼‰"><a href="#2ã€è¯·æ±‚åˆå§‹åŒ–é˜¶æ®µï¼ˆRINITï¼‰" class="headerlink" title="2ã€è¯·æ±‚åˆå§‹åŒ–é˜¶æ®µï¼ˆRINITï¼‰"></a>2ã€è¯·æ±‚åˆå§‹åŒ–é˜¶æ®µï¼ˆRINITï¼‰</h3><p>åˆå§‹åŒ–æœ¬æ¬¡è„šæœ¬è¯·æ±‚æ‰€éœ€è¦çš„å˜é‡ä»¥åŠå˜é‡å€¼å†…å®¹ç¬¦å·è¡¨ï¼Œæˆ‘ä»¬ç†ŸçŸ¥çš„$_SESSION,$_COOKIE,$GLOBAL,$_GET,$_POST ç­‰ç­‰è¶…å…¨å±€å˜é‡éƒ½ä¼šåœ¨è¿™ä¸ªé˜¶æ®µå®Œæˆåˆå§‹åŒ–çš„å·¥ä½œ </p><h3 id="3ã€æ‰§è¡ŒæŒ‡å®šçš„-PHP-è„šæœ¬ç¨‹åº"><a href="#3ã€æ‰§è¡ŒæŒ‡å®šçš„-PHP-è„šæœ¬ç¨‹åº" class="headerlink" title="3ã€æ‰§è¡ŒæŒ‡å®šçš„ PHP è„šæœ¬ç¨‹åº"></a>3ã€æ‰§è¡ŒæŒ‡å®šçš„ PHP è„šæœ¬ç¨‹åº</h3><p>PHP ç¨‹åºæ‰§è¡Œé˜¶æ®µæ‰€æœ‰çš„æ¡†æ¶éƒ½æ˜¯åœ¨è¿™é‡Œå¼€å§‹</p><h3 id="4ã€è¯·æ±‚å¤„ç†å®Œæˆé˜¶æ®µ"><a href="#4ã€è¯·æ±‚å¤„ç†å®Œæˆé˜¶æ®µ" class="headerlink" title="4ã€è¯·æ±‚å¤„ç†å®Œæˆé˜¶æ®µ"></a>4ã€è¯·æ±‚å¤„ç†å®Œæˆé˜¶æ®µ</h3><p>è¿™æ˜¯ç¬¬äºŒä¸ªé˜¶æ®µçš„é€†æ“ä½œï¼Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œå®Œæˆæ‰€æœ‰è¯·æ±‚ç›¸å…³å˜é‡å’Œç¬¦å·è¡¨çš„æ¸…ç†å·¥ä½œï¼Œå¦‚ unsetï¼ˆ$_POSTï¼‰,ç„¶åæŒ‰é¡ºåºè°ƒç”¨æ‰©å±•æ¨¡å—çš„ RSHUTDOWN æ–¹æ³•ï¼Œé€šçŸ¥æ‰©å±•åšå¥½å…³é—­å‰çš„å‡†å¤‡å·¥ä½œã€‚</p><h3 id="5ã€æ¨¡å—å…³é—­é˜¶æ®µ"><a href="#5ã€æ¨¡å—å…³é—­é˜¶æ®µ" class="headerlink" title="5ã€æ¨¡å—å…³é—­é˜¶æ®µ"></a>5ã€æ¨¡å—å…³é—­é˜¶æ®µ</h3><p>è¿™æ˜¯é˜¶æ®µï¼ˆ1ï¼‰çš„é€†æ“ä½œï¼Œ PHP è°ƒç”¨æ¯ä¸ªæ‰©å±•çš„ MSHUTDOWN æ–¹æ³•é‡Šæ”¾å†…å­˜  </p><h3 id="çœ‹å›¾è¯´è¯ï¼š"><a href="#çœ‹å›¾è¯´è¯ï¼š" class="headerlink" title="çœ‹å›¾è¯´è¯ï¼š"></a>çœ‹å›¾è¯´è¯ï¼š</h3><img src="http://ww1.sinaimg.cn/large/e73160eely1g5mqp7a9laj20wy0c1mxz.jpg"><blockquote><p>æ³¨æ„ï¼šä¸Šé¢çš„è¿™ä¸ªæµç¨‹5ä¸ªé˜¶æ®µä¸€ç›´éƒ½åœ¨æ‰§è¡Œï¼Œä»–æ˜¯å±äº CLI æ¨¡å¼ä¸‹ PHP çš„ç”Ÿå‘½å‘¨æœŸã€‚éšç€æœåŠ¡å™¨è½¯ä»¶çš„å´›èµ·ï¼Œæˆ‘ä»¬ç°ç›®å‰æ‰€ç”¨çš„æ¨¡å¼éƒ½æ˜¯ WEB æ¨¡å¼ï¼Œä¸” WEB æ¨¡å¼ä¸‹æ€§èƒ½é«˜äº CLI æ¨¡å¼ï¼Œè¯·é—®ä¸‹é¢çœ‹</p><p>WEB æ¨¡å¼ä¸‹ï¼Œé˜¶æ®µ 1 å’Œé˜¶æ®µ 5 åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä»¥åçš„æ¯æ¬¡è¯·æ±‚ä¼šé‡å¤ 2 åˆ° 4 çš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼Œå› æ­¤æ— éœ€æ¯æ¬¡éƒ½é‡å¤çš„åˆå§‹åŒ–æ‰©å±•æ¨¡å—ï¼Œè¿›è€ŒèŠ‚çœäº†ç³»ç»Ÿè¿è¡Œèµ„æºï¼Œå¸¦æ¥äº†æ•ˆç‡çš„æå‡ã€‚è‡³æ­¤ï¼Œå’±ä»¬å…ˆç»™ Laravel åšä¸€ä¸ªåˆç†çš„å®šä½ï¼Œ<strong>Laravel ç”Ÿå‘½å‘¨æœŸåªè¿è¡Œåœ¨ç¬¬ä¸‰ä¸ªé˜¶æ®µ</strong>ã€‚å…¶å®ä¸å…‰ Laravel æ¡†æ¶ï¼Œåªè¦æ˜¯ä½¿ç”¨ WEB æ¨¡å¼å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†çš„ï¼Œå…¶ä»–çš„ PHP å¼€å‘æ¡†æ¶çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯åœ¨ç¬¬ä¸‰ä¸ªé˜¶æ®µ</p></blockquote><h3 id="å•ä¸€å…¥å£ä¸å¤šå…¥å£"><a href="#å•ä¸€å…¥å£ä¸å¤šå…¥å£" class="headerlink" title="å•ä¸€å…¥å£ä¸å¤šå…¥å£"></a>å•ä¸€å…¥å£ä¸å¤šå…¥å£</h3><p>Laravel æ‰€æœ‰çš„è¯·æ±‚å…¥å£éƒ½æ˜¯ public/index.phpï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å•ä¸€å…¥å£ï¼Œè¯´åˆ°å•ä¸€å…¥å£é‚£å°±ä¹Ÿå¾—è¯´è¯´ä»–çš„ä¼˜åŠ¿ä¸åŠ£åŠ¿ã€‚æ—¢ç„¶è¦è¯´å•ä¸€å…¥å£ï¼Œé‚£ä¹ˆè‚¯å®šä¹Ÿå¾—äº†è§£ä¸€ä¸‹å¤šå…¥å£å’¯ã€‚</p><h3 id="å¤šå…¥å£"><a href="#å¤šå…¥å£" class="headerlink" title="å¤šå…¥å£"></a>å¤šå…¥å£</h3><p>é€šè¿‡è®¿é—®ä¸åŒçš„æ–‡ä»¶ï¼Œå®Œæˆç”¨æˆ·çš„æ“ä½œï¼Œæˆ‘ä»¬æœ€å¼€å§‹å­¦ä¹  PHP æ—¶å°±æ˜¯å¤šå…¥å£ã€‚</p><pre><code>login.php è®¿é—®çš„ç™»å½•é¡µé¢index.php è®¿é—®çš„æ˜¯é¦–é¡µgame.php  è®¿é—®çš„æ˜¯æ¸¸æˆé¡µé¢    </code></pre><h3 id="å•ä¸€å…¥å£"><a href="#å•ä¸€å…¥å£" class="headerlink" title="å•ä¸€å…¥å£"></a>å•ä¸€å…¥å£</h3><p>å•ä¸€å…¥å£å°±æ˜¯ç”¨ä¸€ä¸ªæ–‡ä»¶å¤„ç†æ‰€æœ‰ HTTP çš„è¯·æ±‚ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬éƒ½æ˜¯ index.php å®šä¹‰å•ä¸€å…¥å£çš„è®¿é—®çš„æ–‡ä»¶ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½å¾—èµ° index.php</p><p>ä¼˜åŠ¿ï¼šå•ä¸€å…¥å£ç›¸å½“äºæœ‰ä¸€ä¸ªå®ˆå«ï¼Œå¯¹äºå®‰å…¨æ£€æµ‹éå¸¸å¥½ï¼Œä¹Ÿå®¹æ˜“æ§åˆ¶æƒé™</p><p>åŠ£åŠ¿ï¼šç”±äºæ‰€æœ‰ HTTP è¯·æ±‚éƒ½æ˜¯é’ˆå¯¹ index.php è¿™æ · URL çœ‹èµ·æ¥ä¸ç¾è§‚ï¼Œè€Œä¸”å¯¹æœç´¢å¼•æ“ä¸å¤ªå‹å¥½</p><p>ä½†æ˜¯æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™ URL å’Œé‡‡ç”¨ PATHINFO è®¿é—®ï¼Œäº¦å¯è§£å†³åŠ£åŠ¿ä¸Šçš„é—®é¢˜</p><pre><code>public  --- index.php</code></pre><p>çœ‹å›¾ç†è§£</p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5mgz9b4c1j217m0e37ba.jpg"><h3 id="Laravel-çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Laravel-çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Laravel çš„ç”Ÿå‘½å‘¨æœŸ"></a>Laravel çš„ç”Ÿå‘½å‘¨æœŸ</h3><p>OKï¼Œç°åœ¨æˆ‘ä»¬è·Ÿéšä¸€ä¸ª â€œè¯·æ±‚â€ è¿›å…¥åˆ° Laravel å†…éƒ¨ï¼Œçœ‹çœ‹åœ¨ Laravel æ¡†æ¶å†…éƒ¨ï¼Œå®ƒå°†ç»å†ä»€ä¹ˆæ ·çš„ç£¨éš¾ï¼Œèƒ½å¦å–å¾—â€œå¤§ä¹˜ä½›æ³•ä¸‰è—çœŸç»â€ã€‚è¿™ä¸ªè¯·æ±‚é¦–å…ˆä¼šè¿›å…¥ <strong>public\index.php</strong> å…¥å£æ–‡ä»¶ï¼Œæ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚éƒ½ä¼šä»è¿™é‡Œè¿›å…¥ï¼Œå°±åƒå¤§å®¶å­¦ä¹ ç¼–ç¨‹è¯­è¨€æ—¶æ¥è§¦çš„ <strong>main()</strong>  å‡½æ•°ä¸€æ ·ã€‚ </p><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5nkvqhgnxj20xg0ec3yt.jpg" alt></p><pre><code> 1.ä½¿ç”¨ Composer çš„è‡ªåŠ¨åŠ è½½åŠŸèƒ½ï¼ŒæŠŠæ‰€æœ‰éœ€è¦ä½¿ç”¨çš„ PHP æ–‡ä»¶æ·»åŠ åˆ°ç³»ç»Ÿä¸­ä»¥å¤‡è°ƒç”¨  require __DIR__.&#39;/../vendor/autoload.php&#39;;  2.åˆ›å»º Laravel å•ä¾‹åº”ç”¨å®ä¾‹  $app = require_once __DIR__.&#39;/../bootstrap/app.php&#39;; 3.æœ€å…³é”®çš„æ­¥éª¤ï¼Œæ¥å—è¯·æ±‚ï¼Œå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œè¿”å›è¯·æ±‚å¤„ç†çš„ç»“æœ  $kernel = $app-&gt;make(Illuminate\Contracts\Http\Kernel::class);  $response = $kernel-&gt;handle(      $request = Illuminate\Http\Request::capture()  );  $response-&gt;send(); 4.è¯·æ±‚ç»“æŸï¼Œè¿›è¡Œå›è°ƒ  $kernel-&gt;terminate($request, $response);</code></pre><p>äººå‘ï¼Œå°±æ˜¯å¾ˆå¥‡æ€ªï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ Laravel æºä»£ç è•´å«çš„å·¨å¤§ä»·å€¼ï¼Œä½†æ˜¯å¾ˆå¤šä½¿ç”¨<br>Laravel æˆ–è€… PHP ä½œä¸ºåƒé¥­å·¥å…·çš„ç å†œä»¬ä»¥åŠå­¦ä¹ è€…ï¼Œå¾ˆå°‘æœ‰äººçœŸæ­£çš„å»ç ”ç©¶ä¸€ä¸‹ Laravel æºç ï¼Œè¯´åˆ°åŸå› å‘¢ï¼Œæ— éå°±æ˜¯ â€œæ‡’â€ å’Œ<br>â€œææƒ§â€ï¼Œçœ‹ä¼¼â€œæ‡’â€æ˜¯ä¸»è¦åŸå› ï¼Œä»”ç»†æƒ³æƒ³çš„è¯ï¼Œä¼¼ä¹ä¸æ˜¯é‚£ä¹ˆå›äº‹å„¿ï¼Œ â€œææƒ§â€ æ‰æ˜¯ï¼Œäººå¦‚æœæ— æ³•å…‹æœè‡ªå·±çš„å¿ƒé‡Œéšœç¢ï¼Œå°±å¾ˆéš¾è¡ŒåŠ¨èµ·æ¥ï¼Œè€Œ â€œæ‡’â€<br>é€šå¸¸åªä¼šå¯¼è‡´æ‹–å»¶è€Œå·²ï¼Œä¸€ä»¶äº‹æƒ…å¦‚æœä½ æ‹–äº†å¤ªä¹…ï¼Œå°±ä¸å†åªæ˜¯ç®€å•çš„ â€œæ‡’â€ çš„é—®é¢˜äº†ã€‚â€œèˆ’é€‚åŒºâ€<br>å¾ˆèˆ’æœï¼Œä½†æ˜¯èˆ’é€‚åŒºé¢ç§¯ä¼šéšç€æ—¶é—´åŠ é€Ÿç¼©å°ï¼Œæˆ‘ä»¬åˆèƒ½èˆ’æœå¤šä¹…ã€‚å¥½äº†ï¼Œä¸åºŸè¯äº†ï¼Œå’±ä»¬å¼€å§‹çœ‹çœ‹ä»£ç å§ï¼ŒçœŸçš„æ²¡å¤šå°‘ï¼Œä¹Ÿæ²¡å¿…è¦äº†è§£å¾—å¤ªå…·ä½“ï¼Œå¤ªå…«è‚¡äº†ä¹Ÿä¸å¥½ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5nl0e44vnj21000hjmy4.jpg" alt></p><p>ç”¨æˆ·çš„ç½‘ç»œè¯·æ±‚å°±æ˜¯ä¼ é€’ç»™ Laravel åº”ç”¨åˆ›å»ºçš„ <strong>HTTP å†…æ ¸</strong> è¿›è¡Œç½‘ç»œè¯·æ±‚å¤„ç†ï¼Œå¹¶æŠŠå¤„ç†åçš„ç½‘ç»œå“åº”ç»“æœè¿”å›ç»™ç”¨æˆ·çš„ã€‚ç½‘ç»œè¯·æ±‚å°±æ˜¯åœ¨ç¬¬ä¸‰æ­¥è¢« <strong>HTTP $Kernal</strong> å¯¹è±¡çš„ handle å‡½æ•°æ¥æ”¶å¹¶å®Œæˆå¤„ç†çš„ï¼Œhandleå‡½æ•°æ¥æ”¶çš„å‚æ•°å°±æ˜¯ç”¨æˆ·ä¼ é€’è¿‡æ¥çš„ç½‘ç»œè¯·æ±‚ ã€‚ç”±äºä¸Šè¿° $kernel-&gt;handle() æ˜¯å¦‚æ­¤çš„é‡è¦ï¼Œæˆ‘ä»¬çœŸçš„éœ€è¦å…ˆè·Ÿå®ƒæ‰“æ‰“æ‹›å‘¼äº¤ä¸ªæœ‹å‹æ‰è¡Œï¼Œé‚£å’±ä»¬å°±å…ˆèµ°ä¸ªå›å¤´è·¯ï¼Œçœ‹ä¸€çœ‹<br>ç½‘ç»œè¯·æ±‚ ä¼ é€’ç»™ Laravel HTTP Kernel ä¹‹å‰ï¼ŒLaravel<br>éƒ½åšäº†ä»€ä¹ˆï¼Œè™½ç„¶è¿™éƒ¨åˆ†å†…å®¹ä¸æ˜¯ç½‘ç»œè¯·æ±‚ç”Ÿå‘½å‘¨æœŸèµ°çš„æµç¨‹ï¼Œä½†æ˜¯å´æ˜¯ Laravel ç”Ÿå‘½è¯ç”Ÿçš„åœ°æ–¹ï¼Œå’±ä»¬è¿™æ¬¡çš„ä¸“é¢˜æ˜¯ Laravel<br>çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†å†…å®¹è¿˜æ˜¯è¦æä¸€æçš„ï¼Œåˆ°äº†è¿™é‡Œå¾ˆå¤šæœ‹å‹åº”è¯¥å¯ä»¥å¼€å§‹è§£å¼€ç–‘æƒ‘äº†ï¼Œæ˜¯çš„ï¼Œæˆ‘ä»¬è¿™ä¸ªä¸“é¢˜å…¶å®æ¶‰åŠåˆ°äº†ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œä¸€ä¸ªæ˜¯ <strong>ç½‘ç»œè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œä¸€ä¸ªå°±æ˜¯ <strong>Laravel ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚ç”±äºè¿™ä¸¤å£å­æ°´ä¹³äº¤èï¼Œå¤«å”±å¦‡éšï¼Œå¤§éƒ¨åˆ†æ—¶é—´ä»–ä»¬éƒ½æŠ±åœ¨ä¸€å—å„¿ç¾ç¾ï¼Œå¯¼è‡´å¾ˆå¤šäººæŠŠå®ƒå½“ä½œä¸€ä¸ªä¸œè¥¿äº†ï¼Œè€Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šäººä¼šè§‰å¾—ç½‘ä¸Šçš„æ•™ç¨‹æœ‰äº›åœ°æ–¹æ€»è§‰å¾—ä¸å¯¹åŠ²çš„åŸå› ã€‚ä»ä¸Šå›¾ä¸­ï¼Œå’±ä»¬å·²ç»å¯ä»¥çœ‹å‡ºæ¥ï¼Œç½‘ç»œå“åº”ï¼ˆResponseï¼‰å·²ç»åœ¨ç¬¬ä¸‰æ­¥å°±å·²ç»è¿”å›ç»™ç”¨æˆ·äº†ã€‚ç½‘ç»œå“åº”<br>è¿”å›åï¼ŒLaravel çš„ç”Ÿå‘½å‘¨æœŸå¹¶æœªç»“æŸï¼Œå®ƒè¿˜æœ‰ä¸€äº›å–„åå·¥ä½œéœ€è¦å¤„ç†ï¼Œä¹Ÿå°±æ˜¯ç¬¬å››æ­¥ <strong>â€œè¯·æ±‚ç»“æŸï¼Œè¿›è¡Œå›è°ƒâ€</strong> ï¼Œæ‰§è¡Œå®Œäº†è¿™ä¸€æ­¥ä¹‹åï¼ŒLaravel æ‰ç®—æ˜¯åˆ°äº†ä¸€ä¸ªç»ˆç»“ç‚¹ã€‚å†è´´ä¸€æ¬¡ä»£ç å§ï¼Œä¸å°‘æŠ€æœ¯äººå‘˜çœ‹ä¸è§ä»£ç å°±éš¾å—ï¼š</p><pre><code> 3. æœ€å…³é”®çš„æ­¥éª¤ï¼Œæ¥å—è¯·æ±‚ï¼Œå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œè¿”å›è¯·æ±‚å¤„ç†çš„ç»“æœ    $kernel = $app-&gt;make(Illuminate\Contracts\Http\Kernel::class);  $response = $kernel-&gt;handle(      $request = Illuminate\Http\Request::capture()  );  $response-&gt;send(); 4. è¯·æ±‚ç»“æŸï¼Œè¿›è¡Œå›è°ƒ  $kernel-&gt;terminate($request, $response);</code></pre><p>æœ¬æ¥å†™è¿™ç¯‡æ–‡ç« æ˜¯æƒ³ç€è¦ä¸å°±ä¸åŒºåˆ†å®ƒä»¬äº†å§ï¼Œåƒç½‘ä¸Šå…¶ä»–æ•™ç¨‹é‚£æ ·å½“æˆä¸€ä¸ªä¸œè¥¿å†™å°±è¡Œäº†ï¼Œä½†æ˜¯æŒ‰ç…§è¿™ç§é€»è¾‘ä¼šè®©äººäº§ç”Ÿæ··ä¹±ï¼Œä¸åˆ©ç”¨å¤§å®¶çœŸæ­£ç†è§£<br>Laravel æˆ–è€…è¯´å…¶ä»–ç½‘ç»œå¼€å‘æ¡†æ¶ï¼Œæ‰€ä»¥è¿˜æ˜¯åšäº†ä¸€ä¸ªåŒºåˆ†ï¼Œå…ˆæŠŠç½‘ç»œè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸäº¤ä»£æ¸…æ¥šäº†ï¼Œå’±ä»¬å†å»è¯¦ç»†åˆ†æ Laravel<br>çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ€è·¯ä¸Šå°±ä¼šæ›´æ¸…æ™°æ˜äº†äº›ï¼Œæœ‰äº›ä¸œè¥¿å…«è‚¡ä¸€ä¸‹è¿˜æ˜¯æœ‰å¿…è¦çš„ã€‚æ¥ä¸‹æ¥ï¼Œå’±ä»¬å°±å¯ä»¥æš‚æ—¶æŠŠç½‘ç»œè¯·æ±‚æ”¾ä¸€è¾¹ï¼Œçœ‹ä¸€çœ‹ Laravel çš„åˆ›å»ºè¿‡ç¨‹ï¼š</p><p><strong>1.  åŠ è½½ Composer ç”Ÿæˆçš„ autoload.php è‡ªåŠ¨åŠ è½½æ–‡ä»¶</strong></p><p>å°±æ˜¯åŠ è½½åˆå§‹åŒ–ç¬¬ä¸‰æ–¹ä¾èµ–</p><p><strong>2.  åˆ›å»º Laravel åº”ç”¨å®¹å™¨å¯¹è±¡ $app ( Service Container )</strong> </p><pre><code> $app = new Illuminate\Foundation\Application( dirname(__DIR__) );  $app-&gt;singleton(      Illuminate\Contracts\Http\Kernel::class,      App\Http\Kernel::class  );  $app-&gt;singleton(      Illuminate\Contracts\Console\Kernel::class,      App\Console\Kernel::class  );  $app-&gt;singleton(      Illuminate\Contracts\Debug\ExceptionHandler::class,      App\Exceptions\Handler::class  );  return $app;</code></pre><p>åœ¨è¿™é‡ŒåŸºæœ¬ä¹Ÿæ²¡å•¥éš¾ä»¥ç†è§£çš„ä¸œè¥¿ï¼Œåˆ›å»ºäº† $app å®¹å™¨å¯¹è±¡ï¼Œç»‘å®šäº† HTTP<br>Kernal å’Œ Console Kernelï¼Œåˆ†åˆ«ç”¨æ¥å¤„ç† HTTP ç½‘ç»œè¯·æ±‚å’Œ CLI è¯·æ±‚ï¼ˆ æ‰§è¡Œ php artisan<br>ç›¸å…³å‘½ä»¤è¯·æ±‚ï¼‰ï¼Œè¿˜ç»‘å®šäº†ç”¨æ¥å¤„ç†åº”ç”¨è¿è¡Œå¼‚å¸¸çš„è°ƒè¯•å¤„ç†å™¨</p><pre><code># Laravel $app åˆ›å»ºæ—¶çš„æ„å»ºå‡½æ•°  public function __construct($basePath = null)  {      if ($basePath) {          $this-&gt;setBasePath($basePath);      }      $this-&gt;registerBaseBindings();      $this-&gt;registerBaseServiceProviders();      $this-&gt;registerCoreContainerAliases();  }</code></pre><p>ä¸Šé¢æ˜¯ <strong>$app</strong> å®ä¾‹åˆ›å»ºçš„å…·ä½“é€»è¾‘ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¹Ÿæ²¡å•¥éš¾ä»¥ç†è§£çš„å†…å®¹ï¼Œæ— éå°±æ˜¯è®¾å®šè·¯å¾„ï¼Œæ³¨å†ŒåŸºç¡€ç»‘å®šä¿¡æ¯ï¼Œæ³¨å†ŒåŸºç¡€<br>Service Provider å’Œ<br>Aliasesï¼Œè€Œåšè¿™äº›å·¥ä½œçš„æ„ä¹‰å°±æ˜¯å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„è®¿é—®å’Œè·å–é¡¹ç›®ç›®å½•ä¸­çš„æ–‡ä»¶ä¿¡æ¯ï¼ŒåŠ è½½é…ç½®æ–‡ä»¶ï¼ŒåŠ è½½è‡ªå®šä¹‰çš„ç±»ï¼ŒåŠ è½½Serviceï¼Œaliases<br>å®šä¹‰äº†å¦‚ä½•æŠŠå¼€å‘æ¡†æ¶ä¸­æœ€åŸºç¡€çš„æœåŠ¡æ³¨å†Œåˆ° <strong>Service Container</strong> ä¸­ï¼Œçœ‹äº†è¿™éƒ¨åˆ†ä»£ç ï¼Œå’±ä»¬å°±çŸ¥é“ä¸ºå•¥ <strong>app(â€˜filesâ€™)</strong> å’Œ <strong>app (â€˜Illuminate\Filesystem\Filesystemâ€™)</strong> è¿™ä¸¤ç§ä½¿ç”¨æ–¹æ³•éƒ½å¯ä»¥æ‹¿åˆ° FileSystem æœåŠ¡çš„åŸå› äº†</p><pre><code> public function registerCoreContainerAliases()  {      foreach ([          &#39;app&#39;                  =&gt; [\Illuminate\Foundation\Application::class, \Illuminate\Contracts\Container\Container::class, \Illuminate\Contracts\Foundation\Application::class,  \Psr\Container\ContainerInterface::class],          &#39;auth&#39;                 =&gt; [\Illuminate\Auth\AuthManager::class, \Illuminate\Contracts\Auth\Factory::class],          &#39;auth.driver&#39;          =&gt; [\Illuminate\Contracts\Auth\Guard::class],          &#39;blade.compiler&#39;       =&gt; [\Illuminate\View\Compilers\BladeCompiler::class],          &#39;cache&#39;                =&gt; [\Illuminate\Cache\CacheManager::class, \Illuminate\Contracts\Cache\Factory::class],          &#39;files&#39;                =&gt; [\Illuminate\Filesystem\Filesystem::class],          &#39;filesystem&#39;           =&gt; [\Illuminate\Filesystem\FilesystemManager::class, \Illuminate\Contracts\Filesystem\Factory::class],                                                                                                          .                                                                                   &#39;view&#39;                 =&gt; [\Illuminate\View\Factory::class, \Illuminate\Contracts\View\Factory::class],      ] as $key =&gt; $aliases) {          foreach ($aliases as $alias) {              $this-&gt;alias($key, $alias);          }      }  }</code></pre><p>å…¶å®å¾ˆå¤šäººä¹‹æ‰€ä»¥ä¸æ„¿æ„å»çœ‹ä»£ç ï¼Œæœ‰ä¸€ä¸ªä¸»è¦çš„åŸå› å°±æ˜¯æ²¡æœ‰ç†è§£<br>Serviceï¼ŒService Containerï¼ŒService Providerï¼ŒFacadesï¼ŒContracts<br>è¿™äº›æ ¸å¿ƒæ¦‚å¿µä»¥åŠä»–ä»¬ä¹‹é—´çš„å…³è”ï¼Œå¦‚æœä½ å¯¹ Laravel æ ¸å¿ƒæ¦‚å¿µä¸æ¸…æ¥šï¼Œæˆ‘ä¹ŸçœŸçš„ä¸å»ºè®®ä½ çœ‹æºç ï¼Œä½ ä¼šæƒ³æŠŠç”µè„‘ç ¸æ‰çš„ ï½</p><p><strong>3.  åˆ›å»º Laravel HTTP Kernel æ ¸å¿ƒï¼Œæ¥æ”¶ç”¨æˆ·çš„ç½‘ç»œè¯·æ±‚ï¼Œå¤„ç†å¹¶è¿”å›å“åº”ç»“æœ</strong></p><p>å’±ä»¬ç»ˆäºåˆå›æ¥äº†ï¼Œå’±ä»¬å…ˆæ¥çœ‹çœ‹åˆ›å»º Kernel çš„æ—¶å€™éƒ½åšäº†å•¥ï¼ŒHTTP å†…æ ¸ç»§æ‰¿è‡ª Illuminate\Foundation\Http\Kernel ç±»ï¼Œè¿™ä¸ªç±»ä¸­æ‹¥æœ‰ä¸‰ä¸ªæ ¸å¿ƒæˆå‘˜å˜é‡</p><pre><code>  protected $app;  protected $router;  protected $bootstrappers = [      \Illuminate\Foundation\Bootstrap\LoadEnvironmentVariables::class,     # åŠ è½½ .env ä¸­çš„é…ç½®ä¿¡æ¯      \Illuminate\Foundation\Bootstrap\LoadConfiguration::class,                # åŠ è½½ config ç›®å½•ä¸­æ‰€æœ‰é…ç½®æ–‡ä»¶çš„é…ç½®ä¿¡æ¯      \Illuminate\Foundation\Bootstrap\HandleExceptions::class,                 # å¼‚å¸¸å¤„ç†      \Illuminate\Foundation\Bootstrap\RegisterFacades::class,                # æ³¨å†Œé—¨é¢      \Illuminate\Foundation\Bootstrap\RegisterProviders::class,               # æ³¨å†ŒService Providers      \Illuminate\Foundation\Bootstrap\BootProviders::class,                    # æ³¨å†Œå¯åŠ¨å™¨   ];</code></pre><p>è¿™ä¸‰ä¸ªæ ¸å¿ƒæˆå‘˜å˜é‡å°±æ˜¯å¼•å¯¼å’±ä»¬æ›´å¿«ç†æ¸… $app-&gt;kernel-&gt;handle(ç½‘ç»œè¯·æ±‚) çš„æœ€å¥½å¯¼æ¸¸ï¼š</p><p>$app å’±ä»¬å·²ç»è¯´äº†è¶³å¤Ÿå¤šï¼Œå°±æ˜¯åº”ç”¨å®¹å™¨ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„å·¥ä½œéƒ½åœ¨è¿™ä¸ªå®¹å™¨ä¸­è¿›è¡Œã€‚</p><p>$router è·¯ç”±å¯¹è±¡ï¼Œå®ƒæä¾›è·¯ç”±ç›¸å…³çš„æœåŠ¡ï¼Œå¸®åŠ©æˆ‘ä»¬æŠŠç½‘ç»œè¯·æ±‚åˆ†é…ç»™å¯¹åº”çš„è·¯ç”±è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œç„¶åæŠŠå¤„ç†çš„ç»“æœï¼ˆç½‘ç»œå“åº”ï¼‰è¿”å›ç»™æˆ‘ä»¬ï¼Œæˆ‘ä»¬åœ¨ web.php ä¸­å®šä¹‰çš„è·¯ç”±å°±æ˜¯ç”±å®ƒæ¥ç®¡ç†çš„ã€‚</p><p>$bootstrappers æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ä¸­çš„ä»»åŠ¡é¡¹åœ¨ç½‘ç»œè¯·æ±‚è¢«å¤„ç†å‰è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <strong>ç¯å¢ƒæ£€æŸ¥ï¼Œé…ç½®åŠ è½½ï¼Œå¼‚å¸¸å¤„ç†ï¼ŒFacedes é—¨é¢æ³¨å†Œï¼ŒServiceProvider æ³¨å†Œ</strong>  ç­‰ç­‰ä»»åŠ¡éƒ½éœ€è¦åœ¨ç½‘ç»œè¯·æ±‚è¢«å¤„ç†å‰è¢«é¦–å…ˆæ‰§è¡Œï¼Œè€Œä¸”è¿™äº›ä»»åŠ¡æ˜¯æœ‰å‰åé¡ºåºçš„ï¼Œæ’åœ¨å‰é¢çš„ä¼šé¦–å…ˆæ‰§è¡Œï¼Œè¿™ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå› ä¸ºä¸ç®¡æ˜¯ Facades è¿˜æ˜¯  Service Providers éƒ½æ˜¯å®šä¹‰åœ¨ config ç›®å½•ä¸­çš„ app.php  æ–‡ä»¶ä¸­çš„ï¼Œåªæœ‰åŠ è½½æ¥é…ç½®ä¹‹åæ‰èƒ½æ³¨å†Œé—¨é¢å’ŒService Providersã€‚</p><p>ç„¶åå’±ä»¬å†æ¥çœ‹çœ‹ $app-&gt;kernel çš„æ„é€ å‡½æ•°ï¼Œåœ¨è¿™é‡Œå’±ä»¬çœ‹åˆ°äº†ä¸€ä¸ªè„¸ç†Ÿçš„ä¸èƒ½å†ç†Ÿçš„è€æœ‹å‹ â€” Middleware ï¼Œåœ¨ Kernel ä»¥åŠå®ƒçš„åŸºç±» Illuminate\Foundation\Http\Kernel ä¸­å®šä¹‰äº†ä¸€ç³»åˆ—çš„ middlewares ï¼Œå€ŸåŠ©è¿™äº›ä¸­é—´ä»¶ï¼Œå°±å¯ä»¥å®Œæˆå¯¹ç”¨æˆ·è¯·æ±‚çš„è¿‡æ»¤å’Œå®‰å…¨æ£€æŸ¥ç­‰ç­‰åŠŸèƒ½ã€‚</p><pre><code>  public function __construct(Application $app, Router $router)  {      $this-&gt;app = $app;      $this-&gt;router = $router;      $router-&gt;middlewarePriority = $this-&gt;middlewarePriority;      foreach ($this-&gt;middlewareGroups as $key =&gt; $middleware) {          $router-&gt;middlewareGroup($key, $middleware);      }    foreach ($this-&gt;routeMiddleware as $key =&gt; $middleware) {          $router-&gt;aliasMiddleware($key, $middleware);      }  }</code></pre><p>è‡³æ­¤å’±ä»¬è¿˜æ˜¯ç»ˆäºå¯ä»¥ç»•å›æ¥è¿›å…¥  $app-&gt;kernel-&gt;handle($request) çœ‹ä¸€çœ‹å®ƒæ˜¯å¦‚ä½•å¤„ç†ç½‘ç»œè¯·æ±‚çš„å§ï¼Œä¸‹é¢è¿™å¼ å›¾ç»“åˆç¬¬ä¸€å¼ å›¾ä¼šæ›´æ¸…æ¥šä¸€äº›ï¼Œæ¥ä¸‹æ¥çš„å†…å®¹å®åœ¨ä¸æƒ³è´´ä»£ç äº†ï¼š</p><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5nlwm23qsj20yh0n60u6.jpg" alt></p><p><strong>4.  ç»“æŸè¯·æ±‚ï¼Œè¿›è¡Œå›è°ƒï¼Œç»ˆæ­¢ Laravel åº”ç”¨ï¼ŒLaravel åˆ°æ­¤ä¹Ÿå®Œæˆäº†å®ƒçš„å†å²ä½¿å‘½ã€‚ä¸­é—´ä»¶ä¸­æœ‰ä¸€ç±»çš„ä¸­é—´ä»¶ï¼Œterminable middleware çš„å¤„ç†é€»è¾‘å°±æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µæ‰§è¡Œçš„ã€‚</strong></p><p>æ–‡ç« å†™åˆ°è¿™é‡ŒåŸºæœ¬ä¸Šå°±ç»“æŸäº†ï¼Œå¤ªå¤šç»†èŠ‚æˆ‘ä»¬å¹¶æ²¡æœ‰æ¶‰åŠï¼Œè¦é è¯¸å›äº²åŠ›äº²ä¸ºäº†ï¼Œæˆ‘å‘¢ï¼Œè¿˜æ˜¯é‚£äº›è¯ï¼Œä¸è¦åœ¨ä¸€å¼€å§‹çš„é˜¶æ®µå°±å»å­¦ä¹ <br>laravel çš„ç”Ÿå‘½å‘¨æœŸï¼Œç­‰ä½ ç”¨ laravel<br>å·¥ä½œäº†ä¸€æ®µæ—¶é—´ï¼Œå¯¹å®ƒçš„ä½¿ç”¨æ–¹æ³•å’Œæ ¸å¿ƒæ¦‚å¿µéƒ½æ¸…æ¥šäº†ä¹‹åå†æ¥å­¦ä¹ ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä»¶å¾ˆå®¹æ˜“çš„äº‹äº†ã€‚æœ€åé™„ä¸Šä¸€å¼ å¤§å›¾ï¼Œæ¢³ç†ä¸€ä¸‹æ•´ä¸ªæµç¨‹ï¼Œä¹Ÿä½œä¸ºæ–‡ç« çš„ç»“æŸå§ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/e73160eely1g5nlxvljmaj21e00zc1kx.jpg" alt></p><blockquote><p>åŸæ–‡åœ°å€ï¼š</p><p><a href="http://www.coding10.com/book/laravel-lifecircle" target="_blank" rel="noopener">http://www.coding10.com/book/laravel-lifecircle</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Laravel </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Laravel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰¬å¸†å¯èˆª</title>
      <link href="/2019/08/01/%E5%A4%9A%E5%A4%9A%E5%85%B3%E7%85%A7/"/>
      <url>/2019/08/01/%E5%A4%9A%E5%A4%9A%E5%85%B3%E7%85%A7/</url>
      
        <content type="html"><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>åœ¨æ— æ„é—´æŸ¥è¯¢ä¸€ç¯‡èµ„æ–™çš„æ—¶å€™è¿›å…¥åˆ°äº†[éŸ¦é˜³]çš„åšå®¢ï¼Œç¬¬ä¸€çœ¼å°±è¢«ä»–åšå®¢çš„ UI ç•Œé¢å¸å¼•äº†ï¼Œè®©æˆ‘çœ‹èµ·æ¥è§‰å¾—å¾ˆèˆ’æœå¾ˆçˆ½ï¼ï¼ï¼å•Šâ€¦çˆ½ï¼ï¼ï¼æˆ‘æœ¬èº«ä¹Ÿæ˜¯æ¯”è¾ƒå–œæ¬¢å†™åšæ–‡ï¼Œä¸ï¼æˆ‘è¿˜æ²¡è¾¾ä¸åˆ°è‡ªæˆ‘å†™åšæ–‡çš„æ—¶å€™ï¼Œåº”è¯¥è¯´æˆ‘æœ¬èº«ä¹Ÿæ¯”è¾ƒå–œæ¬¢è®°å½•å­¦ä¹ ã€‚ä»¥å‰ç”¨è¿‡åšå®¢å›­ã€çœ‹äº‘ï¼Œä½†æ˜¯æ€»ä½“ä¸Šæ¥è¯´æ„Ÿè§‰éƒ½å±äº â€œé›†ä¸­â€ è™½ç„¶å¯ä»¥è‡ªæˆ‘ç¾åŒ–ï¼Œä½†æ˜¯éƒ½æ²¡æˆ‘ç¬¬ä¸€çœ¼çœ‹åˆ°[éŸ¦é˜³]åšå®¢çš„é‚£ç§å–œæ¬¢æ„Ÿè§‰ã€‚å–œæ¬¢å°±èµ°èµ·ï¼Œäº†è§£ä¸‹æ¥å‘ç°æ˜¯åŸºäº Github + Hexo ã€‚è€—æ—¶ 2 å¤©ï¼Œç»ˆäºæ­å»ºå¥½ä¸ªæ€§åŒ–å®Œæˆäº†ï¼Œä¸å®¹æ˜“å•Šï¼</p><p>åœ¨[éŸ¦é˜³]çš„åšå®¢é¦–é¡µæ¨èæ–‡ç« å½“ä¸­å°±æœ‰åšå®¢æ­å»ºçš„è¯¦ç»†æ•™ç¨‹ã€‚</p><blockquote><p><a href="https://godweiyang.com/2018/04/13/hexo-blog/" target="_blank" rel="noopener">https://godweiyang.com/2018/04/13/hexo-blog/</a></p></blockquote><p>æ‰¬å¸†ã€å¯èˆª</p><p><img src="https://cdn.jsdelivr.net/gh/daixianjin/MyImages/RWBTwtkD2MjPavh.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> å¯èˆª </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¯èˆª </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
